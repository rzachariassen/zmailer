%!PS-Adobe-3.0
%%Creator: groff version 1.15
%%CreationDate: Thu Mar 23 20:30:53 2000
%%DocumentNeededResources: font Times-Roman
%%+ font Times-Bold
%%+ font Times-Italic
%%DocumentSuppliedResources: procset grops 1.15 0
%%Pages: 3
%%PageOrder: Ascend
%%Orientation: Portrait
%%EndComments
%%BeginProlog
%%BeginResource: procset grops 1.15 0
/setpacking where{
pop
currentpacking
true setpacking
}if
/grops 120 dict dup begin
/SC 32 def
/A/show load def
/B{0 SC 3 -1 roll widthshow}bind def
/C{0 exch ashow}bind def
/D{0 exch 0 SC 5 2 roll awidthshow}bind def
/E{0 rmoveto show}bind def
/F{0 rmoveto 0 SC 3 -1 roll widthshow}bind def
/G{0 rmoveto 0 exch ashow}bind def
/H{0 rmoveto 0 exch 0 SC 5 2 roll awidthshow}bind def
/I{0 exch rmoveto show}bind def
/J{0 exch rmoveto 0 SC 3 -1 roll widthshow}bind def
/K{0 exch rmoveto 0 exch ashow}bind def
/L{0 exch rmoveto 0 exch 0 SC 5 2 roll awidthshow}bind def
/M{rmoveto show}bind def
/N{rmoveto 0 SC 3 -1 roll widthshow}bind def
/O{rmoveto 0 exch ashow}bind def
/P{rmoveto 0 exch 0 SC 5 2 roll awidthshow}bind def
/Q{moveto show}bind def
/R{moveto 0 SC 3 -1 roll widthshow}bind def
/S{moveto 0 exch ashow}bind def
/T{moveto 0 exch 0 SC 5 2 roll awidthshow}bind def
/SF{
findfont exch
[exch dup 0 exch 0 exch neg 0 0]makefont
dup setfont
[exch/setfont cvx]cvx bind def
}bind def
/MF{
findfont
[5 2 roll
0 3 1 roll
neg 0 0]makefont
dup setfont
[exch/setfont cvx]cvx bind def
}bind def
/level0 0 def
/RES 0 def
/PL 0 def
/LS 0 def
/MANUAL{
statusdict begin/manualfeed true store end
}bind def
/PLG{
gsave newpath clippath pathbbox grestore
exch pop add exch pop
}bind def
/BP{
/level0 save def
1 setlinecap
1 setlinejoin
72 RES div dup scale
LS{
90 rotate
}{
0 PL translate
}ifelse
1 -1 scale
}bind def
/EP{
level0 restore
showpage
}bind def
/DA{
newpath arcn stroke
}bind def
/SN{
transform
.25 sub exch .25 sub exch
round .25 add exch round .25 add exch
itransform
}bind def
/DL{
SN
moveto
SN
lineto stroke
}bind def
/DC{
newpath 0 360 arc closepath
}bind def
/TM matrix def
/DE{
TM currentmatrix pop
translate scale newpath 0 0 .5 0 360 arc closepath
TM setmatrix
}bind def
/RC/rcurveto load def
/RL/rlineto load def
/ST/stroke load def
/MT/moveto load def
/CL/closepath load def
/FL{
currentgray exch setgray fill setgray
}bind def
/BL/fill load def
/LW/setlinewidth load def
/RE{
findfont
dup maxlength 1 index/FontName known not{1 add}if dict begin
{
1 index/FID ne{def}{pop pop}ifelse
}forall
/Encoding exch def
dup/FontName exch def
currentdict end definefont pop
}bind def
/DEFS 0 def
/EBEGIN{
moveto
DEFS begin
}bind def
/EEND/end load def
/CNT 0 def
/level1 0 def
/PBEGIN{
/level1 save def
translate
div 3 1 roll div exch scale
neg exch neg exch translate
0 setgray
0 setlinecap
1 setlinewidth
0 setlinejoin
10 setmiterlimit
[]0 setdash
/setstrokeadjust where{
pop
false setstrokeadjust
}if
/setoverprint where{
pop
false setoverprint
}if
newpath
/CNT countdictstack def
userdict begin
/showpage{}def
}bind def
/PEND{
clear
countdictstack CNT sub{end}repeat
level1 restore
}bind def
end def
/setpacking where{
pop
setpacking
}if
%%EndResource
%%IncludeResource: font Times-Roman
%%IncludeResource: font Times-Bold
%%IncludeResource: font Times-Italic
grops begin/DEFS 1 dict def DEFS begin/u{.001 mul}bind def end/RES 72
def/PL 792 def/LS false def/ENC0[/asciicircum/asciitilde/Scaron/Zcaron
/scaron/zcaron/Ydieresis/trademark/quotesingle/.notdef/.notdef/.notdef
/.notdef/.notdef/.notdef/.notdef/.notdef/.notdef/.notdef/.notdef/.notdef
/.notdef/.notdef/.notdef/.notdef/.notdef/.notdef/.notdef/.notdef/.notdef
/.notdef/.notdef/space/exclam/quotedbl/numbersign/dollar/percent
/ampersand/quoteright/parenleft/parenright/asterisk/plus/comma/hyphen
/period/slash/zero/one/two/three/four/five/six/seven/eight/nine/colon
/semicolon/less/equal/greater/question/at/A/B/C/D/E/F/G/H/I/J/K/L/M/N/O
/P/Q/R/S/T/U/V/W/X/Y/Z/bracketleft/backslash/bracketright/circumflex
/underscore/quoteleft/a/b/c/d/e/f/g/h/i/j/k/l/m/n/o/p/q/r/s/t/u/v/w/x/y
/z/braceleft/bar/braceright/tilde/.notdef/quotesinglbase/guillemotleft
/guillemotright/bullet/florin/fraction/perthousand/dagger/daggerdbl
/endash/emdash/ff/fi/fl/ffi/ffl/dotlessi/dotlessj/grave/hungarumlaut
/dotaccent/breve/caron/ring/ogonek/quotedblleft/quotedblright/oe/lslash
/quotedblbase/OE/Lslash/.notdef/exclamdown/cent/sterling/currency/yen
/brokenbar/section/dieresis/copyright/ordfeminine/guilsinglleft
/logicalnot/minus/registered/macron/degree/plusminus/twosuperior
/threesuperior/acute/mu/paragraph/periodcentered/cedilla/onesuperior
/ordmasculine/guilsinglright/onequarter/onehalf/threequarters
/questiondown/Agrave/Aacute/Acircumflex/Atilde/Adieresis/Aring/AE
/Ccedilla/Egrave/Eacute/Ecircumflex/Edieresis/Igrave/Iacute/Icircumflex
/Idieresis/Eth/Ntilde/Ograve/Oacute/Ocircumflex/Otilde/Odieresis
/multiply/Oslash/Ugrave/Uacute/Ucircumflex/Udieresis/Yacute/Thorn
/germandbls/agrave/aacute/acircumflex/atilde/adieresis/aring/ae/ccedilla
/egrave/eacute/ecircumflex/edieresis/igrave/iacute/icircumflex/idieresis
/eth/ntilde/ograve/oacute/ocircumflex/otilde/odieresis/divide/oslash
/ugrave/uacute/ucircumflex/udieresis/yacute/thorn/ydieresis]def
/Times-Italic@0 ENC0/Times-Italic RE/Times-Bold@0 ENC0/Times-Bold RE
/Times-Roman@0 ENC0/Times-Roman RE
%%EndProlog
%%Page: 1 1
%%BeginPageSetup
BP
%%EndPageSetup
/F0 10/Times-Roman@0 SF 353.3(ZMAILER\(3\) ZMAILER\(3\))72 48 R/F1 9
/Times-Bold@0 SF -.18(NA)72 84 S(ME).18 E F0 .638
(mail_open, mail_priority)108 96 R 3.138(,m)-.65 G .637(ail_abort, mail\
_close, mail_close_alternate, mail_alloc, mail_free, mail_host \255)
-3.138 F(zmailer message submission interf)108 108 Q(ace)-.1 E F1
(SYNOPSIS)72 124.8 Q/F2 10/Times-Bold@0 SF(#include <stdio.h>)108 136.8
Q(#include <zmailer)108 148.8 Q(.h>)-1 E(FILE *mail_open\(char *\))108
172.8 Q(int mail_priority;)108 196.8 Q(int mail_abort\(FILE *\))108
220.8 Q(int mail_close\(FILE *\))108 244.8 Q(int mail_close_alter)108
268.8 Q(nate\(FILE *mfp, char *wher)-.15 E(e, char *suf\214x\))-.18 E
(char *mail_alloc\(unsigned int\))108 292.8 Q(int mail_fr)108 316.8 Q
(ee\(char *\))-.18 E(char *mail_host\(\))108 340.8 Q F0(Linkage time:)
108 364.8 Q F2(-lzmailer)2.5 E F1(DESCRIPTION)72 381.6 Q F0 .48
(These routines may be used by an)108 393.6 R 2.98(yp)-.15 G .48
(rogram wishing to submit mail.)-2.98 F/F3 10/Times-Italic@0 SF
(mail_open)5.48 E F0 .48(will return a)2.98 F F2 .48(FILE *)2.98 F F0
.48(to a)2.98 F .725
(message \214le that should be written to by the application.)108 405.6
R .724(This message \214le contains three parts: the mes-)5.725 F .646
(sage en)108 417.6 R -.15(ve)-.4 G .646(lope, the message header).15 F
3.146(,a)-.4 G .646(nd the message body)-3.146 F 5.646(.T)-.65 G .646
(he e)-5.646 F .646(xact format of these components depend)-.15 F .111
(on the message protocol, which must be speci\214ed as the parameter to)
108 429.6 R F3(mail_open)2.611 E F0 5.111(.T).24 G .111
(he choices are predeter)-5.111 F(-)-.2 E
(mined by the capabilities of the mailer)108 441.6 Q 2.5(,a)-.4 G
(nd are de\214ned in the header \214le.)-2.5 E(The kno)5 E
(wn possibilities are:)-.25 E(MSG_RFC822)108 458.4 Q .573
(this is the only format supported by def)144 470.4 R .574
(ault by the mailer)-.1 F 5.574(.T)-.55 G .574
(he message headers and body in this)-5.574 F .656
(format are de\214ned by the D)144 482.4 R(ARP)-.4 E 3.156(AR)-.92 G
.656(equest F)-3.156 F .656(or Comments 822 and 1123.)-.15 F .655
(The message en)5.655 F -.15(ve)-.4 G(lope).15 E .305
(syntax is similar to the message header syntax, b)144 494.4 R .305
(ut for complete details refer to the ZMailer docu-)-.2 F(mentation.)144
506.4 Q(MSG_F)108 523.2 Q(AX)-.74 E(intended for f)144 535.2 Q
(ax transmissions.)-.1 E(MSG_UUCP)108 552 Q
(intended for old style UUCP format message headers)144 564 Q(MSG_X400)
108 580.8 Q(intended for X.400\(88\) messages.)144 592.8 Q(The)108 609.6
Q F3(mail_open)2.695 E F0 .194(routine will look for)2.695 F F2(FULLN)
2.694 E(AME)-.2 E F0(and)2.694 E F2(PRETTYLOGIN)2.694 E F0(en)2.694 E
.194(vironment v)-.4 F .194(ariables and trans-)-.25 F .797
(late them into message en)108 621.6 R -.15(ve)-.4 G .798(lope data for\
 use by the mailer if it generates a sender address header for the).15 F
(message.)108 633.6 Q .759(Note that the return v)108 650.4 R .759
(alue from the)-.25 F F3(mail_open)3.259 E F0 .759
(routine corresponds to the return v)3.259 F .759(alue of an)-.25 F F3
(fopen)3.258 E F0 .758(\(3\), and).24 F(similarly the return v)108 662.4
Q(alues from)-.25 E F3(mail_abort)2.5 E F0(and)2.5 E F3(mail_close)2.5 E
F0(correspond to the return v)2.5 E(alue of)-.25 E F3(fclose)2.5 E F0
(\(3\).).18 E(The)108 679.2 Q F3(mail_priority)3.398 E F0 -.25(va)3.398
G .898(riable has def).25 F .898(ault v)-.1 F .898
(alue of 0, and is used on scanning Zmailer con\214guration v)-.25 F
(ariable)-.25 E F2 -.3(RO)108 691.2 S(UTERDIRS).3 E F0 3.62(,w)C 1.119
(hich tells alternate router directories under the)-3.62 F F2(POST)3.619
E(OFFICE)-.18 E F0(directory)3.619 E 6.119(.A)-.65 G 3.619(tv)-6.119 G
1.119(alue 0,)-3.869 F F2 -.3(RO)108 703.2 S(UTERDIRS).3 E F0 -.25(va)
4.415 G 1.915(riable is not used.).25 F 1.915(At higher v)6.915 F 1.915
(alues, successi)-.25 F 2.215 -.15(ve d)-.25 H 1.915(irectory from "R)
.15 F 1.915(OUTERDIRS" is)-.4 F(tak)108 715.2 Q 2.5(en. See)-.1 F(belo)
2.5 E 2.5(wa)-.25 G(bout Z-En)-2.5 E(vironment.)-.4 E 2.5(5N)282.465 768
S .3 -.15(ov 1)-2.5 H 202.965(996 1).15 F EP
%%Page: 2 2
%%BeginPageSetup
BP
%%EndPageSetup
/F0 10/Times-Roman@0 SF 353.3(ZMAILER\(3\) ZMAILER\(3\))72 48 R(The)108
84 Q/F1 10/Times-Italic@0 SF(mail_close_alternate)2.893 E F0 .393(\(3\)\
 can be used to send currently open message \214le to some alternate de\
stination,).18 F(and is used at)108 96 Q F1(smtpserver)2.5 E F0
(\(8\) to send some quick-action requests directly to the).73 E F1(sc)
2.5 E(heduler)-.15 E F0(\(8\).).73 E(The)108 112.8 Q F1(mail_alloc)3.099
E F0(and)3.099 E F1(mail_fr)3.099 E(ee)-.37 E F0 .599
(routines are used to pro)3.099 F .6
(vide memory space for internal data structures.)-.15 F(The)5.6 E -.15
(ve)108 124.8 S .753
(rsions of these routines in the library simply call).15 F F1(malloc)
3.252 E F0 .752(\(3\) and).31 F F1(fr)3.252 E(ee)-.37 E F0 .752(\(3\) b)
.18 F .752(ut an application may o)-.2 F -.15(ve)-.15 G(rride).15 E
(them if desired.)108 136.8 Q .305(Similarly the)108 153.6 R F1
(mail_host)2.805 E F0 .305
(routine is intended to return a unique string for each host, by def)
2.805 F .306(ault the hostname,)-.1 F .3
(and this too is intended to be o)108 165.6 R -.15(ve)-.15 G .3
(rridden by an application that may already ha).15 F .6 -.15(ve t)-.2 H
.3(his information a).15 F -.25(va)-.2 G(ilable).25 E(in some form.)108
177.6 Q/F2 9/Times-Bold@0 SF(ENVELOPE HEADER LINES)72 206.4 Q F0 .409
(The message en)108 218.4 R -.15(ve)-.4 G .409
(lope headers are used to carry meta-information about the message.).15
F .41(The goal is to carry)5.41 F(transport-en)108 230.4 Q -.15(ve)-.4 G
(lope information separate from message \(RFC-822\) headers, and body)
.15 E(.)-.65 E(At \214rst the message starts with a set of en)108 242.4
Q -.15(ve)-.4 G(lope headers \(*-pre\214x denotes optional\):).15 E(*e)
180 254.4 Q(xternal \\n)-.15 E(*rcvdfrom %s@%s \(%s\) \\n)180 266.4 Q
(*bodytype %s \\n)180 278.4 Q(*with %s \\n)180 290.4 Q
(*identinfo %s \\n)180 302.4 Q(Either:)180 314.4 Q(from <%s> \\n)185
326.4 Q(Or:)180 338.4 Q(channel error \\n)185 350.4 Q(*en)180 362.4 Q
(vid %s \\n)-.4 E(*notaryret %s \\n)180 374.4 Q
(Then for each recipient pairs of:)108 386.4 Q(*todsn [NO)180 398.4 Q
(TIFY=...] [ORCPT=...] \\n)-.4 E(to <%s> \\n)180 410.4 Q
(Just before the data starts, a magic entry:)108 422.4 Q(en)180 434.4 Q
(v-end \\n)-.4 E(Then starts the message RFC-822 headers, and belo)108
446.4 Q 2.5(wi)-.25 G(t, the body)-2.5 E F2(EXAMPLE)72 463.2 Q F1
(... set up signal handler)180 475.2 Q 2.5(s.)-.1 G(..)-2.5 E/F3 10
/Times-Bold@0 SF(FILE)180 487.2 Q F0(*mfp = mail_open\()2.5 E F3
(MSG_RFC822)A F0(,0\);)A F3(if)180 499.2 Q F0(\(mfp !=)2.5 E F3(NULL)2.5
E F0 2.5(\){)C F1(... output the mail messa)216 511.2 Q .2 -.1(ge t)-.1
H 2.5(om).1 G(fp ...)-2.5 E F0(})180 523.2 Q F3(else)2.5 E F1(... err)
216 535.2 Q(or handling for not being able to open the \214le ...)-.45 E
F3(if)180 547.2 Q F0(\(some application processing went wrong)2.5 E F3
(||)252 559.2 Q F0(we took an interrupt\))2.5 E(\()216 571.2 Q F3 -.1
(vo)C(id).1 E F0 2.5(\)m)C(ail_abort\(mfp\);)-2.5 E F3(else if)180 583.2
Q F0(\(mail_close\(mfp\) ==)2.5 E F3(EOF)2.5 E F0(\))A F1(... err)216
595.2 Q(or handling if something went wr)-.45 E(ong ...)-.45 E F2(ENVIR)
72 612 Q(ONMENT V)-.27 E(ARIABLES)-1.215 E F0(FULLN)108 624 Q(AME)-.35 E
-.25(va)144 636 S(riable de\214nes te).25 E(xtual fullname, for e)-.15 E
(xample: "Sample User")-.15 E(PRETTYLOGIN)108 652.8 Q -.25(va)144 664.8
S .99(riable de\214nes).25 F F3(user@node)3.49 E F0 .99
(format of what user w)3.49 F .99(ants to claim as his/her o)-.1 F .99
(wn address \(it must)-.25 F(match those of mail router accepts.\))144
676.8 Q F2(Z-ENVIR)72 693.6 Q(ONMENT V)-.27 E(ARIABLES)-1.215 E F0(POST)
108 705.6 Q(OFFICE)-.18 E(de\214nes directory where all POST)144 717.6 Q
(OFFICE functions are under)-.18 E(.)-.55 E(Example:)144 729.6 Q F3
(POST)2.5 E(OFFICE=/v)-.18 E(ar/spool/postof\214ce)-.1 E F0 2.5(5N)
282.465 768 S .3 -.15(ov 1)-2.5 H 202.965(996 2).15 F EP
%%Page: 3 3
%%BeginPageSetup
BP
%%EndPageSetup
/F0 10/Times-Roman@0 SF 353.3(ZMAILER\(3\) ZMAILER\(3\))72 48 R -.4(RO)
108 84 S(UTERDIRS).4 E 1.449
(de\214nes a `:' separated list of alternate router directories.)144 96
R 1.45(If these are de\214ned at all, the)6.449 F(y)-.15 E/F1 10
/Times-Bold@0 SF(must)3.95 E F0 -.15(ex)144 108 S
(ist, if alternate queueing priority mechanism is desired to be used.)
.15 E(Example:)144 120 Q F1 -.3(RO)2.5 G(UTERDIRS=r).3 E(outer1:r)-.18 E
(outer2:r)-.18 E(outer3:r)-.18 E(outer4)-.18 E/F2 9/Times-Bold@0 SF
(FILES)72 136.8 Q/F3 10/Times-Italic@0 SF(/var/spool/postof)108 148.8 Q
(\214ce/public \(POST)-.18 E(OFFICE/public\))-.18 E(/var/spool/postof)
108 160.8 Q(\214ce/r)-.18 E(outer \(POST)-.45 E(OFFICE/r)-.18 E(outer\))
-.45 E(/var/spool/postof)108 172.8 Q(\214ce/{R)-.18 E(OUTERDIRS} \(POST)
-.4 E(OFFICE/{R)-.18 E(OUTERDIRS}\))-.4 E F2(SEE ALSO)72 189.6 Q F0
(zmailer\(1\), sendmail\(8\))108 201.6 Q(RFC822)108 213.6 Q F2 -.45(AU)
72 230.4 S(THOR).45 E F0(This program authored and cop)108 242.4 Q
(yright by:)-.1 E(Rayan Zachariassen <rayan@cs.toronto.edu>)108 254.4 Q
F1 -.3(RO)108 266.4 S(UTERDIRS).3 E F0
(mechanism is by Matti Aarnio <mea@nic.funet.\214>)2.5 E 2.5(5N)282.465
768 S .3 -.15(ov 1)-2.5 H 202.965(996 3).15 F EP
%%Trailer
end
%%EOF
