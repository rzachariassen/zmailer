%!PS-Adobe-3.0
%%Creator: groff version 1.10
%%CreationDate: Mon Aug  4 17:12:32 1997
%%DocumentNeededResources: font Times-Roman
%%+ font Times-Bold
%%+ font Times-Italic
%%DocumentSuppliedResources: procset grops 1.10 0
%%Pages: 9
%%PageOrder: Ascend
%%Orientation: Portrait
%%EndComments
%%BeginProlog
%%BeginResource: procset grops 1.10 0
/setpacking where{
pop
currentpacking
true setpacking
}if
/grops 120 dict dup begin
/SC 32 def
/A/show load def
/B{0 SC 3 -1 roll widthshow}bind def
/C{0 exch ashow}bind def
/D{0 exch 0 SC 5 2 roll awidthshow}bind def
/E{0 rmoveto show}bind def
/F{0 rmoveto 0 SC 3 -1 roll widthshow}bind def
/G{0 rmoveto 0 exch ashow}bind def
/H{0 rmoveto 0 exch 0 SC 5 2 roll awidthshow}bind def
/I{0 exch rmoveto show}bind def
/J{0 exch rmoveto 0 SC 3 -1 roll widthshow}bind def
/K{0 exch rmoveto 0 exch ashow}bind def
/L{0 exch rmoveto 0 exch 0 SC 5 2 roll awidthshow}bind def
/M{rmoveto show}bind def
/N{rmoveto 0 SC 3 -1 roll widthshow}bind def
/O{rmoveto 0 exch ashow}bind def
/P{rmoveto 0 exch 0 SC 5 2 roll awidthshow}bind def
/Q{moveto show}bind def
/R{moveto 0 SC 3 -1 roll widthshow}bind def
/S{moveto 0 exch ashow}bind def
/T{moveto 0 exch 0 SC 5 2 roll awidthshow}bind def
/SF{
findfont exch
[exch dup 0 exch 0 exch neg 0 0]makefont
dup setfont
[exch/setfont cvx]cvx bind def
}bind def
/MF{
findfont
[5 2 roll
0 3 1 roll
neg 0 0]makefont
dup setfont
[exch/setfont cvx]cvx bind def
}bind def
/level0 0 def
/RES 0 def
/PL 0 def
/LS 0 def
/MANUAL{
statusdict begin/manualfeed true store end
}bind def
/PLG{
gsave newpath clippath pathbbox grestore
exch pop add exch pop
}bind def
/BP{
/level0 save def
1 setlinecap
1 setlinejoin
72 RES div dup scale
LS{
90 rotate
}{
0 PL translate
}ifelse
1 -1 scale
}bind def
/EP{
level0 restore
showpage
}bind def
/DA{
newpath arcn stroke
}bind def
/SN{
transform
.25 sub exch .25 sub exch
round .25 add exch round .25 add exch
itransform
}bind def
/DL{
SN
moveto
SN
lineto stroke
}bind def
/DC{
newpath 0 360 arc closepath
}bind def
/TM matrix def
/DE{
TM currentmatrix pop
translate scale newpath 0 0 .5 0 360 arc closepath
TM setmatrix
}bind def
/RC/rcurveto load def
/RL/rlineto load def
/ST/stroke load def
/MT/moveto load def
/CL/closepath load def
/FL{
currentgray exch setgray fill setgray
}bind def
/BL/fill load def
/LW/setlinewidth load def
/RE{
findfont
dup maxlength 1 index/FontName known not{1 add}if dict begin
{
1 index/FID ne{def}{pop pop}ifelse
}forall
/Encoding exch def
dup/FontName exch def
currentdict end definefont pop
}bind def
/DEFS 0 def
/EBEGIN{
moveto
DEFS begin
}bind def
/EEND/end load def
/CNT 0 def
/level1 0 def
/PBEGIN{
/level1 save def
translate
div 3 1 roll div exch scale
neg exch neg exch translate
0 setgray
0 setlinecap
1 setlinewidth
0 setlinejoin
10 setmiterlimit
[]0 setdash
/setstrokeadjust where{
pop
false setstrokeadjust
}if
/setoverprint where{
pop
false setoverprint
}if
newpath
/CNT countdictstack def
userdict begin
/showpage{}def
}bind def
/PEND{
clear
countdictstack CNT sub{end}repeat
level1 restore
}bind def
end def
/setpacking where{
pop
setpacking
}if
%%EndResource
%%IncludeResource: font Times-Roman
%%IncludeResource: font Times-Bold
%%IncludeResource: font Times-Italic
grops begin/DEFS 1 dict def DEFS begin/u{.001 mul}bind def end/RES 72
def/PL 792 def/LS false def/ENC0[/asciicircum/asciitilde/Scaron/Zcaron
/scaron/zcaron/Ydieresis/trademark/quotesingle/.notdef/.notdef/.notdef
/.notdef/.notdef/.notdef/.notdef/.notdef/.notdef/.notdef/.notdef/.notdef
/.notdef/.notdef/.notdef/.notdef/.notdef/.notdef/.notdef/.notdef/.notdef
/.notdef/.notdef/space/exclam/quotedbl/numbersign/dollar/percent
/ampersand/quoteright/parenleft/parenright/asterisk/plus/comma/hyphen
/period/slash/zero/one/two/three/four/five/six/seven/eight/nine/colon
/semicolon/less/equal/greater/question/at/A/B/C/D/E/F/G/H/I/J/K/L/M/N/O
/P/Q/R/S/T/U/V/W/X/Y/Z/bracketleft/backslash/bracketright/circumflex
/underscore/quoteleft/a/b/c/d/e/f/g/h/i/j/k/l/m/n/o/p/q/r/s/t/u/v/w/x/y
/z/braceleft/bar/braceright/tilde/.notdef/quotesinglbase/guillemotleft
/guillemotright/bullet/florin/fraction/perthousand/dagger/daggerdbl
/endash/emdash/ff/fi/fl/ffi/ffl/dotlessi/dotlessj/grave/hungarumlaut
/dotaccent/breve/caron/ring/ogonek/quotedblleft/quotedblright/oe/lslash
/quotedblbase/OE/Lslash/.notdef/exclamdown/cent/sterling/currency/yen
/brokenbar/section/dieresis/copyright/ordfeminine/guilsinglleft
/logicalnot/minus/registered/macron/degree/plusminus/twosuperior
/threesuperior/acute/mu/paragraph/periodcentered/cedilla/onesuperior
/ordmasculine/guilsinglright/onequarter/onehalf/threequarters
/questiondown/Agrave/Aacute/Acircumflex/Atilde/Adieresis/Aring/AE
/Ccedilla/Egrave/Eacute/Ecircumflex/Edieresis/Igrave/Iacute/Icircumflex
/Idieresis/Eth/Ntilde/Ograve/Oacute/Ocircumflex/Otilde/Odieresis
/multiply/Oslash/Ugrave/Uacute/Ucircumflex/Udieresis/Yacute/Thorn
/germandbls/agrave/aacute/acircumflex/atilde/adieresis/aring/ae/ccedilla
/egrave/eacute/ecircumflex/edieresis/igrave/iacute/icircumflex/idieresis
/eth/ntilde/ograve/oacute/ocircumflex/otilde/odieresis/divide/oslash
/ugrave/uacute/ucircumflex/udieresis/yacute/thorn/ydieresis]def
/Times-Italic@0 ENC0/Times-Italic RE/Times-Bold@0 ENC0/Times-Bold RE
/Times-Roman@0 ENC0/Times-Roman RE
%%EndProlog
%%Page: 1 1
%%BeginPageSetup
BP
%%EndPageSetup
/F0 10/Times-Roman@0 SF 324.4(SCHEDULER\(8\) SCHEDULER\(8\))72 48 R/F1 9
/Times-Bold@0 SF -.18(NA)72 84 S(ME).18 E F0
(scheduler \255 zmailer transport queue scheduler daemon)108 96 Q F1
(SYNOPSIS)72 112.8 Q/F2 10/Times-Bold@0 SF(scheduler)108 124.8 Q F0([)
3.509 E F2(\255di)3.509 E(vFHQSVW)-.1 E F0 3.509(][)3.509 G F2<ad66>A/F3
10/Times-Italic@0 SF(con\214g\214le)3.509 E F0 3.509(][)3.509 G F2 1.009
(\255E newentsmax)B F0 3.509(][)3.509 G F2<ad4c>-.001 E F3(lo)3.508 E
(g\214le)-.1 E F0 3.508(][)3.508 G F2<ad6c>A F3(statisticslo)3.508 E(g)
-.1 E F0 3.508(][)3.508 G F2<ad4e>A F3(tr)108 136.8 Q(anspmaxfno)-.15 E
F0 2.5(][)2.5 G F2<ad50>A F3(postof)2.5 E(\214ce)-.18 E F0 2.5(][)2.5 G
F2<ad52>A F3(maxforkfr)2.5 E(eq)-.37 E F0 2.5(][)2.5 G F2<ad71>A F3 -.37
(re)2.5 G(ndezvous).37 E F0(])2.5 E F1(DESCRIPTION)72 153.6 Q F0(The)108
165.6 Q F3(sc)2.5 E(heduler)-.15 E F0(daemon manages the deli)2.5 E -.15
(ve)-.25 G(ry processing of messages in ZMailer).15 E(.)-.55 E(The)108
182.4 Q F3 -.45(ro)3.621 G(uter).45 E F0 1.121
(\(8\) creates message control \214les in the).73 F F3(POST)3.622 E
(OFFICE)-.18 E F2(/transport)A F0(directory)3.622 E 6.122(.T)-.65 G
1.122(hese refer to the)-6.122 F(original message \214les in the)108
194.4 Q F3(POST)2.5 E(OFFICE)-.18 E F2(/queue)A F0(directory)2.5 E(.)
-.65 E(The)108 211.2 Q F3(sc)2.54 E(heduler)-.15 E F0 .039
(reads each message control \214le from)2.54 F F3(POST)2.539 E(OFFICE)
-.18 E F2(/transport)A F0 2.539(,t)C .039(ranslates the contained mes-)
-2.539 F(sage and destination information into internal data structures\
, and unlinks the message control \214le.)108 223.2 Q 2.037
(Based on scheduling, priority)108 240 R 4.537(,a)-.65 G 2.038(nd e)
-4.537 F -.15(xe)-.15 G 2.038
(cution information read from a con\214guration \214le, the).15 F F3(sc)
4.538 E(heduler)-.15 E F0(arranges to e)108 252 Q -.15(xe)-.15 G(cute T)
.15 E(ransport Agents rele)-.35 E -.25(va)-.25 G
(nt to the queued messages.).25 E .68
(At the time scheduled for a particular transport agent in)108 268.8 R
-.2(vo)-.4 G .68(cation, the).2 F F3(sc)3.18 E(heduler)-.15 E F0 .68
(will start a transport agent)3.18 F .034(\(or use one from idle-pool\)\
, and tell it one by one which message control \214les to process.)108
280.8 R .034(When all the des-)5.034 F .986
(tination addresses in a message ha)108 292.8 R 1.286 -.15(ve b)-.2 H
.986(een processed, the).15 F F3(sc)3.486 E(heduler)-.15 E F0 .986
(performs error reporting tasks if an)3.486 F -.65(y,)-.15 G 1.984
(and then deletes the message control \214le in)108 304.8 R F3(POST)
4.484 E(OFFICE)-.18 E F2(/transport)A F0 1.985
(and the original message \214le in)4.484 F F3(POST)108 316.8 Q(OFFICE)
-.18 E F2(/queue)A F0(.)A .486(All message deli)108 333.6 R -.15(ve)-.25
G .486(ry is actually performed by T).15 F .485
(ransport Agents, which are declared in a con\214guration \214le)-.35 F
1.971(for the)108 345.6 R F3(sc)4.471 E(heduler)-.15 E F0 6.971(.E).73 G
1.971(ach transport agent is e)-6.971 F -.15(xe)-.15 G 1.972
(cuted with the same current directory as the).15 F F3(sc)4.472 E
(heduler)-.15 E F0(.).73 E F3(sc)108 357.6 Q(heduler)-.15 E F0<ad>.73 E
F3(tr).13 E(ansporter)-.15 E F0
(interaction protocol is described latter in this man-page.)2.5 E .157(\
The standard output of each transport agent are destination address del\
i)108 374.4 R -.15(ve)-.25 G .156(ry reports; either successful deli).15
F(v-)-.25 E(ery)108 386.4 Q 3.135(,u)-.65 G .635(nsuccessful deli)-3.135
F -.15(ve)-.25 G(ry).15 E 3.135(,o)-.65 G 3.135(rd)-3.135 G .635
(eferral of the address.)-3.135 F .636(Each report uses byte of)5.636 F
.636(fsets in the message control)-.25 F .307
(\214le to refer to the address.)108 398.4 R .306
(Reports may also include a comment line which will be displayed in the)
5.307 F F3(sc)2.806 E(hed-)-.15 E(uler)108 410.4 Q F0 1.1 -.55('s o).73
H(wn reports.).3 E -1 -.8(Tw o)108 427.2 T
(types of reports are produced:)3.3 E 26(1. Error)108 444 R .345
(messages caused by unsuccessful deli)2.845 F -.15(ve)-.25 G .345
(ry of a message are appended to its message control).15 F 3.187
(\214le. Occasionally)144 456 R 3.187(,f)-.65 G .687(or e)-3.187 F .687
(xample, when all addresses ha)-.15 F .987 -.15(ve b)-.2 H .686
(een processed, the).15 F F3(sc)3.186 E(heduler)-.15 E F0(generates)
3.186 E(an error message to the error return address of the message \(u\
sually the original sender\).)144 468 Q 26(2. The)108 484.8 R F3(sc)
2.752 E(heduler)-.15 E F0 .252(binds itself to a well-kno)2.752 F .253
(wn TCP/IP port \()-.25 F F2(MAILQ)A F0 2.753(,T)C .253
(CP port 174\) on startup.)-2.753 F(An)5.253 E(y)-.15 E 1.168(connectio\
ns to this port are processed synchronously in the scheduler at points \
in the e)144 496.8 R -.15(xe)-.15 G(cution).15 E 1.06
(where the state is internally consistent.)144 508.8 R(The)6.061 E F3
(sc)3.561 E(heduler)-.15 E F0 1.061
(simply dumps its internal state in a terse)3.561 F .007
(format to the TCP stream.)144 520.8 R .006(It is e)5.006 F .006
(xpected that the client program will reconstruct the data structures)
-.15 F(suf)144 532.8 Q 1.565(\214ciently to gi)-.25 F 1.866 -.15(ve a u)
-.25 H 1.566(ser a good idea of what the scheduler thinks the w).15 F
1.566(orld looks lik)-.1 F 4.066(e. The)-.1 F F3(mailq)144 544.8 Q F0
(\(1\) program serv).33 E(es this purpose.)-.15 E F1(OPTIONS)72 561.6 Q
F0(In)108 573.6 Q -.2(vo)-.4 G(king).2 E F3(sc)2.5 E(heduler)-.15 E F0
(without an)2.5 E 2.5(ya)-.15 G -.18(rg)-2.5 G
(ument will start it as a daemon.).18 E 22.86(\255d run)108 590.4 R
(as a daemon, usually used after \255v to log daemon acti)2.5 E
(vity in great detail.)-.25 E<ad45>108 607.2 Q F3(ne)2.5 E(wentsmax)-.15
E F0 .178(when globbing ne)144 619.2 R 2.678(wt)-.25 G .178
(asks from the directory)-2.678 F 2.677(,p)-.65 G .177
(ick only \214rst `)-2.677 F(`ne)-.74 E(wentsmax')-.25 E 2.677('o)-.74 G
2.677(ft)-2.677 G .177(hem, and lea)-2.677 F .477 -.15(ve r)-.2 H(est)
.15 E(for a ne)144 631.2 Q 2.5(ws)-.25 G(can run.)-2.5 E<ad66>108 648 Q
F3(con\214g\214le)2.5 E F0 -.15(ove)144 660 S(rrides the def).15 E
(ault con\214guration \214le)-.1 E F3(MAILSHARE)2.5 E F2(/scheduler)A
(.cf)-1 E F0(.)A 22.3(\255F Freeze)108 676.8 R(-- don')2.5 E 2.5(ta)-.18
G(ctually run an)-2.5 E(ything, just do queue scanning.)-.15 E(\(F)5 E
(or deb)-.15 E(ug purposes..\))-.2 E(\255H \255HH)108 693.6 Q 1.47
(Use multi-le)144 705.6 R -.15(ve)-.25 G 3.97(lh).15 G 1.47
(ashing at the spool directories.)-3.97 F 1.47(This will ef)6.47 F 1.47
(\214ciently reduce the lengths of the)-.25 F .675
(scans at the directories to \214nd some arbitary \214le in them.)144
717.6 R .674(One `H' means "single le)5.674 F -.15(ve)-.25 G 3.174(lh)
.15 G(ashing",)-3.174 E(tw)144 729.6 Q 4.476(o`)-.1 G(HH')-4.476 E 4.476
(sm)-.55 G 1.976(ean "dual le)-4.476 F -.15(ve)-.25 G 4.476(lh).15 G
4.476(ashing". `)-4.476 F(`Hash')-.74 E 4.476('i)-.74 G 4.476(sd)-4.476
G 1.977(irectory which name is single upper case)-4.476 F(25 Dec 1996)
280.45 768 Q(1)203.45 E EP
%%Page: 2 2
%%BeginPageSetup
BP
%%EndPageSetup
/F0 10/Times-Roman@0 SF 324.4(SCHEDULER\(8\) SCHEDULER\(8\))72 48 R
(alphabet \(A-Z\).)144 84 Q 25.08(\255i run)108 100.8 R(interacti)2.5 E
-.15(ve)-.25 G(ly).15 E 2.5(,i)-.65 G(.e., not as a daemon.)-2.5 E<ad4c>
108 117.6 Q/F1 10/Times-Italic@0 SF(lo)2.5 E(g\214le)-.1 E F0 -.15(ove)
144 129.6 S(rrides the def).15 E(ault log \214le location)-.1 E F1
(LOGDIR)2.5 E/F2 10/Times-Bold@0 SF(/scheduler)A F0(.)A<ad6c>108 146.4 Q
F1(statisticslo)2.5 E(g)-.1 E F0 1.453(starts the appending of deli)144
158.4 R -.15(ve)-.25 G 1.452
(ry statistics information \(ASCII form\) into gi).15 F -.15(ve)-.25 G
3.952<6e8c>.15 G 3.952(le. No)-3.952 F(def)3.952 E(ault)-.1 E -.25(va)
144 170.4 S(lue.).25 E<ad4e>108 187.2 Q F1(tr)2.5 E(ansmaxfno)-.15 E F0
1.732(sets ho)144 199.2 R 4.232(wm)-.25 G(an)-4.232 E 4.232<798c>-.15 G
1.732(lehandles are allocated for the scheduler')-4.232 F 4.232(ss)-.55
G 1.732(tarted children \(if the system has)-4.232 F
(adjustable resources.\))144 211.2 Q<ad50>108 228 Q F1(postof)2.5 E
(\214ce)-.18 E F0(speci\214es an alternate)144 240 Q F1(POST)2.5 E
(OFFICE)-.18 E F0(directory)2.5 E(.)-.65 E<ad71>108 256.8 Q F1 -.37(re)
2.5 G(ndezvous).37 E F0(on machines without TCP/IP netw)144 268.8 Q
(orking, the rendezv)-.1 E(ous between)-.2 E 20.64(\255Q The)108 285.6 R
-.74(``)2.5 G(Q').74 E('-mode, don')-.74 E 2.5(to)-.18 G
(utput the old style data into the queue querier)-2.5 E 2.5(,o)-.4 G
(nly the ne)-2.5 E(w-style one.)-.25 E 22.3(\255S Synchronous)108 302.4
R(startup mode, scans all jobs at the directory before starting e)2.5 E
-.15(ve)-.25 G 2.5(nt).15 G(he \214rst transporter)-2.5 E(.)-.55 E 22.86
(\255v V)108 319.2 R(erbose logging in interacti)-1.11 E .3 -.15(ve m)
-.25 H(ode -- for deb).15 E(ug uses.)-.2 E 20.64(\255V Print)108 336 R
-.15(ve)2.5 G(rsion, and e).15 E(xit)-.15 E 18.42(\255W Another)108
352.8 R .475(option for deb)2.975 F .475
(ugging, delay the start of the v)-.2 F .474
(erbose logging until after all jobs ha)-.15 F .774 -.15(ve b)-.2 H(een)
.15 E .966(scanned in, and it is time to start the transporters.)144
364.8 R F1(sc)5.966 E(heduler)-.15 E F0(and)3.466 E F1(mailq)3.466 E F0
.966(\(1\) is done using a well-).33 F(kno)144 376.8 Q 1.332
(wn named pipe.)-.25 F 1.332(This option o)6.332 F -.15(ve)-.15 G 1.332
(rrides the def).15 F 1.331
(ault location for this special \214le, either)-.1 F F1(REN-)3.831 E
(DEZV)144 388.8 Q(OUS)-.3 E F0(or)2.5 E F2(/usr/tmp/.mailq.text)2.5 E F0
(.)A 22.86(\255v be)108 405.6 R -.15(ve)2.5 G(rbose about acti).15 E
(vity)-.25 E 2.5(,a)-.65 G(nd do not detach as a daemon.)-2.5 E 18.42
(\255W be)108 422.4 R 1.246(used in conjunction with \255v to delay v)
3.745 F 1.246(erbose logging start until after all the \214les ha)-.15 F
1.546 -.15(ve b)-.2 H(een).15 E
(parsed in, and it is a time for doing scheduling.)144 434.4 Q 20.64
(\255V print)108 451.2 R -.15(ve)2.5 G(rsion message and run interacti)
.15 E -.15(ve)-.25 G(ly).15 E(.)-.65 E/F3 9/Times-Bold@0 SF(CONFIGURA)72
468 Q(TION FILE)-.855 E F0(The)108 480 Q F1(sc)2.963 E(heduler)-.15 E F0
.463(con\214guration \214le consists of a set of clauses.)2.963 F .463
(Each clause is selected by the pattern it starts)5.463 F 2.813
(with. The)108 492 R .314
(patterns for the clauses are matched, in sequence, with the)2.813 F F1
-.15(ch)2.814 G(annel).15 E F0(/)A F1(host)A F0 .314
(string for each recipient)2.814 F 3.034(address. When)108 504 R 3.034
(ac)3.034 G .533(lause pattern matches an address, the parameters set i\
n the clause will be applied to the)-3.034 F F1(sc)108 516 Q(heduler)
-.15 E F0 2.735 -.55('s p).73 H 1.635(rocessing of that address.).55 F
1.635(If the clause speci\214es a command, the clause pattern matching)
6.635 F(sequence is terminated.)108 528 Q(This is a clause:)5 E 42.28
(local/* interv)144 552 R(al=10s)-.25 E -.15(ex)216 564 S(piry=3h).15 E
2.5(#w)216 576 S(ant 20 channel slots in case of blockage on one)-2.6 E
(maxchannel=20)216 588 Q 2.5(#w)216 600 S(ant 20 thread-ring slots)-2.6
E(maxring=20)216 612 Q(command="mailbox -8")216 624 Q 2.5(Ac)108 652.8 S
(lause consists of:)-2.5 E 2.764(\255As)144 669.6 S .264
(election pattern \(in shell style\) that is matched ag)-2.764 F .264
(ainst the)-.05 F F1 -.15(ch)2.764 G(annel).15 E F0(/)A F1(host)A F0
.263(string for an address.)2.763 F 2.5(\2550o)144 686.4 S 2.5(rm)-2.5 G
(ore v)-2.5 E(ariable assignments or k)-.25 E -.15(ey)-.1 G -.1(wo).15 G
(rds \(described belo).1 E(w\).)-.25 E .733(If the selection pattern do\
es not contain a '/', it is assumed to be a channel pattern and the hos\
t pattern is)108 703.2 R(assumed to be the wildcard '*'.)108 715.2 Q
(25 Dec 1996)280.45 768 Q(2)203.45 E EP
%%Page: 3 3
%%BeginPageSetup
BP
%%EndPageSetup
/F0 10/Times-Roman@0 SF 324.4(SCHEDULER\(8\) SCHEDULER\(8\))72 48 R .173
(The components of a clause are separated by whitespace.)108 84 R .172
(The pattern introducing a clause must start in the)5.172 F .84
(\214rst column of a line, and the v)108 96 R .84
(ariable assignments or k)-.25 F -.15(ey)-.1 G -.1(wo).15 G .841
(rds inside a clause must not start in the \214rst).1 F .151
(column of a line.)108 108 R .151(This means a clause may be written bo\
th compactly all on one line, or spread out with an)5.151 F
(assignment or k)108 120 Q -.15(ey)-.1 G -.1(wo).15 G(rd per line.).1 E
.569(If the clause is empty \(i.e., consists only of a pattern\), then \
the contents of the ne)108 136.8 R .57(xt non-empty clause will)-.15 F
(be used.)108 148.8 Q
(The typical con\214guration \214le will contain the follo)108 165.6 Q
(wing clauses:)-.25 E 2.5(\255ac)144 182.4 S
(lause matching all addresses \(using the pattern)-2.5 E/F1 10
/Times-Bold@0 SF(*/*)2.5 E F0 2.5(\)t)C(hat sets up def)-2.5 E(ault v)
-.1 E(alues.)-.25 E 2.5(\255ac)144 199.2 S
(lause matching the local deli)-2.5 E -.15(ve)-.25 G
(ry channel \(usually).15 E F1(local)2.5 E F0(\).)A 2.5(\255ac)144 216 S
(lause matching the deferred deli)-2.5 E -.15(ve)-.25 G
(ry channel \(usually).15 E F1(hold)2.5 E F0(\).)A 2.5(\255ac)144 232.8
S(lause matching the error reporting channel \(usually)-2.5 E F1(err)2.5
E(or)-.18 E F0(\).)A 2.5<ad63>144 249.6 S
(lauses speci\214c to the other channels kno)-2.5 E(wn by the)-.25 E/F2
10/Times-Italic@0 SF -.45(ro)2.5 G(uter).45 E F0 2.5(,f).73 G(or e)-2.5
E(xample,)-.15 E F1(smtp)2.5 E F0(and)2.5 E F1(uucp)2.5 E F0(.)A
(The actual names of these channels are completely controlled by the)108
266.4 Q F2 -.45(ro)2.5 G(uter).45 E F0(con\214guration \214le.)2.5 E(Em\
pty lines, and lines whose \214rst non-whitespace character is '#', are\
 ignored.)108 283.2 Q -1.11(Va)108 300 S .326(riable v)1.11 F .326
(alues may be unquoted w)-.25 F .325(ords or v)-.1 F .325
(alues or doublequoted strings.)-.25 F(Interv)5.325 E .325
(als \(delta time\) are speci-)-.25 F .653
(\214ed using a concatenation of: numbers suf)108 312 R<8c78>-.25 E .653
(ed with ')-.15 F .653(s', 'm', 'h', or ')-.55 F .653
(d' modi\214ers designating the number)-.5 F(as a second, minute, hour)
108 324 Q 2.5(,o)-.4 G 2.5(rd)-2.5 G(ay v)-2.5 E 2.5(alue. F)-.25 F
(or e)-.15 E(xample: 1h5m20s.)-.15 E(The kno)108 340.8 Q(wn v)-.25 E
(ariables and k)-.25 E -.15(ey)-.1 G -.1(wo).15 G
(rds, and their typical v).1 E(alues and semantics are:)-.25 E(interv)
108 357.6 Q(al \(1m\))-.25 E .72(speci\214es the primary retry interv)
144 369.6 R .719(al, which determines ho)-.25 F 3.219(wf)-.25 G .719
(requently a transport agent should be)-3.219 F .223
(scheduled for an address.)144 381.6 R .224(The v)5.223 F .224
(alue is a delta time speci\214cation.)-.25 F .224(This v)5.224 F .224
(alue, and the)-.25 F F2 -.37(re)2.724 G(tries).37 E F0 -.25(va)2.724 G
(lue).25 E(mentioned belo)144 393.6 Q 1.3 -.65(w, a)-.25 H
(re combined to determine the interv).65 E
(al between each retry attempt.)-.25 E(idlemax)108 410.4 Q .552
(When a transport agent runs out of jobs, the)123 422.4 R 3.052(ya)-.15
G .552(re mo)-3.052 F -.15(ve)-.15 G 3.052(dt).15 G 3.052(o`)-3.052 G
.552(`idle pool')-3.792 F .552(', and it a T)-.74 F 3.052(As)-.93 G .552
(pends more than)-3.052 F F2(idlemax)123 434.4 Q F0
(time in there, it is terminated.)2.5 E -.15(ex)108 451.2 S(piry \(3d\))
.15 E .245(speci\214es the maximum age of an address in the)123 463.2 R
F2(sc)2.746 E(heduler)-.15 E F0 .246
(queue before a repeatedly deferred address is)2.746 F 1.526
(bounced with an e)123 475.2 R 1.526(xpiration error)-.15 F 6.526(.T)
-.55 G 1.525(he actual report is produced when all addresses ha)-6.526 F
1.825 -.15(ve b)-.2 H 1.525(een pro-).15 F(cessed.)123 487.2 Q
(retries \(1 1 2 3 5 8 13 21 34\))108 504 Q .037
(speci\214es the retry interv)123 516 R .037(al polic)-.25 F 2.537(yo)
-.15 G 2.537(ft)-2.537 G(he)-2.537 E F2(sc)2.537 E(heduler)-.15 E F0
.037(for an address.)2.537 F .037(The v)5.037 F .038
(alue must be a sequence of posi-)-.25 F(ti)123 528 Q 1.206 -.15(ve i)
-.25 H(nte).15 E .906(gers, these being multiples of the primary interv)
-.15 F .905(al before a retry is scheduled.)-.25 F(The)5.905 E F2(sc)
3.405 E(heduler)-.15 E F0 2.353(starts by going through the sequence as\
 an address is repeatedly deferred.)123 540 R 2.353(When the end of the)
7.353 F .595(sequence is reached, the)123 552 R F2(sc)3.095 E(heduler)
-.15 E F0 .595
(will jump into the sequence at a random spot and continue to)3.095 F
-.1(wa)-.25 G(rds).1 E(the end.)123 564 Q(This allo)5 E(ws v)-.25 E
(arious retry strate)-.25 E(gies to be speci\214ed easily:)-.15 E
(brute force \(or "jackhammer"\):)159 588 Q(retries=0)195 600 Q
(constant primary interv)159 612 Q(al:)-.25 E(retries=1)195 624 Q
(instant back)159 636 Q(of)-.1 E(f:)-.25 E
(retries="1 50 50 50 50 50 50 50 50 50 50 50 50")195 648 Q(slo)159 660 Q
2.5(wi)-.25 G(ncreasing \(\214bonacci\) sequence:)-2.5 E
(retries="1 1 2 3 5 8 13 21 34")195 672 Q(s-curv)159 684 Q 2.5(es)-.15 G
(equence:)-2.5 E(retries="1 1 2 3 5 10 20 25 28 29 30")195 696 Q -.15
(ex)159 708 S(ponential sequence:).15 E
(retries="1 2 4 8 16 32 64 128 256")195 720 Q(25 Dec 1996)280.45 768 Q
(3)203.45 E EP
%%Page: 4 4
%%BeginPageSetup
BP
%%EndPageSetup
/F0 10/Times-Roman@0 SF 324.4(SCHEDULER\(8\) SCHEDULER\(8\))72 48 R
(etc.)159 84 Q(maxta \(0\))108 112.8 Q .756(if retrying an address w)123
124.8 R .756(ould cause the number of simultaneously acti)-.1 F 1.056
-.15(ve t)-.25 H .756(ransport agents to e).15 F .756(xceed the)-.15 F
.581(speci\214ed v)123 136.8 R .581(alue, the retry is postponed.)-.25 F
.58(The check is repeated frequently so the address may be retried)5.581
F .474(as soon as possible after the scheduled retry interv)123 148.8 R
2.974(al. If)-.25 F .475(the v)2.974 F .475(alue is 0, a v)-.25 F .475
(alue of 1000 is used instead.)-.25 F -.25(Ke)123 160.8 S .301
(ep in mind that all running transport agents will k).25 F .301
(eep open)-.1 F/F1 10/Times-Bold@0 SF(tw)2.801 E(o)-.1 E/F2 10
/Times-Italic@0 SF(pipe)2.801 E F0 .301
(\(2\) \214le-handle, and thus system-).18 F .841
(wide limits may force lo)123 172.8 R .842(wer maximum, than 1000.)-.25
F .842(On a system with max 256 open \214les, this w)5.842 F(ould)-.1 E
(most lik)123 184.8 Q(ely succeed at 120.)-.1 E(maxchannel \(0\))108
201.6 Q .065(if retrying an address w)123 213.6 R .064
(ould cause the number of simultaneously acti)-.1 F .364 -.15(ve t)-.25
H .064(ransport agents processing mail).15 F .834
(for the same channel to e)123 225.6 R .834(xceed the speci\214ed v)-.15
F .834(alue, the retry is postponed.)-.25 F .834
(The check is repeated fre-)5.834 F .267(quently so the address may be \
retried as soon as possible after the scheduled retry interv)123 237.6 R
2.767(al. If)-.25 F .267(the v)2.767 F(alue)-.25 E(is 0, a v)123 249.6 Q
(alue of 1000 is used instead.)-.25 E(maxring \(0\))108 266.4 Q 1.024
(Recipients are groupped into `)123 278.4 R(`threads')-.74 E 1.024
(', and similar threads are groupped into `)-.74 F(`thread-rings')-.74 E
1.025(', where)-.74 F .243(same transport agent can be switched o)123
290.4 R -.15(ve)-.15 G 2.743(rf).15 G .243(rom one recipient to another)
-2.743 F 5.243(.T)-.55 G .243(his de\214nes ho)-5.243 F 2.743(wm)-.25 G
(an)-2.743 E 2.743(yt)-.15 G(rans-)-2.743 E
(port agents can be running at an)123 302.4 Q 2.5(yt)-.15 G
(ime at the ring.)-2.5 E(sk)108 319.2 Q .5 -.25(ew \()-.1 H(5\)).25 E
.073(is the maximum number of retries before the retry time is aligned \
to a standard boundary \(seconds since)123 331.2 R .304
(epoch, modulo primary interv)123 343.2 R 2.803(al\). The)-.25 F(lo)
2.803 E .303(wer this number \(1 is lo)-.25 F .303(west\), the f)-.25 F
.303(aster the alignment is done.)-.1 F 1.092
(The purpose of this alignment is to ensure that e)123 355.2 R -.15(ve)
-.25 G 1.093(ntually a single transport agent in).15 F -.2(vo)-.4 G
1.093(kation will be).2 F
(able to process destination addresses that arri)123 367.2 Q -.15(ve)
-.25 G 2.5(dr).15 G(andomly to the scheduler)-2.5 E(.)-.55 E
(user \(root\))108 384 Q 1.337
(is the user id of a transport agent processing the address.)123 396 R
1.336(The v)6.336 F 1.336(alue is either numeric \(a uid\) or an)-.25 F
(account name.)123 408 Q(group \(daemon\))108 424.8 Q 1.248
(is the group id of a transport agent processing the address.)123 436.8
R 1.249(The v)6.248 F 1.249(alue is either numeric \(a gid\) or a)-.25 F
(group name.)123 448.8 Q(command \(smtp -srl $LOGDIR/smtp $host\))108
465.6 Q .955(is the command line used to start a transport agent to pro\
cess the address.)123 477.6 R .954(The program pathname is)5.954 F 2.668
(speci\214ed relati)123 489.6 R 2.968 -.15(ve t)-.25 H 5.168(ot).15 G
(he)-5.168 E F2(MAILBIN)5.168 E F1(/ta)A F0(directory)5.168 E 7.668(.T)
-.65 G 2.669(he string "$channel" is replaced by the current)-7.668 F
.076(matched channel, and "$host" is replaced by the current matched ho\
st, from the destination address, and)123 501.6 R 1.87
("$LOGDIR" substitutes ZENV v)123 513.6 R 1.87(ariable LOGDIR v)-.25 F
1.87(alue there.)-.25 F F2 1.87(It is str)6.87 F 1.87(ongly r)-.45 F
1.87(ecommended that the)-.37 F($host is not to be used on a command de\
\214nition, as it limits the usability of idled tr)123 525.6 Q
(ansporter)-.15 E(.)-1.11 E F0(bychannel)108 542.4 Q .566(is a k)123
554.4 R -.15(ey)-.1 G -.1(wo).15 G .566(rd \(with no associated v).1 F
.565(alue\) that tells the scheduler that the transport agent speci\214\
ed in the)-.25 F .456(command will only process destination addresses t\
hat match the \214rst destination channel it encounters.)123 566.4 R
.446(This is automatically set when the string "$channel" occurs in the\
 command, b)123 578.4 R .446(ut may also be speci\214ed)-.2 F
(manually by this k)123 590.4 Q -.15(ey)-.1 G -.1(wo).15 G 2.5(rd. This)
.1 F(is rarely used.)2.5 E(queueonly)108 607.2 Q 2.606(ac)123 619.2 S
.106(lause with)-2.606 F F2(queueonly)2.606 E F0 .106
(\215ag does not auto-start at the arri)2.606 F -.25(va)-.25 G 2.606(lo)
.25 G 2.606(fam)-2.606 G .107(essage, instead it)-2.606 F F1(must)2.607
E F0 .107(be started by)2.607 F(means of)123 631.2 Q F2(smtpserver)2.5 E
F0(\(8\) command).73 E F1(ETRN)2.5 E F0(thru an SMTP connection.)2.5 E
-.15(Fo)108 648 S 2.5(re).15 G
(xample, this is a complete con\214guration \214le:)-2.65 E 2.5(#D)144
672 S(ef)-2.5 E(ault v)-.1 E(alues)-.25 E 56.72(*/* interv)144 684 R
(al=1m e)-.25 E(xpiry=3d retries="1 1 2 3 5 8 13 21 34")-.15 E
(maxring=0 maxta=0 sk)216 696 Q -.25(ew)-.1 G(=5 user=root group=daemon)
.25 E 2.5(#B)144 708 S(oilerplate parameters for local deli)-2.5 E -.15
(ve)-.25 G(ry and service channels).15 E 42.28(local/* interv)144 720 R
(al=10s e)-.25 E(xpiry=3h maxchannel=2 command=mailbox)-.15 E
(25 Dec 1996)280.45 768 Q(4)203.45 E EP
%%Page: 5 5
%%BeginPageSetup
BP
%%EndPageSetup
/F0 10/Times-Roman@0 SF 324.4(SCHEDULER\(8\) SCHEDULER\(8\))72 48 R
50.07(error interv)144 84 R(al=5m maxchannel=10 command=errormail)-.25 E
43.94(hold/* interv)144 96 R(al=5m maxchannel=1 command=hold)-.25 E 2.5
(#M)144 120 S(iscellaneous channels supported by router con\214guration)
-2.5 E(smtp/*.toronto.edu)144 132 Q
(smtp/*.utoronto.ca maxchannel=10 maxring=2)144 144 Q
(command="smtp -srl $LOGDIR/smtp")216 156 Q 50.05(smtp maxchannel=10)144
168 R(maxring=5)2.5 E(command="smtp -esrl $LOGDIR/smtp")216 180 Q 42.28
(uucp/* maxchannel=5)144 204 R(command="sm -c $channel uucp")2.5 E .274
(The \214rst clause \(*/*\) sets up def)108 232.8 R .274(ault v)-.1 F
.274(alues for all addresses.)-.25 F .273
(There is no command speci\214cation, so clause)5.273 F
(matching will continue after address ha)108 244.8 Q .3 -.15(ve p)-.2 H
(ick).15 E(ed up the parameters set here.)-.1 E 1.494(The third clause \
\(error\) has an implicit host wildcard of '*', so it w)108 261.6 R
1.494(ould match the same as specifying)-.1 F(error/* w)108 273.6 Q
(ould ha)-.1 E -.15(ve)-.2 G(.).15 E .32(The \214fth clause \(smtp/*.to\
ronto.edu\) has no further components so it selects the components of t\
he follo)108 290.4 R(w-)-.25 E(ing non-empty clause \(the sixth\).)108
302.4 Q 2.521(Both the \214fth and sixth clauses are speci\214c to addr\
ess destinations within the T)108 319.2 R(OR)-.18 E(ONT)-.4 E 2.522
(O.EDU and)-.18 F(UT)108 331.2 Q(OR)-.18 E(ONT)-.4 E .83(O.CA or)-.18 F
-.05(ga)-.18 G .83(nization \(the tw).05 F 3.33(oa)-.1 G .829
(re parallel domains\).)-3.33 F .829(At most 10 deli)5.829 F -.15(ve)
-.25 G .829(ries to the).15 F/F1 10/Times-Bold@0 SF(smtp)3.329 E F0
(channel)3.329 E .531(may be concurrently acti)108 343.2 R -.15(ve)-.25
G 3.031(,a).15 G .532(nd at most 2 for all possible hosts within T)
-3.031 F(OR)-.18 E(ONT)-.4 E 3.032(O.EDU. If)-.18 F .532($host is men-)
3.032 F .839(tioned in the command speci\214cation, the transport agent\
 will only be told about the message control \214les)108 355.2 R 1.474
(that indicate SMTP deli)108 367.2 R -.15(ve)-.25 G 1.474
(ry to a particular host.).15 F 1.474(The actual host is pick)6.474 F
1.474(ed at random from the current)-.1 F(choices, to a)108 379.2 Q -.2
(vo)-.2 G(id systematic errors leading to a deadlock of an).2 E 2.5(yq)
-.15 G(ueue.)-2.5 E/F2 9/Times-Bold@0 SF(MESSA)72 396 Q(GE CONTR)-.495 E
(OL FILE SYNT)-.27 E(AX)-.81 E F0 3.885(Am)108 408 S 1.385
(essage control \214le contains all the information needed by deli)
-3.885 F -.15(ve)-.25 G 1.384(ry programs lik).15 F(e)-.1 E/F3 10
/Times-Italic@0 SF(sc)3.884 E(heduler)-.15 E F0 1.384(and the)3.884 F
.211(transport agents.)108 420 R .212(It is a terse presentation of the)
5.211 F F3 -.45(ro)2.712 G(uter).45 E F0 1.312 -.55('s d).73 H .212
(ecisions, along with some useful reference infor).55 F(-)-.2 E(mation.)
108 432 Q .068
(The message control \214le consists of a number of \214elds.)108 448.8
R .067(All \214elds start in the \214rst column \(i.e., at the be)5.068
F(gin-)-.15 E .484(ning of the \214le or just after a ne)108 460.8 R
.484(wline\), and most \214elds e)-.25 F .485(xtend to the end of line.)
-.15 F .485(The one e)5.485 F .485(xception is the)-.15 F .41
(message header \214eld which e)108 472.8 R .409
(xtends till a double-ne)-.15 F .409(wline terminator)-.25 F 5.409(.F)
-.55 G .409(or all b)-5.559 F .409(ut this message header \214eld,)-.2 F
.382(the second column is reserv)108 484.8 R .382(ed for a tag byte.)
-.15 F .383
(This position is used to lock the \214eld and to indicate the sta-)
5.382 F .59(tus of past processing of the \214eld.)108 496.8 R -.15(Fo)
5.59 G 3.09(re).15 G .59(xample, the success or f)-3.24 F .59
(ailure of deli)-.1 F -.15(ve)-.25 G .59(ry to a recipient address is)
.15 F .867(indicated by a '+' or means the \214eld has not been process\
ed, or that processing has been deferred.)108 508.8 R 3.367(A')5.867 G
(~')-3.367 E .765(indicates the \214eld is lock)108 520.8 R .765
(ed because some transport agent is currently processing deli)-.1 F -.15
(ve)-.25 G .764(ry for the address.).15 F .265(The kno)108 532.8 R .265
(wn \214eld names and tags are de\214ned in)-.25 F F1(<mail.h>)2.766 E
F0 5.266(.F)C .266(or all the)-5.416 F F3 -.37(re)2.766 G(cipient).37 E
F0 .266(addresses, there is 6 charac-)2.766 F .456(ters space for trans\
port-process process-id so that a quickly restarted scheduler will not \
do double-deli)108 544.8 R -.15(ve)-.25 G(ry).15 E(on some slo)108 556.8
Q(wly running transporter)-.25 E(.)-.55 E(The follo)108 573.6 Q
(wing \214elds are mandatory:)-.25 E 33.22(it)108 590.4 S .248
(he name of the message \214le in the)-33.22 F F3(POST)2.749 E(OFFICE)
-.18 E F1(/queue)A F0 .249(directory and of the message control \214le)
2.749 F .338(in the)144 602.4 R F3(POST)2.838 E(OFFICE)-.18 E F1
(/transport)A F0(directory)2.838 E 5.338(.')-.65 G .338
(i' is a mnemonic for 'inode' since message \214le names)-5.338 F(must \
be unique on the system and therefore are named by their inode number)
144 614.4 Q(.)-.55 E 31(ot)108 631.2 S(he byte of)-31 E
(fset of the message body in the original message.)-.25 E(The follo)108
648 Q(wing \214elds will frequently e)-.25 E(xist:)-.15 E 31.56(ei)108
664.8 S 2.5(st)-31.56 G
(he return address for error messages, in a form that can be put in a T)
-2.5 E(o: header line.)-.8 E 33.22(li)108 681.6 S 2.933(sas)-33.22 G
.433(tring identifying this message in log entries.)-2.933 F -.8(Ty)
5.433 G .433(pically the message id of the message w).8 F(ould)-.1 E
(be used.)144 693.6 Q 31(ni)108 710.4 S 2.5(st)-31 G(he deli)-2.5 E -.15
(ve)-.25 G(ry-status-noti\214cation en).15 E
(vironment id data for the message.)-.4 E(25 Dec 1996)280.45 768 Q(5)
203.45 E EP
%%Page: 6 6
%%BeginPageSetup
BP
%%EndPageSetup
/F0 10/Times-Roman@0 SF 324.4(SCHEDULER\(8\) SCHEDULER\(8\))72 48 R
28.78(Na)108 84 S(re the deli)-28.78 E -.15(ve)-.25 G
(ry-status-noti\214cation entries for each recipient address.).15 E
(The follo)108 100.8 Q(wing \214elds will occasionally appear:)-.25 E 31
(xi)108 117.6 S 2.848(st)-31 G .347(he log identi\214cation string \(us\
ually a message id\) of an obsoleted message.)-2.848 F .347
(The scheduler will)5.347 F(pur)144 129.6 Q(ge an)-.18 E 2.5(ys)-.15 G
(uch identi\214ed message after running sanity checks.)-2.5 E 31(vi)108
146.4 S 2.836(st)-31 G .336(he name of a \214le that the deli)-2.836 F
-.15(ve)-.25 G .337(ry system can appended log information to.).15 F
.337(This w)5.337 F .337(ould appear)-.1 F .348
(as the result of running)144 158.4 R/F1 10/Times-Bold@0 SF .348
(sendmail -v)2.848 F F0(or)2.848 E F1 .348(Mail -v)2.848 F F0 5.348(.S)C
.348(ince all programs need to refer to the same \214le,)-5.348 F .634
(on mail clusters it is recommended that this be a relati)144 170.4 R
.934 -.15(ve p)-.25 H .634(ath naming a \214le within the).15 F/F2 10
/Times-Italic@0 SF(POST)3.135 E(OF-)-.18 E(FICE)144 182.4 Q F0
(directory hierarch)2.5 E -.65(y.)-.05 G 2.976(Am)108 199.2 S .475
(essage control \214le must contain at least one address "group".)-2.976
F .475(Each group consists of a sender address)5.475 F .956(\214eld, on\
e or more recipient address \214elds, and a message header that goes al\
ong with these.)108 211.2 R .956(An address)5.956 F(\214eld is a string\
 containing a space-separated 4-tuple \(quad\) as follo)108 223.2 Q(ws:)
-.25 E(channel)108 240 Q(is the name of the deli)144 252 Q -.15(ve)-.25
G(ry channel for this address.).15 E(This must be a contiguous w)5 E
(ord.)-.1 E 16.83(host is)108 268.8 R(the name of the ne)2.5 E
(xt destination host for this address.)-.15 E
(This too must be a contiguous w)5 E(ord.)-.1 E 16.84(user is)108 285.6
R 1.103
(the address to be handed to the destination host for further deli)3.604
F -.15(ve)-.25 G(ry).15 E 6.103(.T)-.65 G 1.103(his string may contain)
-6.103 F 2.5(space. It)144 297.6 R
(is distinguishable because the last component cannot contain spaces.)
2.5 E(pri)108 314.4 Q(vile)-.25 E(ge)-.15 E
(is the numeric uid representing the pri)144 326.4 Q(vile)-.25 E
(ges associated with this address.)-.15 E
(The address group components are:)108 343.2 Q 32.11(si)108 360 S 2.5
(sas)-32.11 G(ender address \214eld.)-2.5 E 32.67(ri)108 376.8 S 2.5
(sar)-32.67 G(ecipient address \214eld.)-2.5 E 29.33(Ri)108 393.6 S
3.395(sa)-29.33 G 3.395(nX)-3.395 G .896(OR recipient address \214eld.)
-3.395 F .896
(The \214rst element is a tag \(a class number\) to identify collec-)
5.896 F .826(tions of recipient addresses which are equi)144 405.6 R
-.25(va)-.25 G .826(lent \(and therefore mutually e).25 F(xclusi)-.15 E
-.15(ve)-.25 G 3.326(\). This).15 F .826(is fol-)3.326 F(lo)144 417.6 Q
(wed by an address \214eld as described abo)-.25 E -.15(ve)-.15 G(.).15
E 28.78(Na)108 434.4 S(re the deli)-28.78 E -.15(ve)-.25 G
(ry-status-noti\214cation parameters for the pre).15 E(vious recipient.)
-.25 E 28.22(mi)108 451.2 S 2.5(st)-28.22 G
(he message header for this address group.)-2.5 E .746(After one or mor\
e of these address groups, the error messages for addresses are appende\
d to the message)108 468 R(control \214le.)108 480 Q
(This is done by the)5 E F2(sc)2.5 E(heduler)-.15 E F0(as it recei)2.5 E
-.15(ve)-.25 G 2.5(se).15 G(rror reports from transport agents.)-2.5 E
31(di)108 496.8 S 2.548(sad)-31 G .047
(iagnostic \214eld, consisting of a message control \214le byte of)
-2.548 F .047(fset indicating an address, follo)-.25 F(wed)-.25 E
(by space and comment to the end of line.)144 508.8 Q -.15(Fo)108 525.6
S 3.248(re).15 G .748(xample, this is a typical message control \214le \
\(it is a snapshot tak)-3.398 F .749(en while a transport agent w)-.1 F
.749(as run-)-.1 F(ning\):)108 537.6 Q 2.5(i1)144 561.6 S(5582)-2.5 E
2.5(o6)144 573.6 S(0)-2.5 E 2.5(l<)144 585.6 S
(90Jun3.165355edt.15582@neat.cs.toronto.edu>)-2.5 E 2.5(eR)144 597.6 S
(ayan Zachariassen <rayan>)-2.5 E 2.5(sl)144 609.6 S(ocal - rayan 7)-2.5
E(r~ 23456local - rayan 7)144 621.6 Q(m)144 633.6 Q(Recei)144 645.6 Q
-.15(ve)-.25 G
(d: by neat.cs.toronto.edu id <15582>; Sun, 3 Jun 1990 16:53:55 -0400)
.15 E 23.45(From: Rayan)144 657.6 R(Zachariassen <rayan>)2.5 E -.8(To)
144 669.6 S 37.31(:r).8 G(ayan)-37.31 E
(Subject: a typical message control \214le)144 681.6 Q
(Message-Id: <90Jun3.165355edt.15582@neat.cs.toronto.edu>)144 693.6 Q
26.24(Date: Sun,)144 705.6 R 2.5(3J)2.5 G(un 1990 16:53:54 -0400)-2.5 E
(25 Dec 1996)280.45 768 Q(6)203.45 E EP
%%Page: 7 7
%%BeginPageSetup
BP
%%EndPageSetup
/F0 10/Times-Roman@0 SF 324.4(SCHEDULER\(8\) SCHEDULER\(8\))72 48 R/F1 9
/Times-Bold@0 SF(TRANSPOR)72 84 Q 2.25(TA)-.36 G(GENT INTERF)-2.745 E
-.495(AC)-.81 G(E).495 E F0 1.197(The transport agent interf)108 96 R
1.197(ace follo)-.1 F 1.197(ws master)-.25 F(-sla)-.2 E 1.497 -.15(ve -)
-.2 H 1.197(model, where the T).15 F 3.697(Ai)-.93 G 1.196(nforms the)
-3.697 F/F2 10/Times-Italic@0 SF(sc)3.696 E(heduler)-.15 E F0 1.196
(that it is)3.696 F .073(ready for the w)108 108 R .073
(ork, and then the scheduler sends it one job description, and a)-.1 F
-.1(wa)-.15 G .074(its for diagnistics.).1 F .074(Once the)5.074 F
(job is \214nished, the T)108 120 Q 2.5(An)-.93 G
(oti\214es the scheduler)-2.5 E 2.5(,t)-.4 G(hat it is ready for a ne)
-2.5 E 2.5(wj)-.25 G(ob)-2.5 E(.)-.4 E 2.5(As)108 136.8 S
(hort sample session looks lik)-2.5 E 2.5(et)-.1 G(his:)-2.5 E F2
(\(start the tr)144 160.8 Q(ansport a)-.15 E -.1(ge)-.1 G(nt\)).1 E/F3
10/Times-Bold@0 SF(#hungry)144 172.8 Q F2(spoolid\\)144 184.8 Q F3(t)A
F2(hostspec)A F3(diagnostics)144 196.8 Q(#hungry)144 208.8 Q F0(...)144
220.8 Q(Normal diagnostic output is of the form:)108 261.6 Q F2(id)144
285.6 Q F0(/)A F2(of)A(fset)-.18 E F0(\\t)A F2(notarydata)A F0(\\t)A F2
(status messa)A -.1(ge)-.1 G F0(where)108 309.6 Q F2(id)3.666 E F0 1.166
(is the inode number of the message \214le,)3.666 F F2(of)3.666 E(fset)
-.18 E F0 1.165(is a byte of)3.665 F 1.165
(fset within its control \214le where the)-.25 F 1.606
(address being reported on is k)108 321.6 R(ept,)-.1 E F2(notarydata)
4.106 E F0 1.606(is a Ctrl-A separated triplet is deli)4.106 F -.15(ve)
-.25 G(ry-status-noti\214cation).15 E .06(information for the message,)
108 333.6 R F2(status)2.56 E F0 .06(is one of)2.56 F F3(ok)2.559 E F0(,)
A F3(err)2.559 E(or)-.18 E F0(,)A F3(deferr)2.559 E(ed)-.18 E F0 2.559
(,o)C(r)-2.559 E F3 -.18(re)2.559 G(tryat).18 E F0 2.559(,a)C .059
(nd the)-2.559 F F2(messa)2.559 E -.1(ge)-.1 G F0 .059(is descripti)
2.659 F -.15(ve)-.25 G(te)108 345.6 Q .85
(xt associated with the report.)-.15 F .85(The te)5.85 F .85
(xt is terminated by a linefeed.)-.15 F(An)5.85 E 3.35(yo)-.15 G .85
(ther format \(as might be pro-)-3.35 F .036(duced by subprocesses\) is\
 passed to standard output for logging in the)108 357.6 R F3(scheduler)
2.536 E F0 2.536(log. The)2.536 F F3 -.18(re)2.536 G(tryat).18 E F0
(response)2.536 E .582(will assume the \214rst w)108 369.6 R .582
(ord of the te)-.1 F .582(xt is a numeric parameter)-.15 F 3.082(,e)-.4
G .582(ither an incremental time in seconds if pre-)-3.082 F<8c78>108
381.6 Q(ed by)-.15 E F3(+,)2.5 E F0
(or otherwise an absolute time in seconds since epoch.)2.5 E(The e)108
398.4 Q(xit status is a code from)-.15 E F3(<sysexits.h>)2.5 E F0(.)A F1
(ST)72 415.2 Q -.855(AT)-.81 G(ISTICS LOG FORMA).855 E(T)-.855 E F0(The\
 statistics log reports condenced performance oriented information in f\
ollo)108 427.2 Q(wing format:)-.25 E 27.83(timestamp \214leid)144 451.2
R 20.72(dt1 dt2)37.04 F(state $channel/$host)16.02 E 24.5
(812876190 90401-2)144 463.2 R 31(05)29.27 G(ok usenet/\255)-4.7 E 24.5
(812876228 90401-1)144 475.2 R 31(07)29.27 G(ok usenet/\255)-4.7 E 24.5
(812876244 90401-1)144 487.2 R 31(01)29.27 G(ok local/gopher\255admin)
-4.7 E 24.5(812876244 90401-1)144 499.2 R 31(05)29.27 G
(ok smtp/funet.\214)-4.7 E 24.5(812876559 90401-1)144 511.2 R 28.5(02)
29.27 G 23.8(1o)-28.5 G 2.5(ks)-23.8 G(mtp/utu.\214)-2.5 E
(where the \214elds are:)108 535.2 Q(timestamp)108 552 Q
(The original spool\214le ctime \(creation time\) stamp in decimal.)144
564 Q 12.94(\214leid Spool\214le)108 580.8 R
(name after the router has processed it)2.5 E 20.72(dt1 The)108 597.6 R
(time dif)2.5 E(ference from spool\214le ctime to scheduler control \
\214le creation by the router)-.25 E 20.72(dt2 The)108 614.4 R(time dif)
2.5 E(ference from scheduler \214le ctime to the deli)-.25 E -.15(ve)
-.25 G(ry that is logged on).15 E 15.17(state What)108 631.2 R 2.5
(happened? V)2.5 F(alues: ok, error)-1.11 E 2.5(,e)-.4 G(xpiry)-2.65 E
($channel/$host)108 648 Q(Where/ho)144 660 Q 2.5(wi)-.25 G 2.5(tw)-2.5 G
(as processed)-2.6 E F1(MAILQ PR)72 676.8 Q -1.692 -.36(OT O)-.27 H(COL)
.36 E F3(*** This is actually out of date, when using \255Q-mode ***)108
688.8 Q F0 .946(Upon accepting a TCP connection on the)108 705.6 R F3
(MAILQ)3.446 E F0 .946(port \(TCP port 174\), the)3.446 F F2(sc)3.446 E
(heduler)-.15 E F0 .945(dumps data to the)3.446 F
(TCP stream in the follo)108 717.6 Q
(wing format and immediately closes the connection:)-.25 E(25 Dec 1996)
280.45 768 Q(7)203.45 E EP
%%Page: 8 8
%%BeginPageSetup
BP
%%EndPageSetup
/F0 10/Times-Roman@0 SF 324.4(SCHEDULER\(8\) SCHEDULER\(8\))72 48 R
(The TCP stream syntax is:)108 84 Q/F1 10/Times-Bold@0 SF -.1(ve)144 108
S(rsion).1 E/F2 10/Times-Italic@0 SF(id)2.5 E F1(\\n)A F2
(data in id-dependent format)144 120 Q F0(<)A F2(close)A F0(>)A .174
(The \214rst line \(all bytes up to an ASCII LF character)108 148.8 R
2.675(,o)-.4 G .175
(ctal 12\) is used to identify the syntax of all bytes fol-)-2.675 F(lo)
108 160.8 Q .666(wing the line terminator)-.25 F F1(LF)3.166 E F0 5.666
(.T)C .665(he \214rst 8 characters of the \214rst line are ")-5.666 F F1
-.1(ve)C(rsion).1 E F0 3.165("a)3.165 G 3.165(sac)-3.165 G .665
(heck that this is)-3.165 F .296(indeed a)108 172.8 R F1(MAILQ)2.796 E
F0 .296(port serv)2.796 F .297(er that has been reached, the remaining \
bytes are the real data format identi\214ca-)-.15 F 2.5(tion. The)108
184.8 R(data is interpreted according to that format until the terminat\
ing connection close.)2.5 E -.15(Fo)108 201.6 S 1.002
(rmat identi\214ers should be re).15 F 1.001(gistered with the author)
-.15 F 6.001(.T)-.55 G 1.001(he only one currently de\214ned is ")-6.001
F F1 1.001(zmailer 1.0)B F0(".)A -.15(Fo)108 213.6 S 2.5(rt).15 G
(hat data format, the syntax of the data follo)-2.5 E(wing the \214rst)
-.25 E F1(LF)2.5 E F0(is:)2.5 E F1 -1(Ve)144 237.6 S(rtices:\\n)1 E F0
(\(<)144 249.6 Q F2 -.1(ke)C(y)-.2 E F0(>)A F1(:\\t)A F0(><)A F2
(msg-\214le)A F0(>)A F1(\\t)A F0(><)A F2(n-addr)A(s)-.1 E F0(>)A F1(;)A
F0(<)2.5 E F2(of)A(f1)-.18 E F0(>\()A F1(,)A F0(<)A F2(of)A(fN)-.18 E F0
(>\)*)A F1(\\t)A F0(>[)A F1(#)A F0(<)A F2(te)A(xt)-.2 E F0(>])A F1(\\n)A
F0(\)*)A(\()144 261.6 Q F1(Channels:\\n)A F0(\(<)144 273.6 Q F2(wor)A(d)
-.37 E F0(>)A F1(:\\t)A F0(>\()A F1(>)A F0(<)A F2 -.1(ke)C(y)-.2 E F0
(>\)+)A F1(\\n)A F0(\)+)A F1(Hosts:\\n)144 285.6 Q F0(\(<)144 297.6 Q F2
(wor)A(d)-.37 E F0(>)A F1(:\\t)A F0(>\()A F1(>)A F0(<)A F2 -.1(ke)C(y)
-.2 E F0(>\)+)A F1(\\n)A F0(\)+\)?)A(Where:)108 321.6 Q F1(\\n)20.97 E
F0(is an ASCII linefeed)85.26 E F1(\\t)158.4 333.6 Q F0(is an ASCII tab)
87.49 E F2 -.1(ke)158.4 345.6 S(y)-.2 E F0
(is an unsigned decimal number)80.68 E F2(msg-\214le)158.4 357.6 Q F0
(is a contiguous string \(it is the message)61.94 E(\214le name relati)
252 369.6 Q .3 -.15(ve t)-.25 H 2.5(oak).15 G(no)-2.5 E(wn directory\))
-.25 E F2(n-addr)158.4 381.6 Q(s)-.1 E F0
(is an unsigned decimal number \(number of)62.59 E(addresses\))252 393.6
Q F2(of)158.4 405.6 Q(f1)-.18 E F0(...)A F2(of)A(fN)-.18 E F0
(are unsigned decimal numbers)53.67 E(\(address byte of)252 417.6 Q
(fsets\))-.25 E F2(te)158.4 429.6 Q(xt)-.2 E F0
(is a string not containing an ASCII linefeed)79.36 E
(\(status message\))252 441.6 Q F2(wor)158.4 453.6 Q(d)-.37 E F0
(is a contiguous string)73.41 E 2.5(a")158.4 477.6 S
(contiguous string" is a sequence of printable)-2.5 E
(non-space characters)158.4 489.6 Q -.15(Fo)108 518.4 S 2.5(re).15 G
(xample, here is sample output from connecting to the)-2.65 E F1(MAILQ)
2.5 E F0(port:)2.5 E -.15(ve)144 542.4 S(rsion zmailer 1.0).15 E -1.11
(Ve)144 554.4 S(rtices:)1.11 E(311424:37141; 116)144 566.4 Q
(311680:64722; 151,331#128.100.8.4: Null read! \(will retry\))144 578.4
Q(312192:63471; 152#128.89.0.93: connect: Connection timed out \(will r\
etry\))144 590.4 Q(Channels:)144 602.4 Q(smtp:>311424>311680>312192)144
614.4 Q(Hosts:)144 626.4 Q(scg.toronto.edu:>311424)144 638.4 Q
(mv04.ecf.toronto.edu:>311680)144 650.4 Q(relay1.cs.net:>312192)144
662.4 Q .005(This is suf)108 691.2 R .006(\214cient information to be a\
ble to reconstruct the transport queues as seen by the scheduler proces\
s,)-.25 F .406(and to \214nd more information than what is sho)108 703.2
R .405(wn here by actually looking up the message control and data)-.25
F(\214les referred to.)108 715.2 Q(25 Dec 1996)280.45 768 Q(8)203.45 E
EP
%%Page: 9 9
%%BeginPageSetup
BP
%%EndPageSetup
/F0 10/Times-Roman@0 SF 324.4(SCHEDULER\(8\) SCHEDULER\(8\))72 48 R/F1 9
/Times-Bold@0 SF(SIGN)72 84 Q(ALS)-.18 E/F2 10/Times-Bold@0 SF(SIGHUP)
108 96 Q F0(:)A(close and reopen the stdout/stderr log \214le.)144 108 Q
F2(SIGTERM)108 124.8 Q F0(:)A -.15(ex)144 136.8 S(it cleanly).15 E(.)
-.65 E F2(SIGQ)108 153.6 Q(UIT)-.1 E F0(:)A -.15(ex)144 165.6 S
(it cleanly).15 E 2.5(,b)-.65 G
(ut at \214rst order transporter childs to shut do)-2.7 E
(wn, and collect their status reports.)-.25 E F2(SIGALRM)108 182.4 Q F0
(:)A(check pending w)144 194.4 Q(ork.)-.1 E F2(SIGUSR1)108 211.2 Q F0(:)
A(reread the)144 223.2 Q/F3 10/Times-Italic@0 SF(sc)2.5 E(heduler)-.15 E
F0(con\214guration \214le.)2.5 E F2(SIGUSR2)108 240 Q F0(:)A
(dump state information to the)144 252 Q F3 -.37(re)2.5 G(ndezvous).37 E
F0(\214le.)2.5 E F1(FILES)72 268.8 Q F3(/etc/zmailer)108 280.8 Q(.conf)
-1.11 E(/var/spool/postof)108 292.8 Q(\214ce/.pid.sc)-.18 E
(heduler \(POST)-.15 E(OFFICE/.pid.sc)-.18 E(heduler\))-.15 E
(/var/spool/postof)108 304.8 Q(\214ce/sc)-.18 E(heduler \(POST)-.15 E
(OFFICE/sc)-.18 E(heduler\))-.15 E(/var/spool/postof)108 316.8 Q
(\214ce/tr)-.18 E(ansport \(POST)-.15 E(OFFICE/tr)-.18 E(ansport\))-.15
E(/var/spool/postof)108 328.8 Q(\214ce/queue \(POST)-.18 E
(OFFICE/queue\))-.18 E F1(SEE ALSO)72 345.6 Q F0
(router\(8\), mailq\(1\))108 357.6 Q F1 -.45(AU)72 374.4 S(THOR).45 E F0
(This program authored and cop)108 386.4 Q(yright by:)-.1 E
(Rayan Zachariassen <rayan@cs.toronto.edu>)108 398.4 Q 2.5(Ap)108 410.4
S(lenty of changes and se)-2.5 E -.15(ve)-.25 G(ral real b).15 E
(ug\214x)-.2 E(es by:)-.15 E(Matti Aarnio <mea@nic.funet.\214>)108 422.4
Q(25 Dec 1996)280.45 768 Q(9)203.45 E EP
%%Trailer
end
%%EOF
