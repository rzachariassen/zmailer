%!PS-Adobe-3.0
%%Creator: groff version 1.15
%%CreationDate: Wed May  3 23:16:03 2000
%%DocumentNeededResources: font Times-Roman
%%+ font Times-Bold
%%+ font Times-Italic
%%DocumentSuppliedResources: procset grops 1.15 0
%%Pages: 4
%%PageOrder: Ascend
%%Orientation: Portrait
%%EndComments
%%BeginProlog
%%BeginResource: procset grops 1.15 0
/setpacking where{
pop
currentpacking
true setpacking
}if
/grops 120 dict dup begin
/SC 32 def
/A/show load def
/B{0 SC 3 -1 roll widthshow}bind def
/C{0 exch ashow}bind def
/D{0 exch 0 SC 5 2 roll awidthshow}bind def
/E{0 rmoveto show}bind def
/F{0 rmoveto 0 SC 3 -1 roll widthshow}bind def
/G{0 rmoveto 0 exch ashow}bind def
/H{0 rmoveto 0 exch 0 SC 5 2 roll awidthshow}bind def
/I{0 exch rmoveto show}bind def
/J{0 exch rmoveto 0 SC 3 -1 roll widthshow}bind def
/K{0 exch rmoveto 0 exch ashow}bind def
/L{0 exch rmoveto 0 exch 0 SC 5 2 roll awidthshow}bind def
/M{rmoveto show}bind def
/N{rmoveto 0 SC 3 -1 roll widthshow}bind def
/O{rmoveto 0 exch ashow}bind def
/P{rmoveto 0 exch 0 SC 5 2 roll awidthshow}bind def
/Q{moveto show}bind def
/R{moveto 0 SC 3 -1 roll widthshow}bind def
/S{moveto 0 exch ashow}bind def
/T{moveto 0 exch 0 SC 5 2 roll awidthshow}bind def
/SF{
findfont exch
[exch dup 0 exch 0 exch neg 0 0]makefont
dup setfont
[exch/setfont cvx]cvx bind def
}bind def
/MF{
findfont
[5 2 roll
0 3 1 roll
neg 0 0]makefont
dup setfont
[exch/setfont cvx]cvx bind def
}bind def
/level0 0 def
/RES 0 def
/PL 0 def
/LS 0 def
/MANUAL{
statusdict begin/manualfeed true store end
}bind def
/PLG{
gsave newpath clippath pathbbox grestore
exch pop add exch pop
}bind def
/BP{
/level0 save def
1 setlinecap
1 setlinejoin
72 RES div dup scale
LS{
90 rotate
}{
0 PL translate
}ifelse
1 -1 scale
}bind def
/EP{
level0 restore
showpage
}bind def
/DA{
newpath arcn stroke
}bind def
/SN{
transform
.25 sub exch .25 sub exch
round .25 add exch round .25 add exch
itransform
}bind def
/DL{
SN
moveto
SN
lineto stroke
}bind def
/DC{
newpath 0 360 arc closepath
}bind def
/TM matrix def
/DE{
TM currentmatrix pop
translate scale newpath 0 0 .5 0 360 arc closepath
TM setmatrix
}bind def
/RC/rcurveto load def
/RL/rlineto load def
/ST/stroke load def
/MT/moveto load def
/CL/closepath load def
/FL{
currentgray exch setgray fill setgray
}bind def
/BL/fill load def
/LW/setlinewidth load def
/RE{
findfont
dup maxlength 1 index/FontName known not{1 add}if dict begin
{
1 index/FID ne{def}{pop pop}ifelse
}forall
/Encoding exch def
dup/FontName exch def
currentdict end definefont pop
}bind def
/DEFS 0 def
/EBEGIN{
moveto
DEFS begin
}bind def
/EEND/end load def
/CNT 0 def
/level1 0 def
/PBEGIN{
/level1 save def
translate
div 3 1 roll div exch scale
neg exch neg exch translate
0 setgray
0 setlinecap
1 setlinewidth
0 setlinejoin
10 setmiterlimit
[]0 setdash
/setstrokeadjust where{
pop
false setstrokeadjust
}if
/setoverprint where{
pop
false setoverprint
}if
newpath
/CNT countdictstack def
userdict begin
/showpage{}def
}bind def
/PEND{
clear
countdictstack CNT sub{end}repeat
level1 restore
}bind def
end def
/setpacking where{
pop
setpacking
}if
%%EndResource
%%IncludeResource: font Times-Roman
%%IncludeResource: font Times-Bold
%%IncludeResource: font Times-Italic
grops begin/DEFS 1 dict def DEFS begin/u{.001 mul}bind def end/RES 72
def/PL 792 def/LS false def/ENC0[/asciicircum/asciitilde/Scaron/Zcaron
/scaron/zcaron/Ydieresis/trademark/quotesingle/.notdef/.notdef/.notdef
/.notdef/.notdef/.notdef/.notdef/.notdef/.notdef/.notdef/.notdef/.notdef
/.notdef/.notdef/.notdef/.notdef/.notdef/.notdef/.notdef/.notdef/.notdef
/.notdef/.notdef/space/exclam/quotedbl/numbersign/dollar/percent
/ampersand/quoteright/parenleft/parenright/asterisk/plus/comma/hyphen
/period/slash/zero/one/two/three/four/five/six/seven/eight/nine/colon
/semicolon/less/equal/greater/question/at/A/B/C/D/E/F/G/H/I/J/K/L/M/N/O
/P/Q/R/S/T/U/V/W/X/Y/Z/bracketleft/backslash/bracketright/circumflex
/underscore/quoteleft/a/b/c/d/e/f/g/h/i/j/k/l/m/n/o/p/q/r/s/t/u/v/w/x/y
/z/braceleft/bar/braceright/tilde/.notdef/quotesinglbase/guillemotleft
/guillemotright/bullet/florin/fraction/perthousand/dagger/daggerdbl
/endash/emdash/ff/fi/fl/ffi/ffl/dotlessi/dotlessj/grave/hungarumlaut
/dotaccent/breve/caron/ring/ogonek/quotedblleft/quotedblright/oe/lslash
/quotedblbase/OE/Lslash/.notdef/exclamdown/cent/sterling/currency/yen
/brokenbar/section/dieresis/copyright/ordfeminine/guilsinglleft
/logicalnot/minus/registered/macron/degree/plusminus/twosuperior
/threesuperior/acute/mu/paragraph/periodcentered/cedilla/onesuperior
/ordmasculine/guilsinglright/onequarter/onehalf/threequarters
/questiondown/Agrave/Aacute/Acircumflex/Atilde/Adieresis/Aring/AE
/Ccedilla/Egrave/Eacute/Ecircumflex/Edieresis/Igrave/Iacute/Icircumflex
/Idieresis/Eth/Ntilde/Ograve/Oacute/Ocircumflex/Otilde/Odieresis
/multiply/Oslash/Ugrave/Uacute/Ucircumflex/Udieresis/Yacute/Thorn
/germandbls/agrave/aacute/acircumflex/atilde/adieresis/aring/ae/ccedilla
/egrave/eacute/ecircumflex/edieresis/igrave/iacute/icircumflex/idieresis
/eth/ntilde/ograve/oacute/ocircumflex/otilde/odieresis/divide/oslash
/ugrave/uacute/ucircumflex/udieresis/yacute/thorn/ydieresis]def
/Times-Italic@0 ENC0/Times-Italic RE/Times-Bold@0 ENC0/Times-Bold RE
/Times-Roman@0 ENC0/Times-Roman RE
%%EndProlog
%%Page: 1 1
%%BeginPageSetup
BP
%%EndPageSetup
/F0 10/Times-Roman@0 SF(MAILBO)72 48 Q 349.66(X\(8\) MAILBO)-.4 F
(X\(8\))-.4 E/F1 9/Times-Bold@0 SF -.18(NA)72 84 S(ME).18 E F0
(mailbox \255 zmailer local deli)108 96 Q -.15(ve)-.25 G
(ry transport agent).15 E F1(SYNOPSIS)72 112.8 Q/F2 10/Times-Bold@0 SF
(mailbox)108 124.8 Q F0([)2.5 E F2<ad63>2.5 E/F3 10/Times-Italic@0 SF
-.15(ch)2.5 G(annel).15 E F0 2.5(][)2.5 G F2<ad68>A F3(localpart)2.5 E
F0 2.5(][)2.5 G F2<ad6c>A F3(lo)2.5 E(g\214le)-.1 E F0 2.5(][)2.5 G F2
(\2558abDCHPrSVX)A F0(])2.5 E F1(DESCRIPTION)72 141.6 Q F3(mailbox)108
153.6 Q F0 .29
(is a ZMailer transport agent which is usually only run by the)2.79 F F3
(sc)2.79 E(heduler)-.15 E F0 .29(\(8\) program to deli).73 F -.15(ve)
-.25 G 2.79(rm).15 G(ail)-2.79 E 1.083(to local user mailbox \214les.)
108 165.6 R(The)6.083 E F3(mailbox)3.583 E F0 1.083
(program must be run with root pri)3.583 F(vile)-.25 E 1.083(ges and in)
-.15 F -.2(vo)-.4 G -.1(ke).2 G 3.583(dw).1 G 1.083(ith the)-3.583 F
(same current directory as the)108 177.6 Q F3(sc)2.5 E(heduler)-.15 E F0
2.5(,n).73 G(amely)-2.5 E F3(POST)2.5 E(OFFICE)-.18 E F2(/transport)A F0
(.)A(Recipient addresses are processed as follo)108 194.4 Q(ws:)-.25 E
2.5<ad53>144 211.2 S(trip doublequotes around the address, if an)-2.5 E
-.65(y.)-.15 G 2.5<ad53>144 228 S(trip pre\214xing backslashes, if an)
-2.5 E -.65(y.)-.15 G 3.705<ad49>144 244.8 S 3.705(ft)-3.705 G 1.204(he\
 address starts with a '|', the rest of the recipient address string is\
 interpreted as a shell)-3.705 F(command to be run.)144 256.8 Q 2.5
<ad49>144 273.6 S 2.5(ft)-2.5 G(he address starts with a '/', the recip\
ient address is a \214lename to append the message to.)-2.5 E 2.5<ad4f>
144 290.4 S(therwise the recipient address must be a local user id.)-2.5
E 3.014<ad49>144 307.2 S 3.014(fu)-3.014 G .514(ser is not found, and t\
he \214rst character of the address is a capital letter)-3.014 F 3.015
(,t)-.4 G .515(he entire address is)-3.015 F(folded to lo)144 319.2 Q
(wercase and the user lookup is retried.)-.25 E .188(If deli)108 336 R
-.15(ve)-.25 G .187(ring to a user mailbox \().15 F F2(MAILBO)A(X)-.4 E
F0(/)A F3(userid)A F0 2.687(\)w)C .187(hich doesn')-2.687 F 2.687(te)
-.18 G(xist,)-2.837 E F3(mailbox)2.687 E F0 .187(will try to create it.)
2.687 F .187(If the)5.187 F F2(MAILBO)108 348 Q(X)-.4 E F0 .275(directo\
ry is mounted from a remote system this will succeed if the directory i\
s group-writable.)2.774 F(Some sanity checks are done on deli)108 364.8
Q -.15(ve)-.25 G(ries to \214les and mailbox).15 E(es:)-.15 E 2.5<ad54>
144 381.6 S(he \214le being deli)-2.5 E -.15(ve)-.25 G(red to must ha)
.15 E .3 -.15(ve 1 l)-.2 H(ink only).15 E 2.5(,a)-.65 G
(nd must be either /de)-2.5 E(v/null or a re)-.25 E(gular \214le.)-.15 E
2.5<ad54>144 398.4 S(he \214le lock must be held.)-2.5 E(\(See belo)5 E
2.5(wf)-.25 G(or a chapter about locks.\))-2.5 E .461
(There is a further sanity check on mailbox deli)108 415.2 R -.15(ve)
-.25 G .46(ries, namely if the mailbox is not empty the).15 F F3
(mailbox)2.96 E F0(pro-)2.96 E .505(gram will enforce 2 ne)108 427.2 R
.506(wlines as a separator before the message to be deli)-.25 F -.15(ve)
-.25 G 3.006(red. This).15 F .506(guarantees that User)3.006 F .155
(Agents, lik)108 439.2 R(e)-.1 E F3(Mail)2.655 E F0 .155
(\(1\), can \214nd the about-to-be deli).51 F -.15(ve)-.25 G .154
(red message e).15 F -.15(ve)-.25 G 2.654(ni).15 G 2.654(ft)-2.654 G
.154(he current contents of the mailbox)-2.654 F(is corrupt.)108 451.2 Q
.187(When deli)108 468 R -.15(ve)-.25 G .187
(ring to a process \(by starting a Bourne shell to e).15 F -.15(xe)-.15
G .187(cute a speci\214ed command line\), the en).15 F(viron-)-.4 E .882
(ment is set up to contain se)108 480 R -.15(ve)-.25 G .882(ral v).15 F
.882(ariables which are listed belo)-.25 F 3.382(wa)-.25 G 3.382(tt)
-3.382 G .882(he `)-3.382 F .881(`Subprogram En)-.74 F .881(vironment V)
-.4 F(ari-)-1.11 E(ables')108 492 Q 2.852('s)-.74 G 2.852(ection. The)
-2.852 F F2(SIGINT)2.852 E F0(and)2.852 E F2(SIGHUP)2.852 E F0 .353
(signals are ignored, b)2.853 F(ut)-.2 E F2(SIGTERM)2.853 E F0 .353
(is treated normally)2.853 F 5.353(.I)-.65 G 2.853(ft)-5.353 G(he)-2.853
E 1.265(process dumps core, it will be retried later)108 504 R 6.265(.S)
-.55 G 1.265(ub-process e)-6.265 F 1.264
(xit codes are interpreted according to <syse)-.15 F(x-)-.15 E 3.324
(its.h> codes, and of those EX_NOPERM, EX_UN)108 516 R -1.35(AVA)-.35 G
3.325(ILABLE, EX_NOHOST)1.35 F 5.825(,E)-.74 G 3.325(X_NOUSER, and)
-5.825 F(EX_D)108 528 Q -1.21 -1.11(AT A)-.4 H(ERR are treated as perma\
nent errors, all others are treated as temporary f)1.11 E(ailures.)-.1 E
.801(The actual data deli)108 544.8 R -.15(ve)-.25 G .801
(red to a \214le, mailbox, or process, is identical.).15 F .8
(It consists of the concationation of a)5.8 F .372(UUCP style separator\
 line, the message header speci\214ed in the message control \214le, an\
d the message body)108 556.8 R .108(from the original message \214le.)
108 568.8 R .107(The separator line starts with "From " and is follo)
5.107 F .107(wed by the sender address)-.25 F(and a timestamp.)108 580.8
Q 1.321(After all deli)108 597.6 R -.15(ve)-.25 G 1.321
(ries and just before e).15 F 1.321(xiting, the)-.15 F F3(mailbox)3.821
E F0 1.321(process will pok)3.821 F(e)-.1 E F3(comsat)3.822 E F0 1.322
(\(8C\) in case recipients).68 F(ha)108 609.6 Q .611 -.15(ve t)-.2 H
.311(urned on).15 F F3(bif)2.811 E(f)-.18 E F0 2.811(\(1\). The)1.96 F
.31(program may be compiled to look in the rwho \214les on the system f\
or recipient)2.811 F .142
(names logged onto neighbouring hosts, in which case the)108 621.6 R F3
(comsat)2.643 E F0 .143(on the remote host will be pok)2.643 F 2.643
(ed. Ev)-.1 F .143(en if)-.15 F 1.105(this compile-time option is enabl\
ed, this will only be done for users that ha)108 633.6 R 1.405 -.15
(ve a)-.2 H F2(.rbiff)3.754 E F0 1.104(\214le in their home)3.604 F
(directory)108 645.6 Q 5(.\()-.65 G(Unless an '-DRBIFF_AL)-5 E -1.15
-1.2(WA Y)-.74 H(S' compile option is used.\))1.2 E F1(OPTIONS)72 662.4
Q F0<ad63>108 674.4 Q F3 -.15(ch)2.5 G(annel).15 E F0
(speci\214es which channel name should be k)144 686.4 Q -.15(ey)-.1 G
(ed on.).15 E(The def)5 E(ault is)-.1 E F2(local)2.5 E F0(.)A<ad68>108
703.2 Q F3("localpart")2.5 E F0 1.482
(speci\214es which of the possible multiple recipients is to be pick)144
715.2 R 1.482(ed this time. Def)-.1 F 1.482(ault is "none",)-.1 F .975
(which selects all local channel recipients, ho)144 727.2 R(we)-.25 E
-.15(ve)-.25 G 3.475(rw).15 G .975
(hen the routing is done with scripts storing)-3.475 F 2.5(3J)284.335
768 S(an 2000)-2.5 E(1)207.335 E EP
%%Page: 2 2
%%BeginPageSetup
BP
%%EndPageSetup
/F0 10/Times-Roman@0 SF(MAILBO)72 48 Q 349.66(X\(8\) MAILBO)-.4 F
(X\(8\))-.4 E .548(some tok)144 84 R .549(ens \(other than "\255"\) int\
o the "host"-part, it is possible to process "host-wise", i.e. so that)
-.1 F(each)144 96 Q/F1 10/Times-Bold@0 SF(user)2.5 E F0(has his/her o)
2.5 E(wn lock-state, and not just e)-.25 E -.15(ve)-.25 G
(rybody hang on the same lock\(s\)..).15 E<ad6c>108 112.8 Q/F2 10
/Times-Italic@0 SF(lo)2.5 E(g\214le)-.1 E F0 .58
(speci\214es a log\214le.)144 124.8 R .579
(Each entry is a line containing message id, pre-e)5.58 F .579
(xisting mailbox size in bytes,)-.15 F
(number of bytes appended, and the \214le name or command line deli)144
136.8 Q -.15(ve)-.25 G(red to.).15 E 20.64(\255V prints)108 153.6 R 2.5
(av)2.5 G(ersion message and e)-2.65 E(xits.)-.15 E 23.42(\255a the)108
170.4 R .339(access time on mailbox \214les is, by def)2.838 F .339
(ault, preserv)-.1 F .339(ed across deli)-.15 F -.15(ve)-.25 G(ry).15 E
2.839(,s)-.65 G 2.839(ot)-2.839 G .339(hat programs such as)-2.839 F F2
(lo)144 182.4 Q(gin)-.1 E F0(\(1\) can determine if ne).24 E 2.5(wm)-.25
G(ail has arri)-2.5 E -.15(ve)-.25 G 2.5(d. This).15 F
(option disables the abo)2.5 E .3 -.15(ve a)-.15 H(ction.).15 E 22.86
(\255b disables)108 199.2 R(bif)2.5 E 2.5(fn)-.25 G(oti\214cation.)-2.5
E 24.53(\255r disables)108 216 R(remote bif)2.5 E 2.5(fn)-.25 G
(oti\214cation \(if supported\).)-2.5 E 22.86(\2558 enables)108 232.8 R
2.634(MIME-QP-decoder to decode incoming MIME-email with Quoted-Printab\
le encoded)5.134 F(characters.)144 244.8 Q 18.97(\255M enables)108 261.6
R .267
(the creation of MMDF-style mail-folder in the incoming mail folder)
2.767 F 5.267(.T)-.55 G .267(he def)-5.267 F .268(ault is "clas-)-.1 F
(sic" UNIX-style folder)144 273.6 Q(.)-.55 E 21.19(\255C Canonify)108
290.4 R .083(username by using internally v)2.583 F .083
(ersion of username recei)-.15 F -.15(ve)-.25 G 2.583(di).15 G(n)-2.583
E F2(pw_name)2.583 E F0 .083(\214eld of the)2.583 F F2 -.1(ge)2.582 G
(tp-).1 E(wnam\(\))144 302.4 Q F0(call result.)2.5 E 6.76(\255D[D] F)108
319.2 R .302(or a user with is)-.15 F F2(abcdef)2.802 E F0 2.802(,o)1.96
G(ne)-2.802 E F2<ad44>2.802 E F0 .302
(will place the mailbox \214le into directory)2.802 F F2($MAILBO)2.802 E
(X/a/abcdef)-.4 E F0(.)1.96 E -.4(Wi)144 331.2 S(th).4 E F2(\255DD)2.5 E
F0(the mailbox \214le will be placed into directory:)2.5 E F2($MAILBO)
2.5 E(X/a/b/abcdef)-.4 E F0(.)1.96 E 10.08(\255P[P] This)108 348 R .808
(uses much of similar method as)3.308 F F2(\255D[D])3.308 E F0 .808
(option, b)3.308 F .808(ut directory names are deri)-.2 F -.15(ve)-.25 G
3.308(df).15 G .808(rom much)-3.308 F(more smoothly distrib)144 360 Q
(uting hash function o)-.2 E -.15(ve)-.15 G 2.5(ru).15 G
(ser names, namely:)-2.5 E F2(pjwhash32\(\))2.5 E F0(.).06 E -.4(Wi)144
384 S .315(th one).4 F F2<ad50>2.815 E F0 2.816(,t).44 G .316
(he calculated hash v)-2.816 F .316(alue is used by formula:)-.25 F F2
('A)2.816 E .316('+\(hash % 26\))-.37 F F0 .316(to produce one mid-)
2.816 F(le)144 396 Q -.15(ve)-.25 G 2.525(ld).15 G(irectory)-2.525 E
5.025(.W)-.65 G(ith)-5.425 E F2(\255PP)2.525 E F0 .025
(the formula is more comple)2.525 F .025
(x: upper directory uses formula:)-.15 F F2('A)2.524 E 2.524('+\()-.37 G
(hash)-2.524 E 2.5(/2)144 408 S(6\) % 26)-2.5 E F0(and lo)2.5 E
(wer uses formula:)-.25 E F2('A)2.5 E('+\(hash % 26\))-.37 E F0 1.127
(The result of these)144 432 R F2(\255P[P])3.627 E F0(deri)3.627 E -.15
(ve)-.25 G 3.627(dd).15 G 1.128(irectory paths is something lik)-3.627 F
(e:)-.1 E F2($MAILBO)3.628 E(X/X/username)-.4 E F0(or)3.628 E F2
($MAILBO)144 444 Q(X/Y/X/username)-.4 E F0 6.76(\255X[X] This)108 472.8
R 2.278(is similar to)4.778 F F2(\255P[P])4.778 E F0 2.278(option, b)
4.778 F 2.278(ut used hash function is)-.2 F F2(cr)4.778 E(c32\(\))-.37
E F0 7.278(.R).06 G 2.277(esulting distrib)-7.278 F 2.277(ution is)-.2 F
(slightly dif)144 484.8 Q(ferent, and in f)-.25 E(act quite smooth.)-.1
E 22.3(\255S This)108 513.6 R .502(option enables `)3.002 F
(`Return-Receipt-T)-.74 E(o:')-.8 E 3.002('m)-.74 G .502
(essage header recognition and processing along with)-3.002 F 2.688
(sending receipt to gi)144 525.6 R -.15(ve)-.25 G 5.188(na).15 G
(ddress.)-5.188 E F2(\(Ne)7.688 E 2.688(wer sendmails don')-.15 F 5.187
(ta)-.3 G(nymor)-5.187 E 5.187(es)-.37 G 2.687(upport this facility per)
-5.187 F(default..\))144 537.6 Q/F3 9/Times-Bold@0 SF(INTERF)72 554.4 Q
-.495(AC)-.81 G(E).495 E F0 1.524
(This program reads in processable \214le names relati)108 566.4 R 1.825
-.15(ve t)-.25 H 4.025(ot).15 G 1.525(he current w)-4.025 F 1.525
(orking directory of the scheduler)-.1 F(\(namely:)108 578.4 Q F2
($POSTIOFFICE/tr)2.933 E(ansport/)-.15 E F0 2.933(\). Optionally)B .433
(on the same line the scheduler may tell which host is to)2.933 F
(be look)108 590.4 Q(ed for from the recipients of the message.)-.1 E F2
-.37(re)144 607.2 S(lative-spool-path).37 E F0 2.5([<)2.5 G -.93(TA)-2.5
G(B>).93 E F2(hostname)2.5 E F0(])2.5 E
(This program produces diagnostic output on the standard output.)108 624
Q(Normal diagnostic output is of the form:)5 E F2(id)144 640.8 Q F0(/)A
F2(of)A(fset)-.18 E F0(<T)A(AB>)-.93 E F2(notify-data)A F0(<T)A(AB>)-.93
E F2(status messa)A -.1(ge)-.1 G F0(where)108 657.6 Q F2(id)3.665 E F0
1.165(is the inode number of the message \214le,)3.665 F F2(of)3.665 E
(fset)-.18 E F0 1.166(is a byte of)3.666 F 1.166
(fset within its control \214le where the)-.25 F .915
(address being reported on is k)108 669.6 R(ept,)-.1 E F2(status)3.415 E
F0 .915(is one of)3.415 F F1(ok)3.415 E F0(,)A F1(err)3.415 E(or)-.18 E
F0 3.415(,o)C(r)-3.415 E F1(deferr)3.415 E(ed)-.18 E F0 3.415(,a)C .915
(nd the)-3.415 F F2(messa)3.415 E -.1(ge)-.1 G F0 .915(is descripti)
3.515 F -.15(ve)-.25 G(te)108 681.6 Q .85
(xt associated with the report.)-.15 F .85(The te)5.85 F .85
(xt is terminated by a linefeed.)-.15 F(An)5.85 E 3.35(yo)-.15 G .85
(ther format \(as might be pro-)-3.35 F(duced by subprocesses\) is pass\
ed to standard output for logging in the)108 693.6 Q F1(scheduler)2.5 E
F0(log.)2.5 E(The e)108 710.4 Q(xit status is a code from)-.15 E F1
(<sysexits.h>)2.5 E F0(.)A 2.5(3J)284.335 768 S(an 2000)-2.5 E(2)207.335
E EP
%%Page: 3 3
%%BeginPageSetup
BP
%%EndPageSetup
/F0 10/Times-Roman@0 SF(MAILBO)72 48 Q 349.66(X\(8\) MAILBO)-.4 F
(X\(8\))-.4 E/F1 9/Times-Bold@0 SF(LOCKS)72 84 Q F0 1.016(Locking schem\
e used at the system is con\214gurable at the runtime, and has separate\
 parameters for mail-)108 96 R(box)108 108 Q .112(es, and \214les.)-.15
F .112(The data is con\214gurable with zen)5.112 F 2.612(vv)-.4 G
(ariable)-2.862 E/F2 10/Times-Bold@0 SF(MBO)2.612 E(XLOCKS)-.4 E F0 .112
(at which follo)2.612 F .113(wing characters)-.25 F(ha)108 120 Q .3 -.15
(ve m)-.2 H(eanins:).15 E 24.06(`:' Separates)108 141.6 R .135
(mailbox locks, and \214le-locks at the string.)2.635 F .134
(The left side has mailbox locks, and the right)5.134 F
(side has locks for other re)144 153.6 Q(gular \214les. \(Files with e)
-.15 E(xplicit paths de\214ned.\))-.15 E(`.)108 170.4 Q 27.54('F)-.7 G
(or mailbox)-27.69 E(es only: Does `)-.15 E(`dotlock')-.74 E 2.5('\()
-.74 G(userid.lock\), or \(at Sun Solaris\) maillock\(\) mechanism.)-2.5
E 21.28(`F' If)108 187.2 R 1.173(the system has)3.672 F/F3 10
/Times-Italic@0 SF(\215oc)3.673 E(k\(\))-.2 E F0 1.173
(system call, uses it to lock the entire \214le.)3.673 F F3(\(Ignor)
6.173 E 1.173(ed at systems without)-.37 F(\215oc)144 199.2 Q(k\(\)!\))
-.2 E F0(`L)108 216 Q 24.15('I)-.92 G 3.64(ft)-24.15 G 1.14
(he system has)-3.64 F F3(loc)3.64 E(kf\(\))-.2 E F0 1.14
(system call, uses it to lock the entire \214le.)3.64 F F3(\(Ignor)6.14
E 1.14(ed at systems without)-.37 F(loc)144 228 Q(kf\(\)!\))-.2 E F0
(Locks are acquired in the same order as the k)108 244.8 Q .3 -.15(ey c)
-.1 H(haracters are listed.).15 E(Def)108 261.6 Q
(ault for the lockf\(\) capable systems is:)-.1 E F2(MBO)108 278.4 Q
(XLOCKS=".L:L")-.4 E F0 -1.1(Yo)108 295.2 S 4.568(uc)1.1 G 2.069(an cho\
ose insane combinations of lock mechanisms, which at some systems cause\
 locks to f)-4.568 F(ail)-.1 E(al)108 307.2 Q -.1(wa)-.1 G(ys, lik).1 E
2.5(ea)-.1 G 2.5(tL)-2.5 G(inux-2.0 series where program must not use b\
oth lockf\(\) and \215ock\(\) locks.)-2.5 E F3 .08(It is e)108 324 R
(xtr)-.2 E .08(emely important, that selected loc)-.37 F .079
(king methods ar)-.2 F 2.579(es)-.37 G .079(ame thr)-2.579 F .079
(oughout the system at all pr)-.45 F -.1(og)-.45 G -.15(ra).1 G .079
(ms try-).15 F(ing to acquir)108 336 Q 2.5(el)-.37 G(oc)-2.5 E
(ks on mail spools.)-.2 E F1(ENVIR)72 352.8 Q(ONMENT)-.27 E F0 6.098
(The def)108 364.8 R 6.098(ault location for user mailbox \214les v)-.1
F 6.098(aries per systems, b)-.25 F 6.098(ut usually it is one of:)-.2 F
F2(/v)108 376.8 Q(ar/mail)-.1 E F0(,)A F2(/v)2.5 E(ar/spool/mail)-.1 E
F0 3.18(,T)C .68(his may be modi\214ed by setting the v)-3.18 F(ariable)
-.25 E F2(MAILBO)3.18 E(X)-.4 E F0(in)3.18 E F2(/etc/zmailer)3.18 E
(.conf)-1 E F0 2.255
(to the directory containing user mailbox \214les, for e)108 388.8 R
(xample)-.15 E F2(/usr/spool/mail)4.755 E F0 7.255(.T)C 2.256
(his is best done in the)-7.255 F(ZMailer SiteCon\214g \214le.)108 400.8
Q -1.11(Va)108 417.6 S(riable)1.11 E F2(MBO)2.774 E(XLOCKS)-.4 E F0 .274
(is used to de\214ne locking schemes used for mailbox spool \214les, an\
d separately for)2.774 F(other re)108 429.6 Q(gular \214les.)-.15 E F1
(SECURITY)72 446.4 Q F0(Lik)108 458.4 Q 3.029(ea)-.1 G .529
(ll parts of the)-3.029 F F3(ZMailer)3.029 E F0 3.029(,t).73 G(he)-3.029
E F3(mailbox)3.029 E F0 .529(chooses to err into o)3.029 F -.15(ve)-.15
G .53(rtly cautious side.).15 F .53(In case of pipes being)5.53 F .352
(run under the)108 470.4 R F3(mailbox)2.852 E F0 2.852(,t).53 G .352
(he program in pipe is started thru)-2.852 F F3(/bin/sh)2.852 E F0 .352
(with se)2.852 F -.15(ve)-.25 G .352(rely sanitized en).15 F .351
(vironment v)-.4 F(ari-)-.25 E .239
(ables, and with only \214le descriptors STDIN, STDOUT)108 482.4 R 2.739
(,a)-.74 G .239(nd STDERR.)-2.739 F .24
(Programs are refused from running,)5.239 F 1.462
(if address analysis has found suspicuous data; e)108 494.4 R 1.461
(xternal messages can')-.15 F 3.961(td)-.18 G 1.461
(irectly run programs, nor those)-3.961 F 1.772(addresses that ha)108
506.4 R 2.072 -.15(ve h)-.2 H 1.772
(ad a security breach detected during).15 F F3(.forwar)4.272 E(d)-.37 E
F0 1.772(-, or other aliasing analysis.).77 F(\(Same)6.773 E
(applies also with writing into e)108 518.4 Q
(xplicitly named \214les.\))-.15 E .461
(The pipe subprogram is run with user)108 535.2 R .461
(-id it gets thru the address pri)-.2 F(vile)-.25 E .46
(ge analysis during message routing,)-.15 F .385
(and it gets the group-id thru lookup of:)108 547.2 R 2.885
(getpwuid\(uid\). That)5.385 F .385(is, if you ha)2.885 F .686 -.15
(ve m)-.2 H .386(ultiple usernames with same).15 F(uid, there are no gu\
arantees as to which of them is used for the gid entry)108 559.2 Q(.)
-.65 E .186(The pipe subprogram is started)108 576 R F2(without)2.686 E
F0 .186(use of)2.686 F F3(/bin/sh)2.686 E F0 .186
(command line interpreter \(i.e. "system\(\)" call\), when)2.686 F .705
(the command line be)108 588 R .705
(gins with slash, and does not contain characters: `$' and '>'.)-.15 F
.706(If an)5.705 F 3.206(yo)-.15 G 3.206(ft)-3.206 G .706(hose rules is)
-3.206 F 1.352(not ful\214lled, the subprogram is started with `)108 600
R 1.352(`/bin/sh -c "$cmdlinestr"')-.74 F 3.852('c)-.74 G 6.352
(all. This)-3.852 F(allo)3.852 E 1.352(ws running pipes)-.25 F 1.002
(with carefully formed parameters, when the)108 612 R F3(mailbox)3.502 E
F0 1.003(program is running inside shell-less chroot en)3.502 F(viron-)
-.4 E(ment.)108 624 Q F1(SUBPR)72 640.8 Q(OGRAM ENVIR)-.27 E(ONMENT V)
-.27 E(ARIABLES)-1.215 E F0(The)108 652.8 Q F3(mailbox)2.5 E F0
(sets follo)2.5 E(wing en)-.25 E(vironment v)-.4 E
(ariables for the subprograms it runs in the pipes:)-.25 E 4.06
(HOME The)108 669.6 R(homedirectory path is tak)2.5 E(en from abo)-.1 E
-.15(ve)-.15 G(mentioned).15 E F3 -.1(ge)2.5 G(tpwuid\(\)).1 E F0
(lookup.)2.5 E 7.94(USER Lik)108 686.4 R -.25(ew)-.1 G(ise the te).25 E
(xtual username.)-.15 E(SENDER)108 703.2 Q 1.09
(is the incoming "MAIL FR)144 715.2 R 1.09
(OM:<..>" address without brack)-.4 F 3.59(ets. F)-.1 F 1.09
(or an incoming error message,)-.15 F -.25(va)144 727.2 S
(lue "<>" is used.).25 E 2.5(3J)284.335 768 S(an 2000)-2.5 E(3)207.335 E
EP
%%Page: 4 4
%%BeginPageSetup
BP
%%EndPageSetup
/F0 10/Times-Roman@0 SF(MAILBO)72 48 Q 349.66(X\(8\) MAILBO)-.4 F
(X\(8\))-.4 E(ORCPT)108 84 Q 1.253
(when present, is the XTEXT encoded ORCPT v)144 96 R 1.253(alue recei)
-.25 F -.15(ve)-.25 G 3.753(da).15 G 3.753(tt)-3.753 G 1.253
(he message injection into this)-3.753 F 2.5(system. See)144 108 R
(RFC 1891 for details.)2.5 E(ENVID)108 124.8 Q .004
(when present, is the XTEXT encoded ENVID v)144 136.8 R .004(alue recei)
-.25 F -.15(ve)-.25 G 2.504(da).15 G 2.504(tt)-2.504 G .004
(he message injection into this sys-)-2.504 F 2.5(tem. See)144 148.8 R
(RFC 1891 for details.)2.5 E(ZCONFIG)108 165.6 Q
(is the location of the ZMailer ZENV \214le.)144 177.6 Q(MAILBIN)108
194.4 Q(is the v)144 206.4 Q(alue from ZENV)-.25 E(.)-1.29 E(MAILSHARE)
108 223.2 Q(is the v)144 235.2 Q(alue from ZENV)-.25 E(.)-1.29 E -.92
(PA)108 252 S 9.42(TH is)-.19 F(the v)2.5 E(alue from ZENV)-.25 E 2.5
(,o)-1.29 G 2.5(r")-2.5 G(/usr/bin:/bin:/usr/ucb" in case no ZENV v)-2.5
E(alue is a)-.25 E -.25(va)-.2 G(ilable.).25 E(SHELL)108 268.8 Q
(is constant v)144 280.8 Q(alue: "/bin/sh".)-.25 E 19.05(IFS is)108
297.6 R(constant v)2.5 E(alue: " \\t\\n".)-.25 E 21.28(TZ is)108 314.4 R
-.25(va)3.548 G 1.048(lue from scheduler').25 F 3.548(se)-.55 G -.4(nv)
-3.548 G 1.048(ironment v).4 F 1.048(ariables via normal en)-.25 F 1.048
(vironment inheritance rules.)-.4 F(Sup-)6.049 E .423(posedly that of)
144 326.4 R/F1 10/Times-Italic@0 SF(systemwide)2.923 E F0 .423
(time-zone setting.)2.923 F -1.27 -.74(Av a)5.423 H .423
(ilable to subprogram only if set when the).74 F F1(mail-)2.922 E(box)
144 338.4 Q F0 -.1(wa)2.5 G 2.5(ss).1 G(tarted.)-2.5 E/F2 9/Times-Bold@0
SF(FILES)72 355.2 Q F1(/etc/zmailer)108 367.2 Q(.conf)-1.11 E
(/var/spool/postof)108 379.2 Q(\214ce \(POST)-.18 E(OFFICE\))-.18 E
(/var/mail \(MAILBO)108 391.2 Q(X\))-.4 E F2(SEE ALSO)72 408 Q F0
(scheduler\(8\), comsat\(8C\), bif)108 420 Q
(f\(1\), \215ock\(2\), Mail\(1\), mboxpath\(1\))-.25 E F2 -.45(AU)72
436.8 S(THOR).45 E F0(This program authored and cop)108 448.8 Q
(yright by:)-.1 E(Rayan Zachariassen <rayan@cs.toronto.edu>)108 460.8 Q
(Extensi)108 472.8 Q .3 -.15(ve m)-.25 H(odi\214cations by:).15 E
(Matti Aarnio <mea@nic.funet.\214>)108 484.8 Q 2.5(3J)284.335 768 S
(an 2000)-2.5 E(4)207.335 E EP
%%Trailer
end
%%EOF
