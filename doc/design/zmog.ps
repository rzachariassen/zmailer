%!PS-Adobe-2.0
%%Creator: dvipsk 5.58f Copyright 1986, 1994 Radical Eye Software
%%Title: zmog.dvi
%%Pages: 72
%%PageOrder: Ascend
%%BoundingBox: 0 0 596 842
%%DocumentPaperSizes: a4
%%EndComments
%DVIPSCommandLine: dvips zmog
%DVIPSParameters: dpi=300, comments removed
%DVIPSSource:  TeX output 1997.06.09:1347
%%BeginProcSet: tex.pro
/TeXDict 250 dict def TeXDict begin /N{def}def /B{bind def}N /S{exch}N
/X{S N}B /TR{translate}N /isls false N /vsize 11 72 mul N /hsize 8.5 72
mul N /landplus90{false}def /@rigin{isls{[0 landplus90{1 -1}{-1 1}
ifelse 0 0 0]concat}if 72 Resolution div 72 VResolution div neg scale
isls{landplus90{VResolution 72 div vsize mul 0 exch}{Resolution -72 div
hsize mul 0}ifelse TR}if Resolution VResolution vsize -72 div 1 add mul
TR[matrix currentmatrix{dup dup round sub abs 0.00001 lt{round}if}
forall round exch round exch]setmatrix}N /@landscape{/isls true N}B
/@manualfeed{statusdict /manualfeed true put}B /@copies{/#copies X}B
/FMat[1 0 0 -1 0 0]N /FBB[0 0 0 0]N /nn 0 N /IE 0 N /ctr 0 N /df-tail{
/nn 8 dict N nn begin /FontType 3 N /FontMatrix fntrx N /FontBBox FBB N
string /base X array /BitMaps X /BuildChar{CharBuilder}N /Encoding IE N
end dup{/foo setfont}2 array copy cvx N load 0 nn put /ctr 0 N[}B /df{
/sf 1 N /fntrx FMat N df-tail}B /dfs{div /sf X /fntrx[sf 0 0 sf neg 0 0]
N df-tail}B /E{pop nn dup definefont setfont}B /ch-width{ch-data dup
length 5 sub get}B /ch-height{ch-data dup length 4 sub get}B /ch-xoff{
128 ch-data dup length 3 sub get sub}B /ch-yoff{ch-data dup length 2 sub
get 127 sub}B /ch-dx{ch-data dup length 1 sub get}B /ch-image{ch-data
dup type /stringtype ne{ctr get /ctr ctr 1 add N}if}B /id 0 N /rw 0 N
/rc 0 N /gp 0 N /cp 0 N /G 0 N /sf 0 N /CharBuilder{save 3 1 roll S dup
/base get 2 index get S /BitMaps get S get /ch-data X pop /ctr 0 N ch-dx
0 ch-xoff ch-yoff ch-height sub ch-xoff ch-width add ch-yoff
setcachedevice ch-width ch-height true[1 0 0 -1 -.1 ch-xoff sub ch-yoff
.1 sub]{ch-image}imagemask restore}B /D{/cc X dup type /stringtype ne{]}
if nn /base get cc ctr put nn /BitMaps get S ctr S sf 1 ne{dup dup
length 1 sub dup 2 index S get sf div put}if put /ctr ctr 1 add N}B /I{
cc 1 add D}B /bop{userdict /bop-hook known{bop-hook}if /SI save N @rigin
0 0 moveto /V matrix currentmatrix dup 1 get dup mul exch 0 get dup mul
add .99 lt{/QV}{/RV}ifelse load def pop pop}N /eop{SI restore userdict
/eop-hook known{eop-hook}if showpage}N /@start{userdict /start-hook
known{start-hook}if pop /VResolution X /Resolution X 1000 div /DVImag X
/IE 256 array N 0 1 255{IE S 1 string dup 0 3 index put cvn put}for
65781.76 div /vsize X 65781.76 div /hsize X}N /p{show}N /RMat[1 0 0 -1 0
0]N /BDot 260 string N /rulex 0 N /ruley 0 N /v{/ruley X /rulex X V}B /V
{}B /RV statusdict begin /product where{pop product dup length 7 ge{0 7
getinterval dup(Display)eq exch 0 4 getinterval(NeXT)eq or}{pop false}
ifelse}{false}ifelse end{{gsave TR -.1 .1 TR 1 1 scale rulex ruley false
RMat{BDot}imagemask grestore}}{{gsave TR -.1 .1 TR rulex ruley scale 1 1
false RMat{BDot}imagemask grestore}}ifelse B /QV{gsave newpath transform
round exch round exch itransform moveto rulex 0 rlineto 0 ruley neg
rlineto rulex neg 0 rlineto fill grestore}B /a{moveto}B /delta 0 N /tail
{dup /delta X 0 rmoveto}B /M{S p delta add tail}B /b{S p tail}B /c{-4 M}
B /d{-3 M}B /e{-2 M}B /f{-1 M}B /g{0 M}B /h{1 M}B /i{2 M}B /j{3 M}B /k{
4 M}B /w{0 rmoveto}B /l{p -4 w}B /m{p -3 w}B /n{p -2 w}B /o{p -1 w}B /q{
p 1 w}B /r{p 2 w}B /s{p 3 w}B /t{p 4 w}B /x{0 S rmoveto}B /y{3 2 roll p
a}B /bos{/SS save N}B /eos{SS restore}B end
%%EndProcSet
TeXDict begin 39158280 55380996 1000 300 300 (zmog.dvi)
@start /Fa 15 90 df<000700000007000000070000000F8000000F8000001FC000001F
C000001FC000003FE0000037E0000037E0000063F0000063F0000063F00000C1F80000C1
F80000C1F8000180FC000180FC000180FC0003007E0003FFFE0007FFFF0006003F000600
3F000E001F800C001F800C001F801C000FC0FF80FFF8FF80FFF81D1F7E9E22>65
D<FFFFFF00FFFFFF000FC01F000FC00F000FC007000FC003000FC003800FC001800FC001
800FC181800FC181800FC180000FC180000FC380000FFF80000FFF80000FC380000FC180
000FC180000FC180C00FC180C00FC000C00FC001800FC001800FC001800FC003800FC003
800FC007800FC03F00FFFFFF00FFFFFF001A1F7E9E1E>69 D<FFFFFEFFFFFE0FC03E0FC0
0E0FC00E0FC0060FC0070FC0030FC0030FC1830FC1830FC1800FC1800FC3800FFF800FFF
800FC3800FC1800FC1800FC1800FC1800FC0000FC0000FC0000FC0000FC0000FC0000FC0
000FC000FFFE00FFFE00181F7E9E1D>I<000FF010007FFC7001FC0EF003E003F00FC001
F01F8000F01F8000F03F0000703F0000707E0000307E000030FE000030FE000000FE0000
00FE000000FE000000FE000000FE00FFFEFE00FFFEFE0003F07E0003F07E0003F03F0003
F03F0003F01F8003F01F8003F00FC003F003F007F001FC0FF0007FFC70000FF0301F1F7E
9E24>I<FFFCFFFC0FC00FC00FC00FC00FC00FC00FC00FC00FC00FC00FC00FC00FC00FC0
0FC00FC00FC00FC00FC00FC00FC00FC00FC00FC00FC00FC00FC0FFFCFFFC0E1F7E9E12>
73 D<FFFE00FFFE000FC0000FC0000FC0000FC0000FC0000FC0000FC0000FC0000FC000
0FC0000FC0000FC0000FC0000FC0000FC0000FC0000FC0000FC00C0FC00C0FC00C0FC00C
0FC01C0FC01C0FC0180FC0380FC0780FC1F8FFFFF8FFFFF8161F7E9E1B>76
D<FFC0000FFCFFE0001FFC0FE0001FC00FE0001FC00DF00037C00DF00037C00DF00037C0
0CF80067C00CF80067C00C7C00C7C00C7C00C7C00C7C00C7C00C3E0187C00C3E0187C00C
3E0187C00C1F0307C00C1F0307C00C1F0307C00C0F8607C00C0F8607C00C07CC07C00C07
CC07C00C07CC07C00C03F807C00C03F807C00C03F807C00C01F007C00C01F007C00C00E0
07C0FFC0E07FFCFFC0E07FFC261F7E9E2B>I<FFC007FEFFC007FE0FE000600FF000600D
F800600DF800600CFC00600C7E00600C7E00600C3F00600C1F80600C0FC0600C0FC0600C
07E0600C03F0600C03F8600C01F8600C00FC600C007E600C007E600C003F600C001FE00C
000FE00C000FE00C0007E00C0003E00C0003E00C0001E00C0000E0FFC00060FFC000601F
1F7E9E24>I<003FE00000FFF80003F07E0007C01F000F800F801F800FC03F0007E03F00
07E07F0007F07E0003F07E0003F0FE0003F8FE0003F8FE0003F8FE0003F8FE0003F8FE00
03F8FE0003F8FE0003F8FE0003F87E0003F07E0003F07F0007F03F0007E03F0007E01F80
0FC00FC01F8007E03F0003F07E0000FFF800003FE0001D1F7E9E22>I<FFFFE000FFFFFC
000FC07E000FC03F000FC01F800FC01F800FC01FC00FC01FC00FC01FC00FC01FC00FC01F
C00FC01F800FC01F800FC03F000FC07E000FFFFC000FFFE0000FC000000FC000000FC000
000FC000000FC000000FC000000FC000000FC000000FC000000FC000000FC000000FC000
00FFFC0000FFFC00001A1F7E9E1F>I<FFFFE000FFFFFC000FC07E000FC03F000FC01F80
0FC01FC00FC01FC00FC01FC00FC01FC00FC01FC00FC01FC00FC01F800FC03F000FC07E00
0FFFFC000FFFE0000FC0F0000FC0F8000FC07C000FC07C000FC07E000FC07E000FC07E00
0FC07F000FC07F000FC07F000FC07F030FC03F830FC01F86FFFC0FFCFFFC03F8201F7E9E
23>82 D<03F0400FFDC01C0FC03803C07001C07001C0F000C0F000C0F000C0F80000FC00
00FF80007FF8003FFE003FFF801FFFC007FFC000FFE0000FE00003F00001F00000F0C000
F0C000F0C000F0E000E0E001E0F801C0FE0380EFFF0081FC00141F7E9E19>I<7FFFFFC0
7FFFFFC07C1F83C0701F81C0601F80C0601F80C0E01F80E0C01F8060C01F8060C01F8060
C01F8060001F8000001F8000001F8000001F8000001F8000001F8000001F8000001F8000
001F8000001F8000001F8000001F8000001F8000001F8000001F8000001F8000001F8000
07FFFE0007FFFE001B1E7E9D20>I<FFFC0FFCFFFC0FFC0FC000C00FC000C00FC000C00F
C000C00FC000C00FC000C00FC000C00FC000C00FC000C00FC000C00FC000C00FC000C00F
C000C00FC000C00FC000C00FC000C00FC000C00FC000C00FC000C00FC000C00FC000C00F
C000C007C0018007E0018003E0030001F0070000F81E00003FF800000FE0001E1F7E9E23
>I<FFF803FEFFF803FE0FC000700FE0006007E000C007F000C003F8018001F8038001FC
030000FC070000FE0600007F0E00007F0C00003F9C00001F9800001FF000000FF000000F
E0000007E0000007E0000007E0000007E0000007E0000007E0000007E0000007E0000007
E0000007E0000007E000007FFE00007FFE001F1F7F9E22>89 D E
/Fb 24 122 df<0003F07C001E0DC600380F0F00701E0F00E01E0E00E00C0001C01C0001
C01C0001C01C0001C01C0001C01C00038038007FFFFFC003803800038038000380380003
8038000700700007007000070070000700700007007000070070000E00E0000E00E0000E
00E0000E00E0000E00E0000E00E0001C01C0001E01E000FF8FFC0020207E9F1B>11
D<FFF0FFF00C027E8A0F>45 D<07F8000C0C001E06001E07001C07000007000007000007
0000FF0007C7001E07003C0E00780E00F00E10F00E10F00E10F01E10F02E20784F401F87
8014147D9317>97 D<0700003F00000F00000700000700000E00000E00000E00000E0000
0E00000E00001C00001C7C001D83001E01801C01C01C00E03800E03800F03800F03800F0
3800F03800F07001E07001E07001C07003C0700380700700E80E00CC380083E00014207B
9F19>I<00FE000383000E07801C0780380700380000780000F00000F00000F00000F000
00E00000E00000E00000F00000F001007002003804001C180007E00011147D9314>I<00
00380001F80000780000380000380000700000700000700000700000700000700000E000
FCE00382E00601E01C01E03C00E03801C07801C0F001C0F001C0F001C0F001C0E00380E0
0380E00380E00380F00380700780380F001C378007C7E015207D9F19>I<00F800070E00
0E07001C0700380380780380700380F00380F00380FFFF80F00000E00000E00000E00000
E00000F001007002003004001C180007E00011147D9314>I<0007C0001C600030F00060
F000E0E000C00001C00001C00001C00001C00001C0000380003FFC000380000380000380
000380000700000700000700000700000700000700000E00000E00000E00000E00000E00
000E00001C00001E0000FFC00014207F9F0E>I<00000E003E1100E1A301C1C20381E007
80E00701E00F01E00F01E00F01E00703C007038007870004FC000800000800001800001C
00000FFF000FFFC00FFFE01800F0300030600030C00030C00030C000306000603000C01C
070007FC00181F809417>I<00E00007E00001E00000E00000E00001C00001C00001C000
01C00001C00001C000038000038F800390E003A0E003C0600380600780E00700E00700E0
0700E00700E00700E00E01C00E01C00E01C00E01C00E01C00E01C01C03801E03C0FF8FF0
14207E9F19>I<01C003E003E003C0018000000000000000000000000003801F80078003
8003800700070007000700070007000E000E000E000E000E000E001C001E00FF800B1F7F
9E0C>I<00E007E001E000E000E001C001C001C001C001C001C003800380038003800380
03800700070007000700070007000E000E000E000E000E000E001C001E00FF800B207F9F
0C>108 D<0387C07C001F9861860007A072070003C03403000380380300078078070007
0070070007007007000700700700070070070007007007000E00E00E000E00E00E000E00
E00E000E00E00E000E00E00E000E00E00E001C01C01C001E01E01E00FFCFFCFFC022147E
9326>I<038F801F90E007A0E003C0600380600780E00700E00700E00700E00700E00700
E00E01C00E01C00E01C00E01C00E01C00E01C01C03801E03C0FF8FF014147E9319>I<00
FC000387000E01801C00C03800E03800E07000F0F000F0F000F0F000F0F000F0E001E0E0
01E0E001C0E003C0F00380700700380E001C1C0007E00014147D9317>I<00E3E00007EC
380000F01C0000E00E0000E00F0001C0070001C0078001C0078001C0078001C0078001C0
078003800F0003800F0003800E0003801E0003801C0003803800074070000761C000071F
00000700000007000000070000000E0000000E0000000E0000000E0000001E000000FFC0
0000191D809319>I<038E001FB38007C78003C780038300078000070000070000070000
0700000700000E00000E00000E00000E00000E00000E00001C00001E0000FFC00011147E
9312>114 D<01F9060708031803180138023C001F001FF007FC01FE001F400740034003
60036006F004C81887E010147F9312>I<0080010001000100030007000F001E00FFF80E
000E000E000E001C001C001C001C001C001C00380038103810381038103820382018400F
800D1C7C9B12>I<1C0380FC1F803C07801C03801C038038070038070038070038070038
0700380700700E00700E00700E00700E00701E00701E00703C00305E001F9F8011147B93
19>I<FF83F81E00E01C00C01C00801E00800E01000E03000E02000E0400070400070800
07080007100003900003A00003E00003C00003800001800001000015147C9318>I<FF9F
E1FC3C0780701C0300601C0380601C0380401C0380800E0780800E0D81000E0981000E19
C2000E11C2000F21C4000720C4000740C8000740E8000780F0000780F0000300E0000300
6000020040001E147C9321>I<1FF0FF03C07801C07001C04000E0C000E1800073000076
00003C00003C00001C00002E00004E000087000107000203800403800C01C03C03E0FE07
FC18147F9318>I<0FF83F8001E00E0001C00C0001C0080001E0080000E0100000E03000
00E0200000E040000070400000708000007080000071000000390000003A0000003E0000
003C00000038000000180000001000000010000000200000002000000040000070C00000
F0800000F1000000E600000078000000191D809318>I E /Fc 1
59 df<60F0F06004047C830C>58 D E /Fd 57 122 df<0001FF0000001FFFC000007F80
F00000FC00F80001F801F80003F803FC0007F003FC0007F003FC0007F003FC0007F001F8
0007F000F00007F000000007F000000007F000000007F0000000FFFFFFFC00FFFFFFFC00
FFFFFFFC0007F001FC0007F001FC0007F001FC0007F001FC0007F001FC0007F001FC0007
F001FC0007F001FC0007F001FC0007F001FC0007F001FC0007F001FC0007F001FC0007F0
01FC0007F001FC0007F001FC0007F001FC0007F001FC0007F001FC0007F001FC0007F001
FC007FFF1FFFC07FFF1FFFC07FFF1FFFC0222A7FA926>12 D<0001FF803FE000001FFFE3
FFF800007F80FFF01E0000FE007F801F0001F800FF003F0003F801FF007F8007F001FE00
7F8007F001FE007F8007F001FE007F8007F000FE003F0007F000FE001E0007F000FE0000
0007F000FE00000007F000FE00000007F000FE000000FFFFFFFFFFFF80FFFFFFFFFFFF80
FFFFFFFFFFFF8007F000FE003F8007F000FE003F8007F000FE003F8007F000FE003F8007
F000FE003F8007F000FE003F8007F000FE003F8007F000FE003F8007F000FE003F8007F0
00FE003F8007F000FE003F8007F000FE003F8007F000FE003F8007F000FE003F8007F000
FE003F8007F000FE003F8007F000FE003F8007F000FE003F8007F000FE003F8007F000FE
003F8007F000FE003F807FFF0FFFE3FFF87FFF0FFFE3FFF87FFF0FFFE3FFF8352A7FA939
>14 D<00030007000E001C0038007000F001E003C003C007C007800F800F001F001F003F
003E003E007E007E007E007C007C00FC00FC00FC00FC00FC00FC00FC00FC00FC00FC00FC
00FC007C007C007E007E007E003E003E003F001F001F000F000F80078007C003C003C001
E000F000700038001C000E00070003103C7AAC1B>40 D<8000C000E000700038001C001E
000F000780078007C003C003E001E001F001F001F800F800F800FC00FC00FC007C007C00
7E007E007E007E007E007E007E007E007E007E007E007E007C007C00FC00FC00FC00F800
F801F801F001F001E003E003C007C0078007800F001E001C0038007000E000C00080000F
3C7BAC1B>I<1C007F007F00FF80FFC0FFC07FC07FC01CC000C000C00180018001800300
030006000C001800300020000A157B8813>44 D<1C003E007F00FF80FF80FF807F003E00
1C0009097B8813>46 D<003F800001FFF00007E0FC000FC07E001F803F001F803F003F00
1F803F001F807F001FC07F001FC07F001FC07F001FC0FF001FE0FF001FE0FF001FE0FF00
1FE0FF001FE0FF001FE0FF001FE0FF001FE0FF001FE0FF001FE0FF001FE0FF001FE0FF00
1FE0FF001FE0FF001FE07F001FC07F001FC07F001FC07F001FC03F001F803F001F801F80
3F001F803F000FC07E0007E0FC0001FFF000003F80001B277DA622>48
D<000E00001E00007E0007FE00FFFE00FFFE00F8FE0000FE0000FE0000FE0000FE0000FE
0000FE0000FE0000FE0000FE0000FE0000FE0000FE0000FE0000FE0000FE0000FE0000FE
0000FE0000FE0000FE0000FE0000FE0000FE0000FE0000FE0000FE0000FE0000FE0000FE
007FFFFE7FFFFE7FFFFE17277BA622>I<00FF800003FFF0000FFFFC001F03FE003800FF
007C007F80FE003FC0FF003FC0FF003FE0FF001FE0FF001FE07E001FE03C003FE000003F
E000003FC000003FC000007F8000007F000000FE000000FC000001F8000003F0000003E0
0000078000000F0000001E0000003C00E0007000E000E000E001C001C0038001C0070001
C00FFFFFC01FFFFFC03FFFFFC07FFFFFC0FFFFFF80FFFFFF80FFFFFF801B277DA622>I<
007F800003FFF00007FFF8000F81FE001F00FE003F80FF003F807F803F807F803F807F80
1F807F800F007F800000FF000000FF000000FE000001FC000001F8000007F00000FFC000
00FFF0000001FC000000FE0000007F0000007F8000003FC000003FC000003FE000003FE0
3C003FE07E003FE0FF003FE0FF003FE0FF003FC0FF007FC07E007F807C007F003F01FE00
1FFFFC0007FFF00000FF80001B277DA622>I<00000E0000001E0000003E0000007E0000
00FE000000FE000001FE000003FE0000077E00000E7E00000E7E00001C7E0000387E0000
707E0000E07E0000E07E0001C07E0003807E0007007E000E007E000E007E001C007E0038
007E0070007E00E0007E00FFFFFFF8FFFFFFF8FFFFFFF80000FE000000FE000000FE0000
00FE000000FE000000FE000000FE000000FE00003FFFF8003FFFF8003FFFF81D277EA622
>I<080003001F803F001FFFFE001FFFFC001FFFF8001FFFF0001FFFE0001FFF80001FFE
00001C0000001C0000001C0000001C0000001C0000001C0000001C7FC0001DFFF8001F80
FC001E003E0008003F0000003F8000001FC000001FC000001FE000001FE018001FE07C00
1FE0FE001FE0FE001FE0FE001FE0FE001FC0FC001FC078003F8078003F803C007F001F01
FE000FFFF80003FFF00000FF80001B277DA622>I<0007F800003FFE0000FFFF0001FC07
8003F00F8007E01FC00FC01FC01FC01FC01F801FC03F800F803F8000007F0000007F0000
007F000000FF000000FF0FC000FF3FF800FF707C00FFC03E00FFC03F00FF801F80FF801F
C0FF001FC0FF001FE0FF001FE0FF001FE07F001FE07F001FE07F001FE07F001FE03F001F
E03F001FC01F801FC01F803F800FC03F0007E07E0003FFFC0000FFF000003FC0001B277D
A622>I<380000003E0000003FFFFFF03FFFFFF03FFFFFF07FFFFFE07FFFFFC07FFFFF80
7FFFFF0070000E0070000E0070001C00E0003800E0007000E000E0000001C0000001C000
000380000007800000070000000F0000001F0000001E0000003E0000003E0000007E0000
007C0000007C000000FC000000FC000000FC000000FC000001FC000001FC000001FC0000
01FC000001FC000001FC000001FC000000F80000007000001C297CA822>I<003FC00001
FFF00003FFFC0007C07E000F001F001E001F001E000F803E000F803E000F803F000F803F
800F803FC00F003FF01F001FFC1E001FFE3C000FFFF80007FFE00003FFF00001FFFC0001
FFFE0007FFFF000F0FFF801E03FFC03C01FFC07C007FE07C001FE0F8000FE0F80007E0F8
0003E0F80003E0F80003E0F80003C07C0003C07C0007803F000F001FC03E000FFFFC0003
FFF800007FC0001B277DA622>I<007F800001FFF00007FFF8000FE0FC001F807E003F80
3F007F003F007F001F80FF001F80FF001FC0FF001FC0FF001FC0FF001FE0FF001FE0FF00
1FE0FF001FE07F001FE07F003FE03F003FE01F807FE00F807FE007C1DFE003FF9FE0007E
1FE000001FE000001FC000001FC000001FC000001F803E003F807F003F807F003F007F00
7E007F007C003E00F8003E03F0001FFFE0000FFF800001FE00001B277DA622>I<1C003E
007F00FF80FF80FF807F003E001C000000000000000000000000000000000000001C003E
007F00FF80FF80FF807F003E001C00091B7B9A13>I<000003800000000007C000000000
07C0000000000FE0000000000FE0000000000FE0000000001FF0000000001FF000000000
3FF8000000003FF8000000003FF80000000073FC0000000073FC00000000F3FE00000000
E1FE00000001E1FF00000001C0FF00000001C0FF00000003C0FF80000003807F80000007
807FC0000007003FC0000007003FC000000E001FE000000E001FE000001E001FF000001C
000FF000001FFFFFF000003FFFFFF800003FFFFFF80000780007FC0000700003FC0000F0
0003FE0000E00001FE0000E00001FE0001E00001FF0001C00000FF0003C00000FF80FFFE
001FFFFEFFFE001FFFFEFFFE001FFFFE2F297EA834>65 D<00003FF001800003FFFE0380
000FFFFF8780003FF007DF8000FF8001FF8001FE00007F8003FC00003F8007F000001F80
0FF000000F801FE0000007801FE0000007803FC0000007803FC0000003807FC000000380
7F80000003807F8000000000FF8000000000FF8000000000FF8000000000FF8000000000
FF8000000000FF8000000000FF8000000000FF8000000000FF80000000007F8000000000
7F80000000007FC0000003803FC0000003803FC0000003801FE0000003801FE000000700
0FF00000070007F000000E0003FC00001E0001FE00003C0000FF8000F800003FF007E000
000FFFFFC0000003FFFF000000003FF8000029297CA832>67 D<FFFFFFF80000FFFFFFFF
8000FFFFFFFFE00003FC001FF80003FC0007FC0003FC0001FE0003FC0000FF0003FC0000
7F8003FC00003FC003FC00001FC003FC00001FE003FC00001FE003FC00000FF003FC0000
0FF003FC00000FF003FC00000FF003FC00000FF803FC00000FF803FC00000FF803FC0000
0FF803FC00000FF803FC00000FF803FC00000FF803FC00000FF803FC00000FF803FC0000
0FF803FC00000FF003FC00000FF003FC00000FF003FC00001FE003FC00001FE003FC0000
1FC003FC00003FC003FC00007F8003FC00007F0003FC0001FE0003FC0003FC0003FC001F
F800FFFFFFFFE000FFFFFFFF8000FFFFFFFC00002D297DA835>I<FFFFFFFFF0FFFFFFFF
F0FFFFFFFFF003FC000FF003FC0003F803FC0001F803FC0000F803FC00007803FC000038
03FC00003803FC00003803FC00E03C03FC00E01C03FC00E01C03FC00E01C03FC01E00003
FC01E00003FC07E00003FFFFE00003FFFFE00003FFFFE00003FC07E00003FC01E00003FC
01E00003FC00E00703FC00E00703FC00E00703FC00E00E03FC00000E03FC00000E03FC00
001E03FC00001E03FC00001C03FC00003C03FC00007C03FC0000FC03FC0001FC03FC000F
FCFFFFFFFFF8FFFFFFFFF8FFFFFFFFF828297EA82D>I<FFFFFFFFE0FFFFFFFFE0FFFFFF
FFE003FC001FE003FC0007F003FC0001F003FC0001F003FC0000F003FC00007003FC0000
7003FC00007003FC00007803FC00E03803FC00E03803FC00E03803FC00E00003FC01E000
03FC01E00003FC07E00003FFFFE00003FFFFE00003FFFFE00003FC07E00003FC01E00003
FC01E00003FC00E00003FC00E00003FC00E00003FC00E00003FC00000003FC00000003FC
00000003FC00000003FC00000003FC00000003FC00000003FC00000003FC000000FFFFFC
0000FFFFFC0000FFFFFC000025297EA82B>I<00003FF001800003FFFE0380000FFFFF87
80003FF007DF8000FF8001FF8001FE00007F8003FC00003F8007F000001F800FF000000F
801FE0000007801FE0000007803FC0000007803FC0000003807FC0000003807F80000003
807F8000000000FF8000000000FF8000000000FF8000000000FF8000000000FF80000000
00FF8000000000FF8000000000FF8000000000FF80007FFFFC7F80007FFFFC7F80007FFF
FC7FC000007F803FC000007F803FC000007F801FE000007F801FE000007F800FF000007F
8007F800007F8003FC00007F8001FE00007F8000FF8000FF80003FF003DF80000FFFFF8F
800003FFFF078000003FF801802E297CA836>I<FFFFF01FFFFEFFFFF01FFFFEFFFFF01F
FFFE03FC00007F8003FC00007F8003FC00007F8003FC00007F8003FC00007F8003FC0000
7F8003FC00007F8003FC00007F8003FC00007F8003FC00007F8003FC00007F8003FC0000
7F8003FC00007F8003FC00007F8003FC00007F8003FFFFFFFF8003FFFFFFFF8003FFFFFF
FF8003FC00007F8003FC00007F8003FC00007F8003FC00007F8003FC00007F8003FC0000
7F8003FC00007F8003FC00007F8003FC00007F8003FC00007F8003FC00007F8003FC0000
7F8003FC00007F8003FC00007F8003FC00007F8003FC00007F8003FC00007F80FFFFF01F
FFFEFFFFF01FFFFEFFFFF01FFFFE2F297DA836>I<FFFFFCFFFFFCFFFFFC01FE0001FE00
01FE0001FE0001FE0001FE0001FE0001FE0001FE0001FE0001FE0001FE0001FE0001FE00
01FE0001FE0001FE0001FE0001FE0001FE0001FE0001FE0001FE0001FE0001FE0001FE00
01FE0001FE0001FE0001FE0001FE0001FE0001FE0001FE0001FE00FFFFFCFFFFFCFFFFFC
16297EA81A>I<FFFFFC0000FFFFFC0000FFFFFC000003FC00000003FC00000003FC0000
0003FC00000003FC00000003FC00000003FC00000003FC00000003FC00000003FC000000
03FC00000003FC00000003FC00000003FC00000003FC00000003FC00000003FC00000003
FC00000003FC00000003FC00000003FC00000003FC0000E003FC0000E003FC0000E003FC
0000E003FC0001E003FC0001C003FC0001C003FC0003C003FC0003C003FC0007C003FC00
07C003FC000FC003FC003FC003FC00FF80FFFFFFFF80FFFFFFFF80FFFFFFFF8023297EA8
29>76 D<FFFE0000001FFFC0FFFE0000001FFFC0FFFF0000003FFFC003FF0000003FF000
03FF0000003FF00003BF80000077F00003BF80000077F000039FC00000E7F000039FC000
00E7F000038FE00001C7F000038FE00001C7F0000387F0000387F0000387F0000387F000
0387F0000387F0000383F8000707F0000383F8000707F0000381FC000E07F0000381FC00
0E07F0000380FE001C07F0000380FE001C07F0000380FF003807F00003807F003807F000
03807F003807F00003803F807007F00003803F807007F00003801FC0E007F00003801FC0
E007F00003800FE1C007F00003800FE1C007F00003800FE1C007F000038007F38007F000
038007F38007F000038003FF0007F000038003FF0007F000038001FE0007F000038001FE
0007F000038000FC0007F000038000FC0007F000FFFE00FC01FFFFC0FFFE007801FFFFC0
FFFE007801FFFFC03A297DA841>I<FFFFFFF800FFFFFFFF00FFFFFFFFC003FC003FE003
FC000FF003FC0007F803FC0007FC03FC0003FC03FC0003FE03FC0003FE03FC0003FE03FC
0003FE03FC0003FE03FC0003FE03FC0003FE03FC0003FC03FC0007FC03FC0007F803FC00
0FF003FC003FE003FFFFFF8003FFFFFE0003FC00000003FC00000003FC00000003FC0000
0003FC00000003FC00000003FC00000003FC00000003FC00000003FC00000003FC000000
03FC00000003FC00000003FC00000003FC00000003FC000000FFFFF00000FFFFF00000FF
FFF0000027297DA82F>80 D<0000FFE000000007FFFC0000003FC07F8000007F001FC000
01FC0007F00003F80003F80007F00001FC000FF00001FE001FE00000FF001FE00000FF00
3FC000007F803FC000007F807FC000007FC07FC000007FC07F8000003FC07F8000003FC0
FF8000003FE0FF8000003FE0FF8000003FE0FF8000003FE0FF8000003FE0FF8000003FE0
FF8000003FE0FF8000003FE0FF8000003FE0FF8000003FE07F8000003FC07F8000003FC0
7FC000007FC03FC000007F803FC000007F801FE00000FF001FE01F00FF000FF03F81FE00
07F060C1FC0003F8C063F80001FCC037F00000FFC03FE000003FE07F8000000FFFFE0000
0000FFFE00600000001E00600000001F00600000000F81E00000000FFFE00000000FFFC0
0000000FFFC000000007FFC000000007FF8000000003FF8000000003FF0000000001FE00
0000000078002B357CA834>I<FFFFFFE00000FFFFFFFE0000FFFFFFFF800003FC007FE0
0003FC000FF00003FC0007F80003FC0007FC0003FC0003FC0003FC0003FE0003FC0003FE
0003FC0003FE0003FC0003FE0003FC0003FE0003FC0003FE0003FC0003FC0003FC0007F8
0003FC0007F80003FC001FE00003FC007FC00003FFFFFE000003FFFFF8000003FC00FC00
0003FC007F000003FC003F800003FC003F800003FC001FC00003FC001FE00003FC001FE0
0003FC001FE00003FC001FE00003FC001FE00003FC001FF00003FC001FF00003FC001FF0
0003FC001FF00703FC001FF80703FC000FF80703FC0007F80EFFFFF003FE1CFFFFF001FF
F8FFFFF0003FF030297DA834>I<007F806003FFF0E007FFF9E00F807FE01F001FE03E00
07E07C0003E07C0001E0FC0001E0FC0001E0FC0000E0FE0000E0FE0000E0FF000000FFC0
00007FFE00007FFFE0003FFFFC001FFFFE000FFFFF8007FFFFC003FFFFC0007FFFE00007
FFF000007FF000000FF8000007F8000003F8600001F8E00001F8E00001F8E00001F8F000
01F0F00001F0F80003F0FC0003E0FF0007C0FFE01F80F3FFFF00E1FFFE00C01FF0001D29
7CA826>I<7FFFFFFFFFC07FFFFFFFFFC07FFFFFFFFFC07F803FC03FC07E003FC007C078
003FC003C078003FC003C070003FC001C0F0003FC001E0F0003FC001E0E0003FC000E0E0
003FC000E0E0003FC000E0E0003FC000E0E0003FC000E000003FC0000000003FC0000000
003FC0000000003FC0000000003FC0000000003FC0000000003FC0000000003FC0000000
003FC0000000003FC0000000003FC0000000003FC0000000003FC0000000003FC0000000
003FC0000000003FC0000000003FC0000000003FC0000000003FC0000000003FC0000000
003FC0000000003FC00000007FFFFFE000007FFFFFE000007FFFFFE0002B287EA730>I<
FFFFF001FFFCFFFFF001FFFCFFFFF001FFFC03FC0000070003FC0000070003FC00000700
03FC0000070003FC0000070003FC0000070003FC0000070003FC0000070003FC00000700
03FC0000070003FC0000070003FC0000070003FC0000070003FC0000070003FC00000700
03FC0000070003FC0000070003FC0000070003FC0000070003FC0000070003FC00000700
03FC0000070003FC0000070003FC0000070003FC0000070003FC0000070003FC00000700
03FC0000070001FC00000E0001FE00000E0000FE00001C00007E00001C00007F00003800
003FC000F000000FF007E0000007FFFFC0000001FFFF000000001FF800002E297DA835>
I<3FFFFFFF803FFFFFFF803FFFFFFF803FF000FF003F8001FE003F0003FE003E0003FC00
3C0007F8007C000FF80078000FF00078001FE00070003FE00070003FC00070007F800070
00FF80000000FF00000001FE00000003FE00000003FC00000007F80000000FF80000000F
F00000001FE00000003FE00000003FC001C0007F8001C000FF8001C000FF0001C001FE00
01C003FE0003C003FC0003C007F80003C00FF80007800FF00007801FE0000F803FE0001F
803FC0007F807F8001FF80FFFFFFFF80FFFFFFFF80FFFFFFFF8022297CA82A>90
D<03FF80000FFFF0001F01F8003F807E003F807E003F803F001F003F800E003F8000003F
8000003F8000003F80000FFF8000FFFF8007FC3F800FE03F803F803F803F003F807F003F
80FE003F80FE003F80FE003F80FE003F807E007F807F00DF803F839FFC0FFF0FFC01FC03
FC1E1B7E9A21>97 D<FFE0000000FFE0000000FFE00000000FE00000000FE00000000FE0
0000000FE00000000FE00000000FE00000000FE00000000FE00000000FE00000000FE000
00000FE00000000FE00000000FE1FE00000FE7FF80000FFE07E0000FF801F0000FF000F8
000FE000FC000FE000FE000FE0007F000FE0007F000FE0007F000FE0007F800FE0007F80
0FE0007F800FE0007F800FE0007F800FE0007F800FE0007F800FE0007F000FE0007F000F
E0007F000FE000FE000FE000FC000FF001F8000FF803F0000F9E0FE0000F0FFF80000E01
FC0000212A7EA926>I<003FF80000FFFE0003F01F0007E03F800FC03F801F803F803F80
1F007F000E007F0000007F000000FF000000FF000000FF000000FF000000FF000000FF00
0000FF0000007F0000007F0000007F8000003F8001C01F8001C00FC0038007E0070003F0
1E0000FFFC00003FE0001A1B7E9A1F>I<00003FF80000003FF80000003FF800000003F8
00000003F800000003F800000003F800000003F800000003F800000003F800000003F800
000003F800000003F800000003F800000003F800001FE3F80000FFFBF80003F83FF80007
E00FF8000FC007F8001F8003F8003F8003F8007F0003F8007F0003F8007F0003F800FF00
03F800FF0003F800FF0003F800FF0003F800FF0003F800FF0003F800FF0003F8007F0003
F8007F0003F8007F0003F8003F8003F8001F8003F8000F8007F80007C00FF80003F03FFF
8000FFF3FF80003FC3FF80212A7EA926>I<003FE00001FFF80003F07E0007C01F000F80
1F801F800F803F800FC07F000FC07F0007C07F0007E0FF0007E0FF0007E0FFFFFFE0FFFF
FFE0FF000000FF000000FF0000007F0000007F0000007F0000003F8000E01F8000E00FC0
01C007E0038003F81F0000FFFE00001FF0001B1B7E9A20>I<0007F0003FFC00FE3E01F8
7F03F87F03F07F07F07F07F03E07F00007F00007F00007F00007F00007F00007F000FFFF
C0FFFFC0FFFFC007F00007F00007F00007F00007F00007F00007F00007F00007F00007F0
0007F00007F00007F00007F00007F00007F00007F00007F00007F00007F00007F0007FFF
807FFF807FFF80182A7EA915>I<00FF81F003FFE7F80FC1FE7C1F80FC7C1F007C383F00
7E107F007F007F007F007F007F007F007F007F007F007F007F003F007E001F007C001F80
FC000FC1F8001FFFE00018FF800038000000380000003C0000003E0000003FFFF8001FFF
FF001FFFFF800FFFFFC007FFFFE01FFFFFF03C0007F07C0001F8F80000F8F80000F8F800
00F8F80000F87C0001F03C0001E01F0007C00FC01F8003FFFE00007FF0001E287E9A22>
I<FFE0000000FFE0000000FFE00000000FE00000000FE00000000FE00000000FE0000000
0FE00000000FE00000000FE00000000FE00000000FE00000000FE00000000FE00000000F
E00000000FE07F00000FE1FFC0000FE787E0000FEE03F0000FF803F0000FF803F8000FF0
03F8000FF003F8000FE003F8000FE003F8000FE003F8000FE003F8000FE003F8000FE003
F8000FE003F8000FE003F8000FE003F8000FE003F8000FE003F8000FE003F8000FE003F8
000FE003F8000FE003F8000FE003F800FFFE3FFF80FFFE3FFF80FFFE3FFF80212A7DA926
>I<07000F801FC03FE03FE03FE01FC00F8007000000000000000000000000000000FFE0
FFE0FFE00FE00FE00FE00FE00FE00FE00FE00FE00FE00FE00FE00FE00FE00FE00FE00FE0
0FE00FE00FE00FE00FE0FFFEFFFEFFFE0F2B7DAA14>I<FFE0FFE0FFE00FE00FE00FE00F
E00FE00FE00FE00FE00FE00FE00FE00FE00FE00FE00FE00FE00FE00FE00FE00FE00FE00F
E00FE00FE00FE00FE00FE00FE00FE00FE00FE00FE00FE00FE00FE00FE0FFFEFFFEFFFE0F
2A7DA914>108 D<FFC07F800FF000FFC1FFE03FFC00FFC383F0707E000FC603F8C07F00
0FCC01F9803F000FD801FF003F800FF001FE003F800FF001FE003F800FE001FC003F800F
E001FC003F800FE001FC003F800FE001FC003F800FE001FC003F800FE001FC003F800FE0
01FC003F800FE001FC003F800FE001FC003F800FE001FC003F800FE001FC003F800FE001
FC003F800FE001FC003F800FE001FC003F800FE001FC003F800FE001FC003F80FFFE1FFF
C3FFF8FFFE1FFFC3FFF8FFFE1FFFC3FFF8351B7D9A3A>I<FFC07F0000FFC1FFC000FFC7
87E0000FCE03F0000FD803F0000FD803F8000FF003F8000FF003F8000FE003F8000FE003
F8000FE003F8000FE003F8000FE003F8000FE003F8000FE003F8000FE003F8000FE003F8
000FE003F8000FE003F8000FE003F8000FE003F8000FE003F8000FE003F8000FE003F800
FFFE3FFF80FFFE3FFF80FFFE3FFF80211B7D9A26>I<003FE00001FFFC0003F07E000FC0
1F801F800FC03F800FE03F0007E07F0007F07F0007F07F0007F0FF0007F8FF0007F8FF00
07F8FF0007F8FF0007F8FF0007F8FF0007F8FF0007F87F0007F07F0007F03F800FE03F80
0FE01F800FC00FC01F8007F07F0001FFFC00003FE0001D1B7E9A22>I<FFE1FE0000FFE7
FF8000FFFE07E0000FF803F0000FF001F8000FE000FC000FE000FE000FE000FF000FE000
7F000FE0007F000FE0007F800FE0007F800FE0007F800FE0007F800FE0007F800FE0007F
800FE0007F800FE0007F000FE000FF000FE000FF000FE000FE000FE001FC000FF001F800
0FF803F0000FFE0FE0000FEFFF80000FE1FC00000FE00000000FE00000000FE00000000F
E00000000FE00000000FE00000000FE00000000FE00000000FE0000000FFFE000000FFFE
000000FFFE00000021277E9A26>I<001FC0380000FFF0780003F838F80007E00DF8000F
C007F8001FC007F8003F8003F8007F8003F8007F8003F8007F0003F800FF0003F800FF00
03F800FF0003F800FF0003F800FF0003F800FF0003F800FF0003F8007F0003F8007F0003
F8007F8003F8003F8003F8001F8007F8000FC007F80007E01FF80003F03BF80000FFF3F8
00003FC3F800000003F800000003F800000003F800000003F800000003F800000003F800
000003F800000003F800000003F80000003FFF8000003FFF8000003FFF8021277E9A24>
I<FFC1F0FFC7FCFFCE3E0FD87F0FD87F0FF07F0FF03E0FF01C0FE0000FE0000FE0000FE0
000FE0000FE0000FE0000FE0000FE0000FE0000FE0000FE0000FE0000FE0000FE0000FE0
00FFFF00FFFF00FFFF00181B7E9A1C>I<03FE300FFFF01E03F03800F0700070F00070F0
0070F80070FE0000FFE0007FFE007FFF803FFFE01FFFF007FFF800FFF80007FC6000FCE0
007CE0003CF0003CF00038F80038FC0070FF01E0F7FFC0C1FF00161B7E9A1B>I<007000
00700000700000700000F00000F00000F00001F00003F00003F00007F0001FFFF0FFFFF0
FFFFF007F00007F00007F00007F00007F00007F00007F00007F00007F00007F00007F000
07F00007F00007F03807F03807F03807F03807F03807F03803F03803F87001F86000FFC0
001F8015267FA51B>I<FFE03FF800FFE03FF800FFE03FF8000FE003F8000FE003F8000F
E003F8000FE003F8000FE003F8000FE003F8000FE003F8000FE003F8000FE003F8000FE0
03F8000FE003F8000FE003F8000FE003F8000FE003F8000FE003F8000FE003F8000FE003
F8000FE003F8000FE007F80007E007F80007E00FF80003F03BFF8001FFF3FF80003FC3FF
80211B7D9A26>I<FFFE03FF80FFFE03FF80FFFE03FF800FF000780007F000700007F800
F00003F800E00003FC01E00001FC01C00001FC01C00000FE03800000FE03800000FF0780
00007F070000007F8F0000003F8E0000003FCE0000001FDC0000001FDC0000000FF80000
000FF80000000FF800000007F000000007F000000003E000000003E000000001C0000021
1B7F9A24>I<FFFC3FFC0FFEFFFC3FFC0FFEFFFC3FFC0FFE0FE007E000E007F003F001C0
07F003F001C007F807F803C003F807F8038003F807F8038001FC0EFC070001FC0EFC0700
01FC1EFE0F0000FE1C7E0E0000FE1C7E0E0000FF383F1E00007F383F1C00007F783F1C00
003FF01FB800003FF01FB800003FE00FF800001FE00FF000001FE00FF000000FC007E000
000FC007E000000FC007E00000078003C00000078003C0002F1B7F9A32>I<FFFC0FFF00
FFFC0FFF00FFFC0FFF0007F003C00003F803800001FC07800000FE0F000000FF1E000000
7F3C0000003FF80000001FF00000001FF00000000FF000000007F000000007F80000000F
FC0000001FFE0000001EFE0000003C7F000000783F800000F01FC00001E01FE00003C00F
E00003C007F000FFF01FFF80FFF01FFF80FFF01FFF80211B7F9A24>I<FFFE03FF80FFFE
03FF80FFFE03FF800FF000780007F000700007F800F00003F800E00003FC01E00001FC01
C00001FC01C00000FE03800000FE03800000FF078000007F070000007F8F0000003F8E00
00003FCE0000001FDC0000001FDC0000000FF80000000FF80000000FF800000007F00000
0007F000000003E000000003E000000001C000000001C000000003800000000380000038
078000007C07000000FE0F000000FE0E000000FE1C000000FE3C0000007C780000003FE0
0000000F8000000021277F9A24>I E /Fe 93 127 df<70F8F8F8F8F8F8F8F8F8F8F8F8
F8F8F8F870000000000070F8F8F870051C779B18>33 D<4010E038F078E038E038E038E0
38E038E038E038E038E038E03860300D0E7B9C18>I<030600078F00078F00078F00078F
00078F00078F007FFFC0FFFFE0FFFFE07FFFC00F1E000F1E000F1E000F1E000F1E000F1E
007FFFC0FFFFE0FFFFE07FFFC01E3C001E3C001E3C001E3C001E3C001E3C000C1800131C
7E9B18>I<00C00001C00001C00001C00003F0000FFC003FFE007DCF0071C700E1C380E1
C780E1C780E1C780F1C00079C0003FC0001FE0000FF80001FC0001DE0001CF0001C70061
C380F1C380F1C380E1C380E1C70071C70079DE003FFE001FF80007E00001C00001C00001
C00000C00011247D9F18>I<3803007C07807C0780EE0F80EE0F00EE0F00EE1F00EE1E00
EE1E00EE3E007C3C007C3C00387C0000780000780000F80000F00001F00001E00001E000
03E00003C00003C00007C0000783800787C00F87C00F0EE00F0EE01F0EE01E0EE01E0EE0
3E0EE03C07C03C07C018038013247E9F18>I<01C00007E0000FF0000E70001C38001C38
001C38001C38001C73F81CF3F81CE3F80FC1C00FC3800F83800F03801F07003F87007B8E
0071CE00E1FC00E0FC00E07C00E07870E0787070FE707FFFE03FC7E00F03C0151C7F9B18
>I<387C7C7E3E0E0E0E1C1C38F8F0C0070E789B18>I<007000F001E003C007800F001E00
1C00380038007000700070007000E000E000E000E000E000E000E000E000700070007000
7000380038001C001E000F00078003C001F000F000700C24799F18>I<6000F00078003C
001E000F000780038001C001C000E000E000E000E0007000700070007000700070007000
7000E000E000E000E001C001C0038007800F001E003C007800F00060000C247C9F18>I<
01C00001C00001C00001C00041C100F1C780FDDF807FFF001FFC0007F00007F0001FFC00
7FFF00FDDF80F1C78041C10001C00001C00001C00001C00011147D9718>I<00600000F0
0000F00000F00000F00000F00000F00000F0007FFFC0FFFFE0FFFFE07FFFC000F00000F0
0000F00000F00000F00000F00000F00000600013147E9718>I<1C3E7E7F3F1F070E1E7C
F860080C788518>I<7FFFC0FFFFE0FFFFE07FFFC013047E8F18>I<3078FCFC7830060677
8518>I<000300000780000780000F80000F00001F00001E00001E00003E00003C00007C
0000780000780000F80000F00001F00001E00003E00003C00003C00007C0000780000F80
000F00000F00001F00001E00003E00003C00003C00007C0000780000F80000F00000F000
0060000011247D9F18>I<01F00007FC000FFE001F1F001C07003803807803C07001C070
01C0E000E0E000E0E000E0E000E0E000E0E000E0E000E0E000E0E000E0F001E07001C070
01C07803C03803801C07001F1F000FFE0007FC0001F000131C7E9B18>I<018003800380
07800F803F80FF80FB804380038003800380038003800380038003800380038003800380
03800380038003807FFCFFFE7FFC0F1C7B9B18>I<03F0000FFE003FFF007C0F807003C0
E001C0F000E0F000E06000E00000E00000E00001C00001C00003C0000780000F00001E00
003C0000780000F00001E00007C0000F80001E00E03C00E07FFFE0FFFFE07FFFE0131C7E
9B18>I<07F8001FFE003FFF007807807803C07801C03001C00001C0000380000380000F
0003FF0003FE0003FF000007800003C00001C00000E00000E00000E0F000E0F000E0F001
C0F003C07C07803FFF001FFE0003F800131C7E9B18>I<001F00003F0000770000770000
E70001E70001C7000387000787000707000E07001E07003C0700380700780700F00700FF
FFF8FFFFF8FFFFF8000700000700000700000700000700000700007FF0007FF0007FF015
1C7F9B18>I<3FFF803FFF803FFF80380000380000380000380000380000380000380000
3800003BF8003FFE003FFF003C07803003C00001C00000E00000E06000E0F000E0F000E0
E001C07003C07C0F803FFF001FFC0003F000131C7E9B18>I<007E0001FF0007FF800F83
C01E03C01C03C0380180380000700000700000E1F800E7FE00FFFF00FE0780F803C0F001
C0F000E0E000E0F000E07000E07000E07000E03801C03C03C01E07800FFF0007FE0001F8
00131C7E9B18>I<E00000FFFFE0FFFFE0FFFFC0E00380E00700000F00001E00001C0000
380000380000700000F00000E00000E00001C00001C00001C00003800003800003800003
8000070000070000070000070000070000070000070000131D7E9C18>I<03F8000FFE00
1FFF003E0F803803807001C07001C07001C07001C03803803C07801FFF0007FC000FFE00
1F1F003C07807001C0F001E0E000E0E000E0E000E0E000E07001C07803C03E0F801FFF00
0FFE0003F800131C7E9B18>I<03F0000FFC001FFE003C0F00780780700380E001C0E001
C0E001C0E001E0E001E07001E07803E03C0FE01FFFE00FFEE003F0E00000E00001C00001
C00001C0300380780780780F00783E003FFC001FF00007C000131C7E9B18>I<3078FCFC
783000000000000000003078FCFC78300614779318>I<183C7E7E3C1800000000000000
00183C7E7E3E1E0E1C3C78F060071A789318>I<0000C00003E00007E0001FC0003F8000
FE0001FC0007F0000FE0003F80007F0000FC0000FC00007F00003F80000FE00007F00001
FC0000FE00003F80001FC00007E00003E00000C013187E9918>I<7FFFC0FFFFE0FFFFE0
7FFFC00000000000000000000000007FFFC0FFFFE0FFFFE07FFFC0130C7E9318>I<6000
00F80000FC00007F00003F80000FE00007F00001FC0000FE00003F80001FC00007E00007
E0001FC0003F8000FE0001FC0007F0000FE0003F80007F0000FC0000F800006000001318
7E9918>I<0FF0003FFC007FFF00700F00F00380F00380600780000F00003E00007C0001
F00001E00003C00003C00003C00003C00003C00003800000000000000000000000000000
000003800007C00007C00007C000038000111C7D9B18>I<00700000F80000F80000D800
00D80001DC0001DC0001DC00018C00038E00038E00038E00038E00070700070700070700
0707000707000FFF800FFF800FFF800E03801C01C01C01C01C01C07F07F0FF07F87F07F0
151C7F9B18>65 D<7FFC00FFFF007FFF801C03C01C01C01C00E01C00E01C00E01C00E01C
01E01C01C01C07C01FFF801FFF001FFFC01C03C01C00E01C00F01C00701C00701C00701C
00701C00F01C00E01C03E07FFFC0FFFF807FFE00141C7F9B18>I<00F8E003FEE007FFE0
0F07E01E03E03C01E03800E07000E07000E0700000E00000E00000E00000E00000E00000
E00000E00000E000007000007000E07000E03800E03C00E01E01C00F07C007FF8003FE00
00F800131C7E9B18>I<7FF800FFFE007FFF001C0F801C03C01C03C01C01E01C00E01C00
E01C00F01C00701C00701C00701C00701C00701C00701C00701C00701C00F01C00E01C00
E01C01E01C01C01C03C01C0F807FFF00FFFE007FF800141C7F9B18>I<FFFFF0FFFFF0FF
FFF01C00701C00701C00701C00701C00001C00001C0E001C0E001C0E001FFE001FFE001F
FE001C0E001C0E001C0E001C00001C00001C00381C00381C00381C00381C0038FFFFF8FF
FFF8FFFFF8151C7F9B18>I<FFFFF8FFFFF8FFFFF81C00381C00381C00381C00381C0000
1C00001C07001C07001C07001FFF001FFF001FFF001C07001C07001C07001C00001C0000
1C00001C00001C00001C00001C0000FFC000FFC000FFC000151C7F9B18>I<01F1C003FD
C00FFFC01F0FC01C03C03803C03801C07001C07001C0700000E00000E00000E00000E000
00E00000E00FF0E01FF0E00FF07001C07001C07003C03803C03803C01C07C01F0FC00FFF
C003FDC001F1C0141C7E9B18>I<7F07F0FF8FF87F07F01C01C01C01C01C01C01C01C01C
01C01C01C01C01C01C01C01C01C01FFFC01FFFC01FFFC01C01C01C01C01C01C01C01C01C
01C01C01C01C01C01C01C01C01C01C01C07F07F0FF8FF87F07F0151C7F9B18>I<7FFF00
FFFF807FFF0001C00001C00001C00001C00001C00001C00001C00001C00001C00001C000
01C00001C00001C00001C00001C00001C00001C00001C00001C00001C00001C00001C000
7FFF00FFFF807FFF00111C7D9B18>I<01FFC001FFC001FFC0000E00000E00000E00000E
00000E00000E00000E00000E00000E00000E00000E00000E00000E00000E00000E00000E
00000E00000E00000E00F00E00F00E00F03C007FFC003FF0000FC000121C7D9B18>I<7F
07F0FF87F87F07F01C03C01C07801C07001C0E001C1E001C3C001C38001C70001CF0001D
F0001DF0001FB8001FB8001F1C001E1C001C0E001C0E001C07001C07001C03801C03801C
01C07F03F0FF87F87F03F0151C7F9B18>I<FFC000FFC000FFC0001C00001C00001C0000
1C00001C00001C00001C00001C00001C00001C00001C00001C00001C00001C00001C0000
1C00001C00001C00E01C00E01C00E01C00E01C00E0FFFFE0FFFFE0FFFFE0131C7E9B18>
I<FC01F8FE03F8FE03F83B06E03B06E03B06E03B06E03B8EE03B8EE0398CE0398CE039DC
E039DCE039DCE038D8E038D8E038F8E03870E03870E03800E03800E03800E03800E03800
E03800E0FE03F8FE03F8FE03F8151C7F9B18>I<7E07F0FF0FF87F07F01D81C01D81C01D
81C01DC1C01CC1C01CC1C01CE1C01CE1C01CE1C01C61C01C71C01C71C01C31C01C39C01C
39C01C39C01C19C01C19C01C1DC01C0DC01C0DC01C0DC07F07C0FF87C07F03C0151C7F9B
18>I<0FFE003FFF807FFFC07803C07001C0F001E0E000E0E000E0E000E0E000E0E000E0
E000E0E000E0E000E0E000E0E000E0E000E0E000E0E000E0E000E0E000E0E000E0F001E0
7001C07C07C07FFFC03FFF800FFE00131C7E9B18>I<FFFE00FFFF80FFFFC01C03C01C01
E01C00E01C00701C00701C00701C00701C00701C00E01C01E01C03C01FFFC01FFF801FFE
001C00001C00001C00001C00001C00001C00001C00001C0000FF8000FF8000FF8000141C
7F9B18>I<0FFE003FFF807FFFC07803C07001C0F001E0E000E0E000E0E000E0E000E0E0
00E0E000E0E000E0E000E0E000E0E000E0E000E0E000E0E000E0E000E0E070E0E070E0F0
79E07039C0783FC07FFFC03FFF800FFE00000F000007800007800003C00001C00001C013
227E9B18>I<7FF800FFFE007FFF001C0F801C03801C03C01C01C01C01C01C01C01C03C0
1C03801C0F801FFF001FFE001FFE001C0F001C07001C03801C03801C03801C03801C0380
1C039C1C039C1C039C7F01F8FF81F87F00F0161C7F9B18>I<03F1C01FFFC03FFFC07C0F
C07003C0E001C0E001C0E001C0E000007000007800003F00001FF00007FE0000FF00000F
800003C00001C00000E00000E06000E0E000E0E001E0F001C0F80780FFFF80FFFE00E7F8
00131C7E9B18>I<7FFFF8FFFFF8FFFFF8E07038E07038E07038E0703800700000700000
700000700000700000700000700000700000700000700000700000700000700000700000
700000700000700000700007FF0007FF0007FF00151C7F9B18>I<FF83FEFF83FEFF83FE
1C00701C00701C00701C00701C00701C00701C00701C00701C00701C00701C00701C0070
1C00701C00701C00701C00701C00701C00701C00700E00E00F01E00783C003FF8001FF00
007C00171C809B18>I<FE03F8FF07F8FE03F83C01E01C01C01C01C01C01C01E03C00E03
800E03800E03800E0380070700070700070700070700038E00038E00038E00038E00018C
0001DC0001DC0001DC0000D80000F80000F800007000151C7F9B18>I<FE03F8FE03F8FE
03F87000707000707000703800E03800E03800E03800E03800E038F8E039FCE039DCE039
DCE019DCC019DCC019DCC0198CC0198CC01D8DC01D8DC01D8DC01D05C00D05800F07800F
07800E0380151C7F9B18>I<7F0FE07F9FE07F0FE00E07000F0700070E00078E00039C00
03DC0001F80001F80000F80000F00000700000F00000F80001FC0001DC00039E00038E00
070F000707000E07800E03801E03C07F07F0FF07F87F07F0151C7F9B18>I<FE03F8FF07
F8FE03F81C01C01E03C00E03800F0780070700070700038E00038E0001DC0001DC0001DC
0000F80000F80000700000700000700000700000700000700000700000700000700001FC
0003FE0001FC00151C7F9B18>I<3FFFE07FFFE07FFFE07001C07003C070078070070000
0F00001E00001C00003C0000780000700000F00001E00001C00003C0000780000700000F
00001E00E01C00E03C00E07800E07000E0FFFFE0FFFFE0FFFFE0131C7E9B18>I<FFF8FF
F8FFF8E000E000E000E000E000E000E000E000E000E000E000E000E000E000E000E000E0
00E000E000E000E000E000E000E000E000E000E000E000E000E000FFF8FFF8FFF80D2477
9F18>I<600000F00000F00000F800007800007C00003C00003C00003E00001E00001F00
000F00000F00000F800007800007C00003C00003C00003E00001E00001F00000F00000F8
00007800007800007C00003C00003E00001E00001E00001F00000F00000F800007800007
8000030011247D9F18>I<FFF8FFF8FFF800380038003800380038003800380038003800
380038003800380038003800380038003800380038003800380038003800380038003800
3800380038FFF8FFF8FFF80D247F9F18>I<018007C01FF07EFCF83EE00E0F067C9B18>I<
7FFFC0FFFFE0FFFFE07FFFC013047E7F18>I<061E3E387070E0E0E0F8FC7C7C38070E78
9E18>I<0FF0001FFC003FFE003C0F0018070000038000038000FF8007FF801FFF807F03
80780380E00380E00380E00380F00780780F803FFFF81FFDF807F0F815147E9318>I<7E
0000FE00007E00000E00000E00000E00000E00000E00000E3E000EFF800FFFC00FC1E00F
80E00F00700E00700E00380E00380E00380E00380E00380E00380F00700F00700F80E00F
C1E00FFFC00EFF80063E00151C809B18>I<01FE0007FF001FFF803E0780380300700000
700000E00000E00000E00000E00000E00000E000007000007001C03801C03E03C01FFF80
07FF0001FC0012147D9318>I<001F80003F80001F800003800003800003800003800003
8003E3800FFB801FFF803C1F80380F80700780700380E00380E00380E00380E00380E003
80E00380700780700780380F803C1F801FFFF00FFBF803E3F0151C7E9B18>I<01F00007
FC001FFE003E0F00380780700380700380E001C0E001C0FFFFC0FFFFC0FFFFC0E0000070
00007001C03801C03E07C01FFF8007FF0001F80012147D9318>I<001F80007FC000FFE0
00E1E001C0C001C00001C00001C0007FFFC0FFFFC0FFFFC001C00001C00001C00001C000
01C00001C00001C00001C00001C00001C00001C00001C00001C00001C0007FFF007FFF00
7FFF00131C7F9B18>I<01E1F007FFF80FFFF81E1E301C0E003807003807003807003807
003807001C0E001E1E001FFC001FF80039E0003800001C00001FFE001FFFC03FFFE07801
F0700070E00038E00038E00038E000387800F07E03F01FFFC00FFF8001FC00151F7F9318
>I<7E0000FE00007E00000E00000E00000E00000E00000E00000E3E000EFF800FFFC00F
C1C00F80E00F00E00E00E00E00E00E00E00E00E00E00E00E00E00E00E00E00E00E00E00E
00E00E00E07FC7FCFFE7FE7FC7FC171C809B18>I<038007C007C007C003800000000000
0000007FC0FFC07FC001C001C001C001C001C001C001C001C001C001C001C001C001C001
C0FFFFFFFFFFFF101D7C9C18>I<0038007C007C007C003800000000000000000FFC0FFC
0FFC001C001C001C001C001C001C001C001C001C001C001C001C001C001C001C001C001C
001C001C001C001C001C6038F078FFF07FE03F800E277E9C18>I<7E0000FE00007E0000
0E00000E00000E00000E00000E00000E3FF00E3FF00E3FF00E07800E0F000E1E000E3C00
0E78000EF0000FF8000FFC000F9C000F0E000E0F000E07000E03800E03C07FC7F8FFC7F8
7FC7F8151C7F9B18>I<FFC000FFC000FFC00001C00001C00001C00001C00001C00001C0
0001C00001C00001C00001C00001C00001C00001C00001C00001C00001C00001C00001C0
0001C00001C00001C00001C000FFFF80FFFF80FFFF80111C7D9B18>I<F9C1C0FFF7F0FF
FFF03E3E383C3C383C3C3838383838383838383838383838383838383838383838383838
3838383838383838FE3E3EFE7E7EFE3E3E1714809318>I<7E3E00FEFF807FFFC00FC1C0
0F80E00F00E00E00E00E00E00E00E00E00E00E00E00E00E00E00E00E00E00E00E00E00E0
0E00E07FC7FCFFE7FE7FC7FC1714809318>I<01F0000FFE001FFF003E0F803803807001
C07001C0E000E0E000E0E000E0E000E0E000E0F001E07001C07803C03C07803E0F801FFF
000FFE0001F00013147E9318>I<7E3E00FEFF807FFFC00FC1E00F80E00F00700E00700E
00380E00380E00380E00380E00380E00380F00700F00700F80E00FC1E00FFFC00EFF800E
3E000E00000E00000E00000E00000E00000E00000E00007FC000FFE0007FC000151E8093
18>I<01F38007FB801FFF803E1F80380F80700780700780E00380E00380E00380E00380
E00380E00380700780700780380F803C1F801FFF800FFB8003E380000380000380000380
000380000380000380000380001FF0003FF8001FF0151E7E9318>I<FF0FC0FF3FE0FF7F
F007F0F007E06007C0000780000780000700000700000700000700000700000700000700
00070000070000FFFC00FFFE00FFFC0014147E9318>I<07F7003FFF007FFF00780F00E0
0700E00700E007007C00007FE0001FFC0003FE00001F00600780E00380E00380F00380F8
0F00FFFF00FFFC00E7F00011147D9318>I<0180000380000380000380000380007FFFC0
FFFFC0FFFFC0038000038000038000038000038000038000038000038000038000038040
0380E00380E00380E001C1C001FFC000FF80003E0013197F9818>I<7E07E0FE0FE07E07
E00E00E00E00E00E00E00E00E00E00E00E00E00E00E00E00E00E00E00E00E00E00E00E00
E00E01E00F03E007FFFC03FFFE01FCFC1714809318>I<7F8FF0FF8FF87F8FF01C01C00E
03800E03800E0380070700070700070700078F00038E00038E00038E0001DC0001DC0001
DC0000F80000F80000700015147F9318>I<FF07F8FF8FF8FF07F83800E03800E03800E0
3800E01C01C01C71C01CF9C01CF9C01CD9C01DDDC00DDD800DDD800DDD800D8D800F8F80
0F8F8007070015147F9318>I<7F8FF07F9FF07F8FF00F0700078E00039E0001DC0001F8
0000F80000700000F00000F80001DC00039E00038E000707000E07807F8FF0FF8FF87F8F
F015147F9318>I<7F8FF0FF8FF87F8FF00E01C00E03800E038007038007070007070003
8700038700038E0001CE0001CE0001CC0000CC0000DC0000780000780000780000700000
700000700000F00000E00079E0007BC0007F80003F00001E0000151E7F9318>I<3FFFF0
7FFFF07FFFF07001E07003C0700780000F00001E00003C0000F80001F00003C000078000
0F00701E00703C0070780070FFFFF0FFFFF0FFFFF014147F9318>I<0007E0001FE0007F
E000780000E00000E00000E00000E00000E00000E00000E00000E00000E00000E00000E0
0001E0007FC000FF8000FF80007FC00001E00000E00000E00000E00000E00000E00000E0
0000E00000E00000E00000E00000E000007800007FE0001FE00007E013247E9F18>I<60
F0F0F0F0F0F0F0F0F0F0F0F0F0F0F0F0F0F0F0F0F0F0F0F0F0F0F0F0F0F0F0F0F0F06004
24769F18>I<7C0000FF0000FFC00003C00000E00000E00000E00000E00000E00000E000
00E00000E00000E00000E00000E00000F000007FC0003FE0003FE0007FC000F00000E000
00E00000E00000E00000E00000E00000E00000E00000E00000E00000E00003C000FFC000
FF00007C000013247E9F18>I<060C1F1E3FBEFBF8F1F060C00F067C9B18>I
E /Ff 4 123 df<0003FE0000000FFF8000003C01E00000F000780001C0001C00030000
060006000003000C0000018018000000C018000000C03000000060300000006060000000
3060000000306000000030C000000018C000000018C000000018C000000018C000000018
C000000018C000000018C000000018C00000001860000000306000000030600000003030
00000060300000006018000000C018000000C00C000001800600000300030000060001C0
001C0000F0007800003C01E000000FFF80000003FE000025277E9D2A>13
D<03C00FF01FF83FFC7FFE7FFEFFFFFFFFFFFFFFFF7FFE7FFE3FFC1FF80FF003C010107E
9115>15 D<02000700070007000700070007000200020002007270FFF872700200020007
000700070007000700070007000700070007000700070007000700070007000700020002
0002000200020002000D267E9C12>121 D<02000700070007000700020002004210FFF8
FFF802000200020007000700070007000200000002000700070007000700020002000200
FFF8FFF8421002000200070007000700070002000D257E9C12>I
E /Fg 41 121 df<FFFFF8FFFFF8FFFFF8FFFFF8FFFFF8FFFFF8FFFFF815077F921B>45
D<1F003F807FC0FFE0FFE0FFE0FFE0FFE07FC03F801F000B0B7A8A17>I<0001E0000003
E000000FE000007FE0001FFFE000FFFFE000FFBFE000E03FE000003FE000003FE000003F
E000003FE000003FE000003FE000003FE000003FE000003FE000003FE000003FE000003F
E000003FE000003FE000003FE000003FE000003FE000003FE000003FE000003FE000003F
E000003FE000003FE000003FE000003FE000003FE000003FE000003FE000003FE000003F
E000003FE000003FE000003FE000003FE000003FE0007FFFFFF07FFFFFF07FFFFFF01C2E
7AAD29>49 D<003FF00001FFFE0007FFFF800FC07FE01E001FF03C000FF87F0007FC7F80
07FEFFC007FEFFC003FEFFC003FFFFC003FF7F8003FF7F8003FF3F0003FF000003FF0000
03FE000003FE000007FC000007FC00000FF800000FF000001FE000001FC000003F800000
7F000000FE000001F8000001F0000003E00000078007000F0007001E0007003C000F0078
000E00F0000E01C0001E03FFFFFE07FFFFFE0FFFFFFE1FFFFFFE3FFFFFFE7FFFFFFCFFFF
FFFCFFFFFFFCFFFFFFFC202E7CAD29>I<000FFC0000007FFF800001F01FE00003C00FF0
00070007F8000FE007FC000FF007FC001FF007FE001FF807FE001FF807FE001FF807FE00
1FF807FE000FF007FC0007E007FC0001800FFC0000000FF80000000FF00000001FE00000
003FC0000000FF8000003FFE0000003FFC0000003FFF800000001FF000000007F8000000
03FC00000003FE00000003FF00000001FF80000001FF800E0001FFC03F8001FFC07FC001
FFC07FC001FFC0FFE001FFC0FFE001FFC0FFE001FF80FFE001FF80FFC003FF007F8003FF
003F0003FE001F0007FC000FE01FF80007FFFFE00001FFFF8000001FFC0000222E7DAD29
>I<0000007800000000F800000001F800000003F800000007F800000007F80000000FF8
0000001FF80000003FF80000007FF800000077F8000000F7F8000001E7F8000003C7F800
000787F800000707F800000F07F800001E07F800003C07F800007807F800007007F80000
F007F80001E007F80003C007F800078007F8000F0007F8000F0007F8001E0007F8003C00
07F800780007F800F00007F800FFFFFFFFF0FFFFFFFFF0FFFFFFFFF000000FF80000000F
F80000000FF80000000FF80000000FF80000000FF80000000FF80000000FF80000000FF8
00000FFFFFF0000FFFFFF0000FFFFFF0242E7EAD29>I<0C0000381FC003F81FFFFFF81F
FFFFF01FFFFFE01FFFFFC01FFFFF801FFFFE001FFFFC001FFFF0001FFF00001E0000001E
0000001E0000001E0000001E0000001E0000001E0000001E1FF8001E7FFF001FFFFFC01F
E01FE01F800FF01E0007F80C0007FC000003FC000003FE000003FE000003FF000003FF1E
0003FF3F0003FF7F8003FFFF8003FFFFC003FFFFC003FEFF8003FEFF8003FE7F0007FC7C
0007F83C000FF01E001FE00FC07FC007FFFF8001FFFE00003FE000202E7CAD29>I<0000
7F80000007FFF000001FC07800007F001C0000FC001E0001F8007E0003F800FF0007F001
FF000FF001FF000FE001FF001FE001FF003FE000FE003FE0007C003FC00000007FC00000
007FC00000007FC0000000FFC3FF8000FFC7FFE000FFCFBFF000FFDC03F800FFF801FC00
FFF001FE00FFF000FF00FFE000FF80FFE000FF80FFE000FF80FFC000FFC0FFC000FFC0FF
C000FFC07FC000FFC07FC000FFC07FC000FFC07FC000FFC03FC000FFC03FC000FF803FC0
00FF801FE000FF801FE000FF000FE001FE0007F001FC0003F803F80001FC0FF00000FFFF
E000003FFF80000007FC0000222E7DAD29>I<38000000003E000000003FFFFFFFE03FFF
FFFFE03FFFFFFFE03FFFFFFFC07FFFFFFF807FFFFFFF007FFFFFFE007FFFFFFC007FFFFF
F800780000F800700001F000700003E000F00007C000E000078000E0000F0000E0001F00
0000003E000000007C000000007800000000F800000001F000000001F000000003F00000
0003E000000007E000000007E00000000FE00000000FE00000001FE00000001FC0000000
1FC00000003FC00000003FC00000003FC00000003FC00000003FC00000007FC00000007F
C00000007FC00000007FC00000007FC00000007FC00000007FC00000003F800000003F80
0000000E00000023307CAF29>I<0000007C0000000000007C000000000000FE00000000
0000FE000000000000FE000000000001FF000000000001FF000000000003FF8000000000
03FF800000000007FFC00000000007FFC00000000007FFC0000000000FFFE0000000000F
7FE0000000001F7FF0000000001E3FF0000000001E3FF0000000003E3FF8000000003C1F
F8000000007C1FFC00000000780FFC00000000780FFC00000000F80FFE00000000F007FE
00000001F007FF00000001E003FF00000001E003FF00000003C003FF80000003C001FF80
000007C001FFC00000078000FFC00000078000FFC000000FFFFFFFE000000FFFFFFFE000
001FFFFFFFF000001E00003FF000001E00003FF000003C00001FF800003C00001FF80000
7C00001FFC00007800000FFC0000F800000FFE0000F0000007FE0000F0000007FE0001F0
000007FF0003F8000003FF00FFFFC001FFFFFEFFFFC001FFFFFEFFFFC001FFFFFE37317D
B03E>65 D<000003FF80018000003FFFF003800001FFFFFC0F800007FF007F1F80001FF8
000FBF80003FE00003FF8000FF800000FF8001FF0000007F8003FE0000003F8007FC0000
003F8007FC0000001F800FF80000001F801FF80000000F801FF00000000F803FF0000000
07803FF000000007807FF000000007807FE000000007807FE000000000007FE000000000
00FFE00000000000FFE00000000000FFE00000000000FFE00000000000FFE00000000000
FFE00000000000FFE00000000000FFE00000000000FFE000000000007FE000000000007F
E000000000007FE000000000007FF000000003803FF000000003803FF000000003801FF0
00000003801FF800000007800FF8000000070007FC000000070007FC0000000E0003FE00
00001E0001FF0000003C0000FF8000007800003FE00000F000001FF80003E0000007FF00
3F80000001FFFFFE000000003FFFF80000000003FF80000031317BB03C>67
D<FFFFFFFFF00000FFFFFFFFFF0000FFFFFFFFFFC00000FFC000FFF00000FFC0000FFC00
00FFC00007FE0000FFC00001FF0000FFC00000FF8000FFC000007FC000FFC000007FE000
FFC000003FE000FFC000001FF000FFC000001FF000FFC000001FF800FFC000000FF800FF
C000000FFC00FFC000000FFC00FFC000000FFC00FFC000000FFC00FFC000000FFE00FFC0
00000FFE00FFC000000FFE00FFC000000FFE00FFC000000FFE00FFC000000FFE00FFC000
000FFE00FFC000000FFE00FFC000000FFE00FFC000000FFE00FFC000000FFE00FFC00000
0FFC00FFC000000FFC00FFC000000FFC00FFC000000FFC00FFC000000FF800FFC000001F
F800FFC000001FF800FFC000001FF000FFC000003FE000FFC000003FE000FFC000007FC0
00FFC00000FF8000FFC00001FF0000FFC00003FE0000FFC0000FFC0000FFC0007FF000FF
FFFFFFFFE000FFFFFFFFFF0000FFFFFFFFF0000037317EB03F>I<000003FF8001800000
3FFFF003800001FFFFFC0F800007FF007F1F80001FF8000FBF80003FE00003FF8000FF80
0000FF8001FF0000007F8003FE0000003F8007FC0000003F8007FC0000001F800FF80000
001F801FF80000000F801FF00000000F803FF000000007803FF000000007807FF0000000
07807FE000000007807FE000000000007FE00000000000FFE00000000000FFE000000000
00FFE00000000000FFE00000000000FFE00000000000FFE00000000000FFE00000000000
FFE00000000000FFE00007FFFFFE7FE00007FFFFFE7FE00007FFFFFE7FE0000001FF807F
F0000001FF803FF0000001FF803FF0000001FF801FF0000001FF801FF8000001FF800FF8
000001FF8007FC000001FF8007FC000001FF8003FE000001FF8001FF000001FF8000FF80
0001FF80003FE00003FF80001FF80007FF800007FF803F3F800001FFFFFE1F8000003FFF
F80780000003FFC0018037317BB041>71 D<FFFFFFC03FFFFFF0FFFFFFC03FFFFFF0FFFF
FFC03FFFFFF000FFC000003FF00000FFC000003FF00000FFC000003FF00000FFC000003F
F00000FFC000003FF00000FFC000003FF00000FFC000003FF00000FFC000003FF00000FF
C000003FF00000FFC000003FF00000FFC000003FF00000FFC000003FF00000FFC000003F
F00000FFC000003FF00000FFC000003FF00000FFC000003FF00000FFC000003FF00000FF
C000003FF00000FFC000003FF00000FFFFFFFFFFF00000FFFFFFFFFFF00000FFFFFFFFFF
F00000FFC000003FF00000FFC000003FF00000FFC000003FF00000FFC000003FF00000FF
C000003FF00000FFC000003FF00000FFC000003FF00000FFC000003FF00000FFC000003F
F00000FFC000003FF00000FFC000003FF00000FFC000003FF00000FFC000003FF00000FF
C000003FF00000FFC000003FF00000FFC000003FF00000FFC000003FF00000FFC000003F
F00000FFC000003FF00000FFC000003FF00000FFC000003FF000FFFFFFC03FFFFFF0FFFF
FFC03FFFFFF0FFFFFFC03FFFFFF03C317EB041>I<FFFFFFC0FFFFFFC0FFFFFFC000FFC0
0000FFC00000FFC00000FFC00000FFC00000FFC00000FFC00000FFC00000FFC00000FFC0
0000FFC00000FFC00000FFC00000FFC00000FFC00000FFC00000FFC00000FFC00000FFC0
0000FFC00000FFC00000FFC00000FFC00000FFC00000FFC00000FFC00000FFC00000FFC0
0000FFC00000FFC00000FFC00000FFC00000FFC00000FFC00000FFC00000FFC00000FFC0
0000FFC00000FFC00000FFC00000FFC00000FFC00000FFC000FFFFFFC0FFFFFFC0FFFFFF
C01A317EB01F>I<FFFF8000000001FFFF80FFFFC000000003FFFF80FFFFE000000007FF
FF8000FFE000000007FF800000EFF00000000EFF800000EFF00000000EFF800000EFF000
00000EFF800000E7F80000001CFF800000E7F80000001CFF800000E3FC00000038FF8000
00E3FC00000038FF800000E1FE00000070FF800000E1FE00000070FF800000E0FF000000
E0FF800000E0FF000000E0FF800000E07F800001C0FF800000E07F800001C0FF800000E0
3FC0000380FF800000E03FC0000380FF800000E03FC0000380FF800000E01FE0000700FF
800000E01FE0000700FF800000E00FF0000E00FF800000E00FF0000E00FF800000E007F8
001C00FF800000E007F8001C00FF800000E003FC003800FF800000E003FC003800FF8000
00E001FE007000FF800000E001FE007000FF800000E000FF00E000FF800000E000FF00E0
00FF800000E000FF00E000FF800000E0007F81C000FF800000E0007F81C000FF800000E0
003FC38000FF800000E0003FC38000FF800000E0001FE70000FF800000E0001FE70000FF
800000E0000FFE0000FF800000E0000FFE0000FF800000E00007FC0000FF800000E00007
FC0000FF800000E00007FC0000FF800000E00003F80000FF800001F00003F80000FF8000
FFFFE001F000FFFFFF80FFFFE001F000FFFFFF80FFFFE000E000FFFFFF8049317EB04E>
77 D<00000FFE0000000000FFFFE000000007FFFFFC0000001FFC07FF0000003FE000FF
800000FF80003FE00001FF00001FF00003FE00000FF80007FC000007FC0007FC000007FC
000FF8000003FE001FF8000003FF001FF0000001FF003FF0000001FF803FF0000001FF80
3FF0000001FF807FE0000000FFC07FE0000000FFC07FE0000000FFC0FFE0000000FFE0FF
E0000000FFE0FFE0000000FFE0FFE0000000FFE0FFE0000000FFE0FFE0000000FFE0FFE0
000000FFE0FFE0000000FFE0FFE0000000FFE0FFE0000000FFE0FFE0000000FFE07FE000
0000FFC07FE0000000FFC07FF0000001FFC07FF0000001FFC03FF0000001FF803FF00000
01FF801FF8000003FF001FF8000003FF000FFC000007FE000FFC000007FE0007FE00000F
FC0003FF00001FF80001FF80003FF00000FFC0007FE000003FE000FF8000001FFC07FF00
000007FFFFFC00000000FFFFE0000000000FFE00000033317BB03E>79
D<FFFFFFFFC0000000FFFFFFFFFC000000FFFFFFFFFF80000000FFC001FFE0000000FFC0
003FF0000000FFC0000FFC000000FFC00007FC000000FFC00007FE000000FFC00003FF00
0000FFC00003FF000000FFC00003FF800000FFC00003FF800000FFC00003FF800000FFC0
0003FF800000FFC00003FF800000FFC00003FF800000FFC00003FF000000FFC00003FF00
0000FFC00007FE000000FFC00007FC000000FFC0000FFC000000FFC0003FF0000000FFC0
01FFE0000000FFFFFFFF80000000FFFFFFFC00000000FFFFFFFE00000000FFC003FF0000
0000FFC000FFC0000000FFC0007FE0000000FFC0003FE0000000FFC0003FF0000000FFC0
001FF0000000FFC0001FF8000000FFC0001FF8000000FFC0001FF8000000FFC0001FF800
0000FFC0001FF8000000FFC0001FFC000000FFC0001FFC000000FFC0001FFC000000FFC0
001FFC004000FFC0001FFC00E000FFC0001FFE00E000FFC0000FFE00E000FFC0000FFF01
C000FFC00007FF83C0FFFFFFC003FFFF80FFFFFFC000FFFF00FFFFFFC0000FFC003B317E
B03E>82 D<001FF0018000FFFF038003FFFFC78007F00FFF800FC001FF801F00007F803F
00001F803E00000F807E00000F807E00000780FE00000780FE00000780FE00000380FF00
000380FF00000380FF80000000FFE00000007FFC0000007FFFE000007FFFFE00003FFFFF
C0001FFFFFF0000FFFFFF80007FFFFFC0003FFFFFE0001FFFFFF00007FFFFF80001FFFFF
800000FFFFC0000007FFC0000000FFE00000007FE00000003FE00000001FE06000001FE0
E000000FE0E000000FE0E000000FE0E000000FC0F000000FC0F000000FC0F800001F80FC
00001F80FF00003F00FFC0007E00FFFC01FC00F1FFFFF800E03FFFE000C007FF00002331
7BB02E>I<7FFFFFFFFFFF807FFFFFFFFFFF807FFFFFFFFFFF807FC00FFC00FF807E000F
FC001F807C000FFC000F8078000FFC00078078000FFC00078070000FFC000380F0000FFC
0003C0F0000FFC0003C0F0000FFC0003C0E0000FFC0001C0E0000FFC0001C0E0000FFC00
01C0E0000FFC0001C0E0000FFC0001C000000FFC00000000000FFC00000000000FFC0000
0000000FFC00000000000FFC00000000000FFC00000000000FFC00000000000FFC000000
00000FFC00000000000FFC00000000000FFC00000000000FFC00000000000FFC00000000
000FFC00000000000FFC00000000000FFC00000000000FFC00000000000FFC0000000000
0FFC00000000000FFC00000000000FFC00000000000FFC00000000000FFC00000000000F
FC00000000000FFC00000000000FFC00000000000FFC00000000000FFC000000007FFFFF
FF8000007FFFFFFF8000007FFFFFFF800032307DAF39>I<FFFFFFC003FFFFC0FFFFFFC0
03FFFFC0FFFFFFC003FFFFC000FFC0000007E00000FFC0000003C00000FFC0000003C000
00FFC0000003C00000FFC0000003C00000FFC0000003C00000FFC0000003C00000FFC000
0003C00000FFC0000003C00000FFC0000003C00000FFC0000003C00000FFC0000003C000
00FFC0000003C00000FFC0000003C00000FFC0000003C00000FFC0000003C00000FFC000
0003C00000FFC0000003C00000FFC0000003C00000FFC0000003C00000FFC0000003C000
00FFC0000003C00000FFC0000003C00000FFC0000003C00000FFC0000003C00000FFC000
0003C00000FFC0000003C00000FFC0000003C00000FFC0000003C00000FFC0000003C000
00FFC0000003C00000FFC0000003C00000FFC0000003C000007FC00000038000007FC000
00078000007FE00000078000003FE000000F0000003FE000000F0000001FF000001E0000
000FF800003E00000007FC00007C00000003FE0001F800000000FFC00FE0000000003FFF
FF80000000000FFFFE000000000000FFF00000003A317EB03F>I<007FF8000003FFFF00
0007FFFFC0000FE01FE0001FF007F0001FF003F8001FF003FC001FF001FE000FE001FE00
07C001FE00010001FE00000001FE00000001FE000001FFFE00003FFFFE0001FFF1FE0007
FE01FE000FF001FE001FC001FE003F8001FE007F8001FE00FF0001FE00FF0001FE00FF00
01FE00FF0001FE00FF0003FE007F8003FE007FC00EFE003FF03CFF000FFFF87FF807FFF0
3FF800FF800FF825207E9F28>97 D<01F8000000FFF8000000FFF8000000FFF80000000F
F800000007F800000007F800000007F800000007F800000007F800000007F800000007F8
00000007F800000007F800000007F800000007F800000007F800000007F800000007F80F
F00007F87FFE0007F9FFFF8007FFE03FC007FF000FE007FE0007F007F80003F807F80003
FC07F80003FC07F80001FE07F80001FE07F80001FE07F80001FF07F80001FF07F80001FF
07F80001FF07F80001FF07F80001FF07F80001FF07F80001FF07F80001FE07F80001FE07
F80001FE07F80003FC07F80003FC07FC0007F807FE0007F007F7001FE007E3E07FC007C1
FFFF0007807FFE0007001FE00028327EB12E>I<0007FF00007FFFE000FFFFF003FC03F8
07F007FC0FE007FC1FE007FC3FC007FC3FC003F87FC001F07F8000407F800000FF800000
FF800000FF800000FF800000FF800000FF800000FF800000FF8000007F8000007FC00000
7FC000003FC0000E3FE0000E1FE0001C0FF0001C07F8007803FF01F000FFFFE0007FFF80
0007FC001F207D9F25>I<00000007E0000003FFE0000003FFE0000003FFE00000003FE0
0000001FE00000001FE00000001FE00000001FE00000001FE00000001FE00000001FE000
00001FE00000001FE00000001FE00000001FE00000001FE00000001FE0000FF81FE0007F
FF1FE001FFFFDFE003FE03FFE007F800FFE00FE0003FE01FE0001FE03FC0001FE03FC000
1FE07F80001FE07F80001FE07F80001FE0FF80001FE0FF80001FE0FF80001FE0FF80001F
E0FF80001FE0FF80001FE0FF80001FE0FF80001FE07F80001FE07F80001FE07F80001FE0
3FC0001FE03FC0001FE01FC0003FE00FE0007FE007F001FFE003FC07DFF001FFFF9FFF00
7FFE1FFF000FF01FFF28327DB12E>I<0007FC0000003FFF800000FFFFE00003FC07F000
07F801F8000FE000FC001FE0007E003FC0007E003FC0003F007FC0003F007F80003F007F
80003F80FF80003F80FF80003F80FFFFFFFF80FFFFFFFF80FFFFFFFF80FF80000000FF80
000000FF800000007F800000007F800000003FC00000003FC00003801FC00003801FE000
07800FF0000F0007F8001E0003FE00FC0000FFFFF800003FFFE0000003FF000021207E9F
26>I<0000FF000007FFC0001FFFE0003FC7F0007F0FF800FE0FF801FE0FF801FC0FF803
FC07F003FC03E003FC01C003FC000003FC000003FC000003FC000003FC000003FC000003
FC0000FFFFFC00FFFFFC00FFFFFC0003FC000003FC000003FC000003FC000003FC000003
FC000003FC000003FC000003FC000003FC000003FC000003FC000003FC000003FC000003
FC000003FC000003FC000003FC000003FC000003FC000003FC000003FC000003FC000003
FC000003FC000003FC00007FFFF0007FFFF0007FFFF0001D327EB119>I<001FF803E000
FFFF1FF001FFFFBFF807F81FF9F80FE007F1F80FE007F0F01FC003F8601FC003F8003FC0
03FC003FC003FC003FC003FC003FC003FC003FC003FC001FC003F8001FC003F8000FE007
F0000FE007F00007F81FE00007FFFF800006FFFF00000E1FF800000E000000001E000000
001E000000001F000000001F800000001FFFFFC0000FFFFFF8000FFFFFFE0007FFFFFF00
03FFFFFF8007FFFFFFC01FFFFFFFE03F00007FE07E00000FF0FC000007F0FC000003F0FC
000003F0FC000003F0FC000003F07E000007E03F00000FC01FC0003F800FF801FF0007FF
FFFE0000FFFFF000001FFF8000252F7E9F29>I<01F800000000FFF800000000FFF80000
0000FFF8000000000FF80000000007F80000000007F80000000007F80000000007F80000
000007F80000000007F80000000007F80000000007F80000000007F80000000007F80000
000007F80000000007F80000000007F80000000007F807F8000007F83FFF000007F87FFF
800007F8F03FC00007F9C01FE00007FB000FE00007FE000FF00007FE000FF00007FC000F
F00007FC000FF00007F8000FF00007F8000FF00007F8000FF00007F8000FF00007F8000F
F00007F8000FF00007F8000FF00007F8000FF00007F8000FF00007F8000FF00007F8000F
F00007F8000FF00007F8000FF00007F8000FF00007F8000FF00007F8000FF00007F8000F
F00007F8000FF00007F8000FF000FFFFC1FFFF80FFFFC1FFFF80FFFFC1FFFF8029327DB1
2E>I<01C00007F0000FF8000FF8001FFC001FFC001FFC000FF8000FF80007F00001C000
00000000000000000000000000000000000000000000000001F800FFF800FFF800FFF800
07F80007F80007F80007F80007F80007F80007F80007F80007F80007F80007F80007F800
07F80007F80007F80007F80007F80007F80007F80007F80007F80007F80007F80007F800
07F800FFFF80FFFF80FFFF8011337DB217>I<01F800FFF800FFF800FFF8000FF80007F8
0007F80007F80007F80007F80007F80007F80007F80007F80007F80007F80007F80007F8
0007F80007F80007F80007F80007F80007F80007F80007F80007F80007F80007F80007F8
0007F80007F80007F80007F80007F80007F80007F80007F80007F80007F80007F80007F8
0007F80007F80007F80007F80007F800FFFFC0FFFFC0FFFFC012327DB117>108
D<03F007F80000FFF03FFF0000FFF07FFF8000FFF0F03FC0000FF1C01FE00007F3000FE0
0007F6000FF00007FE000FF00007FC000FF00007FC000FF00007F8000FF00007F8000FF0
0007F8000FF00007F8000FF00007F8000FF00007F8000FF00007F8000FF00007F8000FF0
0007F8000FF00007F8000FF00007F8000FF00007F8000FF00007F8000FF00007F8000FF0
0007F8000FF00007F8000FF00007F8000FF00007F8000FF00007F8000FF000FFFFC1FFFF
80FFFFC1FFFF80FFFFC1FFFF8029207D9F2E>110 D<0007FE0000003FFFC00000FFFFF0
0003FC03FC0007F000FE000FE0007F001FC0003F803FC0003FC03FC0003FC07F80001FE0
7F80001FE07F80001FE0FF80001FF0FF80001FF0FF80001FF0FF80001FF0FF80001FF0FF
80001FF0FF80001FF0FF80001FF07F80001FE07F80001FE07F80001FE03FC0003FC03FC0
003FC01FE0007F800FE0007F0007F801FE0003FE07FC0001FFFFF800003FFFC0000007FE
000024207E9F29>I<01F80FF000FFF87FFE00FFF9FFFF80FFFFE07FC00FFF001FE007FE
000FF007F80007F807F80007FC07F80003FC07F80003FE07F80003FE07F80001FE07F800
01FF07F80001FF07F80001FF07F80001FF07F80001FF07F80001FF07F80001FF07F80001
FF07F80001FE07F80003FE07F80003FE07F80003FC07F80007FC07FC0007F807FE000FF0
07FF001FE007FBE07FC007F9FFFF0007F87FFE0007F81FE00007F800000007F800000007
F800000007F800000007F800000007F800000007F800000007F800000007F800000007F8
00000007F8000000FFFFC00000FFFFC00000FFFFC00000282E7E9F2E>I<03F03F00FFF0
7FC0FFF1FFE0FFF1C7F00FF38FF807F70FF807F60FF807FE0FF807FC07F007FC03E007FC
008007F8000007F8000007F8000007F8000007F8000007F8000007F8000007F8000007F8
000007F8000007F8000007F8000007F8000007F8000007F8000007F8000007F8000007F8
0000FFFFE000FFFFE000FFFFE0001D207E9F22>114 D<00FF870007FFEF001FFFFF003F
007F003C001F0078000F00F8000700F8000700F8000700FC000700FF000000FFF800007F
FFC0003FFFF0003FFFFC000FFFFE0007FFFF0001FFFF80001FFF800000FFC000001FC060
000FC0E00007C0E00007C0F00007C0F8000780F8000F80FE000F00FF803E00FFFFFC00F3
FFF800C07FC0001A207D9F21>I<001C0000001C0000001C0000001C0000003C0000003C
0000003C0000007C0000007C000000FC000001FC000003FC000007FC00001FFC0000FFFF
FF00FFFFFF00FFFFFF0003FC000003FC000003FC000003FC000003FC000003FC000003FC
000003FC000003FC000003FC000003FC000003FC000003FC000003FC000003FC000003FC
000003FC01C003FC01C003FC01C003FC01C003FC01C003FC01C003FC01C001FC038001FE
038000FF0700007FFE00003FFC000007F0001A2E7FAD20>I<01F80003F000FFF801FFF0
00FFF801FFF000FFF801FFF0000FF8001FF00007F8000FF00007F8000FF00007F8000FF0
0007F8000FF00007F8000FF00007F8000FF00007F8000FF00007F8000FF00007F8000FF0
0007F8000FF00007F8000FF00007F8000FF00007F8000FF00007F8000FF00007F8000FF0
0007F8000FF00007F8000FF00007F8000FF00007F8000FF00007F8001FF00007F8001FF0
0003F8003FF00003F8006FF00001FE03CFF80000FFFF8FFF80007FFF0FFF80000FFC0FFF
8029207D9F2E>I<FFFF801FFEFFFF801FFEFFFF801FFE0FF80003E007F80001C007FC00
03C003FC00038003FE00078001FE00070001FF000F0000FF000E0000FF801E00007F801C
00007FC01C00003FC03800003FC03800001FE07000001FE07000000FF0E000000FF0E000
000FF9E0000007F9C0000007FFC0000003FF80000003FF80000001FF00000001FF000000
00FE00000000FE000000007C000000007C0000000038000027207E9F2C>I<FFFF0FFFF0
1FFEFFFF0FFFF01FFEFFFF0FFFF01FFE0FF0007F0001F00FF8007F0001E007F8007F0001
C007F8003F8001C003FC003F80038003FC007FC0038003FE007FC0078001FE00FFC00700
01FE00EFE00F0000FF00EFE00E0000FF01C7F00E0000FF81C7F01E00007F83C7F01C0000
7FC383F83C00003FC783F83800003FC701FC3800001FE701FC7000001FEF01FC7000001F
FE00FEF000000FFE00FEE000000FFC007FE0000007FC007FC0000007F8003FC0000007F8
003FC0000003F8003F80000003F0001F80000001F0001F00000001E0000F00000000E000
0E000037207E9F3C>I<FFFF00FFFCFFFF00FFFCFFFF00FFFC07F8001F8003FC001E0001
FE003C0000FF00780000FF80F000007FC0F000003FC1E000001FE3C000000FF780000007
FF00000007FE00000003FE00000001FE00000000FF00000001FF80000001FFC0000003FF
E00000079FF000000F0FF800001E07F800003C03FC00007801FE0000F000FF0001E000FF
8001E0007FC007E0003FC0FFF801FFFEFFF801FFFEFFF801FFFE27207E9F2C>I
E /Fh 1 65 df<001FC000007FF00001FFF80003F07C0007C01E000F001E001E03EF003E
0FFF003C1FFF00783E3F80787C1F8078780F80F0780F80F0F00780F0F00780F0F00780F0
F00780F0F00780F0F00780F0780F0078780F00787C1F00783E3E003C1FFC003E0FF8001E
03E0000F00000007C0000003F00F8001FFFF00007FFC00001FE00019207E9F1E>64
D E /Fi 86 124 df<001F83E000F06E3001C078780380F8780300F03007007000070070
000700700007007000070070000700700007007000FFFFFF800700700007007000070070
000700700007007000070070000700700007007000070070000700700007007000070070
000700700007007000070070000700700007007000070070003FE3FF001D20809F1B>11
D<003F0000E0C001C0C00381E00701E00701E00700000700000700000700000700000700
00FFFFE00700E00700E00700E00700E00700E00700E00700E00700E00700E00700E00700
E00700E00700E00700E00700E00700E00700E00700E03FC3FC1620809F19>I<003FE000
E0E001C1E00381E00700E00700E00700E00700E00700E00700E00700E00700E0FFFFE007
00E00700E00700E00700E00700E00700E00700E00700E00700E00700E00700E00700E007
00E00700E00700E00700E00700E00700E03FE7FC1620809F19>I<001F81F80000F04F04
0001C07C06000380F80F000300F00F000700F00F00070070000007007000000700700000
070070000007007000000700700000FFFFFFFF0007007007000700700700070070070007
007007000700700700070070070007007007000700700700070070070007007007000700
700700070070070007007007000700700700070070070007007007000700700700070070
07003FE3FE3FE02320809F26>I<70F8F8F8F8F8F8F87070707070707070707020202020
20000000000070F8F8F87005217CA00D>33 D<7038F87CFC7EFC7E743A04020402040208
04080410081008201040200F0E7F9F17>I<00400000400003F0000C4E00104100204080
604080404040C041C0C043C0C043C0E04180E040007040007C40003FC0001FF8000FFC00
03FE00007F00004F800043800041C00041C0F040C0F040C0F040C08040C0804080404180
2041003042000C4C0003F00000400000400000400012257EA117>36
D<0078000000840000018400000302000007020000070200000702000007020000070400
000704000007080000070800000390000003A00FFC03C001E003C000C001C0008001C001
0002E0010004E00200087002001878040030380800703C0800701C1000F00E1000F00F20
00F007C000F00380047001C0047802E008380470181C183C3007E00FC01E227EA023>38
D<70F8FCFC74040404080810102040060E7C9F0D>I<0040008001000300060004000C00
1800180038003000300070006000600060006000E000E000E000E000E000E000E000E000
E000E000E000E00060006000600060007000300030003800180018000C00040006000300
0100008000400A2E7BA112>I<8000400020003000180008000C00060006000700030003
000380018001800180018001C001C001C001C001C001C001C001C001C001C001C001C001
800180018001800380030003000700060006000C000800180030002000400080000A2E7E
A112>I<01800180018001800180E187718E399C0FF003C003C00FF0399C718EE1870180
018001800180018010147DA117>I<70F0F8F878080808101010202040050E7C840D>44
D<FFF0FFF00C02808A0F>I<70F8F8F87005057C840D>I<0000400000C000018000018000
0180000300000300000300000600000600000C00000C00000C0000180000180000180000
300000300000600000600000600000C00000C00000C00001800001800001800003000003
00000600000600000600000C00000C00000C000018000018000030000030000030000060
0000600000600000C00000C00000122D7EA117>I<03F0000E1C001C0E00180600380700
700380700380700380700380F003C0F003C0F003C0F003C0F003C0F003C0F003C0F003C0
F003C0F003C0F003C0F003C0F003C07003807003807003807807803807001806001C0E00
0E1C0003F000121F7E9D17>I<008003800F80F380038003800380038003800380038003
80038003800380038003800380038003800380038003800380038003800380038007C0FF
FE0F1E7C9D17>I<03F0000C1C00100E00200700400780800780F007C0F803C0F803C0F8
03C02007C00007C0000780000780000F00000E00001C0000380000700000600000C00001
80000300000600400C00401800401000803FFF807FFF80FFFF80121E7E9D17>I<03F000
0C1C00100E00200F00780F80780780780780380F80000F80000F00000F00001E00001C00
00700007F000003C00000E00000F000007800007800007C02007C0F807C0F807C0F807C0
F00780400780400F00200E00183C0007F000121F7E9D17>I<000600000600000E00000E
00001E00002E00002E00004E00008E00008E00010E00020E00020E00040E00080E00080E
00100E00200E00200E00400E00C00E00FFFFF0000E00000E00000E00000E00000E00000E
00000E0000FFE0141E7F9D17>I<1803001FFE001FFC001FF8001FE00010000010000010
000010000010000010000011F000161C00180E001007001007800003800003800003C000
03C00003C07003C0F003C0F003C0E00380400380400700200600100C0008380007E00012
1F7E9D17>I<007C000182000701000E03800C0780180780380300380000780000700000
700000F1F000F21C00F40600F80700F80380F80380F003C0F003C0F003C0F003C0F003C0
7003C07003C07003803803803807001807000C0E00061C0001F000121F7E9D17>I<4000
007FFFE07FFFC07FFFC04000808001008001008002000004000004000008000010000010
0000200000200000600000600000E00000C00001C00001C00001C00001C00003C00003C0
0003C00003C00003C00003C00003C000018000131F7E9D17>I<03F0000C0C0010060030
03002001806001806001806001807001807803003E03003F06001FC8000FF00003F80007
FC000C7E00103F00300F806007806001C0C001C0C000C0C000C0C000C0C0008060018020
01001002000C0C0003F000121F7E9D17>I<03F0000E18001C0C00380600380700700700
700380F00380F00380F003C0F003C0F003C0F003C0F003C07007C07007C03807C0180BC0
0E13C003E3C0000380000380000380000700300700780600780E00700C00201800107000
0FC000121F7E9D17>I<70F8F8F8700000000000000000000070F8F8F87005147C930D>I<
70F8F8F8700000000000000000000070F0F8F878080808101010202040051D7C930D>I<
FFFFFFFCFFFFFFFC00000000000000000000000000000000000000000000000000000000
00000000FFFFFFFCFFFFFFFC1E0C7E9023>61 D<0FE0103C601E400EE00FF00FF00F600F
001E001C00380070006000C0008000800100010001000100010001000000000000000000
0000038007C007C007C0038010207E9F15>63 D<00010000000380000003800000038000
0007C0000007C0000007C0000009E0000009E0000009E0000010F0000010F0000010F000
00207800002078000020780000403C0000403C0000C03E0000801E0000801E0001FFFF00
01000F0001000F00020007800200078002000780040003C0040003C00C0003C01E0003E0
FF801FFE1F207F9F22>65 D<FFFFE0000F0078000F001E000F001E000F000F000F000F80
0F000F800F000F800F000F800F000F800F000F000F001F000F001E000F007C000FFFF000
0F007C000F001F000F000F800F0007C00F0003C00F0003E00F0003E00F0003E00F0003E0
0F0003E00F0003C00F0007C00F0007800F000F000F003E00FFFFF0001B1F7E9E20>I<00
0FE01000381C3000E0027003C00170078000F00F0000701E0000701E0000303C0000303C
0000107C00001078000010F8000000F8000000F8000000F8000000F8000000F8000000F8
000000F8000000F8000000780000007C0000103C0000103C0000101E0000201E0000200F
0000200780004003C0008000E0030000380C00000FF0001C217E9F21>I<FFFFF8000780
1E0007800780078003C0078001E0078000F00780007007800078078000780780003C0780
003C0780003C0780003E0780003E0780003E0780003E0780003E0780003E0780003E0780
003E0780003C0780003C0780007C0780007807800078078000F0078001E0078003C00780
078007801E00FFFFF8001F1F7F9E23>I<FFFFFF800F000F800F0003800F0001800F0000
800F0000C00F0000400F0000400F0000400F0040400F0040000F0040000F00C0000F01C0
000FFFC0000F01C0000F00C0000F0040000F0040000F0040000F0000200F0000200F0000
200F0000400F0000400F0000400F0000C00F0001C00F0003800F000F80FFFFFF801B1F7E
9E1F>I<FFFFFF8007800780078001800780018007800080078000C00780004007800040
0780004007800040078020000780200007802000078060000780E00007FFE0000780E000
078060000780200007802000078020000780000007800000078000000780000007800000
07800000078000000780000007C00000FFFE00001A1F7F9E1E>I<000FE01000381C3000
E0027003C00170078000F00F0000701E0000701E0000303C0000303C0000107C00001078
000010F8000000F8000000F8000000F8000000F8000000F8000000F8000000F8003FFEF8
0001F0780000F07C0000F03C0000F03C0000F01E0000F01E0000F00F0000F0078000F003
C0017000E0023000380C10000FF0001F217E9F24>I<FFF07FF80F0007800F0007800F00
07800F0007800F0007800F0007800F0007800F0007800F0007800F0007800F0007800F00
07800F0007800FFFFF800F0007800F0007800F0007800F0007800F0007800F0007800F00
07800F0007800F0007800F0007800F0007800F0007800F0007800F0007800F000780FFF0
7FF81D1F7E9E22>I<FFF00F000F000F000F000F000F000F000F000F000F000F000F000F
000F000F000F000F000F000F000F000F000F000F000F000F000F000F000F000F00FFF00C
1F7E9E10>I<07FFC0003E00001E00001E00001E00001E00001E00001E00001E00001E00
001E00001E00001E00001E00001E00001E00001E00001E00001E00001E00001E00001E00
001E00201E00F81E00F81E00F81E00F01C00403C006038001070000FC00012207F9E17>
I<FFF8000F80000F00000F00000F00000F00000F00000F00000F00000F00000F00000F00
000F00000F00000F00000F00000F00000F00000F00000F00000F00020F00020F00020F00
020F00060F00040F00040F000C0F001C0F007CFFFFFC171F7E9E1C>76
D<FF800007FE07800007C007800007C005C0000BC005C0000BC004E00013C004E00013C0
04E00013C004700023C004700023C004380043C004380043C004380043C0041C0083C004
1C0083C0040E0103C0040E0103C0040E0103C004070203C004070203C004070203C00403
8403C004038403C00401C803C00401C803C00401C803C00400F003C00400F003C0040060
03C01F006003C0FFE0607FFE271F7F9E2A>I<FF000FF80F8003E00F8000800BC0008009
E0008009E0008008F000800878008008780080083C0080081E0080081E0080080F008008
078080080780800803C0800801E0800801E0800800F080080078800800788008003C8008
001E8008001E8008000F80080007800800078008000380080001803E000180FF8000801D
1F7E9E22>I<001FE0000070380001C00E0003800700070003800F0003C01E0001E03C00
00F03C0000F07C0000F87C0000F878000078F800007CF800007CF800007CF800007CF800
007CF800007CF800007CF800007CF800007C780000787C0000F87C0000F83C0000F03E00
01F01E0001E00F0003C0070003800380070001E01E0000703800001FE0001E217E9F23>
I<FFFFE0000F007C000F001E000F000F000F0007800F0007800F0007C00F0007C00F0007
C00F0007C00F0007800F0007800F000F000F001E000F007C000FFFE0000F0000000F0000
000F0000000F0000000F0000000F0000000F0000000F0000000F0000000F0000000F0000
000F0000000F0000000F000000FFF000001A1F7E9E1F>I<001FE0000070380001C00E00
03800700070003800F0003C01E0001E03E0001F03C0000F07C0000F87C0000F878000078
F800007CF800007CF800007CF800007CF800007CF800007CF800007CF800007CF800007C
780000787C0000F87C0000F83C0000F03E0781F01E0841E00F1023C00710238003901700
01D01E0000783804001FF80400001C0400000C0C00000E1C00000FF800000FF8000007F8
000007F0000001E01E297E9F23>I<FFFF80000F00F0000F003C000F001E000F000F000F
000F000F000F800F000F800F000F800F000F800F000F000F000F000F001E000F003C000F
00F0000FFF80000F01C0000F0070000F0070000F0038000F003C000F003C000F003C000F
003E000F003E000F003E000F003E040F003F040F001F040F000F08FFF00788000001F01E
207E9E21>I<03F0400C0CC01803C03001C06000C06000C0E000C0E00040E00040E00040
F00000F800007C00007F80003FF8001FFF0007FF8000FFC0001FE00003E00001E00000F0
000070800070800070800070800070C00060C000E0E000C0F80180C6030081FC0014217E
9F19>I<7FFFFFE0780F01E0600F0060400F0020400F0020C00F0030800F0010800F0010
800F0010800F0010000F0000000F0000000F0000000F0000000F0000000F0000000F0000
000F0000000F0000000F0000000F0000000F0000000F0000000F0000000F0000000F0000
000F0000000F0000000F0000001F800003FFFC001C1F7E9E21>I<FFF00FF80F0003E00F
0000800F0000800F0000800F0000800F0000800F0000800F0000800F0000800F0000800F
0000800F0000800F0000800F0000800F0000800F0000800F0000800F0000800F0000800F
0000800F0000800F0000800F0000800700010007800100038001000380020001C0040000
E0080000383000000FC0001D207E9E22>I<FFF003FE1F8000F80F0000600F0000200780
0040078000400780004003C0008003C0008003E0018001E0010001E0010000F0020000F0
020000F802000078040000780400003C0800003C0800003C0800001E1000001E1000001F
1000000F2000000F20000007C0000007C0000007C0000003800000038000000380000001
00001F207F9E22>I<FFF07FF81FF01F000FC007C00F00078001800F00078001000F0007
C001000F8007C00300078007C00200078009E0020007C009E0020003C009E0040003C019
F0040003C010F0040001E010F0080001E010F0080001E02078080000F02078100000F020
78100000F0403C10000078403C20000078403C20000078801E2000007C801E6000003C80
1E4000003D000F4000003F000F4000001F000F8000001F000F8000001E00078000000E00
070000000E00070000000C000300000004000200002C207F9E2F>I<7FF81FF80FE007C0
07C0030003C0020003E0060001F0040000F0080000F8180000781000003C2000003E6000
001E4000000F8000000F8000000780000003C0000007E0000005E0000008F0000018F800
0010780000207C0000603E0000401E0000801F0001000F8001000780020007C0060003C0
1F0007E0FFC01FFE1F1F7F9E22>I<FFF001FF1F8000780F8000600780006007C0004003
C0008003E0008001F0010000F0010000F80200007C0600003C0400003E0800001E080000
1F1000000FB0000007A0000007E0000003C0000003C0000003C0000003C0000003C00000
03C0000003C0000003C0000003C0000003C0000003C0000003C000003FFC00201F7F9E22
>I<7FFFFE7E003C78003C7000786000F86000F04001E04003E04003C040078000078000
0F00001E00001E00003C00007C0000780000F00001F00001E00203C00203C0020780020F
80060F00061E00043E000C3C000C78003C7800FCFFFFFC171F7E9E1C>I<FFFFC0C0C0C0
C0C0C0C0C0C0C0C0C0C0C0C0C0C0C0C0C0C0C0C0C0C0C0C0C0C0C0C0C0C0C0C0C0C0C0C0
C0FFFF082D7CA10D>I<080410082010201040204020804080408040B85CFC7EFC7E7C3E
381C0F0E7A9F17>I<FFFF03030303030303030303030303030303030303030303030303
03030303030303030303030303030303FFFF082D80A10D>I<081020204040808080B8FC
FC7C38060E7D9F0D>96 D<1FE000303000781800781C00300E00000E00000E00000E0000
FE00078E001E0E00380E00780E00F00E10F00E10F00E10F01E10781E103867200F83C014
147E9317>I<1C0000FC00001C00001C00001C00001C00001C00001C00001C00001C0000
1C00001C00001C7C001D87001E01801E00C01C00E01C00701C00701C00781C00781C0078
1C00781C00781C00781C00701C00F01C00E01E00C01A0180198700107C0015207E9F19>
I<01FC000706001C0F00380F00380600780000700000F00000F00000F00000F00000F000
00F000007000007800003800803800801C010007060001F80011147F9314>I<0001C000
0FC00001C00001C00001C00001C00001C00001C00001C00001C00001C00001C001F1C007
0DC00C03C01801C03801C07801C07001C0F001C0F001C0F001C0F001C0F001C0F001C070
01C07001C03801C01803C00C03C0070DC001F1F815207F9F19>I<03F0000E1C001C0E00
380700380700700700700380F00380F00380FFFF80F00000F00000F00000700000700000
3800803800801C010007060001F80011147F9314>I<007C01C6030F070F0E060E000E00
0E000E000E000E000E00FFF00E000E000E000E000E000E000E000E000E000E000E000E00
0E000E000E000E000E000E007FE01020809F0E>I<0000E003E3300E3C301C1C30380E00
780F00780F00780F00780F00780F00380E001C1C001E380033E000200000200000300000
3000003FFE001FFF801FFFC03001E0600070C00030C00030C00030C000306000603000C0
1C038003FC00141F7F9417>I<1C0000FC00001C00001C00001C00001C00001C00001C00
001C00001C00001C00001C00001C7C001C86001D03001E03801E03801C03801C03801C03
801C03801C03801C03801C03801C03801C03801C03801C03801C03801C03801C0380FF8F
F014207E9F19>I<38007C007C007C0038000000000000000000000000001C00FC001C00
1C001C001C001C001C001C001C001C001C001C001C001C001C001C001C001C00FF80091F
7F9E0C>I<00E001F001F001F000E0000000000000000000000000007007F000F0007000
700070007000700070007000700070007000700070007000700070007000700070007000
7000706070F060F0C061803F000C28829E0E>I<1C0000FC00001C00001C00001C00001C
00001C00001C00001C00001C00001C00001C00001C1FE01C07801C06001C04001C08001C
10001C20001C60001CE0001DF0001E70001C38001C3C001C1C001C0E001C0F001C07001C
07801C07C0FF9FF014207E9F18>I<1C00FC001C001C001C001C001C001C001C001C001C
001C001C001C001C001C001C001C001C001C001C001C001C001C001C001C001C001C001C
001C001C00FF8009207F9F0C>I<1C3E03E000FCC30C30001D039038001E01E01C001E01
E01C001C01C01C001C01C01C001C01C01C001C01C01C001C01C01C001C01C01C001C01C0
1C001C01C01C001C01C01C001C01C01C001C01C01C001C01C01C001C01C01C001C01C01C
00FF8FF8FF8021147E9326>I<1C7C00FC86001D03001E03801E03801C03801C03801C03
801C03801C03801C03801C03801C03801C03801C03801C03801C03801C03801C0380FF8F
F014147E9319>I<01F800070E001C03803801C03801C07000E07000E0F000F0F000F0F0
00F0F000F0F000F0F000F07000E07000E03801C03801C01C0380070E0001F80014147F93
17>I<1C7C00FD87001E01801E01C01C00E01C00F01C00701C00781C00781C00781C0078
1C00781C00781C00701C00F01C00E01E01C01E03801D87001C7C001C00001C00001C0000
1C00001C00001C00001C00001C0000FF8000151D7E9319>I<01F040070CC00E02C01C03
C03801C07801C07001C0F001C0F001C0F001C0F001C0F001C0F001C07001C07801C03801
C01C03C00C05C00709C001F1C00001C00001C00001C00001C00001C00001C00001C00001
C0000FF8151D7F9318>I<1CF0FD181E3C1E3C1E181C001C001C001C001C001C001C001C
001C001C001C001C001C001C00FFC00E147E9312>I<0FC830386018C008C008C008E000
7C003FE01FF007F8003C800E8006C006C006C004E00CD81887E00F147F9312>I<020002
000200060006000E000E003E00FFF80E000E000E000E000E000E000E000E000E000E000E
000E040E040E040E040E040708030801F00E1C7F9B12>I<1C0380FC1F801C03801C0380
1C03801C03801C03801C03801C03801C03801C03801C03801C03801C03801C03801C0380
1C07800C0780061B8003E3F014147E9319>I<FF83F83E00E01C00C00E00800E00800E00
8007010007010007830003820003820001C40001C40001E40000E80000E8000070000070
0000700000200015147F9318>I<FF9FE1FC3C0780701C0300601C0380200E0380400E03
80400E03C0400704C0800704E0800704E08003886100038871000388710001D0320001D0
3A0001D03E0000E01C0000E01C0000601800004008001E147F9321>I<FF87F81E03C00E
01800E030007020003840001C80001D80000F00000700000780000F800009C00010E0002
0E000607000403800C03C03C03E0FE07FC16147F9318>I<FF83F83E00E01C00C00E0080
0E00800E008007010007010007830003820003820001C40001C40001E40000E80000E800
007000007000007000002000002000004000004000004000F08000F08000F10000620000
3C0000151D7F9318>I<7FFF700E600E401C40384078407000E001E001C0038007800701
0E011E011C0338027006700EFFFE10147F9314>I<FFFFFC1601808C17>I
E /Fj 4 91 df<000000003FFE00000E000000000FFFFFC0001E000000007FFFFFF8003E
00000003FFFFFFFE00FE0000000FFFFFFFFF81FE0000003FFFF800FFC3FE000000FFFF80
000FF7FE000001FFFC000003FFFE000007FFF0000001FFFE00000FFFC00000007FFE0000
1FFF800000003FFE00003FFF000000001FFE00007FFE000000000FFE0000FFFC00000000
07FE0001FFF80000000007FE0003FFF00000000003FE0003FFF00000000001FE0007FFE0
0000000001FE0007FFE00000000000FE000FFFC00000000000FE000FFFC000000000007E
001FFFC000000000007E001FFF8000000000007E003FFF8000000000007E003FFF800000
0000003E003FFF8000000000003E007FFF8000000000003E007FFF0000000000003E007F
FF00000000000000007FFF0000000000000000FFFF0000000000000000FFFF0000000000
000000FFFF0000000000000000FFFF0000000000000000FFFF0000000000000000FFFF00
00000000000000FFFF0000000000000000FFFF0000000000000000FFFF00000000000000
00FFFF0000000000000000FFFF0000000000000000FFFF0000000000000000FFFF000000
7FFFFFFFFE7FFF0000007FFFFFFFFE7FFF0000007FFFFFFFFE7FFF8000007FFFFFFFFE7F
FF8000007FFFFFFFFE3FFF8000000000FFFE003FFF8000000000FFFE003FFF8000000000
FFFE001FFF8000000000FFFE001FFFC000000000FFFE000FFFC000000000FFFE000FFFC0
00000000FFFE0007FFE000000000FFFE0007FFE000000000FFFE0003FFF000000000FFFE
0003FFF800000000FFFE0001FFF800000000FFFE0000FFFC00000000FFFE00007FFE0000
0000FFFE00003FFF00000000FFFE00001FFF80000000FFFE00000FFFE0000001FFFE0000
07FFF0000003FFFE000001FFFC000007FFFE000000FFFF80001FFFFE0000003FFFFC00FF
C7FE0000000FFFFFFFFF83FE00000003FFFFFFFE00FE000000007FFFFFF8003E00000000
0FFFFFE0000E00000000003FFE000000004F4979C75D>71 D<FFFFFFE0000000000003FF
FFFFFFFFFFF0000000000007FFFFFFFFFFFFF0000000000007FFFFFFFFFFFFF800000000
000FFFFFFFFFFFFFF800000000000FFFFFFF001FFFF800000000000FFFF800001FFFFC00
000000001EFFF800001FFFFC00000000001EFFF800001FBFFE00000000003CFFF800001F
BFFE00000000003CFFF800001F9FFF000000000078FFF800001F9FFF000000000078FFF8
00001F8FFF8000000000F0FFF800001F8FFF8000000000F0FFF800001F87FFC000000001
E0FFF800001F87FFC000000001E0FFF800001F87FFC000000001E0FFF800001F83FFE000
000003C0FFF800001F83FFE000000003C0FFF800001F81FFF00000000780FFF800001F81
FFF00000000780FFF800001F80FFF80000000F00FFF800001F80FFF80000000F00FFF800
001F807FFC0000001E00FFF800001F807FFC0000001E00FFF800001F807FFC0000001E00
FFF800001F803FFE0000003C00FFF800001F803FFE0000003C00FFF800001F801FFF0000
007800FFF800001F801FFF0000007800FFF800001F800FFF800000F000FFF800001F800F
FF800000F000FFF800001F8007FFC00001E000FFF800001F8007FFC00001E000FFF80000
1F8003FFE00003C000FFF800001F8003FFE00003C000FFF800001F8003FFE00003C000FF
F800001F8001FFF000078000FFF800001F8001FFF000078000FFF800001F8000FFF8000F
0000FFF800001F8000FFF8000F0000FFF800001F80007FFC001E0000FFF800001F80007F
FC001E0000FFF800001F80003FFE003C0000FFF800001F80003FFE003C0000FFF800001F
80001FFF00780000FFF800001F80001FFF00780000FFF800001F80001FFF00780000FFF8
00001F80000FFF80F00000FFF800001F80000FFF80F00000FFF800001F800007FFC1E000
00FFF800001F800007FFC1E00000FFF800001F800003FFE3C00000FFF800001F800003FF
E3C00000FFF800001F800001FFF7800000FFF800001F800001FFF7800000FFF800001F80
0001FFF7800000FFF800001F800000FFFF000000FFF800001F800000FFFF000000FFF800
001F8000007FFE000000FFF800001F8000007FFE000000FFF800001F8000003FFC000000
FFF800001F8000003FFC000000FFF800001F8000001FF8000000FFF800001F8000001FF8
000000FFF800007FE000000FF0000000FFF800FFFFFFF0000FF00007FFFFFFFFFFFFFFF0
000FF00007FFFFFFFFFFFFFFF00007E00007FFFFFFFFFFFFFFF00007E00007FFFFFFFFFF
FFFFF00003C00007FFFFFFFF68477CC671>77 D<00000003FFF0000000000000007FFFFF
80000000000003FFFFFFF000000000000FFFFFFFFC00000000003FFF807FFF0000000000
FFF80007FFC000000003FFE00001FFF000000007FFC00000FFF80000000FFF0000003FFC
0000001FFE0000001FFE0000003FFC0000000FFF0000007FFC0000000FFF800000FFF800
000007FFC00001FFF000000003FFE00003FFF000000003FFF00003FFE000000001FFF000
07FFE000000001FFF80007FFC000000000FFF8000FFFC000000000FFFC000FFFC0000000
00FFFC001FFF80000000007FFE001FFF80000000007FFE003FFF80000000007FFF003FFF
80000000007FFF003FFF80000000007FFF007FFF00000000003FFF807FFF00000000003F
FF807FFF00000000003FFF807FFF00000000003FFF807FFF00000000003FFF80FFFF0000
0000003FFFC0FFFF00000000003FFFC0FFFF00000000003FFFC0FFFF00000000003FFFC0
FFFF00000000003FFFC0FFFF00000000003FFFC0FFFF00000000003FFFC0FFFF00000000
003FFFC0FFFF00000000003FFFC0FFFF00000000003FFFC0FFFF00000000003FFFC0FFFF
00000000003FFFC0FFFF00000000003FFFC0FFFF00000000003FFFC07FFF00000000003F
FF807FFF00000000003FFF807FFF80000000007FFF807FFF80000000007FFF803FFF8000
0000007FFF003FFF80000000007FFF003FFF80000000007FFF001FFFC000000000FFFE00
1FFFC000000000FFFE001FFFC000000000FFFE000FFFE000000001FFFC000FFFE0000000
01FFFC0007FFE000000001FFF80003FFF000000003FFF00003FFF800000007FFF00001FF
F800000007FFE00000FFFC0000000FFFC000007FFE0000001FFF8000007FFF0000003FFF
8000003FFF8000007FFF0000000FFFC00000FFFC00000007FFF00003FFF800000003FFFC
000FFFF000000000FFFF807FFFC0000000007FFFFFFFFF80000000000FFFFFFFFC000000
000003FFFFFFF00000000000007FFFFF8000000000000003FFF0000000004A4979C759>
79 D<3FFFFFFFFFFFFF803FFFFFFFFFFFFFC03FFFFFFFFFFFFFC03FFFFFFFFFFFFFC03F
FFFFFFFFFFFFC03FFFF80000FFFF803FFF800000FFFF003FFE000001FFFF003FF8000003
FFFE003FF0000003FFFC003FE0000007FFFC003FC000000FFFF8007F8000000FFFF0007F
8000001FFFF0007F0000001FFFE0007F0000003FFFC0007F0000007FFFC0007E0000007F
FF80007E000000FFFF00007E000001FFFF00007C000001FFFE00007C000003FFFC00007C
000007FFFC00007C000007FFF800007C00000FFFF000000000001FFFF000000000001FFF
E000000000003FFFC000000000007FFFC000000000007FFF800000000000FFFF80000000
0001FFFF000000000001FFFE000000000003FFFE000000000007FFFC000000000007FFF8
00000000000FFFF800000000001FFFF000000000001FFFE000000000003FFFE000000000
007FFFC000000000007FFF800000000000FFFF800003E00000FFFF000003E00001FFFE00
0003E00003FFFE000003E00003FFFC000003E00007FFF8000007E0000FFFF8000007E000
0FFFF0000007C0001FFFE0000007C0003FFFE0000007C0003FFFC000000FC0007FFF8000
000FC000FFFF8000000FC000FFFF0000001FC001FFFE0000001FC003FFFE0000003FC003
FFFC0000003FC007FFFC0000007FC00FFFF8000000FFC00FFFF0000001FFC01FFFF00000
03FFC03FFFE000000FFFC03FFFC000003FFF807FFFC00007FFFF80FFFFFFFFFFFFFF80FF
FFFFFFFFFFFF80FFFFFFFFFFFFFF80FFFFFFFFFFFFFF807FFFFFFFFFFFFF803B4779C649
>90 D E end
%%EndProlog
%%BeginSetup
%%Feature: *Resolution 300dpi
TeXDict begin
%%PaperSize: a4

%%EndSetup
%%Page: 1 1
1 0 bop 791 258 a Fj(ZMOG)667 383 y Fi(The)15 b(ZMailer)h(Op)q
(erations)f(Guide)847 445 y(Beta)g(Release)825 507 y(V)l(ersion)h
(2.99.21)844 694 y(Matti)e(Aarnio)814 756 y(mea)p Fh(@)p
Fi(nic.funet.\014)560 881 y(Finnish)j(Univ)o(ersit)o(y)f(and)f(Researc)
o(h)h(Net)o(w)o(ork)894 943 y(FUNET)p eop
%%Page: 1 2
1 1 bop 0 -58 a Fi(Distribution)1686 b(1)0 183 y Fg(Distribution)62
370 y Fi(Cop)o(yrigh)o(t)286 369 y(c)276 370 y Ff(\015)14
b Fi(1988)h(Ra)o(y)o(an)f(S.)h(Zac)o(hariassen.)20 b(Cop)o(yrigh)o(t)
1141 369 y(c)1131 370 y Ff(\015)14 b Fi(1995)g(Matti)h(Aarnio)62
507 y(This)h(man)o(ual)g(is)g(freely)g(distributable)i(for)d(use)h
(with)g(ZMailer)f(sources,)h(whic)o(h)g(are)f(a)o(v)m(ailable)j(at)c(v)
m(arious)0 569 y(sites)i(around)f(the)g(net)o(w)o(ork.)p
eop
%%Page: 2 3
2 2 bop 0 -58 a Fi(2)1403 b(ZMailer)16 b(Op)q(erations)g(Guide)0
183 y Fg(1.)41 b(In)n(tro)r(duction)62 380 y Fi(ZMailer)p
Ff(y)16 b Fi(is)g(a)f(mailer)h(subsystem)f(for)g(the)g(UNIX)p
Ff(z)h Fi(op)q(erating)g(system.)62 519 y(A)j(mailer)g(is)f(in)h(c)o
(harge)f(of)g(handling)i(all)f(mail)g(messages)f(that)f(are)h(created)g
(on)g(a)g(system)g(\(t)o(ypically)h(a)0 582 y(single)e(host\),)d(from)g
(their)i(creation)f(un)o(til)h(\014nal)g(disp)q(osition)h(lo)q(cally)g
(or)e(b)o(y)g(transfer)g(to)f(another)h(system.)62 721
y(As)20 b(suc)o(h,)g(the)g(mailer)g(subsystem)f(\(the)g(Message)g(T)l
(ransfer)g(Agen)o(t,)h(a.k.a.)31 b(MT)l(A\))19 b(m)o(ust)g(in)o
(terface)h(to)0 783 y(lo)q(cal)d(mail)f(reading)g(and)g(comp)q(osing)g
(programs)e(\(User)h(Agen)o(ts,)g(a.k.a.)k(MUAs\),)c(to)f(the)i(v)m
(arious)g(transp)q(ort)0 845 y(metho)q(ds)21 b(that)e(can)i(b)q(e)g
(used)g(to)f(reac)o(h)g(other)g(mailers,)i(and)f(to)f(a)g(v)m(ariet)o
(y)h(of)f(databases)g(describing)i(the)0 908 y(mailer's)16
b(en)o(vironmen)o(t.)62 1047 y(ZMailer)g(pro)o(vides)f(this)h
(functionalit)o(y)g(in)g(a)e(pac)o(k)m(age)h(and)h(with)f(a)g
(philosoph)o(y)h(that)e(has)h(b)q(ene\014ted)i(from)0
1109 y(exp)q(eriences)g(with)f(earlier)g(mailers.)62
1248 y(ZMailer)j(pro)o(vides)g(a)f(capable,)i(robust,)f(e\016cien)o(t)g
(subsystem)g(to)f(do)g(the)h(job,)g(whic)o(h)g(will)h(excel)g(in)f(de-)
0 1310 y(manding)d(en)o(vironmen)o(ts,)f(but)g(is)h(simple)h(enough)e
(to)g(\014t)g(easily)h(ev)o(erywhere.)62 1449 y(While)k(the)f(ZMailer)g
(do)q(es)g(tak)o(e)f(more)h(system)f(resources,)h(than)g(sendmail,)i
(it)d(con)o(trols)h(that)f(resource)0 1511 y(consumption)d(a)f(bit)g(b)
q(etter;)g(SMTP)g(input,)h(and)f(`)p Fe(sendmail)p Fi('-compabilit)o(y)
g(mo)q(dule)h(are)f(rather)g(ligh)o(t)o(w)o(eigh)o(t)0
1574 y(pro)q(cesses)h(that)f(just)h(feed)g(a)g(job)f(sp)q(o)q(ol)i
(\014le)g(in)o(to)e(lo)q(cal)i(\014lesystem)g(for)e(other)g(system)h
(comp)q(onen)o(ts)g(to)f(tac)o(kle)0 1636 y(with.)62
1775 y(Message)h(routing)g(decissions)i(are)e(done)h(with)f(a)g
(\014xed)h(set)f(of)g(pro)q(cesses,)g(and)h(\014nal)g(deliv)o(ery)g(is)
g(ac)o(hiev)o(ed)0 1837 y(with)g(rather)e(\014ne-grain)i(con)o(trolled)
g(sc)o(heduler)h(system.)0 2080 y Fd(1.1)35 b(Motiv)l(ation)23
b(and)h(Heritage)62 2219 y Fi(Man)o(y)19 b(of)f(m)o(y)q(\\I")h(b)q
(eing)h(usually)g(Ra)o(y)o(an)f(Zac)o(hariassen)g(around)g(late)h
(1980es;)f(Matti)g(Aarnio)g(came)g(in)0 2281 y(latter.easons)d(for)g
(trying)h(to)f(impro)o(v)o(e)h(the)g(state)f(of)g(the)h(art)f(in)i
(message)e(handling)j(systems)d(are)h(based)g(on)0 2344
y(the)k(fact)f(that)f(the)i(capabilities)i(of)d(a)o(v)m(ailable)i(soft)
o(w)o(are)d(hasn't)h(c)o(hanged)h(for)f(a)g(long)h(time,)g(whereas)g
(the)0 2406 y(demands)16 b(b)q(eing)g(placed)h(on)e(the)g(soft)o(w)o
(are)e(ha)o(v)o(e)i(steadily)h(risen.)p 0 2462 600 2
v 21 2508 a Ff(y)23 b Fi(Ev)o(oking)13 b(references)h(to)f(The)g
(Mailer,)h(That)f(Mailer,)h(or)e(ev)o(en)i(Le)g(Mailer,)f(dep)q(ending)
j(on)d(reader's)g(origin.)21 2558 y Ff(z)23 b Fi(UNIX)17
b(w)o(as)e(a)h(T)l(rademark)f(of)h(A)l(T&T)g(Bell)i(Lab)q(oratories,)e
(but)g(since)h(then)g(resold)f(sev)o(eral)h(times.)22
b(Who)0 2620 y(o)o(wns)15 b(it)g(to)q(da)o(y)l(,)f(is)i(for)f(the)g
(reader)g(to)g(\014nd)h(out)e({)h(if)h(they)f(care.)-1691
2670 y(\\I")g(b)q(eing)h(usually)h(Ra)o(y)o(an)e(Zac)o(hariassen)g
(around)g(late)g(1980es;)f(Matti)h(Aarnio)g(came)g(in)h(latter.)22
b(r)p eop
%%Page: 3 4
3 3 bop 0 -58 a Fi(In)o(tro)q(duction)1679 b(3)62 183
y(A)15 b(few)g(y)o(ears)f(ago,)f(p)q(eople)k(w)o(ere)d(still)i
(dreaming)f(of)g(a)f(w)o(orld)h(with)g(consisten)o(t)g(standards)f(for)
g(addressing)0 246 y(electronic)h(mail)f(and)g(mo)o(ving)f(it)g
(around.)20 b(Ev)o(en)13 b(though)g(the)h(consistency)g(is)g(constan)o
(tly)f(impro)o(ving,)h(it)f(no)o(w)0 308 y(seems)j(apparen)o(t)f(that)g
(there)h(will)h(alw)o(a)o(ys)e(b)q(e)h(needs)h(that)e(con\015ict)h
(with)g(the)g(ideal)h(situation.)22 b(This)16 b(is)g(v)o(ery)0
370 y(ob)o(vious)f(to)g(sites)g(that)g(in)o(teract)g(with)h(t)o(w)o(o)d
(or)i(more)g(t)o(yp)q(es)g(of)g(net)o(w)o(orks.)62 508
y(F)l(or)k(those)f(sites)h(that)g(are)f(directly)i(attac)o(hed)f(to)f
(just)h(one)g(net)o(w)o(ork,)f(an)o(y)h(degree)g(of)f(transparency)h
(in)0 570 y(comm)o(unicating)c(with)g(sites)g(on)f(other)h(net)o(w)o
(orks,)e(m)o(ust)h(b)q(e)h(pro)o(vided)g(b)o(y)g(the)f(soft)o(w)o(are)f
(on)h(a)g(mail)i(gatew)o(a)o(y)l(.)0 632 y(Most)c(suc)o(h)h(soft)o(w)o
(are)e(w)o(as)h(not)g(designed)i(to)e(p)q(erform)h(the)g(task)f(of)g
(gatew)o(a)o(ying)g(messages)g(b)q(et)o(w)o(een)h(net)o(w)o(orks)0
695 y(with)j(heterogenous)f(addressing)g(and)h(message)f(standards.)62
832 y(ZMailer)h(w)o(as)e(primarily)i(a)f(reaction)g(to)f(Sendmail's)i
(disadv)m(an)o(tages)f(\(whic)o(h)h(I)f(shall)h(men)o(tion\),)f(but)g
(also)0 895 y(to)g(the)g(bad)g(\(and)g(go)q(o)q(d!\))20
b(p)q(oin)o(ts)15 b(of)g(sev)o(eral)h(other)e(mailers.)62
1033 y(The)j(design)h(of)e(ZMailer)i(w)o(as)e(often)g(guided)i(b)o(y)f
(m)o(y)f(view)i(of)e(the)h(p)q(o)q(or)g(c)o(hoices)g(or)g(pro)o
(visions)g(of)f(other)0 1095 y(mailers,)g(as)e(opp)q(osed)i(to)f
(things)g(they)h(had)f(done)h(w)o(ell.)62 1233 y(This)i(allo)o(ws)g
(the)f(design)h(to)f(dra)o(w)f(from)h(exp)q(erience)i(without)f
(limiting)h(its)e(creativit)o(y)h(and)f(use)h(of)f(new)0
1295 y(solutions.)62 1433 y(T)l(o)e(clarify)h(m)o(y)e(opinions)i
(somewhat,)e(a)h(commen)o(tary)f(on)g(the)h(v)m(arious)h(mailers)g(I)f
(kno)o(w)f(of)h(should)h(pro)o(v)o(e)0 1495 y(helpful:)0
1710 y Fd(1.1.1)36 b(Heritage:)29 b(sendmail)62 1848
y Fi(The)11 b(b)q(est)f(a)o(v)m(ailable)i(system)e(to)f(accomplish)j
(address)e(manipulation)i(in)f(a)f(heterogenous)g(en)o(vironmen)o(t)g
(has)0 1910 y(previously)j(b)q(een)f(Sendmail,)i(whic)o(h)e(w)o(as)e
(carried)i(along)f(on)h(its)f(relativ)o(e)h(strength)f(for)f(address)i
(manipulation.)62 2048 y(Unfortunately)l(,)18 b(SendmailW)l(e)i(m)o
(ust)d(agree)g(that)f(Sendmail)k(v.8)c(has)i(impro)o(v)o(ed)f(a)g(lot)h
(from)f(previously)0 2110 y(abundan)o(t)e(v.5)p Fc(:)7
b(:)g(:)n Fi(as)15 b(man)o(y)g(design)h(\015a)o(ws)f(that)g(lessen)h
(its)g(usefulness)h(ev)o(en)e(in)i(t)o(ypical)f(en)o(vironmen)o(ts)f
(of)g(our)0 2173 y(time.)62 2310 y(Sendmail's)e(ma)s(jor)d(con)o
(tribution)i(to)f(the)g(art)g(w)o(as)g(the)g(use)h(of)f(pro)q(duction)h
(rules)g(to)f(manipulate)i(addresses)0 2373 y(and)i(to)g(guide)h(the)f
(op)q(erations)h(p)q(erformed)f(on)g(a)g(message.)62
2510 y(It)h(also)f(p)q(opularized,)i(and)f(in)g(certain)g(en)o
(vironmen)o(ts)g(pioneered,)g(other)f(functionalit)o(y)i(that)e(turned)
g(out)0 2573 y(to)i(b)q(e)h(quite)g(useful;)h(for)e(example)h(the)g
(use)f(of)g(system-wide)h(aliases)g(\014le,)h(as)e(w)o(ell)h(as)f(p)q
(ersonal)i(forw)o(arding)p 0 2624 600 2 v -1662 2670
a(W)l(e)d(m)o(ust)e(agree)h(that)g(Sendmail)i(v.8)d(has)h(impro)o(v)o
(ed)g(a)g(lot)g(from)g(previously)h(abundan)o(t)g(v.5)p
Fc(:)7 b(:)g(:)20 b Fi(h)p eop
%%Page: 4 5
4 4 bop 0 -58 a Fi(4)1403 b(ZMailer)16 b(Op)q(erations)g(Guide)0
183 y(\014le,)e(a)f(widely)h(a)o(v)m(ailable)h(SMTP)e(implemen)o
(tation,)h(external)g(and)f(consisten)o(tly)h(treated)e(deliv)o(ery)j
(programs,)0 246 y(etc.)62 388 y(Sendmail,)h(in)f(the)g(righ)o(t)f
(hands,)g(can)g(b)q(e)h(quite)g(a)f(\015exible)j(to)q(ol)d(to)f
(translate)h(b)q(et)o(w)o(een)h(the)f(di\013eren)o(t)h(con-)0
450 y(v)o(en)o(tions)f(of)g(v)m(arious)g(net)o(w)o(orks.)k
(Unfortunately)c(this)h(is)f(accomplished)i(b)o(y)e(programming)f(in)i
(an)f(unfamiliar)0 512 y(pro)q(duction)i(language)g(con)o(taining)g
(man)o(y)e(magic)i(features.)62 655 y(The)e(learning)i(time)e(for)f
(doing)i(this)f(is)h(v)o(ery)f(long,)g(the)g(e\013ort)f(in)o(v)o(olv)o
(ed)h(is)h(that)e(of)h(learning)h(a)f(completely)0 717
y(new)i(language)h(and)f(en)o(vironmen)o(t.)23 b(Moreo)o(v)o(er,)14
b(Sendmail)k(has)e(all)h(ma)s(jor)d(comp)q(onen)o(ts)i(built)i(in)o(to)
e(a)g(single)0 779 y(large)f(program.)62 921 y(Both)g(of)g(these)g
(design)i(decisions)f(ha)o(v)o(e)f(b)q(een)i(ac)o(kno)o(wledged)e(as)g
(mistak)o(es)g(b)o(y)g(the)g(author)g(of)g(Sendmail.)62
1064 y(One)g(of)f(the)g(big)h(problems)g(with)f(Sendmail)i(is)f(its)f
(st)o(yle)g(of)g(running)h(all)h(of)d(the)i(pro)q(cessing)g(from)e
(submis-)0 1126 y(sion/reception)j(of)f(the)g(message)g(to)g(its)g
(\014nal)h(deliv)o(ery)h(in)f(one)f(pro)q(cess.)62 1268
y(It)f(mak)o(es)f(no)h(problem)g(when)h(the)e(n)o(um)o(b)q(er)h(of)g
(emails)g(in)h(pro)q(cessing)g(is)f(small,)g(but)g(when)g(there)g(are)g
(a)f(lot)0 1330 y(of)18 b(messages)f(\015o)o(wing,)h(there)g(are)g(a)g
(lot)f(of)h(memory)f(consuming,)i(and)g(load)f(generating)g(pro)q
(cesses)g(activ)o(e.)0 1393 y(\(With)d(Sendmail)i(v.8)e(there)g(are)g
(reasonable)g(load)h(limiting)h(functions)f(a)o(v)m(ailable)h(though)p
Fc(:)7 b(:)g(:)n Fi(\))62 1535 y(Its)14 b(ma)s(jor)f(shortcoming)h(in)h
(comparison)f(to)f(the)h(MMDF)f(mailer)i(is)f(its)h(primitiv)o(e)g
(database)f(facilit)o(y)h(and)0 1597 y(lac)o(k)g(of)g(cac)o(hing.)21
b(\(Again)15 b(the)g(sendmail)i(v.8)d(has)h(since)i(then)e(impro)o(v)o
(ed)h(things)f(a)g(bit.\))0 1852 y Fd(1.1.2)36 b(Heritage:)29
b(MMDF,)24 b(PMDF)62 1994 y Fi(MMDF)13 b(is)h(a)g(comprehensiv)o(e)h
(mail)g(en)o(vironmen)o(t,)f(including)i(its)e(o)o(wn)g(mail)g(comp)q
(osition)h(program,)e(and)0 2056 y(of)i(course)g(a)g(mailer.)62
2199 y(There)g(are)f(to)q(o)g(man)o(y)g(parts)g(to)g(it)g(\(as)g(a)g
(friend)i(w)o(ould)f(sa)o(y)l(,)e(it)i(is)g(a)f(system,)g(not)g(a)g
(subsystem\),)g(and)h(the)0 2261 y(address)g(manipulation)i(is)f(only)f
(su\016cien)o(t)h(for)f(a)g(relativ)o(ely)h(homogenous)f(en)o(vironmen)
o(t.)62 2403 y(It)e(do)q(es)f(ha)o(v)o(e)g(reasonable)h(database)f
(facilities)j(and)d(cac)o(hing,)h(as)f(opp)q(osed)h(to)f(Sendmail,)i
(and)f(the)f(concept)0 2465 y(of)j(Channels.)62 2608
y(Ho)o(w)o(ev)o(er,)e(kno)o(wledge)g(ab)q(out)g(address)h(seman)o(tics)
f(is)h(distributed)g(in)h(sev)o(eral)e(programs)f(instead)i(of)f(b)q
(eing)0 2670 y(cen)o(tralized.)p eop
%%Page: 5 6
5 5 bop 0 -58 a Fi(In)o(tro)q(duction)1679 b(5)62 183
y(PMDF)20 b(is)i(a)f(smaller)h(v)o(ersion)f(of)f(MMDF)g(with)i(corresp)
q(ondingly)g(reduced)h(features)d(and)i(\015exibilit)o(y)l(.)0
246 y(\(Commercial)15 b(PMDF)f(is)i(di\013eren)o(t)g(story)p
Fc(:)7 b(:)g(:)m Fi(\))0 496 y Fd(1.1.3)36 b(Heritage:)29
b(Upas)62 638 y Fi(Upas)14 b(is)g(a)g(curious)g(approac)o(h)g(to)f(the)
g(problem.)21 b(It)13 b(lets)h(the)g(user)g(do)g(half)g(the)g(w)o(ork)f
(of)g(message)g(routing,)0 700 y(in)j(a)f(manner)g(similar)i(to)d(PMDF)
g(on)h(VMS)h(systems.)62 842 y(It)i(is)g(en)o(tirely)h(concerned)f
(with)g(the)g(message)f(en)o(v)o(elop)q(e,)i(and)e(lea)o(v)o(es)h(all)h
(message)e(header)h(m)o(unging)g(to)0 904 y(auxiliary)j(programs,)d(if)
i(appropriate.)33 b(In)20 b(fairness)f(one)h(should)g(note)f(this)h
(mailer)g(w)o(as)f(dev)o(elop)q(ed)i(in)f(an)0 966 y(en)o(vironmen)o(t)
e(where)h(most)e(message)g(headers)i(w)o(ere)e(scorned,)i(th)o(us)f
(making)g(this)g(a)g(reasonable)g(approac)o(h)0 1029
y(\(\\optimize)e(the)f(normal)g(case"\).)62 1170 y(The)i(Eigh)o(th)f
(Edition)h(Upas)f(had)g(no)g(database)f(capabilit)o(y)j(at)d(all,)i
(but)f(it)g(did)h(exhibit)h(one)e(useful)h(c)o(har-)0
1233 y(acteristic:)j(the)14 b(routing)g(decisions)i(w)o(ere)e(made)g(b)
o(y)g(passing)g(the)h(recipien)o(t)g(en)o(v)o(elop)q(e)h(address)e
(through)f(a)h(set)0 1295 y(of)g(regular)g(expressions.)21
b(This)15 b(pro)q(duction)g(rule)g(approac)o(h)f(is)h(similar)h(to)e
(what)f(Sendmail)k(do)q(es,)d(but)h(uses)f(a)0 1357 y(more)h(familiar)h
(mec)o(hanism)g(and)f(en)o(vironmen)o(t.)0 1608 y Fd(1.1.4)36
b(Heritage:)29 b(Smail)21 b(3.0)62 1750 y Fi(The)14 b(\014nal,)h(and)f
(most)f(recen)o(tly)i(dev)o(elop)q(ed,)g(mailer)g(w)o(orth)e(men)o
(tioning)i(here)f(is)g(Smail3.0.Around)g(1988,)0 1812
y(since)i(then)g(Smail3.1)f(has)g(b)q(een)i(released)f(with)f(man)o(y)g
(di\013erences)p Fc(:)7 b(:)g(:)62 1954 y Fi(It)14 b(is)h(in)o(tended)g
(as)f(a)g(program)f(capable)i(of)e(replacing)j(Sendmail)f(in)g(man)o(y)
f(situations.)20 b(T)l(o)13 b(a)h(large)g(exten)o(t)0
2016 y(it)h(succeeds)i(as)e(this,)g(and)g(there)h(are)e(some)h(nice)i
(ideas)f(in)o(v)o(olv)o(ed)g(as)e(w)o(ell.)62 2158 y(Its)d(t)o(w)o(o)e
(ma)s(jor)g(dra)o(wbac)o(ks)h(are)h(that)f(it)h(is)g(not)f(as)g(easy)h
(to)f(adapt)g(to)g(lo)q(cal)i(needs)g(as)e(Sendmail)i(is)g(\(compiled)0
2220 y(instead)k(of)f(in)o(terpreted)g(rules)h(and)g(algorithms\),)e
(and)i(retaining)g(Sendmail's)g(single-program)g(design.)62
2362 y(It)11 b(addresses)f(database)g(and)g(cac)o(hing)h(issues,)h(and)
e(seems)h(generally)g(lik)o(e)h(a)d(nicer)j(design)f(in)g(man)o(y)f
(resp)q(ects,)0 2424 y(a)15 b(bit)h(lik)o(e)g(PMDF's)e(con\014guration)
h(options)g(in)h(a)f(Sendmail)i(pac)o(k)m(age.)62 2566
y(XXX:)e(Smail)i(3.1)d(??)p 0 2624 600 2 v -1486 2670
a(Around)h(1988,)f(since)i(then)g(Smail3.1)f(has)g(b)q(een)i(released)f
(with)f(man)o(y)g(di\013erences)p Fc(:)7 b(:)g(:)22 b
Fi(.)p eop
%%Page: 6 7
6 6 bop 0 -58 a Fi(6)1403 b(ZMailer)16 b(Op)q(erations)g(Guide)0
183 y Fd(1.1.5)36 b(Result:)29 b(ZMailer)62 340 y Fi(Un)o(til)14
b(the)f(recen)o(t)f(increase)i(in)f(the)g(demand)g(for)f(in)o(ter-net)o
(w)o(ork)g(mail)i(gatew)o(a)o(ying,)d(Sendmail's)j(\015exibili)q(t)o(y)
0 402 y(had)h(quite)h(adequately)g(serv)o(ed)f(to)g(implemen)o(t)h(a)f
(gatew)o(a)o(y)f(function)i(b)q(et)o(w)o(een)f(selected)i(net)o(w)o
(orks.)62 559 y(With)12 b(increased)h(v)m(ariet)o(y)e(of)g(the)h
(normal)f(address)h(syn)o(tax)e(and)i(mail)g(capabilities)i(of)d
(connected)h(net)o(w)o(orks,)0 621 y(and)18 b(more)f(complex)i(kinds)g
(of)e(routing)h(decisions)i(b)q(ecoming)f(necessary)l(,)f(the)g
(existing)h(mailers)f(ha)o(v)o(e)g(b)q(een)0 683 y(sho)o(wing)d(their)h
(age)f(and)g(their)h(limits.)62 840 y(Also)h(recen)o(t)f(nearly)h(exp)q
(onen)o(tial)g(gro)o(wth)e(of)h(the)g(In)o(ternet)h(has)f(put)g
(serious)h(demands)f(on)h(system)e(p)q(er-)0 902 y(formance,)f(and)i
(there)f(is)h(readily)g(a)f(mark)o(et)f(for)h(mailers)h(pro)q(cessing)g
(more)f(than)g(million)i(messages)e(a)g(da)o(y!)62 1059
y(ZMailer)h(is)g(in)o(tended)g(to)f(giv)o(e)g(the)g(mail)h
(administrator)f(a)g(soft)o(w)o(are)f(to)q(ol)h(that)f(\014ts)h(the)h
(times.)0 1275 y Fd(1.2)35 b(Goals)62 1412 y Fi(Apart)17
b(from)f(the)h(generic)h(goals)f(of)g(robustness)g(and)g(e\016ciency)l
(,)i(the)e(follo)o(wing)h(is)g(a)e(list)i(of)f(the)g(sp)q(eci\014c)0
1474 y(goals)e(of)g(ZMailer:)39 1611 y Ff(\017)30 b Fi(F)l(ully)17
b(RF)o(C822/RF)o(C976)12 b(compatible)k(syn)o(tax)f(and)g(seman)o
(tics.)39 1686 y Ff(\017)30 b Fi(A)o(t)20 b(a)h(minim)o(um)g(pro)o
(vide)h(Sendmail)g(functionalit)o(y)g(from)e(p)q(oin)o(t)h(of)f(view)i
(of)e(users)h(and)g(the)f(system)90 1748 y(administrator.)39
1823 y Ff(\017)30 b Fi(Mak)o(e)14 b(routing)i(decisions)h(based)e(on)g
(original)i(sender)e(and)h(path)f(of)g(the)g(message.)39
1898 y Ff(\017)30 b Fi(Not)15 b(ha)o(v)o(e)f(hardco)q(ded)j(address)e
(rewriting)g(and)h(routing)f(algorithms.)39 1973 y Ff(\017)30
b Fi(A)15 b(b)q(etter)g(user)h(in)o(terface)f(for)g(the)g(mail)h
(administrator)f(than)g(Sendmail.)39 2047 y Ff(\017)30
b Fi(In)o(teract)15 b(prop)q(erly)h(with)f(In)o(ternet)h(Nameserv)o
(ers.)39 2122 y Ff(\017)30 b Fi(Easily)16 b(extensible)h(to)e(mak)o(e)f
(use)i(of)f(new)g(sources)g(of)g(data.)39 2197 y Ff(\017)30
b Fi(E\016cien)o(t)15 b(enough)f(to)g(handle)h(a)f(large)g(message)g(v)
o(olume,)g(and)g(to)g(not)g(signi\014can)o(tly)h(degrade)g(its)f(o)o
(wn)f(or)90 2259 y(system)i(p)q(erformance)g(when)h(man)o(y)f(messages)
f(are)h(queued.)39 2334 y Ff(\017)30 b Fi(Sc)o(hedule)17
b(deliv)o(ery)g(based)e(on)g(destination)h(c)o(hannel,)g(destination)h
(host,)d(or)h(a)g(com)o(bination)g(of)g(b)q(oth.)39 2408
y Ff(\017)30 b Fi(Able)16 b(to)f(do)g(a)g(b)q(etter)g(job,)g(than)g
(Sendmail)i(in)f(our)f(high)h(load)f(en)o(vironmen)o(ts.)39
2483 y Ff(\017)30 b Fi(Be)16 b(small)h(enough)f(to)g(b)q(e)g(usable)h
(ev)o(en)f(on)g(a)g(smallest)g(of)g(the)g(w)o(orkstations)e(as)i(lo)q
(cal)h(program)e({)g(w)o(ell,)90 2545 y(\\small")h(is)g(rather)f
(\015exible,)i(but)e(Lin)o(ux)i(v)o(ersion)f(tak)o(es)f(circa)h(1.0)e
(MB)h(disk,)h(and)g(0.5)f(MB)g(RAM)g(when)90 2608 y(running)e(in)g
(minim)o(um)g(con\014guration)g(\(Lin)o(ux-1.2\).)18
b(F)l(or)12 b(Sendmail)i(the)e(same)g(\014gures)g(are)g(circa)g
(0.3/0.3)90 2670 y(MB)p Fc(:)7 b(:)g(:)p eop
%%Page: 7 8
7 7 bop 0 -58 a Fi(In)o(tro)q(duction)1679 b(7)62 183
y(F)l(or)17 b(a)h(while)h(it)f(has)g(b)q(een)h(apparen)o(t)e(that)g
(Sendmail's)i(approac)o(h)f(to)f(its)h(task)f(is)h(not)g(w)o
(ell-suited)i(from)0 246 y(sev)o(eral)15 b(p)q(ersp)q(ectiv)o(es.)62
384 y(In)20 b(particular,)h(ha)o(ving)e(a)g(single)i(program)d(em)o(b)q
(o)q(dy)i(sev)o(eral)g(conceptually)h(indep)q(enden)o(t)g(functions)f
(is)0 447 y(recognized)c(as)f(p)q(o)q(or)g(design.)62
585 y(In)h(practice,)f(merging)g(queueing)h(and)f(deliv)o(ery)i(in)e
(one)g(program)f(causes)h(a)g(b)q(ottlenec)o(k)g(for)g(all)g(messages)0
648 y(when)h(a)f(particular)g(deliv)o(ery)i(mec)o(hanism)f(is)g(slo)o
(w.)j(\(Actually)d(this)g(is)g(not)e(an)i(easy)f(issue)h(on)f(an)o(y)g
(system.\))0 889 y Fd(1.3)35 b(Design)22 b(Summary)62
1027 y Fi(ZMailer)d(is)g(a)g(m)o(ulti-pro)q(cess)h(mailer,)f(using)h(t)
o(w)o(o)d(daemon)i(pro)q(cesses)g(to)f(manipulate)i(messages.)29
b(One)0 1090 y(of)18 b(these)g(pro)q(cesses)g(is)g(a)g(router)f(\(or)h
(a)f(set)h(of)f(routers\),)h(and)g(it)g(mak)o(es)f(all)i(decisions)h
(ab)q(out)e(what)f(should)0 1152 y(happ)q(en)f(to)e(a)g(message.)19
b(The)c(other)f(daemon)g(is)h(a)f(message)h(queue)g(manager,)e(used)j
(to)d(sc)o(hedule)j(deliv)o(ery)g(of)0 1214 y(messages.)62
1353 y(The)11 b(Router)g(uses)g(a)g(con\014guration)g(\014le)h(that)e
(closely)i(follo)o(ws)f(Bourne)g(shell)i(script)e(syn)o(tax)f(and)h
(seman)o(tics,)0 1415 y(with)16 b(minimal)g(magic.)62
1554 y(Message)h(\014les)g(are)g(mo)o(v)o(ed)f(around)h(in)h(a)f
(series)g(of)g(directories,)h(and)f(the)g(Sc)o(heduler)h(and)f(its)h(T)
l(ransp)q(ort)0 1616 y(Agen)o(ts)d(run)g(o\013)g(of)f(con)o(trol)h
(\014les)h(created)g(b)o(y)f(the)g(Router.)62 1755 y(The)20
b(Router)g(will)i(pro)q(cess)e(messages)f(one)h(at)f(a)h(time,)h(as)e
(it)h(\014nds)h(them)f(in)g(a)g(directory)g(where)g(User)0
1818 y(Agen)o(ts)c(submit)h(their)g(outgoing)g(messages.)23
b(\(There)17 b(can)f(b)q(e)i(parallel)g(Router)f(pro)q(cesses)g(sp)q
(eeding)h(up)f(the)0 1880 y(pro)q(cessing.\))62 2019
y(En)o(v)o(elop)q(e)i(and)e(Message)g(Header)h(information)f(is)h(all)g
(k)o(ept)g(in)g(the)f(same)g(message)g(\014le)i(along)e(with)h(the)0
2081 y(message)d(b)q(o)q(dy)l(,)g(and)h(this)g(\014le)g(is)f(nev)o(er)h
(mo)q(di\014ed)g(b)o(y)g(an)o(y)e(ZMailer)i(program.)62
2220 y(After)11 b(parsing)f(the)h(en)o(v)o(elop)q(e)h(and)f(RF)o(C822)e
(header)i(information,)h(the)e(Router)h(v)m(alidates)h(the)f
(information)0 2282 y(extracted,)k(and)g(calls)i(functions)f(de\014ned)
h(in)f(the)g(con\014guration)f(\014le)i(to)d(decide)k(exactly)d(ho)o(w)
g(to)g(deliv)o(er)i(the)0 2344 y(message)i(and)g(ho)o(w)f(to)h
(transform)f(the)h(em)o(b)q(edded)h(addresses.)32 b(The)19
b(algorithms)g(that)g(do)g(this)g(are)g(easily)0 2407
y(recon\014gurable,)d(since)h(the)e(con)o(trol)g(\015o)o(w)g(and)h
(address)f(manipulation)i(is)f(sp)q(eci\014ed)i(b)o(y)d(familiar)h
(shell)i(script)0 2469 y(statemen)o(ts.)62 2608 y(When)23
b(the)f(Router)g(is)g(\014nished,)k(it)c(will)i(pro)q(duce)f(a)e
(message)h(con)o(trol)g(\014le)h(for)e(use)h(b)o(y)g(the)h(deliv)o(ery)
0 2670 y(pro)q(cessing)16 b(stage)e(of)h(ZMailer,)g(and)h(mo)o(v)o(e)e
(the)i(original)g(message)f(\014le)h(to)e(another)h(lo)q(cation.)p
eop
%%Page: 8 9
8 8 bop 0 -58 a Fi(8)1403 b(ZMailer)16 b(Op)q(erations)g(Guide)62
183 y(Once)f(the)f(Router)g(has)g(decided)i(what)e(to)f(do)h(with)g
(eac)o(h)g(of)g(the)g(addresses)g(in)h(a)f(message,)f(the)h(Sc)o
(heduler)0 246 y(builds)23 b(a)e(summary)g(of)g(this)h(information)f(b)
o(y)g(reading)h(the)g(con)o(trol)f(\014le)h(created)f(b)o(y)h(the)f
(Router.)38 b(This)0 308 y(kno)o(wledge)14 b(is)f(merged)g(with)h(a)e
(data)h(structure)g(it)g(main)o(tains)h(that)e(stores)g(whic)o(h)i
(messages)f(are)f(supp)q(osed)j(to)0 370 y(b)q(e)i(sen)o(t)f(where,)g
(and)g(ho)o(w.)23 b(According)17 b(to)e(a)h(pre-arranged)g(agenda,)g
(the)g(Sc)o(heduler)i(will)g(execute)f(deliv)o(ery)0
432 y(programs)c(to)g(prop)q(erly)i(mo)o(v)o(e)e(the)h(message)g(en)o
(v)o(elop)q(e,)h(header,)f(and)g(b)q(o)q(dy)l(,)h(to)e(the)h(immediate)
h(destination.)62 569 y(These)22 b(deliv)o(ery)g(programs)e(are)h
(called)i(T)l(ransp)q(ort)d(Agen)o(ts,)i(and)f(comm)o(unicate)h(with)f
(the)g(Sc)o(heduler)0 632 y(using)14 b(a)f(simple)i(proto)q(col)f(that)
e(tells)j(them)e(whic)o(h)h(messages)f(to)g(pro)q(cess)h(and)f(returns)
h(status)e(rep)q(orts)h(to)g(the)0 694 y(Sc)o(heduler.)62
831 y(There)f(are)g(sev)o(eral)f(standard)h(T)l(ransp)q(ort)f(Agen)o
(ts)g(included)j(with)e(the)g(ZMailer)g(distribution.)20
b(The)12 b(collec-)0 893 y(tion)i(curren)o(tly)h(includes)h(a)e(lo)q
(cal)h(deliv)o(ery)g(program,)e(an)h(SMTP)f(clien)o(t)j(implemen)o
(tation,)f(and)f(a)g(T)l(ransp)q(ort)0 955 y(Agen)o(t)h(that)f(can)i
(run)f(Sendmail-compatible)j(deliv)o(ery)f(programs.)62
1092 y(The)j(Sc)o(heduler)h(also)e(manages)g(status)g(rep)q(orts,)h
(taking)f(appropriate)g(action)h(on)f(deliv)o(ery)i(errors)e(and)0
1155 y(when)d(all)g(deliv)o(ery)g(instructions)h(for)d(a)h(message)g
(ha)o(v)o(e)g(b)q(een)h(pro)q(cessed.)62 1292 y(A)g(separate)e(utilit)o
(y)j(allo)o(ws)e(querying)h(the)f(Sc)o(heduler)i(for)e(the)g(state)f
(of)h(its)g(mail)h(queues.)62 1429 y(F)l(or)h(existing)h(Sendmail)h
(installations,)g(a)e(replacemen)o(t)h(program)f(is)g(included)j(that)d
(sim)o(ulates)h(most)e(of)0 1491 y(the)e(Sendmail)i(functionalit)o(y)g
(in)f(the)f(ZMailer)h(en)o(vironmen)o(t.)20 b(This)14
b(allo)o(ws)h(ZMailer)f(to)g(replace)h(a)f(Sendmail)0
1553 y(installation)j(without)e(requiring)h(c)o(hanges)f(in)h(standard)
f(User)g(Agen)o(ts.)p eop
%%Page: 9 10
9 9 bop 0 -58 a Fi(Ov)o(erview)1742 b(9)0 183 y Fg(2.)41
b(Ov)n(erview)62 395 y Fi(This)16 b(c)o(hapter)f(deals)h(with)g(the)f
(life)i(of)e(a)g(message,)f(and)i(what)e(will)j(happ)q(en)g(to)e(a)g
(message)f(in)i(the)g(course)0 457 y(of)i(b)q(eing)i(pro)q(cessed.)32
b(The)19 b(pro)q(cessing)h(activit)o(y)f(is)g(divided)i(in)o(to)e(four)
f(ma)s(jor)f(phases)i(that)g(will)h(b)q(e)g(dealt)0 519
y(with)c(here.)62 661 y(These)h(phases)g(are:)23 b(injection)18
b(of)e(a)g(message)g(in)o(to)h(the)g(mailer)g(subsystem,)g(message)f
(routing,)g(message)0 723 y(transp)q(ort)e(queueing)j(and)e(sc)o
(heduling,)i(and)f(actual)f(deliv)o(ery)h(of)f(a)g(message.)62
865 y(The)f(phases)h(comm)o(unicate)f(through)g(the)g(\014lesystem,)g
(b)o(y)g(mo)o(ving)g(\014les)h(from)e(one)h(directory)g(to)g(another.)
62 1007 y(All)19 b(directories)g(taking)f(part)f(in)h(this)g(comm)o
(unication)h(are)e(clustered)i(under)f(the)g(`)p Fe(POSTOFFICE)p
Fi(')e(direc-)0 1069 y(tory)d(\(`)p Fe(/usr/spool/postoffic)o(e)p
Fi('\),)d(whic)o(h)15 b(is)f(in)o(tended)h(to)e(also)h(hold)h(other)e
(main)o(tenance)i(information)e(or)0 1132 y(directories)j(for)f(use)g
(b)o(y)g(the)h(system)e(P)o(ostmaster.)62 1274 y(F)l(or)19
b(this)h(reason,)f(w)o(e)g(shall)i(refer)e(to)g(\014les)h(within)h
(this)e(hierarc)o(h)o(y)h(using)g(the)f(tilde-abbreviation)j(\(e.g.)0
1336 y(`)p Fe(~/file)p Fi(')9 b(referring)h(to)f(the)i(P)o(ostmaster's)
d(`)p Fe($HOME/file)p Fi(')g(whic)o(h)j(is)f(normally)h(`)p
Fe(/usr/spool/postoffice/f)o(ile)p Fi('\))o(.)p 2048
1347 21 46 v 0 1604 a Fd(2.1)35 b(Message)23 b(Submission)62
1746 y Fi(A)17 b(mail)h(message)e(is)h(submitted)h(to)e(the)h(mailer)g
(subsystem)g(b)o(y)g(dep)q(ositing)h(a)e(\\message)g(\014le")i(in)g(a)e
(par-)0 1808 y(ticular)h(`)p Fe(ROUTER)p Fi(')d(directory)j(\(`)p
Fe(~/router)p Fi('\).)j(There)c(is)h(a)f(Sendmail)i(replacemen)o(t)e
(program)f(whic)o(h)i(submits)0 1871 y(messages)e(this)g(w)o(a)o(y)l(.)
62 2013 y(The)20 b(messages)e(are)h(pic)o(k)o(ed)i(up)e(b)o(y)h(a)e
(daemon)i(pro)q(cess)f(scanning)h(this)g(directory)l(,)g(and)g(pro)q
(cessing)g(all)0 2075 y(message)15 b(\014les)h(it)f(\014nds)h(in)g(it.)
62 2217 y(T)l(o)g(a)o(v)o(oid)g(problems)h(with)g(the)f(daemon)g(pro)q
(cessing)i(an)e(incomplete)i(or)d(inconsisten)o(t)j(message)e(\014le,)h
(the)0 2279 y(message)d(\014les)i(are)e(created)g(in)i(a)e(separate)g
(`)p Fe(PUBLIC)p Fi(')f(directory)h(\(`)p Fe(~/public)p
Fi('\),)e(and)j(then)g(renamed)f(in)o(to)h(the)0 2341
y(`)p Fe(ROUTER)p Fi(')f(directory)l(.)62 2483 y(A)g(message)f(\014le)i
(has)f(3)f(parts)g(to)h(it,)f(the)h(\014rst)g(part)f(con)o(tains)h(the)
g(en)o(v)o(elop)q(e)g(information)g(for)g(the)f(message)0
2545 y(\(if)i(an)o(y\).)k(It)14 b(consists)h(of)f(all)h(the)g(lines)h
(from)e(the)g(start)g(of)g(the)g(\014le)i(to)e(the)g(start)f(of)h(part)
g(2)h(\(exclusiv)o(e\))g(whic)o(h)0 2608 y(are)h(in)i(the)f(format)e
(of)h(RF)o(C822)g(Message)g(Header)h(lines)h Fb(except)f
Fi(that)f(there)h(is)g(no)g(colon)g(after)f(the)h(header)0
2670 y(\014eld)f(name.)p eop
%%Page: 10 11
10 10 bop 0 -58 a Fi(10)1380 b(ZMailer)16 b(Op)q(erations)g(Guide)62
183 y(An)c(RF)o(C822)f(Message)f(Header)i(is)g(easily)h(con)o(v)o
(erted)e(to)g(an)h(en)o(v)o(elop)q(e)g(header)g(line)h(b)o(y)f(simply)h
(deleting)g(the)0 246 y(colon)k(after)f(the)h(\014eld)h(name.)25
b(As)17 b(with)g(message)f(headers,)h(v)m(arious)g(\014eld)h(names)f
(ha)o(v)o(e)g(sp)q(eci\014c)h(seman)o(tics,)0 308 y(and)d(these)h(will)
h(b)q(e)f(discussed)g(in)g(detail)h(later.)62 447 y(The)e(second)f
(part)g(of)g(a)g(message)f(\014le)i(is)g(its)f(RF)o(C822)f(Message)h
(Header.)20 b(The)14 b(third)h(part)e(is)i(the)f(message)0
509 y(b)q(o)q(dy)l(.)21 b(Either)15 b(of)g(the)g(en)o(v)o(elop)q(e)i(p)
q(ortion)e(\(part)f(1\))h(or)g(the)g(message)g(header)g(p)q(ortion)h
(\(part)e(2\))h(ma)o(y)f(b)q(e)i(n)o(ull.)0 571 y(They)f(are)g
(separated)g(from)g(the)g(message)g(b)q(o)q(dy)h(b)o(y)f(an)g(empt)o(y)
g(line,)h(according)g(to)e(RF)o(C822.)62 710 y(The)f(standard)e(UNIX)i
(con)o(v)o(en)o(tions)f(for)f(\014les)i(are)f(ob)q(ey)o(ed)g(\(i.e.)19
b(lines)14 b(are)d(terminated)i(b)o(y)f(a)f(Newline)j(c)o(har-)0
772 y(acter)g(\()p Fe(LF)p Fi(\)\).)19 b(The)14 b(message)g(b)q(o)q(dy)
i(is)f(nev)o(er)g(examined)g(b)o(y)g(the)f(mailer)i(itself,)f(although)
g(transp)q(ort/deliv)o(ery)0 835 y(programs)e(m)o(ust)g(of)h(course)g
(\014lter)g(the)g(message)g(b)q(o)q(dy)h(appropriately)f(for)f(the)i
(destination.)20 b(In)15 b(other)e(w)o(ords,)0 897 y(the)j(message)g(b)
q(o)q(dy)h(ma)o(y)e(con)o(tain)h(arbitrary)g(binary)h(data.)22
b(The)16 b(only)h(restrictions)f(are)g(that)g(the)g(en)o(v)o(elop)q(e)0
959 y(and)f(message)g(header)h(m)o(ust)e(ob)q(ey)i(the)f(RF)o(C822)f
(lexical/syn)o(tax)i(rules.)62 1098 y(Once)f(the)e(message)g(\014le)i
(has)e(b)q(een)i(written)e(in)o(to)g(the)h(`)p Fe(ROUTER)p
Fi(')e(directory)l(,)i(its)f(con)o(ten)o(t)g(will)i(nev)o(er)f(c)o
(hange)0 1160 y(un)o(til)i(the)g(system)e(remo)o(v)o(es)h(it)g(after)g
(successful)h(deliv)o(ery)l(.)62 1299 y(A)f(subroutine)i(in)o(terface)e
(exists,)g(whic)o(h)h(should)g(b)q(e)g(used)g(b)o(y)f(application)i
(programs)d(or)h(User)g(Agen)o(ts)g(to)0 1361 y(submit)h(messages.)62
1500 y(The)g(subroutine)h(in)o(terface)f(is)h(prop)q(erly)f(part)g(of)f
(the)h(system)g(C)f(library)i(\(`)p Fe(/lib/libc.a)p
Fi('\),)c(and)j(will)h(b)q(e)0 1562 y(do)q(cumen)o(ted)f(as)f(suc)o(h.)
62 1701 y(It)f(is)g(quite)g(p)q(ossible)h(to)e(submit)h(messages)f(b)o
(y)h(using)g(the)g(standard)f(utilities)i(to)e(cop)o(y)h(or)f(mo)o(v)o
(e)f(a)h(\014le)i(in)o(to)0 1764 y(the)g(`)p Fe(ROUTER)p
Fi(')f(directory)l(.)62 1902 y(Indeed,)f(some)d(main)o(tenance)h
(functions)g(the)f(P)o(ostmaster)e(should)k(p)q(erform,)e(and)h
(automatic)f(resubmission)0 1965 y(of)15 b(deferred)h(messages,)e(are)h
(most)f(easily)i(accomplished)h(in)f(this)g(manner.)62
2103 y(Note)g(that)f(the)h(format)e(of)i(a)f(message)h(\014le)h(allo)o
(ws)f(a)f(user)h(to)g(simply)h(create)e(a)h(\014le)h(that)e(ob)q(eys)h
(RF)o(C822)0 2166 y(con)o(v)o(en)o(tions,)g(in)h(order)f(to)g(submit)g
(a)g(message.)23 b(It)16 b(also)g(allo)o(ws)g(simple)i(resubmission)g
(of)d(a)h(message)g(whic)o(h)0 2228 y(includes)i(the)e(UNIX)g(standard)
f(`)p Fe(From)23 b Fi(')15 b(en)o(v)o(elop)q(e)i(header)f(line)h
(\(found)e(in)i Fe(Mail)e Fi(format)f(mailb)q(o)o(x)i(\014les\),)g(as)0
2290 y(this)g(syn)o(tax)e(will)j(indeed)g(b)q(e)f(in)o(terpreted)g(to)e
(represen)o(t)h(en)o(v)o(elop)q(e)i(information.)0 2531
y Fd(2.2)35 b(Router)62 2670 y Fi(The)18 b(daemon)f(men)o(tioned)i(ab)q
(o)o(v)o(e,)e(the)g(one)h(that)e(pro)q(cesses)i(message)f(\014les)i
(app)q(earing)f(in)g(the)g(`)p Fe(ROUTER)p Fi(')p eop
%%Page: 11 12
11 11 bop 0 -58 a Fi(Ov)o(erview)1720 b(11)0 183 y(directory)l(,)15
b(is)h(called)h(the)f(Router)f(pro)q(cess.)21 b(It)15
b(is)h(the)g(resp)q(onsibilit)o(y)h(of)e(this)h(pro)q(cess)g(to)e
(decide)j(what)e(to)g(do)0 246 y(with)h(the)h(message)e(\014le,)i(and)g
(pass)e(this)i(information)f(on)g(to)g(the)g(next)g(stage)f(\(message)h
(transp)q(ort/deliv)o(ery)0 308 y(queueing)21 b(and)f(sc)o(heduling\).)
36 b(It)19 b(do)q(es)h(this)h(b)o(y)e(creating)h(a)g(Con)o(trol)f(File)
i(attac)o(hed)e(to)g(the)h(message)f(\014le,)0 370 y(whic)o(h)d(con)o
(tains)g(all)h(the)e(necessary)h(information)g(for)f(the)h(next)f
(stages)g(to)g(accomplish)i(their)f(w)o(ork)f(without)0
432 y(detailed)h(reference)g(to)e(the)h(message)f(\014le)i(\(i.e.)k
(without)14 b(ha)o(ving)h(to)g(reparse)f(it\).)20 b(When)15
b(the)g(Router)g(pro)q(cess)0 495 y(is)i(\014nished)g(pro)q(cessing)g
(a)f(message)g(\014le,)h(it)f(will)i(relink)f(it)f(in)o(to)g(a)g(`)p
Fe(QUEUE)p Fi(')f(\(`)p Fe(~/queue)p Fi('\))e(directory)k(\(it)f(is)g
(\015at)0 557 y(directory)l(,)g(but)g(it)g(should)h(not)f(b)q(e)g(a)g
(problem\),)g(and)g(dep)q(osit)h(the)f(con)o(trol)g(\014le)g(in)h(a)f
(`)p Fe(TRANSPORT)p Fi(')e(directory)0 619 y(\(`)p Fe(~/transport)p
Fi('\))e(for)j(pro)q(cessing)h(b)o(y)f(the)g(next)h(stage.)62
758 y(The)g(Router)f(will)i(parse)f(the)f(message)g(\014le)h(con)o(ten)
o(ts,)f(determine)h(the)g(b)q(oundaries)g(b)q(et)o(w)o(een)g(the)f(v)m
(arious)0 820 y(parts)21 b(of)g(the)h(\014le,)i(extract)d(addresses)h
(and)g(other)f(information)h(from)f(the)h(RF)o(C822)e(format)h
(\014elds,)j(and)0 883 y(manipulate)e(this)g(information)f(to)g
(determine)h(the)g(prop)q(er)f(action)h(for)e(eac)o(h)i(destination)g
(address.)38 b(The)0 945 y(lexical)16 b(and)f(syn)o(tax)f(analysis)h
(is)g(carried)g(out)f(as)g(a)g(basic)h(function)g(within)h(this)e(pro)q
(cess,)h(but)f(the)h(seman)o(tics)0 1007 y(are)k(determined)i(b)o(y)f
(the)g(con)o(ten)o(ts)f(of)g(a)h(con\014guration)f(\014le)i(for)e(the)h
(Router.)34 b(This)20 b(con\014guration)g(\014le)g(is)0
1070 y(required)15 b(to)e(prop)q(erly)i(initialize)i(the)d(Router)g
(when)g(it)g(starts)f(up,)h(and)g(furthermore)f(de\014nes)i(functions)g
(that)0 1132 y(analyse)h(an)f(address,)g(determine)i(ho)o(w)d(to)h
(route)g(it)h(\(giv)o(en)f(con)o(text)g(information\),)g(and)h(that)e
(can)i(rewrite)f(a)0 1194 y(message)g(header)g(address)h(appropriately)
f(based)h(on)f(v)m(arious)h(con)o(text)e(information.)62
1333 y(The)k(con\014guration)f(\014le)i(lo)q(oks)e(lik)o(e)i(a)e
(Bourne)h(Shell)h(script)f(at)e(\014rst)h(glance.)27
b(There)18 b(are)f(minor)h(syn)o(tax)0 1395 y(c)o(hanges)13
b(from)f(standard)g Fe(sh)p Fi(,)g(but)h(the)g(aim)g(is)g(to)f(b)q(e)h
(as)g(close)g(to)f(the)h(Bourne)g(Shell)h(language)f(as)f(is)i
(practical.)0 1458 y(The)22 b(con)o(ten)o(ts)f(of)h(the)g(\014le)g(are)
g(compiled)h(in)o(to)f(a)g(parse)f(tree,)i(whic)o(h)g(can)f(then)g(b)q
(e)h(in)o(terpreted)f(b)o(y)g(the)0 1520 y(Router.)38
b(The)22 b(con\014guration)f(\014le)h(is)g(usually)h(self-con)o
(tained,)g(although)f(an)f(easy)g(mec)o(hanism)h(exists)g(to)0
1582 y(mak)o(e)e(use)h(of)f(external)g(UNIX)h(programs)f(when)g(so)g
(desired.)37 b(T)l(ogether)20 b(with)h(a)f(v)o(ery)g(\015exible)j
(database)0 1645 y(lo)q(okup)g(mec)o(hanism,)h(functions,)h(and)d
(address)g(manipulation)i(based)f(on)f(string-matc)o(hing,)i(and)e(tok)
o(en-)0 1707 y(matc)o(hing)17 b(regular)g(expressions,)g(the)g
(con\014guration)g(\014le)h(language)f(is)g(an)g(extremely)g
(\015exible)i(substrate)e(to)0 1769 y(accomplish)23 b(its)f(purp)q
(ose.)39 b(When)22 b(the)g(language)g(is)g(inadequate,)h(or)f(if)g(sp)q
(eed)g(b)q(ecomes)g(an)g(issue,)i(it)d(is)0 1831 y(p)q(ossible)f(to)d
(call)i(built)g(in)f(\(C)g(co)q(ded\))g(functions.)28
b(The)18 b(in)o(terface)g(to)g(these)g(functions)g(is)g(mostly)g(iden)o
(tical)0 1894 y(to)e(what)f(a)h(standalone)g(program)g(w)o(ould)g(exp)q
(ect)h(\(mo)q(dulo)g(sym)o(b)q(ol)f(name)g(clashes)h(and)g(return)f(v)m
(alues\),)h(to)0 1956 y(ease)e(migration)g(of)g(external)h(programs)e
(to)g(inclusion)k(in)e(the)f(Router)h(pro)q(cess.)62
2095 y(The)h(Router)g(mak)o(es)g(use)g(of)g(en)o(vironmen)o(tal)g
(information)g(to)f(augmen)o(t)h(the)g(information)g(that)f(ma)o(y)g(b)
q(e)0 2157 y(con)o(tained)k(in)g(the)f(message)g(\014le.)33
b(F)l(or)19 b(example,)h(the)g(o)o(wner)e(of)h(the)g(message)g(\014le)h
(is)g(the)f(lo)q(cal)i(user)e(who)0 2220 y(submitted)h(the)f(message)g
(\(whic)o(h)h(fact)e(is)i(used)g(to)e(c)o(hec)o(k)i(b)q(eliev)m(abil)q
(it)o(y)i(of)d(some)g(of)f(the)i(message)f(header)0 2282
y(information\),)14 b(the)g(message)f(\014le)i(mo)q(di\014cation)g
(time)f(is)h(used)f(for)g(lo)q(cal)h(submission)g(time,)f(and)g(the)g
(message)0 2344 y(\014le)h(name)f(is)h(part)e(of)h(the)g(syn)o
(thesized)h(message)f(iden)o(ti\014cation.)21 b(Other)14
b(en)o(v)o(elop)q(e)h(information,)g(apart)e(from)0 2406
y(the)22 b(standard)f(sender)h(and)f(recipien)o(t)i(addresses,)g(ma)o
(y)e(b)q(e)h(sp)q(eci\014ed)i(to)c(augmen)o(t)h(the)h(b)q(eha)o(vior)g
(of)f(the)0 2469 y(mailer.)i(F)l(or)16 b(example,)g(the)g(standard)g
(library)h(routines)f(used)h(to)e(submit)i(messages,)e(ma)o(y)h
(include)i(co)q(de)f(to)0 2531 y(pass)e(along)g(information)h(from)e
(the)h(submitting)h(user's)f(en)o(vironmen)o(t)h(v)m(ariables.)62
2670 y(If)i(something)h(go)q(es)e(wrong)h(when)g(the)g(Router)g(pro)q
(cesses)h(a)e(message)h(\014le,)h(its)f(action)g(dep)q(ends)i(on)e(the)
p eop
%%Page: 12 13
12 12 bop 0 -58 a Fi(12)1380 b(ZMailer)16 b(Op)q(erations)g(Guide)0
183 y(sev)o(erit)o(y)i(and)g(t)o(yp)q(e)g(of)g(error.)28
b(If)18 b(for)g(example)h(there)f(is)h(a)f(proto)q(col)g(violation)h
(of)e(some)h(kind,)i(the)e(Router)0 246 y(ma)o(y)i(generate)g(a)g
(rejection)h(message)f(sen)o(t)g(to)g(the)g(originator)h(of)f(the)g
(o\013ending)h(message.)35 b(The)21 b(Router)0 308 y(supplies)16
b(the)f(addressee)g(and)f(sp)q(eci\014c)i(diagnostic)f(messages)f
(corresp)q(onding)h(to)f(the)g(error,)g(and)g(uses)h(one)f(of)0
370 y(the)j(canned)g(\014les)h(in)f(the)g(`)p Fe(FORMS)p
Fi(')e(directory)i(\(`)p Fe(~/forms)p Fi('\))d(for)i
Fb(ev)o(erything)h(else)p Fi(.)25 b(In)18 b(particular)f(this)g(means)0
432 y(suc)o(h)g(headers)g(as)f(`)p Fe(From:)p Fi(',)f(`)p
Fe(Subject:)p Fi(')f(and)j(`)p Fe(Cc:)p Fi(')e(lines,)k(and)d(a)g
(generic)i(commen)o(t)e(on)g(the)h(class)g(of)f(error,)0
495 y(are)f(all)h(tak)o(en)f(from)g(a)g(standard)g(form.)k(This)d
(easily)h(allo)o(ws)e(certain)h(kinds)g(of)f(errors)g(to)f(b)q(e)i
(brough)o(t)f(to)g(the)0 557 y(atten)o(tion)k(of)f(the)i(P)o(ostmaster)
d(or)i(other)g(main)o(tenance)h(p)q(erson)f(\(b)o(y)g(judicious)i(use)e
(of)g(the)g(Carb)q(on)g(Cop)o(y)0 619 y(\014eld\),)d(and)f(indeed)i
(di\013eren)o(t)f(errors)e(ma)o(y)g(b)q(e)i(directed)h(to)d(di\013eren)
o(t)i(p)q(eople.)62 759 y(F)l(or)k(more)f(serious)i(problems,)h(the)e
(message)f(\014le)j(is)e(\014led)i(a)o(w)o(a)o(y)c(in)j(y)o(et)f
(another)f(`)p Fe(POSTMAN)p Fi(')g(directory)0 821 y(\(`)p
Fe(~/postman)p Fi('\).)e(This)d(directory)h(is)f(where)g(the)g(Router)g
(will)i(put)e(an)o(y)g(\014les)g(that)g(need)g(man)o(ual)h(atten)o
(tion)e(b)o(y)0 883 y(the)i(P)o(ostmaster.)i(The)e(P)o(ostmaster)e(ma)o
(y)g(tak)o(e)h(correctiv)o(e)h(action)f(\(usually)i(editing)f(the)g
(message)f(\014le\),)h(and)0 945 y(resubmit)h(the)f(message)g(\014le)h
(b)o(y)f(simply)i(mo)o(ving)e(it)g(\(using)h Fe(mv)p
Fi(\))e(to)h(the)g(`)p Fe(ROUTER)p Fi(')f(directory)l(.)62
1085 y(If)22 b(something)f(w)o(en)o(t)g(wrong)g(that)f(ma)o(y)h
(correct)g(itself)h(at)f(a)g(later)g(time)h(\(for)e(example)j(if)e(a)h
(database)0 1147 y(access)16 b(indicates)h(a)f(temp)q(orary)f
(failure\),)h(the)g(message)g(\014le)h(will)g(b)q(e)g(relink)o(ed)g(in)
o(to)f(a)g(`)p Fe(DEFERRED)p Fi(')e(directory)0 1210
y(\(`)p Fe(~/deferred)p Fi('\).)24 b(A)o(t)18 b(some)f(later)h(time,)g
(these)g(deferred)g(message)f(\014les)i(ma)o(y)e(b)q(e)h(resubmitted)g
(b)o(y)g(mo)o(ving)0 1272 y(them)12 b(bac)o(k)h(to)f(the)g(`)p
Fe(ROUTER)p Fi(')f(directory)l(.)20 b(This)13 b(ma)o(y)f(b)q(e)h
(accomplished)h(b)o(y)f(a)f(simple)i(cron)e(job.)19 b(As)13
b(indicated,)0 1334 y(the)19 b(only)g(problems)g(that)g(w)o(ould)g
(cause)g(this)g(w)o(ould)g(b)q(e)g(the)g(lac)o(k)g(of)f(a)h(resource)g
(needed)h(b)o(y)e(the)h(Router.)0 1396 y(This)d(ma)o(y)f(include)j
(out-of-space)d(conditions)i(on)f(the)f(disk,)i(a)e(database)g(access)h
(timing)g(out)f(or)g(returning)h(a)0 1459 y(serv)o(er)f(failure)h
(reply)l(,)g(etc.)62 1598 y(When)j(ev)o(erything)f(do)q(es)g(w)o(ork)g
(prop)q(erly)l(,)h(once)f(a)g(con)o(trol)g(\014le)h(has)f(b)q(een)h
(created)f(in)h(the)f(`)p Fe(TRANSPORT)p Fi(')0 1660
y(directory)l(,)h(and)f(the)g(message)f(\014le)i(mo)o(v)o(ed)f(to)f
(the)h(`)p Fe(QUEUE)p Fi(')f(directory)l(,)h(the)g(job)g(of)g(the)g
(Router)g(is)g(done)h(for)0 1723 y(that)14 b(message)h(and)h(it)f(con)o
(tin)o(ues)h(scanning)g(its)f(`)p Fe(ROUTER)p Fi(')f(directory)h(for)g
(more)g(w)o(ork.)0 1970 y Fd(2.3)35 b(Queue)22 b(Manager)j(and)e(Sc)n
(heduler)62 2110 y Fi(The)17 b(pro)q(cess)f(that)g(pic)o(ks)h(up)f(con)
o(trol)g(\014les)h(from)f(the)g(`)p Fe(TRANSPORT)p Fi(')e(directory)l
(,)j(is)g(called)g(the)g(Sc)o(heduler.)0 2172 y(It)f(is)g(a)g(daemon)g
(that)f(orc)o(hestrates)g(the)h(\015o)o(w)f(of)h(messages)f(out)g(from)
h(the)f(mail)i(subsystem.)22 b(T)l(o)16 b(do)g(this,)g(it)0
2234 y(main)o(tains)e(an)g(in)o(ternal)h(mo)q(del)f(of)g(whic)o(h)g
(messages)g(need)g(to)f(go)h(where,)g(and)g(ho)o(w,)f(and)h(passes)f
(the)h(relev)m(an)o(t)0 2296 y(information)k(to)f(the)h(transp)q
(ort/deliv)o(ery)g(programs)f(that)g(it)h(starts)f(up.)28
b(V)l(arious)19 b(parameters)e(asso)q(ciated)0 2359 y(with)d(eac)o(h)h
(transp)q(ort/deliv)o(ery)f(program)f(are)h(con)o(trolled)g(b)o(y)g(a)g
(con\014guration)g(\014le)i(for)d(the)h(Sc)o(heduler.)21
b(This)0 2421 y(con\014guration)c(\014le)g(is)g(m)o(uc)o(h)f(simpler)i
(than)e(the)h(one)f(for)g(the)h(Router,)f(indeed)i(it)f(is)g(a)f
(simple)i(table)f(format.)0 2483 y(A)f(set)g(of)g(messages)f(is)i
(selected)g(using)g(a)f(c)o(hannel/host)g(sp)q(eci\014cation)i
(pattern,)e(and)g(asso)q(ciated)g(with)h(eac)o(h)0 2545
y(pattern)e(one)h(m)o(ust)e(sp)q(ecify)j(a)e(startup)g(in)o(terv)m(al,)
h(command,)f(and)h(some)f(related)h(information,)f(that)g(will)i(b)q(e)
0 2608 y(used)i(to)f(deliv)o(er)i(a)e(selected)i(message)e(to)g(the)h
(appropriate)f(addresses.)30 b(Sp)q(ecifying)21 b(startup)d(in)o(terv)m
(als)i(for)0 2670 y(programs)14 b(is)i(the)f(function)h(whic)o(h)g(giv)
o(es)f(the)h(Sc)o(heduler)h(its)e(name.)p eop
%%Page: 13 14
13 13 bop 0 -58 a Fi(Ov)o(erview)1720 b(13)62 183 y([XX:)15
b(to)f(do:)20 b(rendezv)o(ous)c(with)f(Sc)o(heduler)i(from)e(unrelated)
h(program,)e(e.g.)19 b(uucico)d(])0 405 y Fd(2.4)35 b(T)-6
b(ransp)r(ort)25 b(Agen)n(ts)62 542 y Fi(A)20 b(T)l(ransp)q(ort)f(Agen)
o(t)g(is)h(resp)q(onsible)i(for)d(doing)h(the)f(actual)h(transp)q
(ort/deliv)o(ery)g(of)f(a)g(giv)o(en)h(message)0 605
y(to)e(a)h(selected)h(set)e(of)g(addresses.)31 b(The)19
b(selection)h(of)e(addresses)h(is)h(determined)g(b)o(y)e(the)h(T)l
(ransp)q(ort)f(Agen)o(t)0 667 y(itself,)24 b(p)q(erhaps)f(using)f
(information)g(ab)q(out)g(the)g(name)g(of)f(the)h(deliv)o(ery)i(c)o
(hannel)f(or)e(next)h(host,)h(passed)0 729 y(on)c(the)g(command)g
(line.)33 b(The)19 b(messages)g(eac)o(h)g(T)l(ransp)q(ort)g(Agen)o(t)f
(is)i(ask)o(ed)f(to)f(examine)i(are)f(determined)0 792
y(b)o(y)g(the)g(Sc)o(heduler.)34 b(A)19 b(v)o(ery)g(simple)h(proto)q
(col)f(is)h(run)f(on)g(the)h(standard)e(input)i(and)g(standard)e
(output)h(of)0 854 y(the)f(T)l(ransp)q(ort)e(Agen)o(t,)i(with)f(a)h
(sup)q(ervisor)g(program)e(\(the)h(Sc)o(heduler\))i(c)o(ho)q(osing)f
(whic)o(h)g(con)o(trol)f(\014les)i(the)0 916 y(T)l(ransp)q(ort)h(Agen)o
(t)g(should)h(kno)o(w)f(ab)q(out.)36 b(In)21 b(turn,)g(the)g(T)l(ransp)
q(ort)f(Agen)o(t)g(returns)g(status)g(information)0 978
y(ab)q(out)13 b(eac)o(h)f(of)h(the)g(addresses)f(it)h(pro)q(cesses)h
(in)f(eac)o(h)g(con)o(trol)f(\014le,)i(so)f(the)f(Sc)o(heduler)j(can)e
(up)q(date)g(its)g(in)o(ternal)0 1041 y(mo)q(del)j(of)e(the)h
(collection)i(of)d(queued)i(messages.)j(As)c(w)o(ell,)h(the)f(T)l
(ransp)q(ort)f(Agen)o(t)g(is)i(in)f(c)o(harge)g(of)f(enforcing)0
1103 y(lo)q(c)o(king)22 b(of)f(a)g(destination)i(address)e(while)i(it)e
(is)h(b)q(eing)h(pro)q(cessed,)g(and)f(the)f(subsequen)o(t)h(status)e
(up)q(date)0 1165 y(\(success,)15 b(deferral,)h(error\))e(in)i(the)f
(message)g(con)o(trol)g(\014le.)21 b(These)16 b(op)q(erations)f(are)g
(p)q(erformed)h(in-place)h(\(and)0 1227 y(sync)o(hronously\))f(on)f
(the)g(con)o(ten)o(ts)f(of)h(a)g(con)o(trol)g(\014le.)62
1364 y(All)24 b(the)e(actions)g(and)g(decisions)i(made)e(b)o(y)f(a)h(T)
l(ransp)q(ort)g(Agen)o(t)f(are)h(driv)o(en)h(en)o(tirely)g(based)f(on)g
(the)0 1427 y(con)o(ten)o(ts)f(of)g(the)g(con)o(trol)g(\014le.)39
b(There)22 b(is)g(enough)g(information)f(ab)q(out)g(the)h(original)g
(message)f(\014le,)j(that)0 1489 y(most)c(T)l(ransp)q(ort)h(Agen)o(ts)g
(will)h(not)f(need)h(to)f(reparse)g(it.)38 b(Standard)21
b(T)l(ransp)q(ort)f(Agen)o(ts)h(exist)g(for)g(lo)q(cal)0
1551 y(mail)d(deliv)o(ery)l(,)h(SMTP/TCP)l(,)d(an)h(error)f(pro)q
(cessing)j(function,)f(and)f(in)o(terfacing)h(with)f(standard)g
(Sendmail)0 1613 y(\\mailer"s.)0 1836 y Fd(2.5)35 b(The)23
b(System)f(En)n(vironmen)n(t)62 1973 y Fi(Simplicit)o(y)16
b(is)d(an)g(imp)q(ortan)o(t)f(thread)h(in)g(the)g(design)h(and)f
(implemen)o(tation)h(of)f(ZMailer.)19 b(This)13 b(is)h(with)f(the)0
2035 y(hop)q(e)19 b(that)e(a)h(simple)h(\(not)e(simple-minded\))k
(design)e(will)h(encourage)e(\015exibilit)o(y)l(,)j(elegance,)e(and)f
(e\016ciency)0 2097 y(in)g(the)g(end)g(pro)q(duct.)28
b(If)18 b(the)f(design)i(is)f(done)g(righ)o(t,)f(the)h(result)g(should)
h(\014t)e(in)i(naturally)f(with)g(the)f(UNIX)0 2159 y(en)o(vironmen)o
(t,)f(and)g(will)h(ha)o(v)o(e)e(some)h(desirable)h(side-e\013ects:)22
b(co)q(de)16 b(p)q(ortabilit)o(y)h(\(to)e(UNIX)h(v)m(arian)o(ts)g(and)g
(to)0 2222 y(other)j(op)q(erating)h(systems\),)f(and)h(a)f(smaller)i
(conceptual)f(load)g(for)f(the)h(p)q(erson\(s\))f(main)o(taining)i(the)
e(mail)0 2284 y(subsystem.)h(This)c(section)g(is)f(ab)q(out)g(the)h
(external)f(in)o(terfaces)h(to)e(ZMailer;)i(ho)o(w)e(it)i(dep)q(ends)h
(on)e(the)g(under-)0 2346 y(lying)g(system,)e(ho)o(w)g(it)h(in)o
(teracts)f(with)h(it,)g(and)f(ho)o(w)g(the)h(main)o(tainers)g(\(the)f
(System)h(Administrator)f(and)h(the)0 2408 y(P)o(ostmaster\))f(comm)o
(unicate)j(and)f(in)o(teract)g(with)h(ZMailer.)62 2545
y(All)e(ZMailer)g(activit)o(y)f(is)g(\(largely)g(b)o(y)g(con)o(v)o(en)o
(tion\))g(con\014ned)h(to)e(t)o(w)o(o)g(directory)h(hierarc)o(hies.)20
b(One)14 b(is)f(used)0 2608 y(to)f(k)o(eep)i(program)d(binaries)k(and)e
(v)m(arious)g(databases,)g(the)g(other)f(is)i(a)e(w)o(ork)g(area)h
(that)f(is)i(used)f(when)h(ZMailer)0 2670 y(do)q(es)k(its)h(job.)28
b(F)l(or)17 b(v)m(arious)i(reasons,)e(this)i(latter)f(hierarc)o(h)o(y)g
(is)g(set)g(up)h(to)e(mimic)i(the)f(v)m(arious)h(sections)f(of)p
eop
%%Page: 14 15
14 14 bop 0 -58 a Fi(14)1380 b(ZMailer)16 b(Op)q(erations)g(Guide)0
183 y(a)k(real)h(p)q(osto\016ce,)g(and)f(indeed)j(this)d(analogy)h
(will)h(reapp)q(ear)e(in)h(a)f(few)h(user)f(in)o(terface)h(situations.)
36 b(The)0 246 y(program/database)14 b(lo)q(cations)i(ma)o(y)f(b)q(e)i
(spread)f(out)f(arbitrarily)i(on)e(y)o(our)h(system.)21
b(Unless)c(there)f(are)f(go)q(o)q(d)0 308 y(lo)q(cal)h(reasons)e(not)g
(to)g(collect)i(these)f(\014les)g(in)h(one)e(place,)i(the)e(follo)o
(wing)i(few)e(con)o(v)o(en)o(tions)h(should)g(b)q(e)h(k)o(ept)e(in)0
370 y(mind:)62 508 y(The)g(program/database)d(directory)i(is)h(k)o(ept)
f(in)g(`)p Fe(/usr/lib/mail)p Fi(')e(\(\014rst)h(c)o(hoice\),)i(or)f(`)
p Fe(/usr/lib/zmail)p Fi(')0 570 y(\(in)22 b(case)f(the)h(\014rst)e(c)o
(hoice)j(is)f(already)f(tak)o(en\).)38 b(The)21 b(program)f(binaries)j
(of)e(the)g(Router)h(and)f(Sc)o(heduler)0 632 y(p)q(ortions)e(of)e
(ZMailer)i(are)f(k)o(ept)g(here,)h(along)g(with)f(all)i(program)d
(con\014guration)h(\014les,)i(and)e(utilit)o(y)i(scripts.)0
694 y(The)13 b(databases,)g(including)j(the)d(system)g(aliases)g
(database,)g(are)g(k)o(ept)g(in)h(a)e(`)p Fe(db)p Fi(')g(sub)q
(directory)l(.)21 b(The)13 b(program)0 757 y(binaries)18
b(of)e(all)h(the)g(T)l(ransp)q(ort)f(Agen)o(ts)g(are)g(k)o(ept)g(in)h
(a)f(`)p Fe(ta)p Fi(')g(sub)q(directory)l(.)24 b(If)17
b(y)o(ou)f(lik)o(e)i(longer)e(names,)h(use)0 819 y(`)p
Fe(databases)p Fi(')c(and)j(`)p Fe(transports)p Fi(')d(resp)q(ectiv)o
(ely)l(.)62 956 y(In)18 b(a)f(mail/\014le)i(serv)o(er)d(en)o(vironmen)o
(t,)i(mail)g(clien)o(ts)g(only)g(need)g(a)f(view)h(of)e(the)i(`)p
Fe(POSTOFFICE)p Fi(')d(directory)0 1019 y(hierarc)o(h)o(y)l(,)g(so)f
(that)g(User)h(Agen)o(ts)f(can)h(submit)g(messages)f(for)g(pro)q
(cessing)i(and)f(p)q(erhaps)g(for)f(the)h(mail)g(queue)0
1081 y(querying)g(program)d(to)i(b)q(e)g(able)h(to)e(read)h(con)o(trol)
g(\014les.)20 b(The)14 b(programs,)f(con\014guration)h(\014les,)g(and)h
(databases)0 1143 y(stored)g(under)h(`)p Fe(/usr/lib)p
Fi(')d(are)i(only)h(used)f(b)o(y)h(the)f(mail)h(serv)o(er)f(mac)o
(hine.)62 1281 y([XX:)g(did)h(I)g(miss)f(an)o(ything?)21
b(Is)16 b(this)f(logical?)22 b(should)16 b(con\014g)g(\014les)g(and)f
(programs)f(b)q(e)i(separate?])62 1418 y(An)f(up)q(coming)h(section)f
(\(see)f(section)h(2.8)f([The)g(P)o(osto\016ce],)f(page)h(15\))f(will)k
(deal)e(with)g(the)f(`)p Fe(POSTOFFICE)p Fi(')0 1481
y(hierarc)o(h)o(y)22 b(in)h(some)f(detail.)41 b(T)l(o)22
b(motiv)m(ate)g(the)g(issues)h(dealt)g(with)f(there,)i(w)o(e)d(will)j
(\014rst)e(deal)g(with)h(the)0 1543 y(mec)o(hanics)16
b(of)f(sending)h(a)f(message.)0 1772 y Fd(2.6)35 b(User)23
b(Agen)n(t)g(supp)r(ort)62 1910 y Fi(T)l(o)16 b(ease)g(the)g(task)g(of)
f(in)o(terfacing)i(directly)g(to)f(the)g(ZMailer)g(MT)l(A,)g(a)f(C)h
(library)h(routines)f(are)g(pro)o(vided)0 1972 y(with)h(ZMailer.)27
b(The)17 b(most)f(imp)q(ortan)o(t)h(of)g(these)g(routines)h(are)e(used)
i(when)g(submitting)g(a)e(message.)26 b(They)0 2034 y(implemen)o(t)16
b(the)g(message)e(\014le)i(name)f(collision)j(a)o(v)o(oidance)d(proto)q
(col,)g(outlined)h(in)g(the)f(previous)h(subsection.)0
2097 y(An)e(indep)q(enden)o(t)i(routine)f(is)f(pro)o(vided)h(to)e
(encourage)h(prop)q(er)g(quoting)g(of)f(the)h(full)h(names)f(of)f
(users,)h(as)f(used)0 2159 y(in)19 b(RF)o(C822)e(message)h(headers.)29
b(This)18 b(is)h(an)f(attempt)f(at)h(remo)o(ving)g(an)o(y)g(excuse)h
(for)e(\\p)q(o)q(etic)i(license")h(on)0 2221 y(the)d(part)f(of)h(User)g
(Agen)o(ts,)f(MT)l(As,)h(and)g(other)g(systems)f(\(e.g.)25
b(USENET)17 b(News\),)f(where)h(violation)h(of)f(the)0
2283 y(RF)o(C822)c(sp)q(eci\014cation)j(in)e(this)h(regard)e(is)h(a)g
(frequen)o(t)g(irritation.)20 b(See)28 b([User)14 b(Agen)o(t)f(supp)q
(ort],)h(page)f(67,)h(for)0 2346 y(details.)62 2483 y(As)h(men)o
(tioned)i(earlier,)e(information)h(ma)o(y)e(b)q(e)i(passed)g(to)e
(ZMailer)i(using)g(en)o(v)o(elop)q(e)g(header)g(lines)h(in)f(the)0
2545 y(message)f(\014le.)21 b(This)16 b(includes)i(a)d(metho)q(d)h(for)
e(o)o(v)o(erriding)i(the)g(full)g(name)g(of)f(the)g(originating)h
(user,)g(as)f(found)0 2608 y(in)f(the)g(GECOS)g(\014eld)h(of)e(the)h
(passw)o(ord)f(\014le)h(en)o(try)g(for)f(the)g(user.)20
b(It)14 b(also)f(includes)j(a)d(metho)q(d)h(for)f(requesting)0
2670 y(an)f(alternate)g(login)h(name)f(\(or)g(rather)f
Fb(lo)q(cal-part)p Fi(,)j(in)f(RF)o(C822)e(terminology\),)h(whic)o(h)h
(is)g(of)e(course)i(sub)s(ject)f(to)p eop
%%Page: 15 16
15 15 bop 0 -58 a Fi(Ov)o(erview)1720 b(15)0 183 y(appro)o(v)m(al)12
b(b)o(y)f(securit)o(y)h(mec)o(hanisms)g(in)g(ZMailer.)19
b(In)12 b(order)f(to)g(promote)f(a)h(standard)g(w)o(a)o(y)g(of)f(sp)q
(ecifying)k(these)0 246 y(optional)k(v)m(alues,)i(the)e(message)f
(submission)i(in)o(terface)f(routines)g(will)i(seed)e(the)g(\014le)h
(with)f(the)g(appropriate)0 308 y(en)o(v)o(elop)q(e)e(information)f(to)
g(b)q(e)h(in)o(terpreted)f(b)o(y)g(ZMailer.)21 b(The)15
b(user)g(in)o(terface)h(consists)f(of)f(the)i(en)o(vironmen)o(t)0
370 y(v)m(ariables)h Fa(FULLNAME)f Fi(and)h Fa(PRETTYLOGIN)p
Fi(,)d(whic)o(h)j(are)f(accessed)g(through)g(the)g(standard)g
Fe(getenv\(\))0 432 y Fi(routine.)30 b(These)18 b(en)o(vironmen)o(t)h
(v)m(ariables)h(need)f(only)g(b)q(e)g(set)f(b)o(y)g(a)g(user)g(for)g
(all)h(mail)g(submitted)g(through)0 495 y(these)c(in)o(terface)h
(routines)g(to)e(mak)o(e)h(use)g(of)g(the)g(features.)0
737 y Fd(2.7)35 b(Compatibili)o(t)n(y)62 876 y Fi(Because)16
b(ZMailer)f(will)h(often)f(not)f(b)q(e)i(the)e(\014rst)h(mailer)g
(installed)i(on)e(a)f(computer,)h(utilit)o(y)h(programs)d(are)0
938 y(pro)o(vided)20 b(to)f(ease)g(the)h(transition)f(b)q(et)o(w)o(een)
h(the)f(di\013eren)o(t)h(mail)g(subsystems.)33 b(The)19
b(programs)f(allo)o(w)i(the)0 1000 y(c)o(hange)c(of)f(MT)l(A)h(to)f(b)q
(e)i(largely)g(transparen)o(t)e(to)g(the)h(User)g(Agen)o(ts,)f(and)h
(other)g(programs)e(that)i(in)o(teracted)0 1062 y(with)c(the)f
(previously)h(installed)h(MT)l(A.)e(This)h(allo)o(ws)f(con)o(v)o
(ersion)g(of)g(suc)o(h)h(programs)e(to)g(b)q(e)i(deferred)g(to)f(a)f
(more)0 1125 y(con)o(v)o(enien)o(t)15 b(time.)20 b(If)15
b(a)f(sligh)o(t)h(p)q(erformance)f(p)q(enalt)o(y)h(is)g(acceptable,)h
(con)o(v)o(ersion)e(ma)o(y)g(not)g(b)q(e)h(necessary)g(at)0
1187 y(all.)62 1326 y(In)g(a)e(Sendmail)i(en)o(vironmen)o(t,)f(there)g
(is)g(just)g(one)g(critical)h(program)d(that)h(needs)i(to)e(b)q(e)h
(replaced,)h(namely)0 1388 y(the)h(Sendmail)h(binary)g(itself.)22
b(The)16 b(only)g(program,)f(that)g(is)h(not)f(a)g(User)h(Agen)o(t,)f
(whic)o(h)i(executes)f(Sendmail)0 1451 y(directly)l(,)f(is)f(the)f
(Rmail)i(program)d(\(usually)i(`)p Fe(/bin/rmail)p Fi('\))d(whic)o(h)k
(is)e(con)o(v)o(en)o(tionally)i(used)f(to)f(transfer)f(mail)0
1513 y(using)17 b(UUCP)l(.)f(T)l(o)g(a)o(v)o(oid)g(certain)h
(limitations)h(of)e(the)g(standard)g(Rmail)i(programs,)d(and)h(at)g
(the)h(same)f(time)0 1575 y(gain)21 b(p)q(erformance)f(b)o(y)h(in)o
(teracting)g(directly)g(with)g(ZMailer,)h(a)e(new)g(v)o(ersion)h(of)f
(Rmail)i(comes)e(with)h(the)0 1637 y(ZMailer)16 b(distribution.)62
1776 y(Most)c(of)g(the)g(options)h(on)f(Sendmail)j(are)d(supp)q(orted)h
({)f(when)h(sensible)h(to)e(do)h(so.)18 b(Among)12 b(them)h(are)f(a)g
(w)o(a)o(y)0 1839 y(to)j(do)g(a)g(V)l(erb)q(ose)g(mo)q(de,)h(and)f(do)g
(other)g(things)g(that)g(are)g(common)g(on)g(Sendmail)i(orien)o(ted)e
(en)o(vironmen)o(ts.)0 2081 y Fd(2.8)35 b(The)23 b(P)n(osto\016ce)62
2220 y Fi(All)15 b(of)f(the)g(message)g(manipulation)h(activit)o(y)f
(of)g(ZMailer)g(is)g(con\014ned)h(to)f(a)f(directory)i(hierarc)o(h)o(y)
f(con)o(v)o(en-)0 2282 y(tionally)k(placed)g(under)g(`)p
Fe(/usr/spool/postoffice)p Fi('.)k(This)17 b(name)g(re\015ects)h(the)f
(kinds)h(of)e(activit)o(y)h(carried)0 2344 y(out)e(b)o(y)g(ZMailer)h
(under)f(the)h(p)q(osto\016ce)f(directory)l(.)20 b(The)15
b(sub)q(directories)i(under)f(`)p Fe(~)p Fi(')f(are:)0
2483 y(`)p Fe(~/deferred)p Fi(')240 2545 y(a)j(parking)h(area)f(for)g
(message)g(\014les)i(that)d(cannot)i(b)q(e)g(pro)q(cessed)g(due)g(to)f
(temp)q(orary)g(absence)240 2608 y(of)k(resources)h(needed)h(b)o(y)e
(the)h(Router.)42 b(Suc)o(h)23 b(a)g(situation)g(w)o(ould)g(t)o
(ypically)h(b)q(e)f(due)g(to)f(a)240 2670 y(nameserv)o(er)e(failure,)j
(or)d(in)h(case)f(of)g(unexp)q(ected)i(I/O)f(errors.)35
b(Suc)o(h)21 b(message)f(\014les)i(can)e(b)q(e)p eop
%%Page: 16 17
16 16 bop 0 -58 a Fi(16)1380 b(ZMailer)16 b(Op)q(erations)g(Guide)240
183 y(resubmitted)e(b)o(y)f(simply)i(relinking)h(them)d(\(use)g
Fe(mv)p Fi(\))g(to)g(the)h(directory)f(scanned)h(b)o(y)g(the)f(Router.)
240 246 y(This)19 b(migh)o(t)g(b)q(e)g(done)g(p)q(erio)q(dically)j(b)o
(y)d(a)f Fe(find)g Fi(command.)30 b(Since)20 b(the)f(time)g(gran)o
(ularit)o(y)f(of)240 308 y Fe(find)e Fi(is)h(rather)f(coarse,)g(a)g
(utilit)o(y)h(called)i Fe(resubmit)c Fi(is)i(included)i(with)e(ZMailer)
g(to)e(carry)h(out)240 370 y(exactly)g(this)f(task.)0
445 y(`)p Fe(~/forms)p Fi(')46 b(con)o(tains)16 b(canned)g(error)f(and)
h(w)o(arning)g(messages)f(used)i(b)o(y)e(the)h(ZMailer)g(programs.)k
(Eac)o(h)c(\014le)240 507 y(con)o(tains)i(a)g(protot)o(yp)q(e)f
(message,)i(the)f(only)g(missing)h(information)g(is)f(a)g(destination)h
(address,)240 569 y(and)g(p)q(erhaps)h(sp)q(eci\014c)h(information)e
(that)g(will)h(b)q(e)g(supplied)i(b)o(y)d(whic)o(hev)o(er)h(programs)d
(mak)o(e)240 632 y(use)h(of)f(the)h(form.)27 b(In)19
b(particular,)f(sp)q(ecifying)i(carb)q(on-cop)o(y)e(headers)g(in)h
(these)f(forms,)f(allo)o(ws)240 694 y(the)j(p)q(ostmaster)e(to)h(get)g
(copies)h(of)f(mail)i(automatically)f(sen)o(t)f(to)g(users.)33
b(Di\013eren)o(t)19 b(t)o(yp)q(es)g(of)240 756 y(messages)13
b(ma)o(y)f(b)q(e)i(carb)q(on-copied)h(to)d(di\013eren)o(t)h(p)q(eople,)
i(if)f(there)f(are)g(sp)q(ecialized)j(p)q(ostmasters)240
818 y(on)f(the)g(system.)0 893 y(`)p Fe(~/postman)p Fi(')240
955 y(is)f(where)g(ZMailer)h(puts)f(messages)f(\014les)i(that)e(should)
i(b)q(e)f(examined)h(b)o(y)f(the)g(p)q(ostmaster.)19
b(Usu-)240 1018 y(ally)d(the)g(p)q(ostmaster)e(is)i(exp)q(ected)h(to)e
(tak)o(e)g(some)g(correctiv)o(e)g(action,)h(and)f(resubmit)h(the)g
(mes-)240 1080 y(sage.)k(The)c(actual)f(reason)g(ZMailer)h(to)q(ok)e
(this)i(action)g(will)h(b)q(e)f(found)g(in)g(the)f(Router)h(logs.)k(As)
240 1142 y(alw)o(a)o(ys,)15 b(messages)g(\014les)i(can)f(b)q(e)h
(resubmitted)f(simply)h(b)o(y)f(relinking)i(them)e(in)o(to)g(the)g
(directory)240 1204 y(scanned)g(b)o(y)f(the)g(Router.)0
1279 y(`)p Fe(~/public)p Fi(')240 1341 y(is)h(the)g(publicall)q(y)i
(writable)f(directory)f(used)h(b)o(y)e(the)h(standard)g(message)f
(submission)j(routines)240 1404 y(to)i(create)g(a)f(new)i(message)f
(\014le.)36 b(When)20 b(a)g(message)g(\014le)h(has)f(b)q(een)i(prop)q
(erly)f(created,)g(it)f(is)240 1466 y(relink)o(ed)g(in)o(to)f(the)g
(directory)g(scanned)h(b)o(y)f(the)f(Router.)31 b(Empt)o(y)19
b(\014les)g(in)h(this)f(directory)g(are)240 1528 y(often)c(caused)h(b)o
(y)f(improp)q(er)h(handling)h(of)d(in)o(terrupts)i(in)g(a)f(User)g
(Agen)o(t.)0 1603 y(`)p Fe(~/queue)p Fi(')46 b(is)18
b(the)g(\014nal)h(resting)f(place)h(of)e(message)h(\014les,)h(after)e
(the)h(Router)g(has)g(pro)q(cessed)g(them.)28 b(This)240
1665 y(is)23 b(where)f(T)l(ransp)q(ort)g(Agen)o(ts)g(\014nds)g(the)h
(message)e(\014les)j(when)e(necessary)l(.)42 b(These)22
b(\014les)h(are)240 1727 y(ev)o(en)o(tually)16 b(unlink)o(ed)i(b)o(y)d
(the)g(Sc)o(heduler.)0 1802 y(`)p Fe(~/router)p Fi(')240
1864 y(is)h(the)g(directory)h(scanned)f(b)o(y)g(the)g(Router)g(for)f
(new)i(message)e(\014les.)23 b(F)l(rom)15 b(here,)h(the)g(message)240
1927 y(\014le)e(go)q(es)g(to)f(one)g(of)g(the)h(`)p Fe(~/queue)p
Fi(')d(\(nominally\),)k(`)p Fe(~/deferred)p Fi(',)c(or)i(`)p
Fe(~/postman)p Fi(')e(directories.)0 2001 y(`)p Fe(~/transport)p
Fi(')240 2064 y(is)17 b(the)g(collection)h(of)e(p)q(ending)j(con)o
(trol)d(\014les.)25 b(The)17 b(\014les)g(here)g(are)f(unlink)o(ed)j(b)o
(y)e(the)f(Sc)o(heduler)240 2126 y(when)g(all)g(destinations)g(ha)o(v)o
(e)e(b)q(een)j(pro)q(cessed.)j(The)c(Sc)o(heduler)g(scans)g(this)f
(directory)g(p)q(erio)q(d-)240 2188 y(ically)20 b(to)d(detect)h(new)h
(\014les)g(that)e(are)h(not)f(y)o(et)h(in)h(the)f(in)o(ternal)h(pro)q
(cessing,)g(and)f(scans)g(them)240 2250 y(in.)62 2387
y(In)i(a)e(serv)o(er-clien)o(t)i(mac)o(hine)g(en)o(vironmen)o(t,)f
(only)h(the)e(serv)o(er)h(mac)o(hine)g(needs)h(to)e(ha)o(v)o(e)g(this)i
(directory)0 2450 y(hierarc)o(h)o(y)l(.)29 b(All)19 b(the)f(clien)o(ts)
h(just)f(need)h(a)f(view)g(of)g(the)g(p)q(osto\016ce,)g(for)f(b)q
(ene\014t)i(of)f(the)g(User)g(Agen)o(ts.)28 b(The)0 2512
y(message)15 b(\014le)i(name)e(collision)j(a)o(v)o(oidance)e(proto)q
(col)f(should)i(w)o(ork)d(prop)q(erly)j(across)e(an)o(y)g(remote)g
(\014lesystem.)0 2574 y(With)g(this)h(setup,)f(the)g(v)m(arious)h
(ZMailer)g(pro)q(cesses)f(should)h(only)g(b)q(e)g(run)g(on)f(the)g
(serv)o(er)g(mac)o(hine.)p eop
%%Page: 17 18
17 17 bop 0 -58 a Fi(Router)1768 b(17)0 183 y Fg(3.)41
b(Router)62 362 y Fi(The)13 b(Router)g(is)g(the)g(smart)e(half)i(of)f
(ZMailer.)20 b(All)14 b(the)e(other)h(parts)f(of)g(ZMailer)h(essen)o
(tially)h(just)e(carry)g(out)0 424 y(instructions,)k(as)f(determined)i
(b)o(y)f(the)f(Router.)21 b(Therefore,)15 b(the)h(Router)f(is)i(b)o(y)e
(far)g(the)g(most)g(complex)i(part)0 486 y(of)f(ZMailer.)22
b(It)16 b(m)o(ust)g(understand,)g(in)h(great)e(detail,)i(the)f
(structure)g(of)g(messages.)22 b(It)16 b(has)g(to)f(con)o(tain)h(logic)
0 549 y(to)e(manipulate)h(p)q(ortions)g(of)f(this)h(structure,)f(and,)g
(since)i(man)o(y)d(sites)i(ha)o(v)o(e)f(di\013eren)o(t)h(requiremen)o
(ts)g(and)f(are)0 611 y(in)20 b(di\013eren)o(t)f(net)o(w)o(ork)e(and)i
(mail)h(en)o(vironmen)o(ts,)f(the)g(logic)h(used)f(m)o(ust)f(b)q(e)i
(easily)g(customizable.)32 b(A)o(t)18 b(the)0 673 y(same)13
b(time)i(it)f(should)g(b)q(e)h(e\016cien)o(t,)f(since)h(it)f(is)h(a)e
(b)q(ottlenec)o(k)h(for)g(message)f(pro)q(cessing,)i(and)e(should)i
(cater)f(to)0 735 y(v)m(arious)i(services)g(exp)q(ected)g(b)o(y)f
(System)g(Administrators,)g(P)o(ostmasters,)e(and)i(the)h(users)f(of)g
(a)g(mac)o(hine.)62 872 y(This)20 b(description)g(of)f(the)g(Router)g
(will)i(b)q(egin)f(b)o(y)f(explaining)j(ho)o(w)c(a)h(message)g(is)g
(submitted)h(b)o(y)f(User)0 935 y(Agen)o(ts)13 b(and)g(wh)o(y)g(a)g
(standard)g(submission)i(in)o(terface)e(is)h(a)f(go)q(o)q(d)g(idea.)20
b(The)14 b(structure)f(of)g(message)g(\014les,)h(and)0
997 y(ho)o(w)f(that)g(structure)h(is)g(analysed)g(and)g(used,)g(is)g
(treated)g(next.)19 b(Then)14 b(follo)o(ws)g(exp)q(osure)g(of)g(the)f
(mec)o(hanisms)0 1059 y(used)18 b(to)e(manipulate)i(this)g
(information,)f(and)g(esp)q(ecially)j(the)d(to)q(ols)g(a)o(v)m(ailable)
h(for)f(the)g(p)q(erson)g(con\014guring)0 1122 y(ZMailer)h(to)e
(customize)i(its)g(b)q(eha)o(viour.)26 b(A)18 b(\014nal)g(review)g(of)f
(the)g(details)h(of)f(the)g(con)o(trol)g(logic)h(will)h(explain)0
1184 y(the)c(reasons)g(for)g(v)m(arious)g(em)o(b)q(edded)i(b)q(eha)o
(viours)f(of)f(the)g(ZMailer)g(Router.)0 1400 y Fd(3.1)35
b(Message)23 b(Submission)62 1537 y Fi(In)18 b(the)g(parlance)g(of)f
(mail)h(and)g(message)f(systems,)g(ZMailer)h(is)g(an)f(MT)l(A,)g(a)g
(Message)g(T)l(ransfer)g(Agen)o(t.)0 1599 y(It)g(exists)g(to)g(pro)q
(cess)g(mail,)h(similar)g(to)f(the)g(function)h(p)q(erformed)f(b)o(y)g
(a)g(p)q(ost)f(o\016ce.)26 b(As)17 b(in)h(the)f(real)g(w)o(orld)0
1661 y(analogy)l(,)d(an)g(MT)l(A)g(do)q(es)g(not)g(participate)h(in)f
(the)h(pro)q(cess)f(of)g(comp)q(osing)g(messages)g(and)g(getting)g
(them)g(in)o(to)0 1724 y(the)k(system.)26 b(T)l(o)17
b(do)h(so,)f(w)o(ould)h(corresp)q(ond)g(to)f(y)o(our)g(neigh)o(b)q
(orho)q(o)q(d)h(p)q(ostman)g(taking)f(dictation)h(of)f(y)o(our)0
1786 y(letters,)c(and)g(taking)g(them)g(along)g(when)g(lea)o(ving)h(y)o
(our)e(house.)20 b(In)13 b(realit)o(y)h(of)e(course,)h(p)q(eople)h(use)
g(a)e(v)m(ariet)o(y)h(of)0 1848 y(to)q(ols)g(to)f(comp)q(ose)g(letters)
h(\(quill)h(p)q(ens,)g(w)o(ord)e(pro)q(cessors,)h(etc.\),)f(and)g(to)g
(send)i(them)e(o\013.)19 b(This)13 b(functionalit)o(y)0
1910 y(is)i(em)o(b)q(o)q(died)h(in)f(a)f(fron)o(t)g(end)h(to)f(the)g
(MT)l(A,)g(called)i(a)e(User)g(Agen)o(t)g(\(UA)g(for)g(short\).)19
b(The)c(c)o(hoice)g(of)f(UA)g(is)h(a)0 1973 y(v)o(ery)g(p)q(ersonal)g
(one,)g(and)g(is)g(usually)i(not)d(critical)i(to)f(the)g(basic)g(pro)q
(cess)g(of)g(comp)q(osing)g(a)g(message,)f(sending)0
2035 y(it)h(o\013,)f(and)i(getting)f(it)g(deliv)o(ered)i(prop)q(erly)l
(.)62 2172 y(Ev)o(en)g(though)f(there)h(ma)o(y)e(b)q(e)i(man)o(y)f
(UA's)h(in)g(use)g(on)f(a)g(computer)h(system,)f(there)g(is)h(usually)h
(only)f(one)0 2234 y(MT)l(A.)h(The)h(exceptions)h(to)f(this)g(rule)h
(usually)g(ha)o(v)o(e)f(to)f(do)h(with)g(limitations)h(in)g(an)f(MT)l
(A's)f(capabilities.)0 2296 y(F)l(or)e(example,)h(a)f(computer)g(that)g
(can)g(transfer)g(mail)h(using)g(b)q(oth)f(the)h(X.400)e(proto)q(cols,)
h(and)g(the)h(In)o(ternet)0 2359 y(proto)q(cols,)e(ma)o(y)f(need)i(t)o
(w)o(o)e(di\013eren)o(t)i(MT)l(As)f(to)f(co)o(v)o(er)h(b)q(oth)h(proto)
q(col)f(suites.)20 b(Often)o(times,)c(one)f(of)g(the)g(t)o(w)o(o)0
2421 y(MT)l(As)j(is)g(a)g(primary)g(mailer,)h(and)f(tak)o(es)f(care)h
(of)g(all)g(decision-making.)31 b(The)18 b(other)g(mailers)g(w)o(ould)h
(then)0 2483 y(b)q(e)c(treated)f(b)o(y)h(the)f(primary)h(MT)l(A)f(as)g
(a)h(means)f(for)g(deliv)o(ering)j(messages)d(to)f(particular)j
(destinations,)f(and)0 2545 y(these)i(secondary)g(mailers)g(w)o(ould)h
(b)q(e)f(con\014gured)h(to)e(pun)o(t)h(an)o(y)f(non-trivial)j(tra\016c)
d(to)g(the)h(primary)g(MT)l(A.)0 2608 y(Both)c(in)h(the)f(case)g(of)f
(a)h(User)g(Agen)o(t,)f(and)h(in)h(the)f(cases)g(of)g(alternate)g(MT)l
(As,)f(there)h(m)o(ust)g(b)q(e)g(a)g(w)o(a)o(y)f(to)g(inject)0
2670 y(messages)j(in)o(to)g(the)g(mail)h(subsystem.)p
eop
%%Page: 18 19
18 18 bop 0 -58 a Fi(18)1380 b(ZMailer)16 b(Op)q(erations)g(Guide)62
183 y(When)h(y)o(ou)g(w)o(an)o(t)f(to)g(mail)h(a)g(letter,)g(what)f(do)
h(y)o(ou)f(do?)25 b(W)l(ell,)19 b(y)o(ou)d(drop)h(it)g(in)g(a)g(mailb)q
(o)o(x)g(somewhere.)0 246 y(ZMailer)h(accepts)f(messages)g(the)g(same)g
(w)o(a)o(y:)23 b(y)o(ou)17 b(drop)h(a)f(\014le,)h(con)o(taining)g(y)o
(our)f(message,)g(in)o(to)g(a)g(sp)q(ecial)0 308 y(submission)f
(directory)l(.)21 b(Lik)o(e)15 b(a)g(p)q(ostman)g(\(although)f(rather)h
(more)f(frequen)o(tly\),)h(ZMailer)g(scans)g(this)h(direc-)0
370 y(tory)f(to)g(pic)o(k)h(up)g(the)g(new)f(messages,)g(and)h(pro)q
(cesses)g(them.)21 b(What)14 b(happ)q(ens)j(to)e(a)g(message)g(from)g
(then)h(on)0 432 y(is)f(in)o(teresting)h(in)f(its)g(o)o(wn)f(righ)o(t)h
(of)f(course,)g(but)h(presen)o(tly)h(w)o(e)e(shall)i(fo)q(cus)f(on)f
(ho)o(w)g(the)h(message)g(gets)f(from)0 495 y(a)h(user)g(in)o(to)g(the)
h(mail)g(subsystem.)62 639 y(The)k(simplest)g(w)o(a)o(y)f(to)f(\\drop)i
(a)f(\014le)h(in)o(to)f(a)g(directory")h(is)g(of)f(course)g(to)g
(actually)h(edit)g(a)f(\014le)h(in)h(that)0 701 y(directory)l(.)j(Ho)o
(w)o(ev)o(er,)16 b(a)g(program)f(scanning)i(suc)o(h)g(a)f(directory)h
(w)o(ould)g(not)f(b)q(e)h(able)g(to)f(tell)i(when)f(y)o(ou)f(had)0
763 y(\014nished)k(writing)f(y)o(our)f(message)g(and)g(stopp)q(ed)h
(editing)h(the)e(\014le.)31 b(T)l(o)18 b(do)g(so,)h(w)o(ould)f(require)
i(co)q(op)q(eration)0 825 y(b)q(et)o(w)o(een)c(the)g(scanning)g
(program)f(and)h(all)g(the)g(programs)e(that)h(could)i(conceiv)m(ably)h
(create)d(a)h(\014le)g(a)g(p)q(ortion)0 888 y(at)e(a)h(time.)20
b(The)c(next)f(most)f(ob)o(vious)h(metho)q(d)h(is)f(to)g(edit)g(the)h
(message)e(\014le)i(in)g(another)f(lo)q(cation,)g(and)h(then)0
950 y(simply)g(cop)o(y)f(or)f(link)i(it)f(in)o(to)g(the)g(sp)q(ecial)h
(message)f(submission)h(directory)l(.)k(Indeed,)c(this)f(is)g(almost)g
(exactly)0 1012 y(the)k(mec)o(hanism)g(used.)31 b(Actually)l(,)20
b(the)f(cop)o(ying)g(program)e(happ)q(ens)j(to)e(b)q(e)h(among)f(those)
g(programs)g(that)0 1074 y(ma)o(y)13 b(construct)g(a)g(new)g(\014le)i
(piece)f(b)o(y)g(piece)g(\(a)f(disk)h(blo)q(c)o(k)g(at)f(a)g(time\).)19
b(F)l(or)13 b(large)g(\014les)i(there)e(is)h(a)f(vulnerable)0
1137 y(windo)o(w)f(b)q(et)o(w)o(een)h(when)g(the)f(cop)o(y)g(starts)f
(and)i(when)f(it)h(\014nishes.)20 b(If)13 b(the)f(submitter)g(is)h
(unluc)o(ky)l(,)h(the)e(message)0 1199 y(ma)o(y)17 b(b)q(e)i(pro)q
(cessed)f(b)o(y)g(the)g(scanning)h(program)e(\(the)h(ZMailer)g
(Router\))g(b)q(efore)g(it)g(is)h(completely)g(written)0
1261 y(out.)g(In)d(fact)e(this)i(is)f(not)f(a)h(problem)h(due)f(to)f
(the)h(implemen)o(tation)i(p)q(olicy)f(of)f(relinking)i(message)d
(\014les.)21 b(The)0 1323 y(real)f(problem)h(is)f(if)h(a)e(partial)h
(message)g(is)g(completely)h(pro)q(cessed)g(and)f(deliv)o(ered)i(and)e
(remo)o(v)o(ed,)g(with)g(a)0 1386 y(corrupt)15 b(message)g(b)q(o)q(dy)l
(.)62 1530 y(T)l(o)j(a)o(v)o(oid)f(problems,)i(the)e(only)i(acceptable)
f(metho)q(d)g(is)h(to)e(mak)o(e)g(the)h(complete)g(message)f(a)o(v)m
(ailable)j(to)0 1592 y(the)15 b(Router)f(at)g(once.)20
b(This)15 b(is)g(done)g(b)o(y)f(linking)j(the)d(message)g(\014le)i(in)o
(to)e(the)h(directory)g(b)q(eing)g(scanned.)21 b(Due)0
1654 y(to)14 b(the)g(seman)o(tics)g(of)g(hard)g(links)i(and)e(the)h
(UNIX)f(\014lesystem,)h(doing)g(this)g(requires)g(that)e(the)h(message)
g(\014le)h(is)0 1717 y(created)g(on)g(the)g(same)f(\014lesystem)i(as)e
(the)h(submission)i(directory)l(.)j(ZMailer)15 b(pro)o(vides)h(a)e
(publically)k(writable)0 1779 y(directory)l(,)j(sp)q(eci\014cally)i
(for)c(the)h(purp)q(ose)g(of)f(creating)h(message)g(\014les)g(b)q
(efore)g(they)g(are)g(relink)o(ed)h(in)o(to)f(the)0 1841
y(submission)c(directory)l(.)k(In)c(fact,)e(the)h(submission)h
(directory)f(itself)h(is)f(publicall)q(y)i(writable,)f(so)e(users)h
(can)g(do)0 1903 y(this)h(relinking)h(themselv)o(es)f(\(e.g.)j(with)c
(the)h Fe(mv)e Fi(command\).)62 2047 y(There)d(are)f(some)g(securit)o
(y)g(concerns)h(with)f(this)h(approac)o(h.)18 b(Because)11
b(b)q(oth)f(these)h(directories)g(are)f(writable,)0 2110
y(it)k(is)g(conceiv)m(able)i(that)d(a)h(malicious)h(user)f(can)g(cause)
g(problems)g(for)f(other)g(users,)h(for)f(example)i(remo)o(v)o(e)d
(their)0 2172 y(message)h(\014les,)h(or)e(read)h(or)g(alter)g(them)g
(if)h(the)f(\014le)h(p)q(ermissions)h(allo)o(w.)k(The)13
b(solution)h(to)f(the)g(latter)g(problem,)0 2234 y(is)k(ob)o(viously)g
(to)e(ensure)i(that)e(\014le)j(p)q(ermissions)f(do)f(not)g(allo)o(w)h
(p)q(eople)g(other)f(than)g(the)g(originating)h(user)g(to)0
2296 y(access)e(a)g(message)f(\014le.)21 b(There)15 b(are)g(t)o(w)o(o)e
(solutions)j(to)e(the)h(former)f(problem;)h(one)g(is)h(to)e(main)o
(tain)h(ignorance)0 2359 y(of)h(the)g(con)o(ten)o(ts)f(of)h(the)g(v)m
(arious)h(directories,)g(the)f(other,)g(b)q(etter,)g(metho)q(d)g(is)h
(to)f(use)g(a)g(feature)g(in)o(tro)q(duced)0 2421 y(in)f(4.3BSD)e({)g
(setting)h(the)g(stic)o(ky)g(bit)g(on)g(the)g(directories.)20
b(The)14 b(seman)o(tics)g(of)f(the)h(stic)o(ky)g(bit)h(on)e(a)h
(directory)0 2483 y(is)i(to)e(only)h(allo)o(w)h(the)f(o)o(wner)f(of)h
(a)g(\014le)h(to)e(unlink)j(it)e(from)g(a)f(generally)i(writable)g
(directory)l(.)k(If)c(this)f(function)0 2545 y(is)20
b(not)f(a)o(v)m(ailable,)j(read)d(p)q(ermissions)i(to)d(the)i
(submission)g(directory)g(can)g(safely)f(b)q(e)h(remo)o(v)o(ed)f(if)h
(only)g(the)0 2608 y(standard)c(message)f(submission)j(routines)e(are)g
(used)g(b)o(y)g(the)h(User)f(Agen)o(ts.)22 b(This)16
b(lea)o(v)o(es)g(us)h(ha)o(ving)f(to)f(\014nd)0 2670
y(a)i(w)o(a)o(y)f(to)g(secure)i(the)f(directory)g(used)h(for)e
(creating)h(\014les.)27 b(Read)17 b(p)q(ermission)i(to)d(it)h(cannot)g
(b)q(e)h(withdra)o(wn)p eop
%%Page: 19 20
19 19 bop 0 -58 a Fi(Router)1768 b(19)0 183 y(if)18 b(the)f(aforemen)o
(tioned)g(standard)g(routines)g(are)g(used)h(\(they)f(are)g(describ)q
(ed)i(later\).)25 b(Other)17 b(things)h(can)f(b)q(e)0
246 y(done,)g(but)g(ob)o(viously)h(\\ignorance")e(is)i(not)e(a)h
(reliable)h(w)o(a)o(y)e(of)g(enforcing)i(securit)o(y)l(.)25
b(P)o(erhaps)17 b(if)g(y)o(ou)f(notice)0 308 y(the)h(analogy)f(with)h
(the)g(common)f(usage)g(of)g(`)p Fe(/tmp)p Fi(')f(for)h(v)m(arious)h
(in)o(termediate)h(\014les,)f(y)o(ou)g(will)h(not)e(consider)0
370 y(securit)o(y)c(an)o(y)g(more)g(of)f(a)h(problem)h(in)g(this)f
(case.)19 b(My)12 b(recommendation)g(w)o(ould)g(b)q(e)h(to)f(treat)f
(these)h(directories)0 432 y(the)i(same)g(w)o(a)o(y)f(y)o(ou)h(treat)f
(`)p Fe(/tmp)p Fi('.)19 b(That)13 b(is,)i(if)f(the)h(directory)f(stic)o
(ky-bit)h(seman)o(tics)g(are)e(a)o(v)m(ailable,)j(use)f(that)0
495 y(feature.)28 b(If)19 b(not,)f(try)g(trusting)g(y)o(our)f(users)i
(enough)f(to)g(not)f(co)o(v)o(er)h(up)h(the)f(directories.)30
b(Y)l(ou)18 b(should)h(note)0 557 y(that)c(the)g(p)q(ossible)i(danger)e
(is)h(con\014ned)h(to)d(remo)o(ving)i(message)e(\014les.)22
b(There)15 b(is)h(no)f(w)o(a)o(y)g(for)f(a)h(user)h(to)f(forge)0
619 y(the)f(origin)h(of)f(a)g(mail)h(message,)e(since)j(all)f(v)m
(alidation)h(of)d(message)h(origin)h(is)g(based)f(on)g(the)g(o)o
(wnership)h(of)f(the)0 681 y(message)h(\014le.)21 b(T)l(rusted)15
b(user)g(id's)h(ma)o(y)e(of)h(course)g(supply)i(a)e(di\013eren)o(t)g
(origin)h(address.)62 867 y(There)f(is)h(only)f(one)g(other)f
(signi\014can)o(t)i(problem)f(with)g(this)h(approac)o(h,)e(whic)o(h)h
(is)h(the)e(p)q(oten)o(tial)i(for)e(name)0 929 y(clashes)h(of)e
(\014les)i(in)g(eac)o(h)f(of)f(the)h(t)o(w)o(o)e(directories.)21
b(This)14 b(problem)h(can)f(b)q(e)g(only)h(b)q(e)f(solv)o(ed)g(if)h
(all)g(User)e(Agen)o(ts)0 992 y(co)q(op)q(erate)19 b(in)h(using)f(the)g
(exact)g(same)f(collision)k(a)o(v)o(oidance)d(or)f(collision)j
(resolution)f(tec)o(hnique.)32 b(What)18 b(is)0 1054
y(really)f(needed,)f(b)o(y)g(all)g(the)g(v)m(arious)g(ZMailer)g(comp)q
(onen)o(ts)g(op)q(erating)g(on)f(a)h(message,)f(is)h(a)f(w)o(a)o(y)g
(to)g(get)g(and)0 1116 y(hold)20 b(a)e(lo)q(c)o(k)i(on)f(the)g
(message.)30 b(There)19 b(are)g(v)m(arious)g(w)o(a)o(ys)f(to)g(ac)o
(hiev)o(e)i(this,)g(and)f(a)g(k)o(ernel-based)h(lo)q(c)o(king)0
1179 y(mec)o(hanism)15 b(ma)o(y)f(seem)h(appropriate)f(in)i(certain)e
(situations.)21 b(Ho)o(w)o(ev)o(er,)13 b(giv)o(en)i(the)f(realization)i
(a\013orded)e(b)o(y)0 1241 y(an)k(o)o(v)o(erview)g(of)f(the)i
(structure)e(of)h(ZMailer,)h(it)f(b)q(ecomes)h(clear)f(that)g(eac)o(h)g
(message)f(go)q(es)h(through)g(states)0 1303 y(corresp)q(onding)f(to)f
(the)h(curren)o(t)f(pro)q(cessing)h(stage.)23 b(Instead)17
b(of)f(storing)g(the)h(state)e(in)j(the)e(message)g(\014le)i(\(or)0
1365 y(some)e(other)f(lo)q(cation)i(asso)q(ciated)g(with)f(a)g
(particular)g(message)g(\014le\),)h(the)f(state)f(is)i(enco)q(ded)g(in)
g(the)f(curren)o(t)0 1428 y(lo)q(cation)g(of)f(a)g(message)g(\014le.)21
b(F)l(or)15 b(example,)h(if)f(the)h(message)f(\014le)h(is)g(in)g(the)f
(submission)i(directory)l(,)e(it)h(means)0 1490 y(it)h(is)h(w)o(aiting)
f(for)f(the)h(ZMailer)h(Router)f(to)f(pro)q(cess)h(it.)26
b(With)17 b(this)g(solution)h(in)g(hand,)f(there)g(still)i(remains)0
1552 y(the)c(original)i(matter)d(of)g(a)o(v)o(oiding)i(\014le)g(name)f
(clashes.)62 1738 y(The)e(b)q(est)f(w)o(a)o(y)g(of)f(a)o(v)o(oiding)i
(name)f(clashes)h(is)g(to)f(generate)g(names)g(that)g(cannot)g(clash.)
19 b(The)13 b(only)g(ob)o(vious)0 1800 y(unique)19 b(prop)q(ert)o(y)e
(of)g(a)g(\014le)h(is)g(its)f(ino)q(de)i(n)o(um)o(b)q(er.)27
b(Therefore,)17 b(if)h(one)f(uses)h(the)f(ino)q(de)i(n)o(um)o(b)q(er)e
(in)i(the)e(\014le)0 1862 y(name)c(itself,)i(name)e(clashes)h(will)h(b)
q(e)g(completely)f(a)o(v)o(oided.)20 b(This)14 b(is)g(a)f(truism)g(if)h
(the)g(\014les)g(are)f(created)h(on)f(the)0 1925 y(same)j
(\014lesystem,)g(and)g(of)g(course)g(breaks)g(do)o(wn)g(if)g(that)g
(assumption)g(is)g(in)o(v)m(alid.)25 b(There)16 b(is)h(just)f(one)g
(minor)0 1987 y(problem:)21 b(the)15 b(ino)q(de)h(n)o(um)o(b)q(er)g(of)
f(a)g(\014le)h(is)f(not)g(kno)o(wn)g(un)o(til)i(the)e(\014le)h(is)g
(actually)g(created.)62 2173 y(T)l(o)f(resolv)o(e)g(that)f(Catc)o(h-22)
g(situation,)h(the)g(message)f(\014le)i(m)o(ust)e(b)q(e)i(created)f
(under)g(one)g(name,)g(and)g(then)0 2235 y(immediately)j(renamed)f(to)f
(its)h(guaran)o(teed)f(unique)i(name,)e(using)h(its)g(ino)q(de)h(n)o
(um)o(b)q(er.)24 b(The)17 b(\014rst)f(name)h(for)0 2297
y(a)f(message)f(\014le)i(can)g(safely)f(b)q(e)h(c)o(hosen)f(b)o(y)g
(the)g(same)g(metho)q(d)g(used)h(to)e(\014nd)i(names)f(for)g(temp)q
(orary)f(\014les)i(in)0 2360 y(`)p Fe(/tmp)p Fi('.)h(No)o(w)13
b(all)h(the)f(problems)h(are)f(solv)o(ed)h(with)g(only)g(t)o(w)o(o)e
(imp)q(ortan)o(t)h(assumptions:)19 b(all)14 b(message)f(\014les)h(are)0
2422 y(created)h(b)o(y)g(this)h(same)f(mec)o(hanism,)g(and)h(all)g
(message)f(\014les)h(are)f(created)g(on)g(the)g(same)g(\014lesystem.)62
2608 y(ZMailer)h(will)g(w)o(ork)e(with)i(\014les)g(that)e(ha)o(v)o(e)h
(b)q(een)h(man)o(ually)g(created)f(and)g(mo)o(v)o(ed)g(around,)f
(although)i(this)0 2670 y(should)g(only)g(b)q(e)g(done)f(routinely)i(b)
o(y)e(mail)h(system)f(main)o(tainers.)p eop
%%Page: 20 21
20 20 bop 0 -58 a Fi(20)1380 b(ZMailer)16 b(Op)q(erations)g(Guide)0
183 y Fd(3.2)35 b(Message)23 b(File)e(F)-6 b(ormat)62
320 y Fi(As)12 b(men)o(tioned,)h(the)f(Router)h(pic)o(ks)f(up)h
(message)e(\014les)i(from)f(a)f(sp)q(eci\014c)j(directory)l(.)19
b(Normally)l(,)13 b(message)f(\014le)0 382 y(names)k(can)g(b)q(e)g
(arbitrary)g(v)m(alid)h(\014le)g(names,)f(and)g(indeed)i(this)e(is)g
(con)o(v)o(enien)o(t)h(when)f(debugging.)23 b(Ho)o(w)o(ev)o(er,)0
445 y(b)q(ecause)15 b(the)g(Router)f(daemon)h(scans)f(its)g(o)o(wn)g
(curren)o(t)h(directory)l(,)f(miscellaneous)j(output)d(from)f(the)i
(Router)0 507 y(pro)q(cess)f(ma)o(y)g(sho)o(w)f(up)h(in)h(this)g
(directory)f(\(e.g.)k(pro\014ling)e(data,)d(or)g(core)h(dumps)h(\(un)o
(think)m(able)h(as)d(that)g(is\)\).)0 569 y(F)l(urthermore,)h(it)h(is)g
(useful)h(to)e(b)q(e)i(able)f(to)f(hide)j(\014les)e(from)f(the)h
(Router)g(scanning)h(\(indeed)g(the)f(Router)g(ma)o(y)0
632 y(wish)h(to)e(do)h(so)g(itself)t(\).)62 769 y(When)g(the)g(Router)g
(pro)q(cess)f(is)h(scanning)h(for)e(message)g(\014les)i(then,)e(it)h
(only)g(considers)h(at)e(\014le)h(names)g(that)0 831
y(ha)o(v)o(e)e(a)f(certain)i(format.)k(Sp)q(eci\014cally)l(,)e(the)d
(message)g(\014le)h(name)f(m)o(ust)f(start)g(with)h(a)g(digit.)20
b(This)14 b(metho)q(d)f(w)o(as)0 893 y(c)o(hosen)18 b(to)e(accomo)q
(date)h(the)h(message)e(\014le)j(names,)e(as)g(generated)g(b)o(y)h(the)
f(standard)g(submission)i(in)o(terface)0 955 y(library)d(routines,)f
(whic)o(h)h(will)h(b)q(e)f(strings)f(of)g(digits)h(represen)o(ting)g
(the)f(message)g(\014le's)g(ino)q(de)i(n)o(um)o(b)q(er.)62
1092 y(A)22 b(message)f(\014le)i(con)o(tains)f(three)g(sections:)33
b(the)22 b(message)f(en)o(v)o(elop)q(e,)j(the)e(message)g(header,)h
(and)f(the)0 1155 y(message)e(b)q(o)q(dy)g(\(in)h(that)e(order\).)33
b(The)21 b(message)e(b)q(o)q(dy)i(is)f(separated)g(from)f(the)h
(previous)h(sections)f(b)o(y)g(a)0 1217 y(blank)13 b(line.)21
b(The)13 b(message)f(b)q(o)q(dy)i(ma)o(y)e(b)q(e)h(empt)o(y)l(,)g(and)g
(either)g(of)f(the)h(message)f(en)o(v)o(elop)q(e)i(or)e(message)h
(header)0 1279 y(ma)o(y)j(b)q(e)i(empt)o(y)l(.)25 b(The)17
b(restriction)h(on)f(the)g(latter)f(situation,)i(is)f(that)g(one)g(of)f
(those)h(sections)g(m)o(ust)g(con)o(tain)0 1341 y(destination)f
(information)f(for)g(the)g(message.)62 1478 y(The)k(message)f(en)o(v)o
(elop)q(e)i(and)e(the)h(message)f(header)g(ha)o(v)o(e)h(v)o(ery)f
(similar)h(syn)o(tax.)29 b(The)19 b(only)g(di\013erence)0
1541 y(is)e(that)f(while)i(the)f(message)f(header)h(m)o(ust)f(adhere)h
(to)f(RF)o(C822,)f(the)i(message)f(en)o(v)o(elop)q(e)i(header)e
(\014elds)i(are)0 1603 y(terminated)j(b)o(y)g(whitespace)g(\(`)i('\))d
(instead)i(of)e(a)g(colon)i(\(`)p Fe(:)p Fi('\).)34 b(The)21
b(seman)o(tics)g(of)f(the)h(t)o(w)o(o)f(message)g(\014le)0
1665 y(sections)c(is)f(quite)h(di\013eren)o(t,)f(and)h(will)h(b)q(e)e
(co)o(v)o(ered)g(later.)62 1802 y(The)h(header)f(\014elds)i(recognized)
f(b)o(y)f(ZMailer)h(in)g(the)f(message)g(en)o(v)o(elop)q(e)h(are:)0
1939 y Fe(channel)23 b Fb(w)o(ord)240 2001 y Fi(sets)15
b(the)g(c)o(hannel)i(corresp)q(onding)f(to)e(the)i(message)e(origin)p
Ff(y)0 2073 y Fe(from)23 b Fb(address)240 2135 y Fi(a)15
b(source)g(address)p Ff(y)0 2207 y Fe(fullname)23 b Fb(phrase)240
2269 y Fi(sets)15 b(the)g(full)i(name)e(of)g(the)g(lo)q(cal)h(sender)0
2340 y Fe(loginname)23 b Fb(lo)q(cal-part)240 2403 y
Fi(requests)15 b(using)h(this)g(mail)g(id)g(for)e(the)i(lo)q(cal)g
(sender)0 2474 y Fe(rcvdfrom)23 b Fb(domain)240 2536
y Fi(sets)15 b(the)g(host)g(the)g(message)g(w)o(as)f(receiv)o(ed)j
(from)p Ff(y)0 2608 y Fe(to)24 b Fb(address-list)240
2670 y Fi(a)15 b(destination)h(address)f(list)p eop
%%Page: 21 22
21 21 bop 0 -58 a Fi(Router)1768 b(21)0 183 y Fe(user)23
b Fb(lo)q(cal-part)240 246 y Fi(sets)15 b(the)g(user)h(the)f(message)g
(w)o(as)f(receiv)o(ed)i(from)p Ff(y)0 368 y Fe(via)23
b Fb(w)o(ord)47 b Fi(for)15 b(RF)o(C822)f(Receiv)o(ed:)21
b(header)16 b(to)e(b)q(e)i(generated)0 490 y Fe(with)23
b Fb(w)o(ord)240 552 y Fi(for)15 b(RF)o(C822)f(Receiv)o(ed:)21
b(header)16 b(to)e(b)q(e)i(generated)62 737 y(As)h(with)h(a)e(normal)h
(RF)o(C822)f(header,)i(other)e(\014elds)i(are)f(allo)o(w)o(ed)h
(\(though)e(they)h(will)i(b)q(e)e(ignored\),)h(and)0
799 y(case)e(is)g(not)g(signi\014can)o(t)h(in)g(the)f(\014eld)h(name.)
22 b(The)16 b(Router)g(will)i(do)e(appropriate)g(c)o(hec)o(ks)g(for)f
(the)h(\014elds)i(that)0 861 y(require)e(it.)62 1046
y(With)g(this)f(kno)o(wledge,)h(w)o(e)f(can)g(no)o(w)g(appreciate)g
(the)h(minimal)g(message)f(\014le:)120 1170 y Fe(--------------------)
120 1220 y(to)24 b(bond)120 1320 y(--------------------)62
1504 y Fi(This)15 b(will)h(cause)e(an)h(empt)o(y)f(message)f(to)h(b)q
(e)h(sen)o(t)f(to)f(`)p Fe(bond)p Fi('.)19 b(A)14 b(sligh)o(tly)h(more)
f(sophisticated)h(v)o(ersion)g(is:)120 1628 y Fe(--------------------)
120 1678 y(from)23 b(m)120 1728 y(to)h(bond)120 1778
y(via)f(courier)120 1828 y(From:)g(M)120 1878 y(To:)g(Bond)120
1927 y(Subject:)g(do)g(get)h(a)g(receipt,)e(007!)120
2027 y(You)h(are)h(working)f(for)g(the)h(Government,)e(remember?)120
2077 y(--------------------)62 2261 y Fi(Notice)13 b(that)f(there)h(is)
g(no)g(delimiter)h(b)q(et)o(w)o(een)f(the)g(message)f(en)o(v)o(elop)q
(e)i(and)e(the)h(message)f(header.)20 b(A)12 b(more)0
2324 y(sophisticated)k(example)g(in)g(the)g(same)e(v)o(ein:)p
0 2562 600 2 v -41 2608 a Ff(y)23 b Fi(This)18 b(is)f(a)g(privileged)i
(\014eld.)27 b(That)17 b(is,)g(the)g(action)h(will)g(only)g(happ)q(en)g
(if)g(ZMailer)f(trusts)g(the)g(o)o(wner)f(of)h(the)0
2670 y(message)e(\014le)h(\(see)f(section)h(3.10)e([Securit)o(y],)h
(page)g(38\).)p eop
%%Page: 22 23
22 22 bop 0 -58 a Fi(22)1380 b(ZMailer)16 b(Op)q(erations)g(Guide)120
111 y Fe(--------------------)120 161 y(from)23 b(ps/d-ops)120
211 y(to)h(<007)p Fh(@)p Fe(sis.mod.uk>)120 261 y(From:)f(M)h(<d-ops)p
Fh(@)p Fe(sis.mod.uk>)120 311 y(Sender:)f(Moneypenny)f(<ps/d-ops)p
Fh(@)p Fe(sis.mod.uk>)120 360 y(To:)h(James)h(Bond)f(<007)p
Fh(@)p Fe(sis.mod.uk>)120 410 y(Subject:)g(where)g(are)g(you???!)120
460 y(Classification:)f(Top)h(Secret)120 510 y(Priority:)g(Flash)120
609 y(We)h(have)f(another)g(madman)g(on)g(the)h(loose.)47
b(Contact)23 b("Q")g(for)h(usual)f(routine.)120 659 y
(--------------------)62 798 y Fi(If)18 b(the)g(`)p Fe(Classification)p
Fi(')d(header)j(is)g(paid)h(atten)o(tion)e(to)g(in)h(ZMailer,)h(this)f
(requires)g(that)f(the)h(Router)0 861 y(recognize)d(it)g(in)g(the)g
(message)f(header,)g(and)h(tak)o(e)e(appropriate)i(action.)k(In)c
(general)g(the)g(Router)f(can)h(extract)0 923 y(most)c(of)g(the)h
(information)f(in)i(the)e(message)g(header,)i(and)f(mak)o(e)f(use)h(of)
f(it)h(if)g(the)f(information)h(is)g(lac)o(king)g(in)h(the)0
985 y(en)o(v)o(elop)q(e.)20 b(The)13 b(en)o(v)o(elop)q(e)g(headers)g
(in)g(the)f(ab)q(o)o(v)o(e)g(message)g(are)g(sup)q(er\015uous,)i(since)
f(the)g(same)f(information)g(is)0 1047 y(con)o(tained)i(in)g(the)f
(message)g(header.)19 b(Using)14 b(the)f(follo)o(wing)h(en)o(v)o(elop)q
(e)h(headers)e(w)o(ould)h(b)q(e)g(exactly)f(equiv)m(alen)o(t)0
1110 y(to)i(using)g(the)h(ones)f(sho)o(wn)g(ab)q(o)o(v)o(e)g
(\(assuming)g(the)g(lo)q(cal)h(host)f(is)h(`)p Fe(sis.mod.uk)p
Fi('\):)120 1236 y Fe(--------------------)120 1286 y(From)23
b(Moneypenny)g(<ps/d-ops)p Fh(@)p Fe(sis.mod.uk>)120
1336 y(To)h(James)f(Bond)g(<007)p Fh(@)p Fe(sis.mod.uk>)120
1386 y(...)120 1436 y(--------------------)62 1575 y
Fi(ZMailer)16 b(will)h(extract)d(the)i(appropriate)f(address)g
(information)g(from)g(whatev)o(er)g(the)g(\014eld)h(v)m(alues)h(are,)d
(as)0 1637 y(long)20 b(as)f(they)g(ob)q(ey)h(the)g(de\014ned)h(syn)o
(tax)d(\(indicated)j(in)f(the)g(list)g(of)f(recognized)i(en)o(v)o(elop)
q(e)f(\014elds)h(ab)q(o)o(v)o(e\).)0 1699 y(ZMailer)16
b(will)g(complain)h(in)f(case)f(of)g(unexp)q(ected)i(errors)d(in)i(the)
g(en)o(v)o(elop)q(e)g(headers.)62 1838 y(The)e(message)f(b)q(o)q(dy)i
(is)f(not)f(in)o(terpreted)i(b)o(y)e(ZMailer)h(itself.)21
b(As)13 b(far)g(as)h(the)f(Router)h(is)g(concerned,)h(it)f(can)0
1900 y(b)q(e)f(arbitrary)f(data.)18 b(Ho)o(w)o(ev)o(er,)12
b(certain)h(T)l(ransp)q(ort)f(Agen)o(ts)g(ma)o(y)f(require)j
(limitations)f(on)g(the)f(message)g(b)q(o)q(dy)0 1963
y(data.)19 b(F)l(or)c(example,)g(the)h(SMTP)f(only)g(deals)h(with)g
(ASCI)q(I)g(data)f(with)g(a)g(small)h(guaran)o(teed)f(line)i(length.)0
2205 y Fd(3.3)35 b(Header)23 b(Scanning)g(and)h(P)n(arsing)62
2344 y Fi(Message)12 b(header)g(and)g(en)o(v)o(elop)q(e)h(is)g(scanned)
g(according)f(to)g(the)g(lexical)i(rules)e(of)g(RF)o(C822)f(\(and)h(RF)
o(C976\),)0 2406 y(and)i(parsed)f(according)h(to)e(the)i(grammar)e
(rules)i(of)f(RF)o(C822.)18 b(RF)o(C976)12 b(compatibilit)o(y)j
(requires)f(that)e(the)i(`)p Fe(!)p Fi(')0 2469 y(and)g(`)p
Fe(\045)p Fi(')f(c)o(haracters)h(b)q(e)h(treated)e(as)h(sp)q(ecials)i
(\(just)d(lik)o(e)i(`)p Fe(.)p Fi(')f(and)g(`)p Fh(@)p
Fi('\).)19 b(This)14 b(b)q(eha)o(vior)h(is)f(enabled)i(at)d(compile)0
2531 y(time)j(\(b)o(y)e(de\014ning)j(the)e Fe(RFC976)g
Fi(prepro)q(cessor)g(sym)o(b)q(ol\),)g(and)g(is)h(indeed)h(enabled)f(b)
o(y)g(default.)62 2670 y(XXX:)g(The)h(only)f(div)o(ergence)h(from)f(RF)
o(C822/RF)o(C976)d(syn)o(tax)j(is)g(that)g(commen)o(ts)f(are)h(not)g
(allo)o(w)o(ed)g(in)p eop
%%Page: 23 24
23 23 bop 0 -58 a Fi(Router)1768 b(23)0 183 y(certain)13
b(lo)q(cations)g(within)h(addresses,)f(and)f(commen)o(ts)g(and)h
(quoted)f(strings)h(ma)o(y)e(not)h(span)h(line)h(b)q(oundaries.)0
246 y(Neither)j(of)e(these)h(are)g(design)h(limitations,)g(they)f(will)
h(disapp)q(ear)g(b)q(efore)f(\014nal)h(release.)22 b(All)c(other)d(RF)o
(C822)0 308 y(constructs)g(are)g(prop)q(erly)h(recognized)g(and)f(supp)
q(orted.)62 451 y(The)f(men)o(tioned)g(RF)o(C)f(do)q(cumen)o(ts)h(serv)
o(e)g(to)e(describ)q(e)k(ZMailer)e(b)q(eha)o(vior)g(with)f(resp)q(ect)h
(to)f(lexical)j(scan-)0 513 y(ning,)d(tok)o(enization,)g(and)f
(parsing.)19 b(In)13 b(summary)l(,)f(based)g(on)h(the)f(class)g(of)g
(eac)o(h)g(c)o(haracter,)g(a)g(tok)o(en)f(stream)g(is)0
575 y(syn)o(thesized)j(for)e(eac)o(h)h(header.)19 b(V)l(arious)13
b(headers)g(ha)o(v)o(e)f(de\014ned)j(seman)o(tics)d(\(e.g.)19
b(the)12 b(`)p Fe(To:)p Fi(')g(header)h(con)o(tains)0
637 y(an)i(address)g(list\),)g(whic)o(h)h(driv)o(e)f(the)g(parse)g(of)f
(the)h(tok)o(en)g(stream)f(for)g(that)h(header.)20 b(The)15
b(headers)g(that)f(ha)o(v)o(e)0 700 y(sp)q(eci\014c)j(seman)o(tics)e
(to)g(the)g(Router)h(are:)120 828 y Fe(Field)23 b(name)167
b(RFC822)23 b(Syntax)g(description)141 b(Class)120 877
y(--------------------------)o(-------)o(--------)o(-------)o(-------)o
(--------)o(----)120 927 y(channel)405 b(word)476 b(Envelope)120
977 y(fullname)381 b(phrase)428 b(Envelope)120 1027 y(loginname)357
b(addr-spec)f(Envelope)120 1077 y(rcvdfrom)381 b(domain)428
b(Envelope)120 1127 y(user)477 b(mailbox)404 b(Envelope)120
1176 y(via)501 b(word)476 b(Envelope)120 1226 y(with)h(word)f(Envelope)
120 1326 y(bcc)501 b(#address)380 b(Recipient)120 1376
y(cc)525 b(1#address)356 b(Recipient)120 1425 y(date)477
b(date-time)120 1475 y(encrypted)357 b(1#2word)120 1525
y(errors-to)g(1#address)f(Sender)120 1575 y(from)477
b(1#mailbox)356 b(Sender/Envelope)120 1625 y(in-reply-to)309
b(*\(phrase)22 b(|)i(msg-id\))120 1674 y(keywords)381
b(1#phrase)120 1724 y(message-id)333 b(msg-id)120 1774
y(received)381 b(received)120 1824 y(references)333 b(*\(phrase)22
b(|)i(msg-id\))120 1874 y(reply-to)381 b(1#address)356
b(Sender)120 1924 y(return-path)309 b(route-addr)332
b(Sender)120 1973 y(return-receipt-to)165 b(1#address)356
b(Sender)120 2023 y(sender)429 b(mailbox)404 b(Sender)120
2073 y(to)525 b(1#address)356 b(Recipient/Envelope)62
2216 y Fi(All)18 b(the)e(\014elds)h(men)o(tioned)g(ab)q(o)o(v)o(e)e
(are)h(parsed)g(b)o(y)g(the)g(Router.)23 b(Some)16 b(\(e.g.)21
b(`)p Fe(In-Reply-To:)p Fi('\))14 b(are)h(just)0 2278
y(parsed)h(and)g(not)f(in)o(terpreted.)22 b(Since)c(the)d(Router)h
(will)i(complain)f(ab)q(out)e(format)g(violations,)h(this)g(is)h(a)e(w)
o(a)o(y)0 2340 y(of)g(enligh)o(tening)i(p)q(eople)g(ab)q(out)e(what)f
(a)h(particular)h(\014eld)h(is)e(not)g(supp)q(osed)h(to)f(con)o(tain.)
62 2483 y(The)j(`)p Fe(Date:)p Fi(')e(and)h(`)p Fe(Received:)p
Fi(')e(\014elds)k(are)e(in)o(teresting)h(in)g(that)f(it)g(is)h(rather)f
(un)o(usual)h(for)f(an)g(RF)o(C822)0 2545 y(mailer)h(to)f(parse)g
(these)g(\014elds.)27 b(Indeed,)19 b(whether)e(or)g(not)g(they)g(are)g
(parsed)g(dep)q(ends)i(on)e(the)g(de\014nition)i(of)0
2608 y(compile-time)j(prepro)q(cessor)d(sym)o(b)q(ols)h(\()p
Fe(CANON_DATE)e Fi(and)h Fe(CANON_RECEIVED)f Fi(resp)q(ectiv)o(ely\).)
34 b(If)20 b(a)f(`)p Fe(date)p Fi(')0 2670 y(header)f(is)g(parsed)g
(successfully)l(,)i(it)e(will)i(b)q(e)e(prin)o(ted)h(using)f(prop)q(er)
g(RF)o(C822)f(date-time)h(syn)o(tax)f(when)h(the)p eop
%%Page: 24 25
24 24 bop 0 -58 a Fi(24)1380 b(ZMailer)16 b(Op)q(erations)g(Guide)0
183 y(message)j(is)h(deliv)o(ered.)35 b(F)l(or)18 b(this)i(to)f(b)q(e)h
(useful,)h(the)f(date)f(string)h(parse)f(in)h(the)g(Router)g(m)o(ust)e
(b)q(e)j(rather)0 246 y(\015exible)c(to)e(recognize)h(the)f(endless)i
(v)m(ariet)o(y)e(of)g(formats)f(that)g(exist,)h(and)h(it)f(is.)62
394 y(The)20 b(in)o(ten)o(tion)g(with)f(parsing)h(`)p
Fe(Received:)p Fi(')d(headers)i(is)h(to)f(prepare)g(for)f(the)i(p)q
(ossibilit)o(y)h(of)e(using)h(the)0 456 y(information)d(in)h(the)f
(trace)f(headers)h(to)f(aid)i(the)f(routing)f(algorithm.)25
b(F)l(or)16 b(no)o(w,)h(parsed)g(trace)f(headers)h(are)0
518 y(output)i(in)h(a)f(canonical)i(format)d(that)h(follo)o(ws)g(RF)o
(C822,)g(similar)h(to)f(what)g(happ)q(ens)h(with)g(parsed)f(`)p
Fe(date)p Fi(')0 581 y(headers.)h(As)15 b(long)g(as)f(the)h
(information)g(is)h(not)e(used,)h(there)g(is)g(no)g(common)g(reason)f
(to)g(enable)i(this)g(feature.)0 643 y([XX:)h(It)g(should)h(p)q(erhaps)
g(b)q(e)g(p)q(ossible)h(to)d(select)i(these)f(features)g(on)g(a)g(p)q
(er-message)h(basis.)26 b(an)o(y)17 b(though)o(ts)0 705
y(on)e(this?])62 854 y(Some)d(of)f(the)g(header)h(\014eld)h(names)e
(are)g(tagged)g(with)g(what)g(kind)i(of)e(addresses)g(that)g(header)h
(\014eld)g(con)o(tains.)0 916 y(This)j(information)f(is)h(used)g(when)g
(searc)o(hing)g(for)e(destination)i(addresses)g(when)g(there)f(are)g
(none)h(sp)q(eci\014ed)h(in)0 978 y(the)f(en)o(v)o(elop)q(e,)g(and)g
(to)f(kno)o(w)g(whic)o(h)i(headers)f(con)o(tain)f(addresses)h(that)f(m)
o(ust)g(b)q(e)i(sen)o(t)e(through)g(the)h(address)0 1040
y(manipulation)i(mec)o(hanisms)f(of)e(the)i(Router.)0
1368 y Fd(3.4)35 b(Router)23 b(Activiti)o(es)62 1516
y Fi(The)16 b(ZMailer)f(Router)h(has)f(three)g(basic)h(functions)g
(that)e(it)i(m)o(ust)e(carry)h(out)g(on)g(eac)o(h)g(message:)39
1664 y Ff(\017)30 b Fi(Determining)16 b(ho)o(w)f(to)f(deliv)o(er)j(a)e
(message)g(to)f(its)i(destinations)g(giv)o(en)f(in)h(the)g(message)e
(en)o(v)o(elop)q(e.)39 1750 y Ff(\017)30 b Fi(Rewriting)16
b(message)f(header)h(and)f(en)o(v)o(elop)q(e)i(addresses)e(to)g
(accommo)q(date)g(the)g(standards)g(imp)q(osed)h(b)o(y)90
1813 y(the)f(metho)q(d)h(of)e(deliv)o(ery)j(and)e(the)h(destination.)39
1899 y Ff(\017)30 b Fi(Ensuring)13 b(only)g(prop)q(erly)g(formatted)e
(and)i(standard-conforming)f(\(RF)o(C822\))e(messages)i(lea)o(v)o(e)g
(the)h(lo)q(cal)90 1961 y(system.)62 2110 y(F)l(or)d(ev)o(erything)h
(but)f(the)g(syn)o(tax)g(and)g(seman)o(tics)h(of)f(addresses,)h(the)f
(last)g(goal)g(is)h(ac)o(hiev)o(ed)g(b)o(y)f(mec)o(hanisms)0
2172 y(in)o(ternal)j(to)f(the)h(Router.)19 b(This)13
b(is)g(a)f(reasonable)h(approac)o(h)g(since)g(a)f(standard)h(is)g(not)f
(something)h(that)e(adapts)0 2234 y(to)h(lo)q(cal)i(conditions.)20
b(Ho)o(w)o(ev)o(er,)12 b(when)h(pursuing)g(the)g(\014rst)f(t)o(w)o(o)f
(goals,)i(man)o(y)f(sites)h(ha)o(v)o(e)f(found)h(it)g(in)o(v)m(aluable)
0 2296 y(to)k(b)q(e)h(able)g(to)e(mo)q(dify)i(the)f(b)q(eha)o(vior)h
(of)f(the)g(routing)h(function,)g(and)f(of)g(the)g(address)h(rewriting)
f(function,)0 2359 y(to)g(tak)o(e)f(lo)q(cal)i(idiosyncrasies)h(in)o
(to)e(accoun)o(t.)26 b(The)17 b(imp)q(ortance)h(of)f(this)g(abilit)o(y)
i(is)e(v)o(ery)g(apparen)o(t)g(to)g(sites)0 2421 y(in)g(complicated)g
(en)o(vironmen)o(ts.)23 b(Since)18 b(ZMailer)e(w)o(as)g(partially)h
(motiv)m(ated)f(b)o(y)g(the)h(inadequacies)h(of)d(other)0
2483 y(mailers)i(in)h(suc)o(h)f(an)g(en)o(vironmen)o(t,)f(m)o(uc)o(h)h
(e\013ort)f(has)g(gone)h(in)o(to)f(the)h(design)h(of)e(the)h
(con\014gurable)g(parts)f(of)0 2545 y(the)d(Router)g(b)q(eha)o(vior.)19
b(The)13 b(wired)h(logic)f(of)f(the)h(Router)g(is)g(treated)f(in)i(a)e
(later)h(subsection)h(\(See)f(section)g(3.11)0 2608 y([Router)e(Con)o
(trol)g(Flo)o(w],)f(page)h(39\).)18 b(Presen)o(tly)l(,)12
b(w)o(e)f(shall)i(examine)f(ho)o(w)e(routing)i(and)f(address)g
(manipulation)0 2670 y(is)16 b(carried)f(out,)g(and)g(the)h(Router)f
(facilities)i(whic)o(h)f(supp)q(ort)f(these)h(activities.)p
eop
%%Page: 25 26
25 25 bop 0 -58 a Fi(Router)1768 b(25)0 183 y Fd(3.5)35
b(Routing)23 b(Mo)r(del)62 328 y Fi(F)l(or)17 b(routing)g(purp)q(oses,)
h(one)f(w)o(an)o(ts)f(to)h(deriv)o(e)h(three)f(pieces)i(of)e
(information)g(from)g(an)g(address:)24 b(where)0 390
y(to)16 b(send)h(the)f(message,)g(ho)o(w)f(to)h(send)h(the)f(message,)g
(and)g(what)g(to)g(tell)h(the)g(immediate)g(destination)g(of)f(the)0
452 y(message)g(ab)q(out)g(it.)22 b(This)17 b(is)f(the)h(information)f
(needed)h(to)f(prop)q(erly)g(transmit)g(or)g(deliv)o(er)h(a)f(message)f
(to)h(its)0 515 y(next)f(destination.)62 659 y(The)d(mec)o(hanism)h
(used)f(to)g(transmit)f(a)g(message)h(ma)o(y)f(b)q(e)i(regarded)e(as)h
(a)f(conduit)i(\(pip)q(e,)h(c)o(hannel,)f(circuit,)0
722 y(etc.\))20 b(b)q(et)o(w)o(een)15 b(the)g(lo)q(cal)h(MT)l(A)f(and)g
(a)g(remote)g(MT)l(A.)f(In)i(ZMailer)f(terminology)l(,)h(suc)o(h)f(a)g
(conduit)h(is)f(called)0 784 y(a)h(Channel.)25 b(A)17
b(Channel)g(is)g(just)g(a)f(tag)f(asso)q(ciated)i(with)g(a)f
(destination)i(address)e(for)g(the)h(message,)f(and)g(is)0
846 y(used)h(b)o(y)f(the)h(Sc)o(heduler)h(to)e(manage)g(deliv)o(ery)i
(of)e(the)g(message.)24 b(Th)o(us,)16 b(a)g(Channel)i(is)f(a)f(concept)
h(\(i.e.)23 b(not)0 908 y(asso)q(ciated)12 b(with)g(an)o(y)f
(particular)h(program\),)f(and)h(ma)o(y)f(b)q(e)h(serviced)h(b)o(y)f
(one)f(or)g(more)h(T)l(ransp)q(ort)f(Agen)o(ts.)18 b(As)0
971 y(far)c(as)f(the)i(Sc)o(heduler)h(is)e(concerned,)h(it)g(is)g(an)f
(unin)o(terpreted)h(classi\014cation)h(of)e(the)g(message.)19
b(F)l(or)13 b(example,)0 1033 y(if)g(there)f(are)g(di\013eren)o(t)g(ph)
o(ysical)h(links)h(to)d(a)h(remote)g(MT)l(A,)f(di\013eren)o(t)i(T)l
(ransp)q(ort)e(Agen)o(t)h(programs)f(ma)o(y)g(serv)o(e)0
1095 y(the)k(same)g(Channel.)62 1240 y(The)22 b(Channel,)h(or)e(rather)
g(the)g(T)l(ransp)q(ort)g(Agen)o(ts)g(serving)g(a)g(Channel,)j(ma)o(y)d
(need)h(to)e(kno)o(w)h(whic)o(h)0 1302 y(remote)14 b(MT)l(A)g(to)f
(deliv)o(er)j(the)f(message)e(to.)19 b(This)c(is)g(most)e(often)h(a)g
(hostname)g(of)g(a)g(neigh)o(b)q(ouring)i(host)e(on)g(a)0
1364 y(common)e(net)o(w)o(ork.)18 b(If)13 b(the)g(Channel)g(can)g(only)
g(ha)o(v)o(e)g(one)f(destination)i(host)e(\(for)g(example)h(the)g(lo)q
(cal)h(deliv)o(ery)0 1427 y(Channel\),)j(a)g(destination)g(is)g(sup)q
(er\015uous.)25 b(By)17 b(con)o(v)o(en)o(tion,)f(the)h(Router)g(will)h
(translate)e(n)o(ull)i(destinations)0 1489 y(in)o(to)d(the)g(sym)o(b)q
(ol)h(`)p Fe(-)p Fi(')e(in)i(a)f(message)g(con)o(trol)g(\014le.)62
1634 y(The)g(remote)e(MT)l(A)h(will)i(need)f(to)f(kno)o(w)f(what)h(to)f
(do)h(with)h(the)f(message,)g(in)h(the)f(form)f(of)h(some)g(en)o(v)o
(elop)q(e)0 1696 y(information.)38 b(In)22 b(RF)o(C822,)f(this)h
(information)f(is)h(em)o(b)q(o)q(died)h(in)f(an)f(address)g(for)g
(further)g(deliv)o(ery)i(with)0 1758 y(resp)q(ect)16
b(to)e(the)i(remote)e(host.)62 1903 y(The)k(Router)f(m)o(ust)g
(determine)h(this)g(triple)g(\()p Fb(c)o(hannel)p Fi(,)h
Fb(next-host)p Fi(,)e Fb(next-address)p Fi(\))g(for)g(ev)o(ery)g
(address)g(in)0 1965 y(the)h(en)o(v)o(elop)q(e,)h(including)h(the)e
(\(single\))g(origin)h(address)f(to)f(b)q(e)h(able)g(to)f(v)o(erify)h
(origin.)28 b(If)18 b(not)g(for)f(securit)o(y)l(,)0 2027
y(then)h(to)f(mak)o(e)g(sure)h(that)e(a)i(prop)q(er)g(RF)o(C822)e
(address)i(w)o(as)e(sp)q(eci\014ed)k(for)d(the)h(sender,)g(and)g(that)f
(a)g(b)q(ogus)0 2089 y(address)e(form)g(is)g(not)g(passed)h(on.)k(T)l
(o)15 b(do)g(this,)g(the)g(Router)h(will)h(call)f(a)f(function)h(that)e
(tak)o(es)h(an)g(address)g(as)0 2152 y(its)f(argumen)o(t)f(and)i
(returns)e(a)h(triple.)21 b(This)14 b(function)h(ma)o(y)e(b)q(e)i
(completely)g(sp)q(eci\014ed)h(in)f(a)f(con\014guration)g(\014le)0
2214 y(read)h(b)o(y)g(the)h(Router,)e(and)i(its)f(task)g(is)g(termed)h
(address)f(resolution)h(or)e(routing.)62 2359 y(While)k(the)e
Fe(router)f Fi(function)i(rewrites)f(en)o(v)o(elop)q(e)h(address)f(as)f
(appropriate,)h(there)g(m)o(ust)g(also)g(b)q(e)g(a)g(w)o(a)o(y)0
2421 y(to)e(rewrite)h(message)g(header)g(addresses.)20
b(In)c(Sendmail,)g(this)f(w)o(as)f(done)i(based)f(en)o(tirely)h(on)f
(whic)o(h)h(\\mailer")0 2483 y(\(similar)g(to)f(a)g(ZMailer)g
(Channel\))h(the)g(message)e(w)o(as)h(sen)o(t)g(through.)k(T)l(o)c(do)g
(more)g(sophisticated)h(rewriting)0 2545 y(w)o(as)i(not)f(p)q(ossible)k
(due)e(to)e(a)h(complete)h(lac)o(k)g(of)f(other)g(information.)29
b(If)19 b(one)f(wished)i(to)d(do)i(di\013eren)o(t)f(ma-)0
2608 y(nipulations)g(dep)q(ending)g(on)d(the)h(\014nal)h(destination)g
(of)e(a)g(message)h(for)f(example,)h(it)g(w)o(as)f(almost)h(imp)q
(ossible)0 2670 y(to)h(do)g(so)f(\(no)h(v)m(ariables)i(or)d(con)o(trol)
h(\015o)o(w)g(in)h(Sendmail)h(rulesets\).)26 b(It)17
b(w)o(as)g(also)g(imp)q(ossible)i(to)e(do)g(address)p
eop
%%Page: 26 27
26 26 bop 0 -58 a Fi(26)1380 b(ZMailer)16 b(Op)q(erations)g(Guide)0
183 y(manipulation)k(or)e(v)m(alidit)o(y)i(c)o(hec)o(king)g(based)f(on)
f(the)h(origin)g(of)f(the)h(message,)g(since)g(no)g(suc)o(h)g
(information)0 246 y(w)o(as)14 b(a)o(v)m(ailable.)62
385 y(The)j(ZMailer)g(Router)f(remedies)i(these)e(and)h(other)f
(shortcomings)g(in)h(sev)o(eral)g(w)o(a)o(ys:)k(the)c(con\014guration)0
447 y(language)e(has)h(con)o(trol)e(\015o)o(w)h(and)h(v)m(ariables,)g
(and)f(the)h(decision)h(of)d(ho)o(w)h(to)g(rewrite)g(eac)o(h)g(address)
h(is)f(carried)0 510 y(out)f(with)g(access)g(to)g(all)h(the)f(needed)h
(sender)g(and)f(recipien)o(t)h(information.)20 b(The)14
b(w)o(ord)g(\\decision")h(is)f(used)h(on)0 572 y(purp)q(ose)f(to)f
(indicate)i(that)d(the)i(c)o(hoice)g(of)f(rewriting)h(metho)q(d)f(is)h
(div)o(orced)g(from)f(the)g(actual)h(message)f(header)0
634 y(address)19 b(rewriting)h(pro)q(cess.)32 b(What)18
b(happ)q(ens)j(is)e(that)g(for)f(eac)o(h)h(recipien)o(t,)j(the)d
(Router)g(calls)h(a)f(function)0 696 y(passing)g(the)g(triples)h(deriv)
o(ed)g(from)e(the)h(sender)h(and)f(the)g(recipien)o(t)h(address)f(as)g
(argumen)o(ts.)30 b(The)19 b(return)0 759 y(v)m(alue)e(from)f(this)g
Fe(crossbar)f Fi(function)i(\(so)e(named)h(b)q(ecause)h(a)f(crossbar)f
(switc)o(h)i(is)f(the)g(closest)h(image,)f(that)0 821
y(came)e(to)g(mind,)h(of)f(what)g(it)h(do)q(es\))f(includes)j(the)d
(name)h(of)f(a)g(function)h(that)f(is)g(to)g(b)q(e)h(used)g(for)f
(rewriting)h(the)0 883 y(message)d(header)h(addresses.)20
b(This)13 b(returned)g(function)g(is)h(then)f(called)h(separately)f
(with)g(all)g(the)g(addresses)g(in)0 945 y(the)i(message)f(header,)h
(and)f(the)h(results)g(will)i(b)q(e)e(incorp)q(orated)g(in)g(the)g
(message)f(header)h(for)f(the)h(destination)0 1008 y(corresp)q(onding)k
(to)f(the)g(recipien)o(t)i(triple.)30 b(A)o(t)18 b(the)g(same)g(time,)h
(while)h(the)e(routing)g(function)h(do)q(es)g(generic)0
1070 y(resolution)c(of)f(an)h(address)g(in)o(to)f(its)h(corresp)q
(onding)g(triple,)h(the)e(crossbar)g(function)i(ma)o(y)e(mo)q(dify)h
(the)f(sender)0 1132 y(and)19 b(recipien)o(t)h(triples)f(if)g
(necessary)l(,)h(and)f(so)f(serv)o(es)g(as)g(a)h(clean)o(up)g(or)f
(\014ltering)i(function)f(for)f(the)h(routing)0 1195
y(information.)h(The)15 b(crossbar)g(function)h(can)f(also)h(b)q(e)f
(completely)i(sp)q(eci\014ed)g(in)f(a)f(con\014guration)h(\014le)g
(read)f(b)o(y)0 1257 y(the)g(Router.)62 1396 y(The)c(names)g
(\(determined)h(at)f(compile-time\))h(and)f(in)o(terface)g(sp)q
(eci\014cations)i(for)e(the)g(routing)g(and)g(crossbar)0
1459 y(functions,)22 b(are)f(the)f(only)h(crucial)h(\\magical")f
(things)g(one)f(needs)i(to)e(con)o(tend)h(with)f(in)i(a)e(prop)q(er)h
(Router)0 1521 y(con\014guration.)k(The)17 b(syn)o(tax)f(and)h(seman)o
(tics)g(of)f(the)h(con\014guration)g(\014le's)g(con)o(ten)o(ts)f(are)h
(dealt)g(with)g(in)h(the)0 1583 y(follo)o(wing)c(subsection.)21
b(The)13 b(details)i(of)e(the)h(t)o(w)o(o)e(functions)i(in)o(tro)q
(duced)h(here)f(are)f(sp)q(eci\014ed)j(after)d(that,)g(once)0
1645 y(the)i(necessary)h(bac)o(kground)f(information)g(has)g(b)q(een)h
(giv)o(en.)0 1893 y Fd(3.6)35 b(Con\014guration)24 b(File)d
(Programming)i(Language)62 2032 y Fi(Whenev)o(er)d(the)g(Router)g(pro)q
(cess)f(starts)g(up,)i(its)e(\014rst)h(action)f(is)h(to)f(read)h(its)g
(con\014guration)g(\014le.)34 b(The)0 2095 y(con\014guration)17
b(\014le)g(is)g(a)g(text)f(\014le)h(whic)o(h)h(con)o(tains)e(statemen)o
(ts)g(in)o(terpreted)h(immediately)h(when)f(the)g(\014le)g(is)0
2157 y(read.)j(Some)14 b(statemen)o(ts)f(are)h(functions,)h(in)g(whic)o
(h)g(case)f(the)h(function)g(is)g(de\014ned)g(at)f(that)g(p)q(oin)o(t)g
(in)h(reading)0 2219 y(the)f(con\014guration)g(\014le.)20
b(The)14 b(purp)q(ose)g(of)g(the)g(con\014guration)g(\014le)g(is)h(to)e
(pro)o(vide)h(a)f(simple)j(w)o(a)o(y)c(to)h(customize)0
2281 y(the)19 b(b)q(eha)o(vior)f(of)g(the)h(mailer,)h(and)e(this)h(is)g
(primarily)h(ac)o(hiev)o(ed)f(b)o(y)f(de\014ning)i(the)f
Fe(router)e Fi(and)i Fe(crossbar)0 2344 y Fi(functions.)i(F)l(or)14
b(these)h(to)f(w)o(ork)g(prop)q(erly)l(,)i(some)f(initialization)i(co)q
(de)f(and)f(auxiliary)h(functions)g(will)h(usually)0
2406 y(b)q(e)f(needed.)62 2545 y(A)o(t)11 b(\014rst)h(sigh)o(t,)g(a)f
(con\014guration)h(\014le)h(lo)q(oks)f(lik)o(e)g(a)g(Bourne)g(shell)h
(script.)19 b(Indeed,)14 b(the)e(ideal)h(is)f(to)f(duplicate)0
2608 y(the)20 b(functionalit)o(y)l(,)i(syn)o(tax,)f(and)f(to)f(a)h
(large)g(degree)g(the)g(seman)o(tics,)h(of)f(a)g(shell)h(script.)35
b(Therefore,)21 b(the)0 2670 y(con\014guration)15 b(\014le)h
(programming)e(language)h(is)h(de\014ned)g(in)f(terms)g(of)f(its)h
(deviation)h(from)e(standard)h(Bourne)p eop
%%Page: 27 28
27 27 bop 0 -58 a Fi(Router)1768 b(27)0 183 y(shell)17
b(syn)o(tax)d(and)i(seman)o(tics.)k(The)15 b(presen)o(t)g
(di\013erences)i(are:)39 320 y Ff(\017)30 b Fi(No)15
b Fe(for)p Fi(,)f Fe(while)p Fi(,)g(and)i Fe(repeat)e
Fi(statemen)o(ts,)g(no)h(pip)q(es,)h(or)f(I/O)h(redirection.)39
395 y Ff(\017)30 b Fi(Case)15 b(statemen)o(t)f(lab)q(els)j(ha)o(v)o(e)e
(no)g(follo)o(wing)h(`)p Fe(\))p Fi(',)d(i.e.)21 b(use)210
461 y Fe(case)i(foo)h(in)210 510 y(pattern)214 b(action)23
b(;;)210 560 y(esac)90 635 y Fi(instead)16 b(of)210 692
y Fe(case)23 b(foo)h(in)210 741 y(pattern\))190 b(action)23
b(;;)210 791 y(esac)39 866 y Ff(\017)30 b Fi(Case)15
b(lab)q(el)i(patterns)d(use)i(V8)f(\(Eigh)o(th)g(Edition)h(UNIX\))g
(regular)f(expression)h(syn)o(tax)e(\()p Fe(egrep)p Fi(-lik)o(e\).)39
941 y Ff(\017)30 b Fi(F)l(unctions)17 b(are)f(allo)o(w)o(ed,)h
(parameter)f(lists)h(are)g(allo)o(w)o(ed.)24 b(If)17
b(not)f(enough)h(argumen)o(ts)e(are)h(presen)o(t)h(in)g(a)90
1003 y(function)e(call)h(to)e(exhaust)g(the)h(parameter)e(list,)i(the)g
(so-far)f(un)o(b)q(ound)h(parameter)f(v)m(ariables)i(are)e(b)q(ound)90
1065 y(to)i(`')f(\(the)h(empt)o(y)g(string\))g(as)g(lo)q(cal)h(v)m
(ariables.)25 b(F)l(or)15 b(example,)i(this)g(is)g(the)f(iden)o(tit)o
(y)h(address)f(rewriting)90 1127 y(function:)210 1188
y Fe(null)23 b(\(address\))g({)401 1238 y(return)g($address)214
b(#)23 b(surprise!)210 1288 y(})39 1362 y Ff(\017)30
b Fi(Multiple-v)m(alue)16 b(returns)d(are)g(allo)o(w)o(ed.)20
b(The)13 b Fe(return)f Fi(statemen)o(t)g(can)h(b)q(e)h(used)g(to)e
(return)h(a)g(non-`')g(v)m(alue)90 1424 y(from)h(a)h(function.)21
b(The)15 b(follo)o(wing)h(are)f(all)h(legal)g Fe(return)f
Fi(statemen)o(ts:)210 1488 y Fe(return)210 1537 y(return)23
b($address)210 1587 y(return)g($channel)g(${next_host})f
(${next_address})39 1662 y Ff(\017)30 b Fi(V)l(ariables)12
b(are)f(dynamically)h(scop)q(ed,)g(the)f(only)h(lo)q(cal)g(v)m
(ariables)g(are)e(the)h(ones)g(in)h(a)e(function's)i(parameter)90
1724 y(list.)24 b(Only)18 b(the)e(\014rst)g(v)m(alue)i(of)e(a)g(m)o
(ultiple-v)m(alue)k(return)c(ma)o(y)f(b)q(e)j(assigned)f(to)e(a)h(v)m
(ariable.)25 b(All)18 b(v)m(alues)90 1786 y(are)d(strings,)g(so)f(no)i
(t)o(yp)q(e)f(information,)g(c)o(hec)o(king,)g(or)g(declaration,)h(is)f
(necessary)l(.)39 1861 y Ff(\017)30 b Fi(Quoting)19 b(is)f(a)g(bit)g
(stilted.)29 b(All)20 b(quotes)d(\(double-,)j(single-,)f(bac)o(k-\),)f
(m)o(ust)g(app)q(ear)g(in)h(matc)o(hing)f(pairs)90 1923
y(at)e(the)h(b)q(eginning)h(and)f(end)g(of)f(a)h Fb(w)o(ord)p
Fi(.)23 b(Single)18 b(quotes)f(are)f(not)g(stripp)q(ed,)i(double)g
(quotes)e(cause)h(the)90 1985 y(enclosed)g(c)o(haracter)e(sequence)h
(to)f(b)q(e)h(collected)h(in)o(to)f(a)f(quoted-string)g(RF)o(C822)g
(tok)o(en.)20 b(F)l(or)14 b(example,)90 2048 y(the)h(statemen)o(t:)210
2122 y Fe(foo)23 b(`bar)h("`baz`"`)90 2197 y Fi(is)16
b(ev)m(aluated)g(as)f Fe(\(apply)23 b('foo)g(\(apply)g('bar)h
(\(baz\)\)\))p Fi(.)39 2272 y Ff(\017)30 b Fi(The)20
b(forms)f Fe(${variable:=value})p Fi(,)f Fe(${variable:-value})p
Fi(,)g(and)i Fe(${variable:+value})d Fi(are)i(sup-)90
2334 y(p)q(orted.)26 b(The)17 b(sp)q(ecial)i(form)d Fe
(${string:relation})f Fi(returns)i(the)g(v)m(alue)i(of)d
Fe(relation\(string\))p Fi(,)f(im-)90 2396 y(plemen)o(ting)i(a)d
(database)h(lo)q(okup)h(function.)39 2471 y Ff(\017)30
b Fi(P)o(atterns)14 b(\(in)i(case)f(lab)q(els\))h(are)f(ev)m(aluated)i
(once,)e(the)g(\014rst)g(time)g(they)h(are)f(encoun)o(tered.)39
2545 y Ff(\017)30 b Fi(A)o(t)14 b(the)g(end)h(of)f(a)g(case)g(lab)q
(el,)i(the)f(sequen)o(tially)h(next)e(case)g(lab)q(els)i(of)e(the)h
(same)f(case)g(statemen)o(t)f(will)j(b)q(e)90 2608 y(tried)h(for)f
(successful)h(pattern)f(matc)o(hing)h(\(and)f(the)g(corresp)q(onding)h
(case)g(lab)q(el)h(b)q(o)q(dy)f(executed\).)24 b(The)90
2670 y(only)16 b(exceptions)g(\(apart)e(from)g(encoun)o(tering)i(a)f
(return)h(statemen)o(t\))d(are:)p eop
%%Page: 28 29
28 28 bop 0 -58 a Fi(28)1380 b(ZMailer)16 b(Op)q(erations)g(Guide)90
183 y Fe(again)120 b Fi(a)15 b(function)h(whic)o(h)g(retries)f(the)h
(curren)o(t)f(case)g(lab)q(el)i(for)d(a)h(matc)o(h.)90
277 y Fe(break)120 b Fi(con)o(tin)o(ues)16 b(execution)g(after)e(the)i
(curren)o(t)f(case)g(statemen)o(t.)39 371 y Ff(\017)30
b Fi(V)l(arious)16 b(standard)e(Bourne)i(shell)h(functions)f(do)f(not)g
(exist)g(built)i(in.)62 527 y(There)f(are)g(curren)o(tly)g(only)g(t)o
(w)o(o)f(en)o(try-p)q(oin)o(ts)h(\(i.e.)21 b(magic)16
b(names)g(kno)o(wn)f(to)h(the)f(Router)h(co)q(de\))g(in)h(the)0
590 y(con\014guration)e(\014le,)h(namely)g(the)f Fe(router)g
Fi(and)g(the)g Fe(crossbar)f Fi(functions.)62 746 y(The)19
b Fe(router)e Fi(function)i(is)g(called)h(with)e(an)g(address)g(as)g
(argumen)o(t,)g(and)g(returns)g(a)g(triple)i(of)d(\()p
Fb(c)o(hannel)p Fi(,)0 808 y Fb(host)p Fi(,)e Fb(user)p
Fi(\))h(as)g(three)g(separate)g(v)m(alues,)h(corresp)q(onding)g(to)e
(the)i(c)o(hannel)g(the)f(message)g(should)h(b)q(e)g(sen)o(t)e(out)0
870 y(on)i(\(or,)g(the)g(router)g(function)h(can)f(also)h(b)q(e)g
(called)g(to)f(c)o(hec)o(k)h(on)f(who)g(sen)o(t)g(a)g(message\),)f(the)
i(host)f(or)f(no)q(de)0 933 y(name)f(for)g(that)g(c)o(hannel)i(\(n)o
(ull)f(if)g(lo)q(cal)h(deliv)o(ery\),)f(and)g(the)f(address)h(the)f
(receiving)i(agen)o(t)e(should)h(transmit)0 995 y(to.)62
1151 y(The)i Fe(crossbar)f Fi(function)i(is)g(in)f(c)o(harge)g(of)g
(rewriting)g(en)o(v)o(elop)q(e)h(addresses,)g(selecting)g(message)f
(header)0 1213 y(address)h(m)o(unging)g(t)o(yp)q(e)g(\(a)f(function)i
(to)e(b)q(e)i(called)g(with)g(eac)o(h)f(message)f(header)h(address\),)g
(and)g(p)q(ossibly)0 1276 y(doing)d(p)q(er-message)g(logging)h(or)e
(enforcing)h(restrictions)h(deemed)f(necessary)l(.)23
b(It)15 b(tak)o(es)g(a)h(sender-triple)i(and)0 1338 y(a)i(receiv)o
(er-triple)i(as)d(argumen)o(ts)g(\(six)h(parameters)g(all)g
(together\).)33 b(It)20 b(returns)g(the)g(new)g(v)m(alues)i(for)d(eac)o
(h)0 1400 y(elemen)o(t)g(of)f(the)g(t)o(w)o(o)f(triples,)j(and)e(in)i
(addition)f(a)f(function)h(name)f(corresp)q(onding)i(to)d(the)i
(function)g(to)e(b)q(e)0 1463 y(used)i(to)e(rewrite)h(header)h
(addresses)f(for)g(the)g(sp)q(eci\014c)i(destination.)29
b(If)19 b(the)f(destination)h(is)g(to)e(b)q(e)i(ignored,)0
1525 y(returning)d(a)f(n)o(ull)h(function)g(name)g(will)g(accomplish)h
(this.)62 1681 y(There)f(is)h(one)f(more)f(magic)h(sym)o(b)q(ol)g(the)g
(Router)g(kno)o(ws)f(ab)q(out,)h(whic)o(h)g(is)h(\(optionally\))f
(de\014ned)h(b)o(y)f(the)0 1743 y(con\014guration)e(\014le.)20
b(That)14 b(is)g(the)g(name)g(of)f(the)h(de\014nition)i(of)d(the)h
(alias)h(database,)e(a)g(proto)q(col)h(whic)o(h)h(will)g(b)q(e)0
1806 y(dealt)h(with)f(in)h(the)f(subsection)i(explaining)g(the)e
(database)g(lo)q(okup)h(mec)o(hanism)g(hin)o(ted)g(at)f(ab)q(o)o(v)o
(e.)62 1962 y(The)23 b(Router)g(has)f(sev)o(eral)g(built)i(in)g(\(C)e
(co)q(ded\))h(functions.)42 b(Their)23 b(calling)h(sequence)g(and)f(in)
o(terface)0 2024 y(sp)q(eci\014cation)15 b(is)f(exactly)f(the)g(same)g
(as)g(for)g(the)g(functions)h(de\014ned)g(in)g(the)f(con\014guration)h
(\014le.)20 b(Some)13 b(of)g(these)0 2086 y(functions)j(ha)o(v)o(e)f
(sp)q(ecial)i(seman)o(tics,)e(and)g(they)g(fall)h(in)o(to)g(three)f
(classes,)g(as)g(follo)o(ws:)62 2243 y(F)l(unctions)h(that)f(are)g
(critical)h(to)f(the)g(prop)q(er)h(functioning)g(of)f(the)g
(con\014guration)h(\014le)g(in)o(terpreter:)0 2364 y
Fe(return)96 b Fi(returns)15 b(its)g(argumen)o(t\(s\))f(as)h(the)g(v)m
(alue)i(of)d(a)h(function)h(call)0 2439 y Fe(again)120
b Fi(rep)q(eats)15 b(the)g(curren)o(t)h(case)f(lab)q(el)0
2514 y Fe(break)120 b Fi(exits)16 b(a)e(case)i(statemen)o(t)62
2670 y(F)l(unctions)g(that)f(are)g(necessary)g(to)g(complete)g(the)h
(capabilities)h(of)e(the)g(in)o(terpreter:)p eop
%%Page: 29 30
29 29 bop 0 -58 a Fi(Router)1768 b(29)0 106 y Fe(import)96
b Fi(de\014nes)16 b(a)f(function)h(name)f(that)g(refers)g(to)f(an)i
(external)f(program)0 181 y Fe(relation)48 b Fi(de\014nes)16
b(a)f(database)g(to)f(the)i(database)e(lo)q(okup)i(mec)o(hanism)0
256 y Fe(sh)192 b Fi(an)15 b(in)o(ternal)h(function)g(whic)o(h)g(runs)g
(its)f(argumen)o(ts)f(as)h(`)p Fe(/bin/sh)p Fi(')f(w)o(ould)62
393 y(Non-critical)j(but)e(recommended)h(functions:)0
503 y Fe(getzenv)72 b Fi(retriev)o(es)15 b(global)h(ZMailer)g
(con\014guration)f(v)m(alues)0 578 y Fe(echo)144 b Fi(em)o(ulates)15
b(`)p Fe(/bin/echo)p Fi(')0 653 y Fe(exit)144 b Fi(ab)q(orts)15
b(the)g(Router)g(with)h(the)f(sp)q(eci\014ed)i(status)e(co)q(de)0
727 y Fe(hostname)48 b Fi(in)o(ternal)16 b(function)g(to)f(get)f(and)i
(set)f(the)g(system)g(name)0 802 y Fe(trace)120 b Fi(turns)15
b(on)g(selected)i(debugging)f(output)0 877 y Fe(untrace)72
b Fi(turns)15 b(o\013)f(selected)j(debugging)f(output)0
951 y Fe([)216 b Fi(em)o(ulates)15 b(a)g(subset)h(of)e(`)p
Fe(/bin/test)p Fi(')g(\(a.k.a.)k(`)p Fe(/bin/[)p Fi('\))13
b(functionalit)o(y)62 1088 y(The)22 b Fe(relation)e Fi(function)i(is)g
(describ)q(ed)i(in)e(a)f(later)h(section)g(\(See)f(section)h(3.8)f
([Database)f(In)o(terface],)0 1151 y(page)d(31\),)f(and)h(the)g
Fe(trace)f Fi(and)h Fe(untrace)f Fi(functions)i(are)e(describ)q(ed)j
(in)f(connection)g(with)f(debugging)h(\(See)0 1213 y(section)e(3.12)e
([Logging],)g(page)h(43\).)62 1350 y(The)j Fe(hostname)e
Fi(function)i(requires)g(some)f(further)g(explanation.)27
b(It)18 b(is)g(in)o(tended)g(to)f(em)o(ulate)g(the)h(BSD)0
1412 y(UNIX)f(`)p Fe(/bin/hostname)p Fi(')d(functionalit)o(y)l(,)k
(except)e(that)g(setting)g(the)h(hostname)f(will)i(only)f(set)f(the)g
(Router's)0 1475 y(idea)22 b(of)g(the)g(hostname,)g(not)f(the)h
(system's.)39 b(Doing)21 b(so)h(will)h(enable)g(generation)f(of)f(`)p
Fe(Message-Id)p Fi(')f(and)0 1537 y(`)p Fe(Received)p
Fi(')13 b(\\trace")h(headers)h(on)f(all)i(messages)e(pro)q(cessed)i(b)o
(y)e(the)h(Router.)20 b(It)15 b(is)g(done)g(this)g(w)o(a)o(y)l(,)f
(since)i(the)0 1599 y(Router)d(needs)h(to)f(kno)o(w)f(the)i(o\016cial)g
(domain)f(name)g(of)g(the)g(lo)q(cal)i(host)d(in)i(order)f(to)g(prop)q
(erly)h(generate)f(these)0 1661 y(headers,)k(and)g(this)g(metho)q(d)g
(is)g(cleaner)g(than)g(reserving)g(a)f(magic)h(v)m(ariable)h(for)e(the)
g(purp)q(ose.)25 b(The)17 b(Router)0 1724 y(cannot)f(assume)h(the)g
(hostname)f(rep)q(orted)h(b)o(y)f(the)h(system)f(is)h(a)g(prop)q(erly)g
(quali\014ed)i(domain)e(name,)g(so)f(the)0 1786 y(con\014guration)g
(\014le)h(ma)o(y)f(generate)f(it)i(using)f(whic)o(hev)o(er)h(metho)q(d)
f(it)h(c)o(ho)q(oses.)22 b(If)16 b(the)g(hostname)g(indeed)i(is)e(a)0
1848 y(fully)h(quali\014ed)g(domain)e(name,)g(then:)120
1985 y Fe(hostname)23 b(`hostname`)0 2122 y Fi(will)17
b(enable)f(generation)g(of)e(trace)h(headers.)62 2259
y(Finally)l(,)h(note)e(that)g(a)g(sym)o(b)q(ol)g(can)h(ha)o(v)o(e)f(b)q
(oth)g(a)g(function-v)m(alue)j(and)d(a)g(string-v)m(alue.)21
b(The)14 b(string)h(v)m(alue)0 2321 y(is)h(of)e(course)i(accessed)g
(using)f(the)h($-pre\014x)f(con)o(v)o(en)o(tion)h(of)e(the)i(Bourne)f
(shell)i(language.)0 2533 y Fd(3.7)35 b(Address)24 b(Manipulation)62
2670 y Fi(Most)14 b(of)f(the)i(\015exibilit)o(y)i(of)d(Sendmail)i
(deriv)o(es)f(from)f(its)g(pro)q(duction-rule)i(mo)q(del)g(for)d
(address)i(rewriting.)p eop
%%Page: 30 31
30 30 bop 0 -58 a Fi(30)1380 b(ZMailer)16 b(Op)q(erations)g(Guide)0
183 y(V)l(ery)c(lo)q(osely)l(,)i(the)e(concepts)h(of)f(rulesets)h(in)g
(Sendmail)h(corresp)q(ond)e(to)g(the)g(functions)h(of)f(the)g(ZMailer)h
(Router)0 246 y(con\014guration)20 b(\014le)h(programming)f(language,)h
(and)f(the)g(rules)h(themselv)o(es)f(corresp)q(ond)h(to)e(the)h(case)g
(lab)q(el)0 308 y(b)q(o)q(dies)d(of)d(the)i(case)f(statemen)o(ts)f(in)i
(our)f(language.)62 469 y(Addresses)h(are)e(represen)o(ted)i(as)e
(string)h(v)m(alues)h(in)f(this)h(language,)f(no)f(di\013eren)o(t)h
(from)f(an)o(y)h(other)f(strings.)0 531 y(Therefore,)20
b(addresses)g(can)g(b)q(e)h(assigned)f(as)g(the)g(v)m(alue)h(of)e(a)h
(v)m(ariable,)i(or)d(passed)h(as)f(an)h(argumen)o(t)f(to)g(a)0
593 y(function.)h(The)13 b(w)o(a)o(y)f(to)g(do)h(address)g(rewriting)g
(is)g(to)f(mo)q(dify)i(the)f(v)m(alue)h(of)e(a)g(v)m(ariable)j(c)o
(hosen)e(to)f(con)o(tain)h(the)0 656 y Fb(curren)o(t)k
Fi(address)g(\(in)h(the)f(sense)g(of)g(the)g(Sendmail)i(rewriting)e
(pro)q(cess\).)26 b(In)17 b(k)o(eeping)h(with)g(the)f(pro)q(duction)0
718 y(rule)c(mo)q(del,)g(m)o(uc)o(h)f(of)g(the)g(address)h(rewriting)f
(is)h(t)o(ypically)g(done)g(within)g(case)g(statemen)o(ts,)e(whose)h
(seman)o(tics)0 780 y(ha)o(v)o(e)j(b)q(een)h(tailored)g(for)e(this)i
(activit)o(y)l(.)62 941 y(A)g Fe(case)f Fi(statemen)o(t)f(in)i(the)g
(con\014guration)g(\014le)g(language)g(has)f(almost)g(the)h(same)f(syn)
o(tax)g(as)g(the)h(Bourne)0 1004 y(shell)k(case)e(statemen)o(t.)27
b(Ho)o(w)o(ev)o(er,)17 b(its)i(seman)o(tics)f(are)f(di\013eren)o(t,)i
(in)g(that)e(it)h(is)h(similar)g(to)f(the)g(philosoph)o(y)0
1066 y(of)e(\(Sendmail\))h(rulesets.)22 b(That)16 b(is,)g(the)g(normal)
g(action)g(is)h(for)e(an)h(address)g(to)f(\\en)o(ter")h(at)f(the)h
(top,)f(and)i(for)0 1128 y(eac)o(h)h(case)h(lab)q(el)h(\(rule\))e(that)
g(matc)o(hes,)g(the)g(case)h(lab)q(el)h(b)q(o)q(dy)f(\(action\))e(is)i
(executed.)30 b(This)19 b(is)g(carried)g(on)0 1190 y(sequen)o(tially)c
(for)d(eac)o(h)h(case)g(lab)q(el)i(\(rule-action)e(pair\))g(in)h(the)f
(case)g(statemen)o(t)f(\(rule)h(set\),)g(unless)h(the)f(normal)0
1253 y(con)o(tin)o(uation)j(action)f(is)h(mo)q(di\014ed)g(b)o(y)f(a)g
(con)o(trol)g(statemen)o(t.)62 1414 y(As)21 b(opp)q(osed)h(to)f
(Sendmail,)j(where)d(a)g(rule)h(is)g(retested)f(un)o(til)h(it)g(fails,)
h(a)e(case)g(lab)q(el)i(pattern)e(is)g(only)0 1476 y(retested)16
b(if)h(the)f(case)g(lab)q(el)i(b)q(o)q(dy)f(calls)g(the)g(sp)q(ecial)h
(function)f Fe(again)p Fi(.)22 b(This)17 b(c)o(hange)f(w)o(as)f(made)i
(b)q(ecause)g(it)0 1538 y(is)e(frequen)o(tly)g(a)f(w)o(aste)f(of)h
(time)h(to)e(retest)h(a)g(pattern)g(matc)o(h)g(when)h(one)f(has)g(just)
g(mo)q(di\014ed)i(the)e(string)h(to)e(b)q(e)0 1601 y(matc)o(hed)j
(against.)22 b(Sendmail)c(do)q(es)e(pro)o(vide)h(a)e(w)o(a)o(y)g(to)h
(con)o(tin)o(ue)g(to)g(the)g(next)g(rule-action)h(pair,)g(but)f(since)0
1663 y(it)i(is)g(not)f(the)h(default)g(b)q(eha)o(vior,)g(it)g(is)g
(often)f(not)g(used)h(in)h(man)o(y)e(of)g(the)g(places)i(it)f(should)g
(b)q(e)g(used.)28 b(As)17 b(a)0 1725 y(w)o(a)o(y)d(of)h(reducing)h(the)
g(consequen)o(t)f(w)o(aste)g(of)f(time,)h(the)h(default)g(b)q(eha)o
(vior)f(has)g(b)q(een)i(c)o(hanged.)62 1886 y(The)d(other)g(sp)q(ecial)
h(function)g(that)e(is)h(sp)q(eci\014c)i(to)d(case)h(statemen)o(ts,)e
(is)i Fe(break)p Fi(.)19 b(It)14 b(is)g(used)g(with)g(the)g(same)0
1948 y(seman)o(tics)19 b(as)f(if)i(within)g(a)e(C)h(language)g(lo)q
(oping)h(construct)f(or)f(switc)o(h)h(statemen)o(t,)f(i.e.)31
b(to)19 b(exit)g(the)g(case)0 2011 y(statemen)o(t)13
b(and)h(con)o(tin)o(ue)g(with)g(the)g(statemen)o(t)f(after)g(it.)20
b(Of)14 b(course,)g(a)f Fe(return)g Fi(statemen)o(t)g(will)j
(completely)0 2073 y(return)f(from)g(its)g(enclosing)i(function)f(at)e
(an)o(y)h(time.)62 2234 y(Case)d(conditions)i(usually)f(are)f(not)g
(just)g(a)g(simple)i(constan)o(t)d(string;)i(they)g(will)h(usually)f
(con)o(tain)g(a)f(v)m(ariable)0 2296 y(expansion)19 b(and)f(p)q(erhaps)
h(a)f(function)h(call.)29 b(The)19 b(v)m(alue)g(of)f(suc)o(h)g(a)g
(condition)h(c)o(hanges)f(as)g(the)g(v)m(ariable\(s\))0
2359 y(it)k(dep)q(ends)i(on)e(c)o(hanges.)41 b(When)23
b(doing)g(rep)q(eated)g(case)f(lab)q(el)i(pattern)d(matc)o(hing)i(with)
f(the)h(condition)0 2421 y(string)16 b(v)m(alue,)i(it)e(w)o(ould)h(b)q
(e)g(rather)f(unsa)o(v)o(ory)f(to)h(reev)m(aluate)h(the)f(condition)i
(expression)f(ev)o(ery)f(time.)23 b(If)17 b(no)0 2483
y(an)o(teceden)o(t)c(v)m(ariable)h(has)f(c)o(hanged)h(v)m(alue,)g(ob)o
(viously)g(the)f(expression)h(will)g(not)f(c)o(hange)g(its)g(v)m(alue)h
(either.)20 b(T)l(o)0 2545 y(a)o(v)o(oid)c(this)h(unnecessary)g
(e\013ort,)e(the)h(case)g(condition)i(is)f(only)f(reev)m(aluated)i
(when)e(an)o(y)g(v)m(ariable)i(it)e(dep)q(ends)0 2608
y(on)k(has)f(b)q(een)i(assigned)f(to,)g(and)g(then)g(of)f(course)h
(only)g(when)g(the)g(curren)o(t)g(expression)g(v)m(alue)h(is)f
(actually)0 2670 y(needed.)p eop
%%Page: 31 32
31 31 bop 0 -58 a Fi(Router)1768 b(31)62 183 y(Some)18
b(\014nal,)h(and)g(v)o(ery)e(imp)q(ortan)o(t)h(p)q(oin)o(ts:)26
b(Ev)o(en)18 b(though)f(the)i(case)f(lab)q(el)h(patterns)f(lo)q(ok)g
(lik)o(e)h(normal)0 246 y(regular)f(expressions)h(that)f(one)g(can)g
(\014nd)h(in)g(editors)f(and)h(other)f(system)f(utilities,)k(the)d
(pattern)g(matc)o(hing)0 308 y(in)g(the)f(Router)g(is)h(tok)o
(en-based,)f(rather)f(than)h(c)o(haracter-based.)25 b(The)17
b(tok)o(ens)g(are)f(of)h(course)g(the)g(RF)o(C822)0 370
y(tok)o(ens)h(scanned)h(from)e(the)i(v)m(alue)g(of)f(the)h(condition)g
(expression.)30 b(This)19 b(is)g(done)g(to)f(a)o(v)o(oid)g(surprises)h
(from)0 432 y(simplistic)e(patterns,)c(and)h(to)g(cut)g(do)o(wn)g(on)g
(unnecessary)h(v)o(erb)q(osit)o(y)f(in)h(describing)h(an)e(address)h
(when)f(using)0 495 y(the)f(normal)g(regular)g(expression)h(seman)o
(tics.)20 b(Another)13 b(thing)g(that)g(helps)h(the)f(matter,)f(is)i
(that)e(all)i(case)f(lab)q(el)0 557 y(patterns)g(are)f(anc)o(hored)h
(at)g(the)g(b)q(eginning)i(and)e(end)h(of)f(the)g(string.)19
b(An)14 b(anc)o(hored)f(pattern)f(easily)i(sim)o(ulates)0
619 y(an)g(unanc)o(hored)g(pattern,)g(but)g(not)f(vice)i(v)o(ersa.)k
(In)14 b(patterns,)g(paren)o(theses)g(are)f(used)i(to)e(group)h(a)f(n)o
(um)o(b)q(er)h(of)0 681 y(alternates,)g(and)g(are)g(also)g(used)h(to)f
(brac)o(k)o(et)f(p)q(ortions)i(of)f(the)g(pattern,)g(so)g(the)g
(corresp)q(onding)h(tok)o(ens)f(in)h(the)0 744 y(matc)o(hed)f(string)g
(can)g(later)g(b)q(e)g(referred)g(to.)19 b(T)l(o)14 b(a)o(v)o(oid)g(in)
o(tro)q(ducing)h(another)e(sp)q(ecial)j(c)o(haracter)d(\(bac)o(kslash,)
0 806 y(con)o(v)o(en)o(tionally)g(used)f(to)f(refer)g(to)g(selected)h
(p)q(ortions)g(of)f(the)h(matc)o(hed)f(string\),)h(the)f(seman)o(tics)h
(of)f(the)h($-pre\014x)0 868 y(notation)i(are)h(extended)g(to)f(handle)
i(this)g(need.)k(If)15 b(a)f(`)p Fe($)p Fi(')g(is)h(follo)o(w)o(ed)g(b)
o(y)g(a)f(digit)i(N,)e(this)i(is)f(expanded)h(as)e(the)0
930 y(v)m(alue)h(of)d(the)i(p)q(ortion)g(of)e(the)i(matc)o(hed)f
(string)g(selected)i(b)o(y)e(the)h(N'th)f(group)g(of)g(paren)o(theses)g
(in)h(the)g(pattern.)62 1068 y(T)l(o)h(giv)o(e)h(an)f(idea)h(of)e(ho)o
(w)h(a)g(case)g(statemen)o(t)f(lo)q(oks,)h(here)h(is)g(a)f(co)q(de)g
(fragmen)o(t:)120 1200 y Fe(case)23 b($hostname)g(in)120
1250 y(.+\\.\(edu|gov|mil|oth|org|n)o(et|ca|d)o(k|uk\))140
b(#)24 b(add)f(toplevels)g(as)g(you)h(please)311 1300
y(break)f(;;)668 b(#)24 b(do)f(nothing)120 1350 y(.*)143
b(hostname)23 b(=)g($hostname.$orgdomain)f(;;)47 b(#)24
b(default)f(domain)120 1399 y(esac)0 1633 y Fd(3.8)35
b(Database)24 b(In)n(terface)62 1771 y Fi(Man)o(y)18
b(of)g(the)g(decisions)i(and)e(actions)h(tak)o(en)e(b)o(y)i
(con\014guration)f(\014le)h(co)q(de)g(dep)q(end)h(on)e(the)g(sp)q
(eci\014cs)i(of)0 1834 y(the)d(en)o(vironmen)o(t)g(the)g(MT)l(A)g
(\014nds)h(itself)f(in.)26 b(So,)17 b(not)g(just)g(the)g(facts)f(that)g
(the)h(lo)q(cal)h(host)f(is)g(attac)o(hed)g(to)0 1896
y(\(sa)o(y\))d(the)i(UUCP)f(net)o(w)o(ork)f(and)i(a)f(Lo)q(cal)h(Area)f
(Net)h(are)f(imp)q(ortan)o(t,)f(but)i(it)g(is)g(also)f(essen)o(tial)h
(to)f(kno)o(w)g(the)0 1958 y(sp)q(eci\014c)20 b(hosts)d(that)g(are)h
(reac)o(hable)g(b)o(y)g(this)g(metho)q(d.)29 b(Hardco)q(ding)18
b(large)g(amoun)o(ts)f(of)h(suc)o(h)g(information)0 2020
y(in)o(to)c(the)g(con\014guration)g(\014le)h(is)f(not)g(practical.)20
b(It)14 b(is)g(also)g(undesirable)i(to)d(c)o(hange)h(what)f(is)i
(really)g(a)e(program)0 2083 y(\(the)i(con\014guration)g(\014le\),)h
(when)g(the)f(information)g(\(the)g(data\))f(c)o(hanges.)62
2221 y(The)g(desirable)g(solution)g(to)f(this)g(data)g(abstraction)f
(problem)i(is)g(to)e(pro)o(vide)i(a)f(w)o(a)o(y)f(for)h(the)g
(con\014guration)0 2283 y(\014le)k(programmer)f(to)f(manage)h(suc)o(h)h
(information)f(externally)i(to)d(ZMailer,)i(and)g(access)f(it)h(from)e
(within)j(the)0 2345 y(Router.)35 b(The)20 b(logical)h(w)o(a)o(y)e(to)h
(do)g(this)g(is)h(to)e(ha)o(v)o(e)h(an)g(in)o(terface)g(to)g
(externally)h(main)o(tained)g(databases.)0 2407 y(These)13
b(databases)g(need)h(not)f(b)q(e)g(terribly)h(complicated;)h(after)d
(all)i(the)f(simplest)i(kind)f(of)e(information)i(needed)0
2470 y(is)g(that)f(a)g(string)h(is)g(a)f(mem)o(b)q(er)h(of)f(some)g
(collection.)22 b(This)14 b(could)g(simply)h(corresp)q(ond)f(to)f
(\014nding)i(that)e(string)0 2532 y(as)i(a)g(w)o(ord)f(in)i(a)f(list)h
(of)f(w)o(ords.)62 2670 y(Ho)o(w)o(ev)o(er,)j(there)h(are)f(man)o(y)g
(w)o(a)o(ys)f(to)h(organize)h(databases,)f(and)h(the)g(necessary)f(in)o
(terfaces)h(cannot)f(b)q(e)p eop
%%Page: 32 33
32 32 bop 0 -58 a Fi(32)1380 b(ZMailer)16 b(Op)q(erations)g(Guide)0
183 y(kno)o(wn)h(in)g(adv)m(ance.)26 b(The)17 b(Router)g(therefore)g
(implemen)o(ts)h(a)f(framew)o(ork)e(that)h(allo)o(ws)h(\015exible)i(in)
o(terfacing)0 246 y(to)c(databases,)f(and)h(easy)g(extension)h(to)f(co)
o(v)o(er)f(new)i(t)o(yp)q(es)f(of)g(databases.)62 452
y(T)l(o)i(use)h(a)f(database,)g(t)o(w)o(o)g(things)g(are)h(needed:)25
b(the)18 b(name)f(of)g(the)h(database,)f(and)h(a)f(w)o(a)o(y)f(of)h
(retrieving)0 515 y(the)g(data)f(asso)q(ciated)h(with)h(a)e(particular)
i(k)o(ey)f(from)f(that)g(database.)24 b(In)18 b(addition)g(to)e(this)h
(kno)o(wledge,)h(the)0 577 y(needs)d(of)e(an)h(MT)l(A)f(do)h(include)i
(some)d(sp)q(ecial)j(pro)q(cessing)f(p)q(ertinen)o(t)f(to)f(its)h
(activities)h(and)f(the)g(kind)h(of)e(k)o(eys)0 639 y(to)i(b)q(e)g(lo)q
(ok)o(ed)h(up.)62 846 y(Sp)q(eci\014cally)m(,)f(the)e(result)g(of)f
(the)h(data)f(lo)q(okup)h(can)g(tak)o(e)f(di\013eren)o(t)g(forms:)18
b(one)13 b(ma)o(y)f(b)q(e)h(in)o(terested)g(only)g(in)0
908 y(the)g(existence)i(of)d(a)h(datum,)g(not)g(its)g(v)m(alue,)h(or)f
(one)g(ma)o(y)g(b)q(e)g(lo)q(oking)h(up)g(paths)f(in)h(a)f(pathalias)g
(database)g(and)0 971 y(need)h(to)e(substitute)h(the)f(prop)q(er)h
(thing)h(in)f(place)h(of)e(`)p Fe(\045s)p Fi(')g(in)h(the)g(string)g
(returned)g(from)f(the)g(database)h(lo)q(okup.)0 1033
y(It)g(should)h(b)q(e)g(p)q(ossible)g(to)f(sp)q(ecify)h(that)e(this)i
(kind)g(of)e(p)q(ostpro)q(cessing)i(should)g(b)q(e)g(carried)f(out)g
(in)h(asso)q(ciation)0 1095 y(with)i(a)f(sp)q(eci\014c)j(data)d
(access.)21 b(Similarly)l(,)c(there)f(ma)o(y)f(b)q(e)h(a)f(need)i(for)e
(searc)o(h)g(routines)h(that)f(dep)q(end)i(on)f(the)0
1157 y(seman)o(tics)d(of)f(k)o(eys)h(or)f(the)g(retriev)o(ed)i(data.)k
(These)13 b(p)q(ossibilities)j(ha)o(v)o(e)c(all)i(b)q(een)g(tak)o(en)e
(in)o(to)g(consideration)i(in)0 1220 y(the)g(de\014nition)j(of)c(a)h
Fb(relation)p Fi(.)21 b(A)14 b(relation)h(maps)f(a)g(k)o(ey)g(to)g(a)g
(v)m(alue)i(obtained)f(b)o(y)f(applying)i(the)e(appropriate)0
1282 y(lo)q(okup)g(and)f(searc)o(h)f(routines,)i(and)f(p)q(erhaps)g(a)g
(p)q(ostpro)q(cessing)h(step,)f(applied)h(to)f(a)f(sp)q(eci\014ed)j
(database)e(that)0 1344 y(has)i(a)g(sp)q(eci\014ed)i(access)f(metho)q
(d.)62 1551 y(The)i(v)m(arious)g(attributes)g(that)f(de\014ne)i(a)e
(relation)h(are)g(largely)g(indep)q(enden)o(t.)30 b(There)18
b(will)h(of)f(course)f(b)q(e)0 1613 y(dep)q(endencies)23
b(due)d(to)f(the)g(con)o(ten)o(ts)g(or)g(other)g(seman)o(tics)h(of)f(a)
g(database.)32 b(In)20 b(addition)h(to)e(the)g(features)0
1676 y(men)o(tioned,)d(eac)o(h)f(relation)g(ma)o(y)g(optionally)h(ha)o
(v)o(e)f(asso)q(ciated)g(with)h(it)f(a)g(subt)o(yp)q(e,)g(whic)o(h)h
(is)g(a)f(string)g(v)m(alue)0 1738 y(used)i(to)g(comm)o(unicate)g(to)f
(the)h(lo)q(okup)h(routine)f(whic)o(h)h(table)f(of)f(sev)o(eral)i(in)f
(a)g(database)f(one)h(is)g(in)o(terested)0 1800 y(in.)62
2007 y(There)d(are)g(no)g(prede\014ned)h(relations)g(in)g(the)f
(Router.)19 b(They)14 b(m)o(ust)g(all)g(b)q(e)h(sp)q(eci\014ed)h(in)f
(the)f(con\014guration)0 2069 y(\014le,)h(b)q(efore)g(\014rst)f(use.)20
b(This)15 b(is)h(done)e(b)o(y)h(calling)h(the)f(sp)q(ecial)h(function)g
Fe(relation)d Fi(with)i(v)m(arious)g(options,)f(as)0
2132 y(indicated)j(b)o(y)e(the)g(usage)g(string)h(prin)o(ted)f(b)o(y)h
(the)f(relation)h(function)g(when)f(called)i(the)e(wrong)g(w)o(a)o(y:)
120 2339 y Fe(Usage:)23 b(relation)g(-t)g(dbtype)g([-f)h(file)f(-s#)h
(-b|n)f(-l/u)g(-d)h(driver])f(name)62 2545 y Fi(The)14
b(`)p Fe(t)p Fi(')f(option)h(sp)q(eci\014es)h(one)f(of)g(sev)o(eral)f
(prede\014ned)j(database)d(t)o(yp)q(es,)h(eac)o(h)f(with)h(their)h(sp)q
(eci\014c)g(lo)q(okup)0 2608 y(routine.)31 b(It)19 b(determines)g(a)g
(template)g(for)f(the)h(set)f(of)g(attributes)h(asso)q(ciated)g(with)g
(a)f(particular)i(relation.)0 2670 y(The)15 b(prede\014ned)i(database)e
(t)o(yp)q(es)g(are:)p eop
%%Page: 33 34
33 33 bop 0 -58 a Fi(Router)1768 b(33)0 102 y Fe(hostsfile)240
165 y Fi(`)p Fe(/etc/hosts)p Fi(')13 b(lo)q(okup)j(using)g
Fe(gethostbyname\(\))p Fi(.)0 239 y Fe(unordered)240
302 y Fi(the)f(database)g(is)g(a)g(text)f(\014le)j(with)e(k)o(ey-datum)
g(pairs)g(on)g(eac)o(h)g(line,)i(k)o(eys)d(are)h(lo)q(ok)o(ed)h(up)f
(using)240 364 y(a)g(sequen)o(tial)h(searc)o(h.)0 439
y Fe(ordered)72 b Fi(the)15 b(database)g(is)g(a)g(text)f(\014le)j(with)
e(k)o(ey-datum)g(pairs)g(on)g(eac)o(h)g(line,)i(k)o(eys)d(are)h(lo)q
(ok)o(ed)h(up)f(using)240 501 y(a)g(binary)h(searc)o(h)f(in)h(the)f
(sorted)g(\014le.)0 576 y Fe(dbm)168 b Fi(the)15 b(database)g(is)h(in)g
(DBM)e(format)g(\(strongly)h(discouraged\).)0 650 y Fe(ndbm)144
b Fi(the)15 b(database)g(is)h(in)g(NDBM)e(\(new)i(DBM\))e(format.)0
725 y Fe(bind)144 b Fi(the)13 b(database)f(is)i(the)f(BIND)g(nameserv)o
(er,)g(accessed)h(through)e(the)h(standard)g(resolv)o(er)g(routines.)62
863 y(A)19 b(subt)o(yp)q(e)g(is)g(sp)q(eci\014ed)i(b)o(y)d(app)q
(ending)j(it)d(to)g(the)h(database)f(t)o(yp)q(e)h(name)f(separated)g(b)
o(y)h(a)f(slash.)31 b(F)l(or)0 925 y(example,)15 b(sp)q(ecifying)h
Fe(bind/mx)d Fi(as)g(the)h(argumen)o(t)g(to)f(the)h(`)p
Fe(t)p Fi(')f(option)h(will)i(store)d(a)o(w)o(a)o(y)g(`)p
Fe(mx)p Fi(')g(for)g(reference)i(b)o(y)0 987 y(the)f(access)g(routines)
g(whenev)o(er)g(a)f(query)h(to)f(that)g(relation)h(is)h(pro)q(cessed.)
20 b(The)14 b(subt)o(yp)q(es)g(m)o(ust)f(therefore)g(b)q(e)0
1049 y(recognized)i(b)o(y)e(either)i(the)e(database-sp)q(eci\014c)j
(access)d(routines)h(\(for)f(translation)h(in)o(to)f(some)h(other)f
(form\),)f(or)0 1112 y(b)o(y)j(the)g(database)g(in)o(terface)h(itself.)
62 1249 y(F)l(or)f Fe(unordered)f Fi(and)h Fe(ordered)f
Fi(database)h(t)o(yp)q(es,)g(the)g(datum)g(corresp)q(onding)h(to)f(a)g
(particular)h(k)o(ey)f(ma)o(y)0 1311 y(b)q(e)f(n)o(ull.)21
b(This)14 b(situation)f(arises)h(if)g(the)f(database)g(is)h(a)f(simple)
i(list,)f(with)g(one)f(k)o(ey)g(p)q(er)h(line)h(and)f(nothing)f(else.)0
1373 y(In)k(this)g(situation,)g(the)f(use)h(of)f(an)g(appropriate)h(p)q
(ost-pro)q(cessor)f(option)h(\(e.g.)22 b(`)p Fe(b)p Fi('\))15
b(is)i(recommended)h(to)d(b)q(e)0 1436 y(able)h(to)f(detect)g(whether)g
(or)g(not)g(the)g(lo)q(okup)h(succeeded.)62 1573 y(The)i(`)p
Fe(f)p Fi(')f(option)h(sp)q(eci\014es)h(the)f(name)g(of)f(the)h
(database.)27 b(This)18 b(is)g(t)o(ypically)i(a)d(path)h(that)f(either)
h(names)0 1635 y(the)g(actual)h(\(and)f(single\))h(database)f(\014le,)h
(or)f(giv)o(es)g(the)g(ro)q(ot)g(path)g(for)f(a)h(n)o(um)o(b)q(er)h(of)
f(\014les)h(comprising)g(the)0 1698 y(database)c(\(e.g.)21
b Fe(foo)15 b Fi(ma)o(y)h(refer)f(to)g(the)h(NDBM)g(\014les)g(`)p
Fe(foo.pag)p Fi(')e(and)i(`)p Fe(foo.dir)p Fi('\).)k(F)l(or)15
b(some)h(t)o(yp)q(es)g(of)f(the)0 1760 y(databases)g(there)g(is)h(no)g
(practical)g(access)g(to)f(an)o(y)g(particular)h(database)f(\014le,)h
(these)g(include)i Fe(hostfile)p Fi(,)c(and)0 1822 y
Fe(bind)p Fi(.)22 b(The)17 b(use)f(of)g(the)g Fe(dbm)g
Fi(format)f(is)i(strongly)f(discouraged,)g(since)i(a)e(p)q(ortable)g
(program)f(can)i(only)f(ha)o(v)o(e)0 1884 y(a)f(single)j(DBM)d
(database)g(asso)q(ciated)h(with)g(it.)22 b(F)l(or)15
b(YP)h(\(nee,)g(\\NIS"\))g(database)f(the)h(optional)g(\014le)h
(de\014nes)0 1947 y(NIS-domain.)62 2084 y(The)e(`)p Fe(s)p
Fi(')f(option)h(sp)q(eci\014es)i(the)e(size)g(of)g(the)f(cac)o(he.)20
b(If)15 b(this)h(v)m(alue)g(is)f(non-zero)g(\(b)o(y)f(default)i(it)f
(is)g(10\),)f(then)0 2146 y(an)f(LR)o(U)g(cac)o(he)g(of)g(this)g(size)g
(is)h(main)o(tained)f(for)f(previous)i(queries)g(to)e(this)h(relation,)
h(including)h(b)q(oth)e(p)q(ositiv)o(e)0 2209 y(and)i(negativ)o(e)h
(results.)62 2346 y(The)f(`)p Fe(b)p Fi(')g(option)g(asks)f(that)g(a)h
(p)q(ostpro)q(cessor)g(is)g(applied)i(to)d(the)h(database)g(lo)q(okup)h
(result,)f(so)f(the)h(empt)o(y)0 2408 y(string)d(is)i(returned)e(from)g
(the)h(relation)g(query)g(if)g(the)f(database)g(searc)o(h)h(failed,)h
(and)e(the)h(k)o(ey)f(itself)i(it)f(returned)0 2470 y(if)19
b(the)f(searc)o(h)h(succeeded.)31 b(In)19 b(the)f(latter)g(case,)h(an)o
(y)f(retriev)o(ed)h(data)f(is)h(discarded.)31 b(The)18
b(option)h(letter)f(is)0 2533 y(short)d(for)f(Bo)q(olean.)62
2670 y(The)19 b(`)p Fe(n)p Fi(')f(option)g(asks)g(that)g(a)g(p)q
(ostpro)q(cessor)g(is)h(applied)i(to)c(the)i(database)f(lo)q(okup)h
(result,)g(so)g(the)f(k)o(ey)p eop
%%Page: 34 35
34 34 bop 0 -58 a Fi(34)1380 b(ZMailer)16 b(Op)q(erations)g(Guide)0
183 y(string)i(is)h(returned)f(from)f(the)i(relation)f(query)g(if)h
(the)f(database)g(searc)o(h)g(failed,)h(and)g(the)f(retriev)o(ed)g
(datum)0 246 y(string)d(is)h(returned)f(if)h(the)f(searc)o(h)g
(succeeded.)22 b(The)15 b(option)h(letter)f(is)h(short)e(for)h
(Non-Null.)62 389 y(The)f(`)p Fe(l)p Fi(')f(option)h(asks)g(that)f(all)
i(k)o(eys)e(are)h(con)o(v)o(erted)f(to)h(lo)o(w)o(ercase)f(b)q(efore)h
(lo)q(okup)h(in)g(the)e(database.)19 b(This)0 452 y(is)d(m)o(utually)g
(exclusiv)o(e)h(with)e(the)g(`)p Fe(u)p Fi(')g(option.)62
595 y(The)f(`)p Fe(u)p Fi(')e(option)h(asks)g(that)f(all)i(k)o(eys)f
(are)g(con)o(v)o(erted)g(to)f(upp)q(ercase)i(b)q(efore)g(lo)q(okup)g
(in)g(the)f(database.)18 b(This)0 658 y(is)e(m)o(utually)g(exclusiv)o
(e)h(with)e(the)g(`)p Fe(l)p Fi(')g(option.)62 801 y(The)k(`)p
Fe(d)p Fi(')e(option)h(sp)q(eci\014es)i(a)e(searc)o(h)g(routine.)30
b(Curren)o(tly)18 b(the)g(only)h(legal)g(argumen)o(t)f(to)f(this)i
(option)f(is)0 864 y Fe(pathalias)p Fi(,)c(sp)q(ecifying)j(a)e(driv)o
(er)g(that)g(searc)o(hes)g(for)f(the)i(k)o(ey)f(using)h(domain)f(name)g
(lo)q(okup)h(rules.)62 1008 y(The)i(\014nal)h(argumen)o(t)e(is)h(not)g
(preceeded)h(b)o(y)f(an)f(option)h(letter.)28 b(It)18
b(sp)q(eci\014es)i(the)d(name)h(the)g(relation)g(is)0
1070 y(kno)o(wn)d(under.)21 b(Note)14 b(that)h(it)g(is)h(quite)g(p)q
(ossible)h(for)d(di\013eren)o(t)i(relations)g(to)e(use)i(the)f(same)g
(database.)62 1214 y(Some)g(sample)h(relation)g(de\014nitions)h(follo)o
(w:)120 1345 y Fe(if)24 b([)f(-f)h(/etc/named.boot)e(];)h(then)168
1395 y(#)g(relation)g(-nt)h(bind,cname)e(-s)i(100)f(canon)47
b(#)24 b(T_CNAME)f(canonicalize)f(hostname)215 1445 y(relation)h(-nt)h
(bind,any)e(-s)i(100)f(canon)95 b(#)24 b(T_ANY)f(canonicalize)f
(hostname)215 1495 y(relation)h(-nt)h(bind,uname)e(uname)214
b(#)24 b(T_UNAME)f(UUCP)g(name)215 1545 y(relation)g(-bt)h(bind,mx)f
(neighbour)189 b(#)24 b(T_MX/T_WKS/T_A)e(reachability)215
1594 y(relation)h(-t)48 b(bind,mp)23 b(pathalias)213
b(#)24 b(T_MP)f(pathalias)g(lookup)120 1644 y(else)215
1694 y(relation)g(-nt)h(hostsfile)e(-s)i(100)f(canon)71
b(#)24 b(canonicalize)e(hostname)215 1744 y(relation)h(-t)h(unordered)e
(-f)i($MAILBIN/db/hosts.uucp)d(uname)215 1794 y(relation)i(-bt)h
(hostsfile)e(neighbour)215 1843 y(relation)h(-t)h(unordered)e(-f)i
(/dev/null)f(pathalias)120 1893 y(fi)62 2037 y Fi(The)17
b(ab)q(o)o(v)o(e)g(fragmen)o(t)e(de\014nes)j(a)f(set)f(of)g(relations)i
(that)e(can)h(b)q(e)g(accessed)g(in)h(the)f(same)f(w)o(a)o(y)l(,)g
(using)i(the)0 2099 y(same)d(names,)g(indep)q(enden)o(t)i(of)e(their)h
(actual)f(de\014nition.)120 2227 y Fe(#)24 b(We)f(maintain)g(an)h
(aliases)f(database)f(in)i(the)f(following)g(format.)g(Note:)g(the)120
2277 y(#)h('aliases')e(db)i(name)f(is)h(magic)f(to)h(the)f(internal)g
(alias)g(expansion)g(routines.)120 2327 y(if)h([)f(-f)h
($MAILBIN/db/aliases.dat)d(];)i(then)215 2377 y(relation)g(-t)h(ndbm)f
(-f)h($MAILBIN/db/aliases)d(aliases)120 2427 y(else)215
2476 y(relation)i(-t)h(ordered)f(-f)g($MAILBIN/db/aliases.idx)e
(aliases)120 2526 y(fi)62 2670 y Fi(As)e(the)f(commen)o(t)g(sa)o(ys,)h
(the)f(relation)h(name)g Fe(aliases)e Fi(has)i(sp)q(ecial)h
(signi\014cance)h(to)d(the)g(Router.)30 b(Al-)p eop
%%Page: 35 36
35 35 bop 0 -58 a Fi(Router)1768 b(35)0 183 y(though)19
b(the)g(relation)h(is)g(not)f(sp)q(ecial)i(in)f(an)o(y)e(other)h(w)o(a)
o(y)f(\(i.e.)32 b(it)20 b(can)f(b)q(e)h(used)g(in)g(the)f(normal)g
(fashion\),)0 246 y(the)f(seman)o(tics)g(of)f(the)h(data)f(retriev)o
(ed)h(are)g(b)q(ound)g(b)o(y)g(assumptions)g(in)h(the)e(aliasing)i(mec)
o(hanism.)29 b(These)0 308 y(assumptions)14 b(are)g(that)f(k)o(ey)h
(strings)g(are)f(lo)q(cal-name's,)i(and)f(the)g(corresp)q(onding)h
(datum)f(giv)o(es)g(a)f(b)o(yte)h(o\013set)0 370 y(in)o(to)19
b(another)g(\014le)h(\(the)f(ro)q(ot)g(name)g(of)g(the)g(aliases)h
(\014le,)h(with)f(a)f(`)p Fe(.dat)p Fi(')f(exten)o(tion\),)h(whic)o(h)i
(con)o(tains)e(the)0 432 y(actual)h(addresses)h(asso)q(ciated)f(with)h
(that)e(alias.)35 b(The)21 b(reason)f(for)f(this)i(indirection)h(is)f
(that)e(the)i(n)o(um)o(b)q(er)0 495 y(of)d(addresses)h(asso)q(ciated)h
(with)f(a)f(particular)i(alias)f(can)g(b)q(e)h(v)o(ery)e(large,)i(and)f
(this)g(mak)o(es)f(the)h(traditional)0 557 y(simple)e(database)d
(formats)g(inadequate.)21 b(F)l(or)14 b(example,)i(quic)o(k)g(lo)q
(okup)g(in)g(a)f(text)f(\014le)j(is)e(only)h(practical)g(if)g(it)0
619 y(is)g(sorted)f(and)h(has)f(a)h(regular)f(structure.)21
b(A)16 b(large)f(n)o(um)o(b)q(er)h(of)f(addresses)h(asso)q(ciated)g
(with)g(an)f(alias)i(mak)o(es)0 681 y(the)g(structuring)f(a)g(problem.)
24 b(The)17 b(situation)g(for)f(DBM)g(\014les)h(and)g(v)m(ariations)g
(ha)o(v)o(e)f(problems)h(to)q(o,)f(due)h(to)0 744 y(the)i(in)o(trinsic)
i(limits)f(of)f(the)g(storage)f(metho)q(d.)31 b(The)19
b(c)o(hosen)h(indirection)h(sc)o(heme)e(a)o(v)o(oids)g(suc)o(h)g
(problems)0 806 y(without)c(loss)h(of)e(e\016ciency)l(.)62
951 y(Finally)l(,)j(some)e(miscellaneous)i(de\014nitions)g(that)d
(illustrate)j(v)m(arious)e(p)q(ossibiliti)q(es:)120 1082
y Fe(relation)23 b(-t)g(unordered)g(-f)h(/usr/lib/news/active)d(-b)i
(newsgroup)120 1132 y(relation)g(-lmt)g(ndbm)g(-f)h($MAILVAR/db/active)
d(-b)j(newsgroup)120 1182 y(relation)f(-t)g(unordered)g(-f)h
(/usr/lib/uucp/L.sys)d(-b)i(ldotsys)120 1232 y(relation)g(-t)g(ordered)
g(-f)h($MAILBIN/db/hosts.transpo)o(rt)d(-d)j(pathalias)e(transport)62
1377 y Fi(Here,)e(the)f(\014rst)g(t)o(w)o(o)f(illustrate)i(con)o(v)o
(enien)o(t)g(coincidences)h(of)e(format,)f(and)i(the)f(last)g
(de\014nition)i(sho)o(ws)0 1439 y(what)15 b(migh)o(t)h(b)q(e)h(used)g
(if)f(outgoing)g(c)o(hannel)h(information)f(is)h(main)o(tained)g(in)f
(a)g(pathalias-format)g(database)0 1501 y(\(e.g.)j(`)p
Fe(bar)k(smtp!bar)p Fi(')14 b(means)h(to)g(send)g(mail)h(to)f(`)p
Fe(bar)p Fi(')f(via)h(the)h(SMTP)e(c)o(hannel\).)0 1780
y Fd(3.8.1)36 b(Using)22 b(a)i(P)n(athalias)e(Database)62
1924 y Fi(Accessing)g(route)d(databases)h(is)h(a)f(rather)f(essen)o
(tial)j(capabilit)o(y)f(for)f(a)g(mailer.)36 b(A)o(t)19
b(the)i(Univ)o(ersit)o(y)f(of)0 1987 y(T)l(oron)o(to,)c(all)i(hosts)f
(access)g(a)g(cen)o(trally)h(stored)f(database)f(through)h(a)g(sligh)o
(tly)i(mo)q(di\014ed)f(nameserv)o(er)f(pro-)0 2049 y(gram.)h(If)11
b(suc)o(h)g(a)f(setup)h(is)h(not)e(practical)i(at)e(y)o(our)g(site,)i
(other)e(metho)q(ds)h(are)g(a)o(v)m(ailable.)20 b(The)11
b(most)f(widespread)0 2111 y(kind)16 b(of)f(route)f(database)h(is)g
(pro)q(duced)h(b)o(y)f(the)h Fe(pathalias)d Fi(program.)19
b(It)c(generates)g(k)o(ey-v)m(alue)h(pairs)f(of)g(the)0
2173 y(forms:)120 2296 y Fe(uunet)381 b(ai.toronto.edu!uunet!\045s)120
2346 y(.css.gov)309 b(ai.toronto.edu!uunet!seismo)o(!\045s)0
2491 y Fi(whic)o(h)16 b(when)g(queried)g(ab)q(out)f(`)p
Fe(uunet)p Fi(')f(and)h(`)p Fe(beno.css.gov)p Fi(')e(corresp)q(ond)j
(to)e(the)i(routes:)120 2620 y Fe(ai.toronto.edu!uunet)120
2670 y(ai.toronto.edu!uunet!seism)o(o!beno.)o(css.gov)p
eop
%%Page: 36 37
36 36 bop 0 -58 a Fi(36)1380 b(ZMailer)16 b(Op)q(erations)g(Guide)62
183 y(Notice)g(that)f(there)g(are)g(t)o(w)o(o)f(basic)i(forms)f(of)g
(routes)g(listed:)21 b(routes)15 b(to)g(UUCP)g(no)q(de)h(names)g(and)f
(routes)0 246 y(to)d(sub)q(domain)j(gatew)o(a)o(ys.)i(Dep)q(ending)e
(on)e(the)g(t)o(yp)q(e)g(of)f(route)h(query)l(,)h(the)f(v)m(alue)h
(returned)f(from)g(a)f(pathalias)0 308 y(database)j(lo)q(okup)i(needs)f
(to)f(b)q(e)i(treated)e(di\013eren)o(tly)l(.)23 b(F)l(or)15
b(no)o(w,)g(this)h(ma)o(y)f(b)q(e)i(accomplished)g(b)o(y)f(a)f
(con\014gu-)0 370 y(ration)g(\014le)h(relation)g(de\014nition)h(and)e
(in)o(terface)h(function)g(as)f(sho)o(wn:)120 493 y Fe(relation)23
b(-t)g(ndbm)h(-f)f($MAILBIN/uuDB)f(-d)i(pathalias)f(padb)120
593 y(#)h(pathalias)e(database)h(lookup)g(function)120
642 y(padblookup)f(\(name,)i(path\))f({)310 b(#)24 b(path)f(is)g(a)h
(local)f(variable)311 692 y(path)g(=)h(${$name:padb})311
742 y(case)f("$path")g(in)311 792 y(\(\(.+\)!\)?\([^!]+\)!\045s)502
842 y(if)g([)h($3)g(==)f($name)g(];)h(then)693 891 y(path)f(=)h($2!$3)
502 941 y(else)693 991 y(path)f(=)h($2!$3!$name)502 1041
y(fi)502 1091 y(;;)311 1141 y(.*\045s.*)47 b(echo)23
b(illegal)g(route)g(in)h(pathalias)e(db:)i($path)502
1190 y(;;)311 1240 y(esac)311 1290 y(return)f($path)120
1340 y(})62 1478 y Fi(This)15 b(is)g(actually)f(a)g(simplistic)j
(algorithm,)d(but)g(it)g(do)q(es)h(illustrate)g(the)f(metho)q(d.)20
b(The)14 b(lo)q(okup)h(algorithm)0 1540 y(used)i(when)f(the)g(`)p
Fe(-d)p Fi(')f(\015ag)h(is)h(sp)q(eci\014ed)h(in)f(the)f(relation)g
(de\014nition)i(command)e(is)h(rather)e(simple;)j(it)e(do)q(esn't)0
1602 y(test)i(v)m(arious)i(case)f(com)o(binations)g(for)f(the)h(k)o
(eys)g(it)g(tries.)31 b(Therefore,)19 b(the)g(k)o(eys)g(in)h(the)f
(pathalias)g(output)0 1664 y(data)d(should)i(probably)f(b)q(e)h(con)o
(v)o(erted)e(to)g(a)h(single)h(case,)f(and)g(the)g(`)p
Fe(-l)p Fi(')e(or)h(`)p Fe(-u)p Fi(')g(\015ag)h(giv)o(en)g(in)g(the)g
(relation)0 1727 y(de\014nition.)0 1958 y Fd(3.9)35 b(Mail)22
b(F)-6 b(orw)n(arding)62 2096 y Fi(Although)14 b(more)f(in)o(teresting)
h(and)f(useful)i(mo)q(dels)f(exist,)f(the)h(mail)g(forw)o(arding)e
(functionalit)o(y)j(of)e(ZMailer)0 2159 y(has)i(b)q(een)h(designed)h
(to)d(generally)i(em)o(ulate)g(the)f(in)o(terface)g(and)h(b)q(eha)o
(viour)g(of)e(Sendmail.)22 b(The)15 b(mec)o(hanisms)0
2221 y(that)f(accomplish)j(this)f(are)f(lik)o(ely)i(to)d(b)q(e)i
(generalized)h(in)f(a)f(future)g(v)o(ersion.)62 2359
y(If)k(a)f(relation)g(named)h Fe(aliases)e Fi(is)i(de\014ned)g(b)o(y)f
(the)g(con\014guration)h(\014le,)g(then)g(the)f(data)g(returned)g(b)o
(y)g(a)0 2421 y(lo)q(okup)d(in)h(that)d(database)h(is)h(assumed)g(to)f
(b)q(e)h(a)f(prin)o(ted)i(decimal)g(represen)o(tation)e(of)g(the)h(b)o
(yte)f(o\013set)g(of)g(the)0 2483 y(de\014nition)h(of)d(the)h(alias)h
(in)f(a)g(separate)f(\014le.)20 b(In)14 b(other)e(w)o(ords,)h(the)g
Fe(aliases)e Fi(relation)j(asso)q(ciates)f(a)f(particular)0
2545 y(lo)q(cal-part,)19 b(with)f(an)g(index)h(in)o(to)e(another)h
(\014le)g(that)f(con)o(tains)h(the)g(actual)g(alias)g(de\014nition.)30
b(The)18 b(name)f(of)0 2608 y(this)g(other)f(data)g(\014le)h(is)g
(constructed)g(from)e(the)i(name)f(of)g(the)h(\014le)g(asso)q(ciated)g
(with)g(the)f Fe(aliases)g Fi(relation,)0 2670 y(t)o(ypically)h(it)e
(will)i(b)q(e)f(`)p Fe(aliases.dat)p Fi('.)p eop
%%Page: 37 38
37 37 bop 0 -58 a Fi(Router)1768 b(37)62 183 y(The)16
b(\014le)h(con)o(taining)f(the)g(actual)f(aliasing)i(data)e(is)h
(automatically)g(created)f(b)o(y)h(the)g(Router)f(when)h(ask)o(ed)0
246 y(to)d(reconstruct)g(the)g(aliases)i(database.)j(It)c(do)q(es)f
(this)h(based)g(on)f(a)h(text)e(\014le)j(con)o(taining)f(the)g(alias)g
(de\014nitions.)0 308 y(This)g(text)f(\014le,)h(whic)o(h)g(corresp)q
(onds)g(to)e(the)i(Sendmail)h(aliases)f(\014le,)g(consists)f(of)g
(individual)k(alias)d(de\014nitions,)0 370 y(p)q(ossibly)k(separated)f
(b)o(y)f(blank)i(lines)g(or)e(commen)o(tary)l(.)23 b(Commen)o(ts)16
b(are)h(in)o(tro)q(duced)g(b)o(y)g(a)f(sharp)h(sign)g(\(o)q(c-)0
432 y(tothorp:)i(`)p Fe(#)p Fi('\))c(at)f(an)o(y)i(p)q(oin)o(t)g(where)
f(a)g(tok)o(en)g(migh)o(t)h(start)e(\(for)g(example)j(the)e(b)q
(eginning)j(of)d(a)g(line,)i(but)e(not)0 495 y(in)g(the)g(middle)i(of)d
(an)g(address\),)h(and)f(extend)i(to)e(the)g(end)i(of)e(the)g(line.)22
b(Eac)o(h)14 b(alias)i(de\014nition)g(has)e(the)h(exact)0
557 y(syn)o(tax)d(of)h(an)g(RF)o(C822)f(message)g(header,)i(con)o
(taining)g(an)f(address-list,)h(except)f(for)g(commen)o(ts.)18
b(The)c(header)0 619 y(\014eld)i(name)g(is)f(the)h(lo)q(cal-part)g(b)q
(eing)g(aliased)g(to)f(the)g(address-list)h(that)f(is)h(the)f(header)h
(v)m(alue.)62 761 y(The)h(fact)e(that)h(an)g(alias)h(de\014nition)h
(follo)o(ws)e(the)h(syn)o(tax)e(for)h(an)g(RF)o(C822)f(message)h
(header,)g(in)o(tro)q(duces)0 824 y(an)j(incompatibilit)o(y)i(with)e
(Sendmail.)33 b(The)19 b(string)g(`)p Fe(:include:)p
Fi(')e(at)h(the)h(start)f(of)g(a)h(lo)q(cal-part)g(\(a)g(legacy)0
886 y(of)g(RF)o(C733\))f(has)h(sp)q(ecial)i(seman)o(tics.)33
b(Sendmail)21 b(w)o(ould)f(strip)g(this)f(pre\014x,)i(and)f(regard)e
(the)i(rest)f(of)g(the)0 948 y(lo)q(cal-part)g(as)e(a)h(path)f(to)g(a)h
(\014le)h(con)o(taining)g(a)e(list)i(of)e(addresses)h(to)f(b)q(e)i
(included)h(in)f(the)f(alias)g(expansion.)0 1010 y(Indeed,)f(the)f
(Router)g(b)q(eha)o(v)o(es)g(in)h(the)f(same)g(manner,)g(but)g(b)q
(ecause)h(some)e(of)h(the)g(c)o(haracters)f(in)h(the)h(pre\014x)0
1073 y(are)e(RF)o(C822)f(sp)q(ecials,)i(the)g(en)o(tire)f(lo)q
(cal-part)h(m)o(ust)f(b)q(e)h(quoted.)k(Th)o(us,)15 b(whereas)g
(Sendmail)i(allo)o(w)o(ed:)120 1204 y Fe(people:)23 b
(:include:/usr/lib/mail/li)o(sts/peop)o(le)0 1341 y Fi(the)15
b(prop)q(er)h(syn)o(tax)e(with)i(ZMailer)f(is:)120 1478
y Fe(people:)23 b(":include:/usr/lib/mail/l)o(ists/peo)o(ple")62
1621 y Fi(Lik)o(e)14 b(Sendmail,)g(if)f(a)f(lo)q(cal-part)i(is)f(not)f
(found)h(in)g(the)f(aliases)i(database,)e(the)g(Router)h(also)f(c)o
(hec)o(ks)h(`)p Fe(~)p Fb(lo)q(cal-)0 1683 y(part)p Fe(/.forward)p
Fi(')j(\(if)i(suc)o(h)g(exists\))g(for)f(an)o(y)g(address)h(expansion.)
29 b(The)18 b(`)p Fe(.forward)p Fi(')e(\014le)i(format)f(is)h(also)g
(an)0 1745 y(RF)o(C822)c(address-list,)i(similar)g(to)f(what)f
(Sendmail)j(exp)q(ects.)62 1887 y(There)g(exists)g(a)f(sp)q(ecial)j
(mec)o(hanism)e(to)f(do)h(address)f(expanding)i(aliasing)g(on)f(a)f
(mailing-lists,)j(ho)o(w)o(ev)o(er)0 1950 y(it)k(do)q(esn't)f(really)h
(tak)o(e)f(in)o(to)g(accoun)o(t)g(all)i(needs)f(that)e(mailinglist)k
(migh)o(t)d(ha)o(v)o(e)g({)g(lik)o(e)i(reader)e(rewrite,)0
2012 y(mo)q(deration,)17 b(etc.)26 b(non-trivialities.)i(If)18
b(y)o(ou)e(need)i(more,)f(than)g(simple)i(alias-lik)o(e)g(address)e
(expansions,)h(do)0 2074 y(lo)q(ok)d(at)g(v)m(arious)h
(Mailing-List-Manager)g(soft)o(w)o(ares.)62 2216 y(The)21
b(mec)o(hanism)g(to)e(do)h(list-aliases)i(is)f(to)e(lo)q(ok)i(up)g(for)
e(a)h(\014le)h(in)g(directory)g(`)p Fe($MAILVAR/lists/)p
Fi('.)32 b(If)0 2279 y(there)15 b(exists)g(a)f(\014le)i(with)f(lo)q(ok)
o(ed)g(up)g(name,)g(then)g(the)f(address)h(expansion)h(is)f(done)g(b)o
(y)g(reading)g(that)f(\014le)i(for)0 2341 y(recipien)o(t)e(addresses)f
(in)h(RF)o(C822)e(format)f(\(just)h(lik)o(e)i(with)g(`)p
Fe(:include:)p Fi('d)d(\014le\).)19 b(F)l(urthermore,)13
b(all)g(recipien)o(ts)0 2403 y(pro)q(duced)j(from)f(that)f(address)i
(are)e(sen)o(t)h(with)h(`)p Fe(listname-owner)p Fi(')c(as)j(the)g
(sender,)h(and)f(error)g(catc)o(her)p Fc(:)7 b(:)g(:)62
2545 y Fi(Related)16 b(to)d(the)h(list-alias)i(mec)o(hanism)f(is)f
(test)g(for)g Fe(*-owner)p Fi(,)e(and)j Fe(*-request)e
Fi(lo)q(cal-parts;)h(if)h Fe(basename)0 2608 y(somelist-owner)22
b(-owner)c Fi(resolv)o(es)h(to)f(a)h(\014le)h(in)g(the)f(`)p
Fe($MAILVAR/lists/)p Fi('-directory)l(,)e(the)i(o)o(wner)f(of)h(the)0
2670 y(\014le)d(is)g(tak)o(en)f(to)f(do)h(handle)i(the)e(list.)p
eop
%%Page: 38 39
38 38 bop 0 -58 a Fi(38)1380 b(ZMailer)16 b(Op)q(erations)g(Guide)62
183 y(As)f(sp)q(ecial)i(cases,)e(a)g(lo)q(cal-part)h(starting)f(with)g
(a)g(pip)q(e)i(c)o(haracter)d(\(`)p Fe(|)p Fi('\))g(is)i(treated)e(as)h
(mail)h(destined)h(for)0 246 y(a)d(program)f(\(the)h(rest)f(of)h(the)g
(lo)q(cal-part)h(is)g(an)o(y)f(v)m(alid)h(argumen)o(t)f(to)f(a)h
Fe(sh)24 b(-c)14 b Fi(command\),)f(and)h(a)g(lo)q(cal-part)0
308 y(starting)f(with)i(a)e(slash)h(c)o(haracter)g(\(`)p
Fe(/)p Fi('\))e(is)i(treated)g(as)f(mail)i(destined)g(for)f(the)g
(\014le)h(named)f(b)o(y)g(the)g(lo)q(cal-part.)0 728
y Fd(3.10)36 b(Securit)n(y)62 886 y Fi(Ha)o(ving)21 b(lo)q(cal-parts)g
(that)e(allo)o(w)i(deliv)o(ery)h(to)d(arbitary)h(\014les,)i(or)e(can)g
(trigger)g(execution)i(of)e(arbitrary)0 949 y(programs,)13
b(can)h(clearly)i(lead)f(to)e(a)h(h)o(uge)h(securit)o(y)f(problem.)20
b(Sendmail)c(do)q(es)f(address)f(this)h(problem,)g(but)f(in)0
1011 y(a)j(restrictiv)o(e)g(and)h(unin)o(tuitiv)o(e)h(manner.)26
b(This)17 b(asp)q(ect)h(of)e(ZMailer)i(securit)o(y)f(has)g(b)q(een)i
(designed)f(to)f(allo)o(w)0 1073 y(the)e(privileges)i(exp)q(ected)g(b)o
(y)e(common)g(sense.)62 1232 y(The)k(resp)q(onsibilit)o(y)i(for)c
(implemen)o(ting)k(this)d(kind)i(of)e(securit)o(y)h(is)f(split)i(b)q
(et)o(w)o(een)e(the)h(Router)f(and)h(the)0 1294 y(T)l(ransp)q(ort)i
(Agen)o(t)h(that)f(deliv)o(ers)i(a)e(message)g(to)h(an)f(address.)40
b(Since)23 b(it)f(is)g(the)g(T)l(ransp)q(ort)f(Agen)o(t)h(that)0
1356 y(m)o(ust)e(enforce)h(the)g(securit)o(y)l(,)h(it)f(needs)g(some)g
(information)g(to)f(guide)h(it.)37 b(Sp)q(eci\014cally)l(,)25
b(for)20 b(eac)o(h)h(address)0 1419 y(it)e(deliv)o(ers)h(to,)f(some)f
(information)h(ab)q(out)f(the)h(\\trust)o(w)o(orth)o(yness")d(of)j
(that)f(address)g(is)i(necessary)f(so)f(the)0 1481 y(T)l(ransp)q(ort)12
b(Agen)o(t)g(can)h(determine)g(whic)o(h)g(privileges)i(it)e(can)f
(assume)g(when)h(deliv)o(ering)i(for)d(that)f(destination.)0
1543 y(This)16 b(information)g(is)g(determined)h(b)o(y)f(the)f(Router,)
h(and)f(passed)h(to)f(the)h(T)l(ransp)q(ort)f(Agen)o(t)g(in)i(the)e
(message)0 1605 y(con)o(trol)j(\014le.)31 b(The)19 b(sp)q(eci\014c)h
(measure)f(of)f(trust)o(w)o(orth)o(yness)f(c)o(hosen)h(b)o(y)h([XX:)f
(the)g(presen)o(t)h(incarnation)g(of)t(])0 1668 y(ZMailer,)c(is)h
(simply)g(a)f(user)h(id)g(\(uid\))f(v)m(alue)i(represen)o(ting)e(the)h
(source)f(of)g(the)g(address.)62 1826 y(When)20 b(a)g(message)f(comes)g
(in)i(from)e(a)g(non-lo)q(cal)i(host,)f(the)g(destination)h(addresses)e
(should)i(ob)o(viously)0 1889 y(ha)o(v)o(e)13 b(no)h(privileges)h(on)e
(the)h(lo)q(cal)h(host)e(\(when)g(mailing)i(to)e(a)g(\014le)i(or)e(a)g
(program\).)18 b(Similarly)l(,)d(common)e(sense)0 1951
y(w)o(ould)g(indicate)h(that)e(lo)q(cally)i(originated)f(mail)h(should)
f(ha)o(v)o(e)g(the)f(same)h(privileges)h(as)e(the)h(originator.)19
b(Based)0 2013 y(on)f(an)g(initial)j(user)d(id)h(assigned)g(from)f(suc)
o(h)g(considerations,)i(the)e(privilege)i(attac)o(hed)e(to)g(eac)o(h)g
(address)g(is)0 2075 y(mo)q(di\014ed)e(b)o(y)e(the)h(attributes)f(of)g
(the)h(v)m(arious)f(alias)i(\014les)f(that)f(con)o(tain)g(expansions)i
(of)e(it.)19 b(The)c(algorithm)g(to)0 2138 y(determine)h(the)f
(appropriate)g(privilege)i(is)f(to)e(use)i(the)f(user)g(id)h(of)f(the)g
(o)o(wner)f(of)h(the)g(alias)h(\014le)g(if)g(and)f(only)g(if)0
2200 y(that)f(\014le)i(is)f(not)g(group)f(or)h(w)o(orld)g(writable,)g
(and)g(the)g(directory)g(con)o(taining)h(the)e(\014le)i(is)g(o)o(wned)f
(b)o(y)f(the)h(same)0 2262 y(user)j(and)g(is)g(lik)o(ewise)h(neither)g
(group)e(nor)g(w)o(orld)h(writable.)28 b(If)17 b(an)o(y)h(of)f(these)h
(conditions)h(do)e(not)g(hold,)i(an)0 2324 y(unprivileged)f(user)d(id)h
(will)h(b)q(e)f(assigned)g(as)f(the)g(privilege)i(lev)o(el)g(of)d(the)i
(address.)62 2483 y(It)22 b(is)f(en)o(tirely)i(up)e(to)g(the)g(T)l
(ransp)q(ort)g(Agen)o(t)g(whether)g(it)h(will)g(honour)g(the)f
(privilege)i(assignmen)o(t)e(of)0 2545 y(an)d(address,)g(and)f(indeed)j
(in)e(man)o(y)g(cases)f(it)h(migh)o(t)g(not)f(mak)o(e)g(sense)h(\(for)f
(example)i(for)e(outb)q(ound)h(mail\).)0 2608 y(Ho)o(w)o(ev)o(er,)12
b(it)h(is)h(strongly)f(recommended)h(that)e(appropriate)h(measures)g
(are)g(tak)o(en)f(when)i(a)f(T)l(ransp)q(ort)f(Agen)o(t)0
2670 y(has)j(no)g(con)o(trol)g(o)o(v)o(er)f(some)h(action)h(that)e(ma)o
(y)h(a\013ect)f(lo)q(cal)i(\014les,)g(securit)o(y)l(,)g(or)e
(resources.)p eop
%%Page: 39 40
39 39 bop 0 -58 a Fi(Router)1768 b(39)62 32 y(The)16
b(describ)q(ed)h(algorithm)e(is)h(far)e(from)h(p)q(erfect.)20
b(The)c(ob)o(vious)f(dangers)g(are:)39 169 y Ff(\017)30
b Fi(The)17 b(grandparen)o(t)f(directories,)h(to)f(the)g(Nth)h(degree,)
g(are)f(ignored,)h(and)f(ma)o(y)g(not)g(b)q(e)h(secure.)25
b(In)17 b(that)90 231 y(case)e(all)h(securit)o(y)g(loses)f(an)o(yw)o(a)
o(y)l(.)39 306 y Ff(\017)30 b Fi(There)13 b(is)g(a)g(windo)o(w)g(of)f
(vulnerabilit)o(y)j(b)q(et)o(w)o(een)e(when)h(the)f(p)q(ermissions)h
(are)e(c)o(hec)o(k)o(ed,)i(and)f(the)g(deliv)o(ery)90
368 y(is)f(actually)h(made.)19 b(This)12 b(is)h(the)e(b)q(est)i
(argumen)o(t)e(I)h(ha)o(v)o(e)f(heard)h(so)g(far)f(for)g(em)o(b)q
(edding)j(the)e(lo)q(cal)h(deliv)o(ery)90 430 y(program)h(\(curren)o
(tly)h(a)g(separate)g(T)l(ransp)q(ort)g(Agen)o(t\))f(in)i(the)f
(Router.)62 569 y(There)f(is)h(also)f(another)f(kind)i(of)f(securit)o
(y)g(that)g(m)o(ust)f(b)q(e)i(addressed.)20 b(That)13
b(is)i(the)f(mec)o(hanism)g(b)o(y)g(whic)o(h)0 631 y(the)i(Router)g(is)
h(told)f(ab)q(out)g(the)g(origin)h(of)f(a)f(message.)22
b(This)17 b(is)g(something)f(that)f(m)o(ust)h(b)q(e)h(p)q(ossible)g
(for)f(the)0 694 y(message)e(receiving)j(programs)c(\(`)p
Fe(/bin/rmail)p Fi(')g(and)i(the)g(SMTP)f(serv)o(er)g(are)h(examples)g
(of)g(these\))f(to)h(sp)q(ecify)0 756 y(to)k(ZMailer.)33
b(The)19 b(Router)h(kno)o(ws)e(of)h(a)g(list)i(of)e(trusted)g(accoun)o
(ts)g(on)g(the)g(system.)32 b(If)20 b(a)f(message)g(\014le)h(is)0
818 y(o)o(wned)e(b)o(y)f(one)h(of)f(these)h(user)g(id's,)g(an)o(y)g
(sender)g(sp)q(eci\014cation)h(within)g(the)f(message)f(\014le)i(will)g
(b)q(e)g(b)q(eliev)o(ed)0 880 y(b)o(y)14 b(ZMailer.)20
b(If)14 b(the)h(message)e(\014le)j(is)e(not)g(o)o(wned)g(b)o(y)g(suc)o
(h)h(a)f(trusted)g(accoun)o(t,)g(the)g(Router)g(will)i(cross-c)o(hec)o
(k)0 943 y(the)f(message)f(\014le)h(o)o(wner)f(with)h(an)o(y)f(stated)g
(`)p Fe(From:)p Fi(')f(or)h(`)p Fe(Sender:)p Fi(')e(address)j(in)g(the)
g(message)f(header,)g(or)g(an)o(y)0 1005 y(origin)19
b(sp)q(eci\014ed)h(in)f(the)f(en)o(v)o(elop)q(e.)30 b(If)18
b(a)g(discrepancy)h(is)g(disco)o(v)o(ered,)g(appropriate)f(action)g
(will)i(b)q(e)f(tak)o(en.)0 1067 y(This)12 b(means)g(that)f(there)g(is)
i(no)e(w)o(a)o(y)g(to)g(forge)g(the)g(origin)i(of)e(a)g(message)g
(without)h(access)g(to)f(a)g(trusted)h(accoun)o(t.)0
1309 y Fd(3.11)36 b(Router)22 b(Con)n(trol)h(Flo)n(w)62
1448 y Fi(The)16 b(follo)o(wing)g(few)g(pages)f(use)h(pseudo-co)q(de)h
(to)e(describ)q(e)j(the)d(algorithm)h(that)f(pro)q(duces)h(a)g(con)o
(trol)f(\014le)0 1510 y(\(con)o(taining)e(deliv)o(ery)h(instructions)g
(and)f(the)f(new)h(message)f(headers\))h(from)f(a)g(message)h(\014le.)
20 b(This)13 b(algorithm)0 1572 y(is)k(implemen)o(ted)h(in)f(a)f(C)g
(function)h(called)h Fe(sequencer\(\))p Fi(,)c(an)i(apt)g(description)i
(of)e(ho)o(w)f(it)i(orc)o(hestrates)e(the)0 1634 y(v)m(arious)h(parts)e
(of)h(the)g(ZMailer)h(Router)f(to)g(implemen)o(t)h(the)f(seman)o(tics)h
(of)f(RF)o(C822)f(message)g(pro)q(cessing.)120 1773 y
Fe(sequencer\()p Fi(message)f(\014le)k(name)p Fe(\))120
1823 y({)181 1873 y Fi(P)o(arse)d(en)o(v)o(elop)q(e)i(and)g(message)f
(header)g(from)g(the)g(message)g(\014le)181 1973 y Fe(if)23
b(\()p Fi(hostname)15 b(has)g(b)q(een)h(set)p Fe(\))241
2022 y Fi(Stamp)f(the)g(message)g(with)h(a)f(trace)f(header)181
2122 y(Determine)h(if)h(message)f(con)o(tains)g(Resen)o(t-*)h(headers)f
(or)g(not)181 2172 y(\(from)f(here)h(on,)g(only)h(pa)o(y)f(atten)o
(tion)f(to)h(the)g(appropriate)g(group)g(of)g(headers\))181
2271 y(Determine)g(if)h(the)f(o)o(wner)g(of)g(the)g(message)g(\014le)h
(is)g(trusted)f(user)181 2371 y Fe(if)23 b(\()p Fi(there)15
b(is)h(no)f(sender)h(sp)q(eci\014ed)h(in)f(the)g(en)o(v)o(elop)q(e)p
Fe(\))25 b({)241 2421 y(if)f(\()p Fi(there)15 b(is)h(a)f(Sender)h(or)e
(F)l(rom)h(\014eld)h(in)g(the)g(message)e(header)302
2471 y Fe(&&)h Fi(the)g(o)o(wner)g(of)f(the)i(message)e(\014le)j(is)e
(trusted)p Fe(\))302 2521 y Fi(Use)g(the)g(header)h(v)m(alue)g(from)f
(it)g(as)g(the)g(message)g(sender)241 2570 y Fe(else)302
2620 y Fi(Generate)g(a)g(sender)g(based)h(on)f(the)g(o)o(wner)g(of)g
(the)g(\014le)241 2670 y Fe(if)24 b(\()p Fi(there)15
b(is)h(still)g(no)f(sender)p Fe(\))p eop
%%Page: 40 41
40 40 bop 0 -58 a Fi(40)1380 b(ZMailer)16 b(Op)q(erations)g(Guide)302
183 y(Generate)f(a)g(sender)g(referring)h(to)e(the)i(lo)q(cal)g(P)o
(ostmaster)181 233 y Fe(})23 b(else)h({)241 283 y(if)g(\()p
Fi(the)15 b(o)o(wner)g(of)f(the)i(message)e(\014le)j(is)e(not)g
(trusted)p Fe(\))24 b({)302 333 y Fi(Sa)o(v)o(e)15 b(message)f(\014le)j
(for)d(P)o(ostmaster)g(to)g(see)302 382 y(Generate)h(a)g(sender)g
(based)h(on)f(the)g(o)o(wner)g(of)g(the)g(\014le)241
432 y Fe(})181 482 y(})181 532 y(if)23 b(\()p Fi(an)15
b(error)g(o)q(ccurred)h(during)g(parsing)f(of)g(the)g(message)g(en)o(v)
o(elop)q(e)p Fe(\))25 b({)241 582 y Fi(Sa)o(v)o(e)15
b(the)g(message)g(\014le)h(for)f(the)g(P)o(ostmaster)e(to)i(see)h(and)f
(correct)241 632 y Fe(return;)181 681 y(})181 731 y(if)23
b(\()p Fi(an)15 b(error)g(o)q(ccurred)h(during)g(parsing)f(of)g(the)g
(message)g(header)p Fe(\))24 b({)241 781 y Fi(Sa)o(v)o(e)15
b(the)g(message)g(\014le)h(for)f(the)g(am)o(usemen)o(t)g(of)g(the)g(P)o
(ostmaster)241 831 y Fe(header_error)22 b(=)i(TRUE;)181
881 y(})f(else)241 930 y(header_error)f(=)i(FALSE;)181
980 y Fi(default)15 b(address)h(deliv)o(ery)g(uid)25
b Fe(=)f(nobody;)181 1030 y(if)f(\()p Fi(the)15 b(o)o(wner)g(of)g(the)g
(message)g(\014le)h(is)g(trusted)p Fe(\))23 b({)241 1080
y(if)h(\()p Fi(an)15 b(incoming)h(c)o(hannel)h(is)e(sp)q(eci\014ed)j
(in)e(the)f(en)o(v)o(elop)q(e)p Fe(\))302 1130 y Fi(set)g(the)g
(trusted)g(c)o(hannel)h(origin)g(accordingly)241 1180
y Fe(if)24 b(\()p Fi(an)15 b(incoming)h(host)f(is)h(sp)q(eci\014ed)h
(in)f(the)f(en)o(v)o(elop)q(e)p Fe(\))302 1229 y Fi(set)g(the)g
(trusted)g(host)g(origin)h(accordingly)241 1279 y Fe(if)24
b(\()p Fi(an)15 b(incoming)h(user)g(is)f(sp)q(eci\014ed)j(in)e(the)f
(en)o(v)o(elop)q(e)p Fe(\))302 1329 y Fi(set)g(the)g(trusted)g(user)g
(origin)h(accordingly)241 1379 y Fe(if)24 b(\()p Fi(an)o(y)15
b(elemen)o(t)g(of)g(the)h(trusted)e(origin)i(triple)h(is)e(n)o(ull)p
Fe(\))26 b({)302 1429 y Fi(set)15 b(the)g(resolv)o(ed)h(origin)g
(triple)g(b)o(y)362 1478 y(routing)g(the)f(sender)h(address)241
1528 y Fe(})241 1578 y(if)24 b(\()p Fi(the)15 b(message)g(origin)h(is)f
(a)g(lo)q(cal)i(user)p Fe(\))302 1628 y Fi(default)f(address)f(deliv)o
(ery)h(uid)25 b Fe(=)f(uid)g(of)f(that)h(user;)181 1678
y(})f(else)h({)241 1727 y Fi(/*)15 b(W)l(e)g(kno)o(w)g(sender)h(is)f
(lo)q(cal)i(*/)241 1777 y(default)f(address)f(deliv)o(ery)i(uid)25
b Fe(=)f(uid)f(of)h(owner)f(of)g(message)g(file;)241
1827 y(if)h(\()p Fi(message)14 b(header)i(con)o(tains)f(a)g(Sender,)h
(but)f(no)g(F)l(rom)g(\014eld)p Fe(\))25 b({)302 1877
y Fi(Rename)16 b(the)f(\\Sender")h(\014eld)g(in)o(to)f(a)g(\\F)l(rom")f
(\014eld)241 1927 y Fe(})241 1977 y(if)24 b(\()p Fi(the)15
b(message)g(header)g(sp)q(eci\014es)i(a)e(Sender)p Fe(\))25
b({)302 2026 y(if)e(\()p Fi(the)16 b(sp)q(eci\014ed)h(Sender)f(address)
f(do)q(es)h(not)f(corresp)q(ond)362 2076 y(to)g(the)g(resolv)o(ed)h
(origin)g(of)f(the)g(message)p Fe(\))23 b({)362 2126
y Fi(Rename)16 b(the)g(\\Sender")f(\014eld)i(a)e(\\F)l(ak)o(e-Sender")g
(\014eld)362 2176 y(Set)h(a)f(\015ag)f(to)h(generate)g(a)g(Sender)h
(header)302 2226 y Fe(})241 2275 y(})24 b(else)f(if)h(\()p
Fi(the)15 b(message)g(header)g(only)h(sp)q(eci\014es)h(a)e(F)l(rom)f
(\014eld)p Fe(\))25 b({)302 2325 y(if)e(\()p Fi(the)16
b(sp)q(eci\014ed)h(F)l(rom)d(address)i(do)q(es)f(not)g(corresp)q(ond)
362 2375 y(to)g(the)g(resolv)o(ed)h(origin)g(of)f(the)g(message)p
Fe(\))23 b({)362 2425 y Fi(Set)16 b(a)f(\015ag)f(to)h(generate)g(a)g
(Sender)h(header)302 2475 y Fe(})241 2524 y(})241 2574
y(if)24 b(\()p Fi(\015ag)15 b(is)g(set)g(that)g(w)o(e)g(need)h(to)e
(generate)h(a)g(Sender)h(header)p Fe(\))302 2624 y Fi(Do)e(so)h(based)h
(on)f(the)g(o)o(wner)g(of)g(the)g(message)g(\014le)p
eop
%%Page: 41 42
41 41 bop 0 -58 a Fi(Router)1768 b(41)181 183 y Fe(})181
233 y(if)23 b(\()p Fi(default)16 b(address)f(deliv)o(ery)i(uid)f(!=)f
(nob)q(o)q(dy)241 283 y Fe(&&)g Fi(there)g(is)h(no)f(F)l(rom)g(message)
f(header)p Fe(\))25 b({)241 333 y Fi(Generate)15 b(one)g(based)h(on)f
(the)g(en)o(v)o(elop)q(e)i(origin)f(address)f(information)181
382 y Fe(})181 432 y Fi(/*)f(Recipien)o(t)k(determination)e(*/)181
482 y Fe(if)23 b(\()p Fi(there)15 b(are)g(no)g(recipien)o(ts)i(sp)q
(eci\014ed)g(in)f(the)g(en)o(v)o(elop)q(e)p Fe(\))25
b({)241 532 y(if)f(\()p Fi(header)p Fe(_)p Fi(error)p
Fe(\))f({)302 582 y Fi(Reject)16 b(the)f(message)g(with)g(a)g(\\bad)g
(header")g(error)302 632 y Fe(return;)241 681 y(})241
731 y Fi(Add)h(all)g(the)f(message)g(header)h(recipien)o(t)g(addresses)
g(\(from)e(T)l(o,)g(Cc,)302 781 y(and)h(Bcc)h(headers)p
Fe(\))f Fi(to)g(the)g(message)g(en)o(v)o(elop)q(e)h(recipien)o(t)h
(list)241 831 y Fe(if)24 b(\()p Fi(there)15 b(are)g(still)h(no)g
(recipien)o(ts)g(sp)q(eci\014ed)i(in)e(the)f(en)o(v)o(elop)q(e)p
Fe(\))25 b({)302 881 y Fi(Reject)16 b(the)f(message)g(with)g(a)g(\\no)g
(recipien)o(ts")h(error)302 930 y Fe(return;)241 980
y(})181 1030 y(})181 1080 y(if)23 b(\()p Fi(header)p
Fe(_)p Fi(error)p Fe(\))g({)241 1130 y Fi(Return)16 b(the)f(message)g
(with)h(a)e(\\bad)i(header")f(w)o(arning)241 1180 y(Add)h(Illegal-Ob)s
(ject)h(w)o(arning)e(headers)h(to)e(the)i(message)f(header)181
1229 y Fe(})181 1279 y(if)23 b(\()p Fi(there)15 b(is)h(no)f(T)l(o)g
(message)g(header)p Fe(\))24 b({)241 1329 y Fi(/*)15
b(Insert)g(the)h(T)l(o:)e(header)i(lines)g(*/)241 1379
y(Add)g(the)f(list)h(of)f(message)g(recipien)o(ts)h(from)f(the)g
(message)g(en)o(v)o(elop)q(e)302 1429 y(in)h(the)f(message)g(header)g
(in)h(T)l(o)f(headers)181 1478 y Fe(})120 1528 y(#ifdef)23
b(notdef)181 1578 y Fi(rewrite)15 b(all)h(addresses)f(in)h(the)g
(message)e(according)i(to)f(the)g(incoming-rewriting)241
1628 y(rules)h(for)f(the)g(originating)h(c)o(hannel.)120
1678 y Fe(#endif)23 b(notdef)181 1727 y(if)g(\()p Fi(hostname)15
b(has)g(b)q(een)h(set)p Fe(\))24 b({)241 1777 y Fi(/*)15
b(Mak)o(e)f(sure)i(Message-Id)f(exists,)g(for)g(lo)q(op)g(con)o(trol)g
(*/)241 1827 y Fe(if)24 b(\()p Fi(there)15 b(is)h(no)f(Message-Id)g
(message)g(header)p Fe(\))302 1877 y Fi(Generate)g(a)g(message)f(id)i
(and)g(add)f(it)h(to)e(the)h(message)g(header)241 1927
y Fe(else)302 1977 y Fi(extract)f(a)h(message)g(id)h(from)e(the)i
(existing)g(header)241 2026 y(Log)f(the)h(message)e(id)181
2076 y Fe(})23 b(else)241 2126 y Fi(there)15 b(is)h(no)f(message)g(id)
181 2176 y(/*)f(Route)i(recipien)o(t)g(addresses)g(*/)181
2226 y Fe(for)23 b(\()p Fi(ev)o(ery)15 b(recipien)o(t)i(address)e(in)h
(the)f(message)g(en)o(v)o(elop)q(e)p Fe(\))241 2275 y
Fi(deliv)o(ery)i(privilege)g(of)e(address)g(=)h(default)f(address)h
(deliv)o(ery)g(uid)181 2325 y Fe(for)23 b(\()p Fi(ev)o(ery)15
b(recipien)o(t)i(address)e(in)h(the)f(message)g(en)o(v)o(elop)q(e)p
Fe(\))25 b({)241 2375 y(router\(\))60 b Fi(/*)14 b(Route)i(the)f
(address)g(*/)241 2425 y Fe(if)24 b(\()p Fi(the)15 b(returned)h(triple)
g(is)g(n)o(ull)p Fe(\))302 2475 y(continue;)59 b Fi(/*)15
b(ignore)g(this)h(recipien)o(t)h(*/)241 2524 y(/*)e(Rewrite)h(this)f
(en)o(v)o(elop)q(e)i(address)e(*/)241 2574 y Fe(crossbar\(source)22
b(triple,)h(recipient)g(triple\))241 2624 y(if)h(\()p
Fi(the)15 b(return)g(v)m(alue)i(from)d Fe(crossbar\(\))g
Fi(is)h(n)o(ull)p Fe(\))p eop
%%Page: 42 43
42 42 bop 0 -58 a Fi(42)1380 b(ZMailer)16 b(Op)q(erations)g(Guide)302
183 y Fe(continue;)59 b Fi(/*)15 b(ignore)g(this)h(recipien)o(t)h(*/)
241 233 y Fe(else)24 b(if)f(\()p Fi(the)15 b(message)g(header)h
(rewriting)f(function)h(name)g(is)f(n)o(ull)p Fe(\))25
b({)302 283 y Fi(Sa)o(v)o(e)15 b(the)g(message)g(for)f(the)h(P)o
(ostmaster)f(to)g(see)302 333 y Fe(return;)241 382 y(})241
432 y Fi(/*)h(Don't)f(send)i(message)f(to)f(the)h(same)g(address)g(t)o
(wice)h(*/)241 482 y Fe(if)24 b(\()p Fi(w)o(e)15 b(ha)o(v)o(e)f
(already)i(seen)g(this)f(destination)h(triple)p Fe(\))25
b({)302 532 y(if)e(\()p Fi(the)16 b(message)e(is)i(going)f(to)g(b)q(e)h
(sen)o(t)f(to)f(that)h(destination)p Fe(\))362 582 y(continue;)60
b Fi(/*)14 b(suppress)i(duplicates)h(*/)241 632 y Fe(})241
681 y(if)24 b(\()p Fi(this)15 b(destination)h(triple)h(has)e(not)g(b)q
(een)h(alias)g(expanded)302 731 y Fe(&&)f Fi(it)g(represen)o(ts)g(a)g
(lo)q(cal)h(destination)302 781 y Fe(&&)f Fi(it)g(has)g(an)g(alias)h
(expansion)p Fe(\))25 b({)302 831 y Fi(Add)16 b(the)f(list)h(of)f
(expanded)h(addresses)f(to)g(the)g(list)h(of)362 881
y(addresses)g(pro)q(cessed)g(b)o(y)f(this)g(lo)q(op,)h(eac)o(h)f(with)
362 930 y(a)g(deliv)o(ery)i(privilege)g(determined)g(b)o(y)e(the)g
(source)362 980 y(of)g(the)g(alias)h(expansion)302 1030
y Fe(continue;)59 b Fi(/*)15 b(ignore)g(this)h(address)f(*/)241
1080 y Fe(})241 1130 y Fi(Flag)g(that)g(this)g(destination)h(triple)h
(will)g(b)q(e)e(sen)o(t)g(out)241 1180 y(Add)h(the)f(address)g
(destination)i(triple)f(to)e(a)h(list)h(for)f(eac)o(h)g(c)o(hannel)241
1229 y Fe(if)24 b(\()p Fi(the)15 b(message)g(header)g(address)h
(rewriting)f(function)h(name)302 1279 y(is)g(new)f(for)g(this)g
(message)p Fe(\))23 b({)302 1329 y Fi(Add)16 b(the)f(name)g(to)g(a)f
(collection)k(of)c(the)i(kinds)g(of)f(message)362 1379
y(header)h(address)f(rewritings)h(that)e(need)i(b)q(e)g(done)241
1429 y Fe(})181 1478 y(})181 1528 y(for)23 b(\()p Fi(ev)o(ery)15
b(kind)h(of)f(message)g(header)g(address)h(rewriting)f(w)o(e)g(need)h
(to)f(do)p Fe(\))24 b({)241 1578 y Fi(Call)16 b(the)f(indicated)i
(function)f(with)g(ev)o(ery)f(address)g(in)h(the)g(header)241
1628 y(Store)f(the)g(transformed)g(headers)g(for)g(later)g(use)181
1678 y Fe(})181 1727 y(if)23 b(\()p Fi(there)15 b(is)h(no)f(Date)g
(message)f(header)p Fe(\))241 1777 y Fi(Generate)h(one)g(based)h(on)f
(the)g(mo)q(di\014cation)i(time)e(of)g(the)g(message)g(\014le)181
1827 y(/*)f(Emit)h(sp)q(eci\014cation)j(to)c(the)h(transp)q(ort)g
(system)f(*/)181 1877 y Fe(for)23 b(\()p Fi(ev)o(ery)15
b(recipien)o(t)i(address)p Fe(\))24 b({)241 1927 y(if)g(\()p
Fi(con)o(trol)15 b(\014le)h(has)f(not)g(b)q(een)h(created)p
Fe(\))24 b({)302 1977 y Fi(Create)14 b(message)h(con)o(trol)g(\014le)
302 2026 y(W)l(rite)g(a)g(standard)g(pream)o(ble)h(consisting)g(of)362
2076 y(the)g(corresp)q(onding)g(message)f(\014le)h(name)362
2126 y(the)g(o\013set)e(of)h(the)g(start)f(of)h(the)g(message)g(b)q(o)q
(dy)362 2176 y(the)h(message)e(id)i(\(if)g(an)o(y\))e(for)h(log)g(iden)
o(ti\014cation)302 2226 y Fe(if)23 b(\()p Fi(this)16
b(message)f(did)h(not)f(come)g(from)f(the)i(error)e(c)o(hannel)p
Fe(\))362 2275 y Fi(W)l(rite)i(an)f(error)f(return)i(address)241
2325 y Fe(})241 2375 y(if)24 b(\()p Fi(the)15 b(en)o(v)o(elop)q(e)h
(sender)g(address)f(form)g(for)f(this)i(recipien)o(t)302
2425 y(is)g(di\013eren)o(t)f(from)f(the)i(previous)g(sender)f(address)h
(form)p Fe(\))302 2475 y Fi(W)l(rite)f(the)g(sender)h(address)g(origin)
f(triple)241 2524 y(W)l(rite)h(the)f(recipien)o(t)i(address)e
(destination)h(triple,)g(and)f(the)302 2574 y(corresp)q(onding)h
(address)f(deliv)o(ery)i(privilege)241 2624 y Fe(if)24
b(\()p Fi(message)14 b(header)i(for)f(this)g(address)g(is)h(di\013eren)
o(t)g(than)p eop
%%Page: 43 44
43 43 bop 0 -58 a Fi(Router)1768 b(43)302 183 y(the)15
b(message)g(header)g(for)g(the)g(next)h(recipien)o(t)g(address)p
Fe(\))24 b({)302 233 y Fi(W)l(rite)15 b(the)g(complete)h(message)f
(header)h(for)e(this)i(destination,)362 283 y(as)f(reconstructed)h
(from)e(the)h(original)i(message)362 333 y(header)f(and)f(the)h(stored)
e(headers)i(transformed)e(b)o(y)362 382 y(message)h(header)h(address)f
(rewriting)241 432 y Fe(})181 482 y(})181 532 y(if)23
b(\()p Fi(w)o(e)15 b(created)g(a)g(message)g(con)o(trol)g(\014le)p
Fe(\))25 b({)241 582 y Fi(relink)17 b(the)e(message)g(\014le)h(itself)g
(to)f(the)g(`)p Fe(QUEUE)p Fi(')f(directory)241 632 y(relink)j(the)e
(con)o(trol)g(\014le)h(to)f(the)g(`)p Fe(TRANSPORT)p
Fi(')e(directory)181 681 y Fe(})181 731 y(return;)120
781 y(})0 1001 y Fd(3.12)36 b(Logging)62 1138 y Fi(When)16
b(the)g(Router)g(starts)e(up)j(as)e(a)g(daemon,)h(it)g(will)h(attac)o
(h)e(its)h(standard)f(output)g(and)h(standard)g(error)0
1201 y(streams)g(to)g(a)g(log)h(\014le.)25 b(All)18 b(messages)e(from)g
(the)h(Router)g(will)h(app)q(ear)f(on)g(one)f(of)h(these)g(streams,)e
(and)i(will)0 1263 y(therefore)g(sho)o(w)g(up)g(in)h(a)f(cen)o(tral)g
(lo)q(cation)h(for)f(p)q(erusal)h(b)o(y)f(the)h(P)o(ostmaster)d(or)i
(other)f(in)o(terested)i(parties.)0 1325 y(Usually)h(only)g(abnormal)f
(o)q(ccurrences)h(will)h(b)q(e)f(logged)f(in)h(this)f(manner,)h(but)f
(an)o(y)g(messages)f(prin)o(ted)i(will)0 1387 y(sho)o(w)14
b(up)h(here.)20 b(In)15 b(particular,)g(man)o(y)f(of)g(the)g(comp)q
(onen)o(ts)h(of)f(the)g(Router)h(con)o(tain)f(trace)g(prin)o(t)h
(statemen)o(ts)0 1450 y(that)c(can)h(b)q(e)h(enabled)g(at)e(run-time.)
20 b(In)12 b(fact,)g(in)o(teractiv)o(e)g(debugging)h(of)e(the)h
(con\014guration)g(\014le)h(is)g(p)q(erformed)0 1512
y(this)k(w)o(a)o(y)l(,)g(since)h(when)f(the)g(Router)g(is)h(run)f(in)h
(the)f(foreground,)f(the)h(standard)g(output)f(and)i(error)e(streams)0
1574 y(are)g(attac)o(hed)f(to)g(the)h(terminal)h(in)g(the)f(normal)g
(fashion.)23 b(Th)o(us,)15 b(all)i(messages)f(will)h(app)q(ear)f(in)h
(fron)o(t)e(of)h(the)0 1636 y(p)q(erson)g(testing)f(the)g
(con\014guration.)62 1773 y(The)g(tracing)g(functionalit)o(y)h(is)f
(con)o(trolled)g(either)h(on)e(the)h(command)g(line,)h(or)e(b)o(y)h
(calling)h(the)f Fe(trace)f Fi(and)0 1836 y Fe(untrace)j
Fi(functions)i(from)f(within)h(the)g(con\014guration)f(\014le,)i(or)e
(in)o(teractiv)o(ely)l(.)30 b(The)18 b(in)o(teractiv)o(e)h(b)q(eha)o
(viour)0 1898 y(of)d(the)g(Router,)h(is)g(to)e(read)h(and)h(execute)g
(its)g(con\014guration)f(\014le)h(\(as)f(normal\),)g(and)g(then)h(sit)g
(in)g(an)f(in\014nite)0 1960 y(lo)q(op)e(reading)f(commands)g(from)g
(its)g(standard)g(input)h(stream.)19 b(This)13 b(allo)o(ws)h(a)f(p)q
(erson)g(executing)i(the)e(Router)0 2022 y(in)o(teractiv)o(ely)l(,)j
(to)e(execute)h(arbitrary)f(statemen)o(ts)f(in)j(the)e(con\014guration)
h(\014le)h(programming)e(language.)20 b(The)0 2085 y(statemen)o(ts)c(t)
o(yp)q(ed)i(in)h(are)e(bu\013ered)h(un)o(til)g(an)g(End)g(Of)f(File)i
(indication,)h(and)d(then)h(executed)h(b)o(y)e(the)h(con-)0
2147 y(\014guration)j(\014le)h(in)o(terpreter.)37 b(This)22
b(cycle)g(is)g(rep)q(eated)f(un)o(til)h(a)f(syn)o(tax)f(error)g(o)q
(ccurs,)j(or)d(the)h(pro)q(cess)g(is)0 2209 y(in)o(terrupted.)27
b([XX:)17 b(y)o(es,)g(this)h(is)f(a)g(v)o(ery)g(rough)g(mo)q(de)h(of)f
(in)o(teraction.)26 b(do)18 b(y)o(ou)f(ha)o(v)o(e)f(an)o(y)h
(suggestions)h(for)0 2271 y(impro)o(ving)e(it?)21 b(])62
2408 y(The)14 b Fe(trace)f Fi(and)h Fe(untrace)f Fi(functions)i(tak)o
(e)e(one)g(or)h(more)f(w)o(ords)g(as)g(argumen)o(ts,)g(and)h(turn)g(on)
g(\(o\013)t(\))d(\015ags)0 2471 y(that)k(enable)i(tracing)e(in)h(a)g
(comp)q(onen)o(t)f(of)g(the)h(Router)g(corresp)q(onding)g(to)f(eac)o(h)
h(w)o(ord.)k(The)c(curren)o(t)f(list)h(of)0 2533 y(w)o(ords,)e(and)h
(the)h(corresp)q(onding)g(actions)f(traced,)g(are:)0
2670 y Fe(alias)120 b Fi(alias)16 b(expansion)p eop
%%Page: 44 45
44 44 bop 0 -58 a Fi(44)1380 b(ZMailer)16 b(Op)q(erations)g(Guide)0
183 y Fe(all)168 b Fi(turns)15 b(all)h(trace)f(\015ags)g(on)0
266 y Fe(assign)96 b Fi(v)m(ariable)17 b(assignmen)o(t)0
348 y Fe(bind)144 b Fi(the)15 b(BIND)h(nameserv)o(er)f(resp)q(onses)0
431 y Fe(compare)72 b Fi(case)15 b(lab)q(el)i(pattern)e(matc)o(hing)0
513 y Fe(db)192 b Fi(database)15 b(lo)q(okups)0 596 y
Fe(final)120 b Fi(prin)o(t)16 b(message)e(information)i(after)e
(sequencer)i(returns)0 678 y Fe(functions)240 740 y Fi(function)g
(calls)g(and)g(returns)0 823 y Fe(matched)72 b Fi(successful)17
b(case)e(lab)q(el)i(matc)o(hes)0 905 y Fe(memory)96 b
Fi(memory)15 b(allo)q(cation)h(statistics)0 988 y Fe(off)168
b Fi(turns)15 b(all)h(trace)f(\015ags)g(o\013)0 1070
y Fe(on)192 b Fi(same)15 b(as)g Fe(functions)0 1153 y(parsetree)240
1215 y Fi(the)g(con\014guration)h(\014le)g(parse)f(tree)0
1297 y Fe(regexp)96 b Fi(regular)15 b(expression)h(execution)0
1380 y Fe(resolv)96 b Fi(the)15 b(BIND)h(resolv)o(er)f(library)h
Fe(RES_DEBUG)e Fi(option)0 1462 y Fe(rewrite)72 b Fi(message)15
b(header)g(rewriting)0 1545 y Fe(router)96 b Fi(en)o(v)o(elop)q(e)16
b(recipien)o(t)h(address)e(routing)0 1627 y Fe(sequencer)240
1689 y Fi(con)o(trol)g(\015o)o(w)g(in)h(the)f(sequencer)h(function)62
1834 y(In)j(addition)g(to)f(this,)h(eac)o(h)f(message)g(pro)q(cessed)g
(is)h(logged)f(via)h(the)f(standard)g(system)f(logging)i(facilit)o(y)0
1896 y(\(syslog\))f(if)i(it)g(is)f(a)o(v)m(ailable,)j(and)d(when)h(not)
f(esp)q(ecially)j(disabled)f(at)d(the)i(router)e(in)o(v)o(o)q(cation.)
33 b(\(If)19 b(normal)0 1959 y(message)c(logging)g(to)g(syslog)g(is)h
(disabled,)g(imp)q(ortan)o(t)f(error)g(rep)q(orting)g(messages)g(are)g
(still)h(logged.\))0 2236 y Fd(3.12.1)36 b(Address)23
b(T)-6 b(esting)62 2381 y Fi(F)l(or)15 b(example,)g(if)h(y)o(ou)f(wish)
h(to)e(see)i(ho)o(w)f(an)g(address)g(is)h(routed,)e(y)o(ou)h(can)h(run)
f(the)g(command:)120 2525 y Fe(echo)23 b("trace)g(on)h(;)g(router)f
($address")f(|)i(router)f(-I)0 2670 y Fi(whic)o(h,)16
b(with)f Fe($address)f Fi(b)q(ound)i(to)f(`)p Fe(bond)p
Fh(@)p Fe(sis.mod.uk)p Fi(')e(migh)o(t)i(pro)q(duce)h(something)f(lik)o
(e:)p eop
%%Page: 45 46
45 45 bop 0 -58 a Fi(Router)1768 b(45)120 119 y Fe(GNU)23
b(Mailer)g(router)h(\(Zmailer)e(alpha.1)h(#0:)h(Sun)f(Jan)h(31)f
(17:38:53)g(EST)g(1988\))215 169 y(rayan)p Fh(@)p Fe
(ephemeral.ai:/usr/src/zmail)o(er/rout)o(er)120 218 y(Copyright)g(1988)
g(Rayan)g(S.)h(Zachariassen)120 318 y(router:)f(parameters:)f('bond)p
Fh(@)p Fe(sis.mod.uk')215 368 y(echo:)i(parameters:)e('router:')h
('bond)p Fh(@)p Fe(sis.mod.uk')120 418 y(router:)g(bond)p
Fh(@)p Fe(sis.mod.uk)215 467 y(echo:)h(returns:)e('')215
517 y(canonicalize:)h(parameters:)f('bond)p Fh(@)p Fe(sis.mod.uk')311
567 y(focus:)h(parameters:)f('bond<)p Fh(@)p Fe(sis.mod.uk>')406
617 y([:)i(parameters:)e('sis.mod.uk')h(']')406 667 y([:)h(returns:)f
('true')311 716 y(focus:)g(returns:)g('bond<)p Fh(@)p
Fe(sis.mod.uk>')215 766 y(canonicalize:)g(returns:)f('bond<)p
Fh(@)p Fe(sis.mod.uk>')215 816 y([:)i(parameters:)e('')i(']')215
866 y([:)g(returns:)f('')215 916 y([:)h(parameters:)e('sis.mod.uk')h
('==')g('ephemeral.ai.toronto.edu')d(']')215 966 y([:)k(returns:)f('')
215 1015 y([:)h(parameters:)e('sis.mod.uk')h(']')215
1065 y([:)h(returns:)f('true')120 1115 y(router:)g(returns:)g('smtp')g
('sis.mod.uk')f('bond)p Fh(@)p Fe(sis.mod.uk')p eop
%%Page: 46 47
46 46 bop 0 -58 a Fi(46)1380 b(ZMailer)16 b(Op)q(erations)g(Guide)0
183 y Fg(4.)41 b(Sc)n(heduler)62 376 y Fi(The)15 b(Sc)o(heduler)h
(complemen)o(ts)e(the)h(Router)f(as)g(the)g(other)g(ma)s(jor)f(pro)q
(cess)h(in)h(ZMailer.)20 b(The)15 b(decisions)h(it)0
438 y(mak)o(es)11 b(in)o(v)o(olv)o(e)h(ho)o(w)f(to)g(manage)g(and)h
(time)g(deliv)o(ery)h(of)e(messages)g(to)g(their)h(destination,)h(and)e
(its)h(name)g(arises)0 500 y(from)j(this)i(sc)o(heduling)h(function.)24
b(While)17 b(the)g(Router)f(in)o(terprets)g(message)g(\014les,)h(the)f
(Sc)o(heduler)i(in)o(terprets)0 562 y(only)e(the)f(con)o(trol)g
(\014les)h(corresp)q(onding)g(to)f(the)g(message)g(\014les.)62
700 y(The)20 b(con)o(trol)g(\014les)h(are)e(usually)j(pro)q(duced)f(b)o
(y)e(the)h(Router,)h(and)f(app)q(ear)g(in)h(a)e(directory)h(scanned)h
(b)o(y)0 763 y(the)e(Sc)o(heduler)h(daemon.)30 b(Whenev)o(er)19
b(a)f(new)h(con)o(trol)g(\014le)g(do)q(es)g(app)q(ears)g(in)g(that)f
(directory)l(,)i(its)f(con)o(ten)o(ts)0 825 y(are)d(used)g(to)f(up)q
(date)i(a)e(data)g(structure,)h(main)o(tained)g(b)o(y)g(the)g(Sc)o
(heduler,)h(that)f(describ)q(es)h(whic)o(h)g(addresses)0
887 y(in)h(whic)o(h)f(messages)g(are)f(destined)j(for)d(whic)o(h)i
(hosts)e(and)h(c)o(hannels.)26 b(The)17 b(information)g(stored)g(along)
g(with)0 950 y(eac)o(h)h(c)o(hannel/host)g(com)o(bination)g(is)g(a)g
(set)f(of)g(b)o(yte)h(o\013sets)e(in)o(to)i(the)f(con)o(trol)h(\014le,)
h(giving)f(the)g(lo)q(cation)g(of)0 1012 y(address)d(sp)q
(eci\014cations)j(corresp)q(onding)e(to)e(that)h(com)o(bination.)21
b(This)16 b(information)f(can)h(later)f(b)q(e)h(passed)g(to)0
1074 y(a)f(transp)q(ort/deliv)o(ery)g(program,)f(and)h(is)h(up)q(dated)
g(based)g(on)f(feedbac)o(k)g(from)g(these)g(programs.)62
1212 y(A)e(T)l(ransp)q(ort)f(Agen)o(t)g(is)i(a)e(program)f(that)h(the)h
(Sc)o(heduler)h(executes)g(to)e(deliv)o(er)i(messages.)k(The)13
b(Sc)o(heduler)0 1274 y(determines)f(the)g(corresp)q(ondence)h(b)q(et)o
(w)o(een)e(c)o(hannels,)i(hosts,)f(or)f(c)o(hannel/host)h
(destinations,)g(and)g(a)f(sp)q(eci\014c)0 1337 y(T)l(ransp)q(ort)18
b(Agen)o(t,)g(b)o(y)h(in)o(terpreting)g(a)f(simple)i(table)f(from)e(a)i
(con\014guration)f(\014le.)31 b(The)18 b(T)l(ransp)q(ort)g(Agen)o(t)0
1399 y(pro)q(cess)f(is)g(told)f(whic)o(h)i(con)o(trol)e(\014les)h(it)g
(should)g(insp)q(ect)h(for)e(w)o(ork,)f(and)i(tells)h(the)e(Sc)o
(heduler)i(the)f(status)e(of)0 1461 y(the)i(destination)g(addresses)g
(it)g(tried)h(to)e(pro)q(cess.)24 b(The)17 b(Sc)o(heduler)i(then)e(up)q
(dates)g(the)g(mo)q(del)h(it)f(main)o(tains)0 1523 y(of)h(w)o(ork)g
(that)g(needs)i(to)e(b)q(e)h(done,)h(and)f(will)h(ev)o(en)o(tually)g
(remo)o(v)o(e)e(the)h(last)g(link)h(to)e(a)h(con)o(trol)f(\014le)i(and)
f(its)0 1586 y(corresp)q(onding)d(message)f(\014le.)21
b(A)o(t)14 b(that)h(p)q(oin)o(t,)g(ZMailer)h(has)f(done)h(its)f(job)g
(with)g(regard)g(to)g(eac)o(h)g(message.)62 1724 y(Note)22
b(that)f(the)h(comm)o(unication)g(b)q(et)o(w)o(een)g(the)g(Sc)o
(heduler)i(and)e(other)f(programs)g(is)h(mostly)g(via)g(the)0
1786 y(message)14 b(con)o(trol)g(\014le,)h(instead)f(of)g(b)o(y)g
(direct)h(in)o(teraction)g(\(when)f(the)g(Sc)o(heduler)i(con)o(v)o
(erses)e(with)h(T)l(ransp)q(ort)0 1848 y(Agen)o(ts\).)0
2082 y Fd(4.1)35 b(Message)23 b(Con)n(trol)g(File)62
2221 y Fi(A)14 b(message)f(con)o(trol)g(\014le)h(is)g(a)f(\014le)h
(created)g(b)o(y)f(the)g(Router)h(to)e(con)o(tain)i(all)g(the)g
(information)f(necessary)h(for)0 2283 y(deliv)o(ery)h(of)e(a)h(message)
f(submitted)h(in)h(a)e(corresp)q(onding)i(message)e(\014le.)20
b(It)14 b(is)g(in)o(terpreted)g(b)o(y)g(the)g(Sc)o(heduler,)0
2345 y(whic)o(h)20 b(needs)g(to)e(kno)o(w)h(at)f(all)i(times)f(whic)o
(h)h(messages)f(are)g(p)q(ending)h(to)f(go)f(where,)i(and)f(ho)o(w.)31
b(It)19 b(is)h(also)0 2407 y(in)o(terpreted)j(b)o(y)f(one)h(or)f(more)f
(T)l(ransp)q(ort)h(Agen)o(ts,)h(p)q(ossibly)h(concurren)o(tly)l(,)h
(that)d(extract)f(the)i(deliv)o(ery)0 2470 y(information)15
b(relev)m(an)o(t)h(to)f(their)g(purp)q(ose.)62 2608 y(The)f
(concurrency)h(asp)q(ect)f(means)f(that)g(the)h(T)l(ransp)q(ort)f(Agen)
o(ts)g(m)o(ust)h(co)q(op)q(erate)f(on)h(a)f(lo)q(c)o(king)i(proto)q
(col)0 2670 y(to)j(ensure)h(that)e(deliv)o(ery)j(to)e(a)g(particular)g
(destination)i(is)f(attempted)e(b)o(y)i(only)f(one)h(T)l(ransp)q(ort)f
(Agen)o(t)g(at)p eop
%%Page: 47 48
47 47 bop 0 -58 a Fi(Sc)o(heduler)1716 b(47)0 183 y(a)17
b(time,)h(and)f(a)g(status)g(proto)q(col)g(to)g(ensure)h(unique)h
(success)e(or)g(failure)i(of)e(deliv)o(ery)h(for)f(eac)o(h)g
(destination.)0 246 y(There)22 b(are)f(p)q(oten)o(tially)i(man)o(y)e(w)
o(a)o(ys)f(to)h(implemen)o(t)i(suc)o(h)e(proto)q(cols,)i(but,)g(in)f
(the)g(spirit)g(of)f(simplicit)o(y)l(,)0 308 y(ZMailer)c(uses)f(a)g
(con)o(trol)h(\014le)g(as)f(a)g(form)g(of)g(shared)g(memory)l(.)23
b(Sp)q(eci\014c)c(lo)q(cations)e(within)g(eac)o(h)g(con)o(trol)f
(\014le)0 370 y(are)d(reserv)o(ed)g(for)f(\015ags)h(that)f(indicate)j
(a)e(sp)q(eci\014c)h(state)f(for)f(their)i(asso)q(ciated)f(destination)
h(address.)19 b(The)13 b(rest)0 432 y(is)j(tak)o(en)e(care)i(of)e(b)o
(y)h(the)h(I/O)f(seman)o(tics)h(when)f(m)o(ultiple)i(pro)q(cesses)f(up)
q(date)g(the)f(same)g(\014le.)62 658 y(Apart)20 b(from)g(necessary)h
(en)o(v)o(elop)q(e)h(and)f(con)o(trol)f(information,)i(a)e(con)o(trol)g
(\014le)i(also)e(con)o(tains)h(the)g(new)0 720 y(message)16
b(header)h(for)e(the)i(message,)e(whic)o(h)i(con)o(tains)g(the)f
(header)h(addresses)f(as)g(rewritten)h(b)o(y)f(the)g(Router.)0
782 y(Since)22 b(a)f(message)f(ma)o(y)g(ha)o(v)o(e)g(sev)o(eral)h
(destinations)h(with)f(incompatible)i(address)d(format)g(requiremen)o
(ts,)0 844 y(there)g(ma)o(y)g(b)q(e)h(sev)o(eral)f(corresp)q(onding)h
(groups)f(of)g(message)g(headers.)35 b(This)21 b(will)h(b)q(e)f
(illustrated)h(b)o(y)e(the)0 907 y(sample)c(con)o(trol)f(\014le)h(sho)o
(wn)f(in)h(the)f(follo)o(wing)h(subsection.)0 1908 y
Fd(4.1.1)36 b(F)-6 b(ormat)62 2133 y Fi(A)18 b(con)o(trol)f(\014le)i
(consists)f(of)f(a)g(sequence)i(of)f(\014elds.)28 b(Eac)o(h)17
b(\014eld)i(starts)e(at)g(the)h(b)q(eginning)h(of)f(a)f(line)i(\(i.e.)0
2196 y(at)f(b)o(yte)g(0)g(or)f(after)h(a)g(Newline\),)i(and)f(is)f
(iden)o(ti\014ed)j(b)o(y)d(the)g(app)q(earance)h(of)f(a)g(sp)q
(eci\014c)i(c)o(haracter)e(in)h(that)0 2258 y(lo)q(cation.)h(This)c(id)
f(c)o(haracter)f(is)h(normally)g(follo)o(w)o(ed)g(b)o(y)g(a)f(b)o(yte)h
(con)o(taining)g(a)f(tag)g(v)m(alue)i(\(semaphore)e(\015ag\),)0
2320 y(follo)o(w)o(ed)19 b(b)o(y)g(optional)g(semaphore)f(data)g
(\(transp)q(orter)g(pro)q(cess)h(id,)h(for)e(example\),)h(follo)o(w)o
(ed)g(b)o(y)g(the)g(\014eld)0 2383 y(v)m(alue.)62 2608
y(Here)i(is)g(a)e(simple)j(con)o(trol)e(\014le)h(pro)q(duced)h(b)o(y)e
(a)g(test)g(message,)g(just)g(b)q(efore)h(it)f(w)o(as)g(remo)o(v)o(ed)g
(b)o(y)g(the)0 2670 y(Sc)o(heduler:)p eop
%%Page: 48 49
48 48 bop 0 -58 a Fi(48)1380 b(ZMailer)16 b(Op)q(erations)g(Guide)120
111 y Fe(--------------------)120 161 y(i)24 b(24700)120
211 y(o)g(72)120 261 y(l)g(<88Jan10.003129est.24700)o
Fh(@)p Fe(bay.csri.t)o(oronto.)o(edu>)120 311 y(e)g(Rayan)f
(Zachariassen)f(<rayan>)120 360 y(s)i(local)f(-)h(rayan)120
410 y(r+)143 b(local)23 b(-)h(rayan)f(2003)120 460 y(m)120
510 y(Received:)g(by)g(bay.csri.toronto.edu)e(id)j(24700;)f(Sun,)g(10)h
(Jan)f(88)h(00:31:29)f(EST)120 560 y(From:)71 b(Rayan)23
b(Zachariassen)f(<rayan>)120 609 y(To:)119 b(rayan,)23
b(rayan)p Fh(@)p Fe(ephemeral)120 659 y(Subject:)g(a)g(test)120
709 y(Message-Id:)f(<88Jan10.003129est.24700)p Fh(@)p
Fe(bay.csr)o(i.toron)o(to.edu>)120 759 y(Date:)71 b(Sun,)23
b(10)h(Jan)f(88)h(00:31:24)f(EST)120 858 y(s)h(local)f(-)h(rayan)p
Fh(@)p Fe(bay.csri.toronto.edu)120 908 y(r+)143 b(smtp)23
b(ephemeral.ai.toronto.edu)e(rayan)p Fh(@)p Fe(ephemeral.ai.toronto.e)o
(du)g(2003)120 958 y(m)120 1008 y(Received:)i(by)g
(bay.csri.toronto.edu)e(id)j(24700;)f(Sun,)g(10)h(Jan)f(88)h(00:31:29)f
(EST)120 1058 y(From:)71 b(Rayan)23 b(Zachariassen)f(<rayan)p
Fh(@)p Fe(csri.toronto.edu>)120 1108 y(To:)119 b(rayan)p
Fh(@)p Fe(csri.toronto.edu,)21 b(rayan)p Fh(@)p Fe
(ephemeral.ai.toronto.edu)120 1157 y(Subject:)i(a)g(test)120
1207 y(Message-Id:)f(<88Jan10.003129est.24700)p Fh(@)p
Fe(bay.csr)o(i.toron)o(to.edu>)120 1257 y(Date:)71 b(Sun,)23
b(10)h(Jan)f(88)h(00:31:24)f(EST)120 1357 y(--------------------)62
1543 y Fi(The)14 b(id)g(c)o(haracter)f(v)m(alues)i(are)e(de\014ned)i
(in)f(the)g(`)p Fe(mail.h)p Fi(')e(system)h(header)g(\014le,)i(whic)o
(h)f(curren)o(tly)g(con)o(tains:)120 1674 y Fe(#define)23
b(_CF_MESSAGEID)46 b('i')23 b(/*)h(inode)f(number)g(of)h(file)f
(containing)g(message)f(*/)120 1724 y(#define)h(_CF_BODYOFFSET)f('o')h
(/*)h(byte)f(offset)g(into)h(message)e(file)i(of)f(body)h(*/)120
1774 y(#define)f(_CF_BODYFILE)70 b('b')23 b(/*)h(alternate)f(message)f
(file)i(for)f(new)h(body)f(*/)120 1824 y(#define)g(_CF_SENDER)118
b('s')23 b(/*)h(sender)f(triple)g(\(channel,)g(host,)g(user\))g(*/)120
1874 y(#define)g(_CF_RECIPIENT)46 b('r')23 b(/*)h(recipient)f(n-tuple,)
f(n)i(>=)g(3)f(*/)120 1924 y(#define)g(_CF_ERRORADDR)46
b('e')23 b(/*)h(return)f(address)g(for)g(error)g(messages)g(*/)120
1973 y(#define)g(_CF_XORECIPIENT)f('R'/*)h(one)g(of)h(XOR)f(set)h(of)f
(recipient)g(n-tuples)g(*/)120 2023 y(#define)g(_CF_RCPTNOTARY)f('N')h
(/*)h(DSN)f(parameters)g(for)g(previous)g(recipient)g(*/)120
2073 y(#define)g(_CF_DSNENVID)70 b('n')23 b(/*)h(DNS)f('MAIL)h(FROM<>)f
(ENVID=XXXX')f(data)h(*/)120 2123 y(#define)g(_CF_ERRORADDR)46
b('e')23 b(/*)h(return)f(address)g(for)g(error)g(messages)g(*/)120
2173 y(#define)g(_CF_DIAGNOSTIC)f('d')h(/*)h(diagnostic)e(message)h
(for)h(ctlfile)f(offset)g(*/)120 2222 y(#define)g(_CF_MSGHEADERS)f('m')
h(/*)h(message)f(header)g(for)g(preceeding)g(recipients)f(*/)120
2272 y(#define)h(_CF_LOGIDENT)70 b('l')23 b(/*)h(identification)e
(string)h(for)g(log)h(entries)f(*/)120 2322 y(#define)g(_CF_OBSOLETES)
46 b('x')23 b(/*)h(message)f(id)g(of)h(message)f(obsoleted)g(by)g(this)
g(*/)120 2372 y(#define)g(_CF_VERBOSE)94 b('v')23 b(/*)h(log)f(file)h
(name)f(for)g(verbose)g(log)h(\(mail)f(-v\))g(*/)120
2422 y(#define)g(_CF_TURNME)118 b('T')23 b(/*)h(trigger)f(scheduler)f
(to)i(attempt)f(delivery)g(now)g(*/)p 2006 2432 21 42
v 62 2608 a Fi(There)c(is)g(one)g(\014eld)h(p)q(er)f(line,)i(except)e
(for)f Fe(_CF_MSGHEADERS)f Fi(whic)o(h)i(has)g(some)f(sp)q(ecial)j
(seman)o(tics)d(de-)0 2670 y(scrib)q(ed)f(b)q(elo)o(w.)j(The)c(follo)o
(wing)g(describ)q(es)g(the)g(\014elds)g(in)g(detail:)p
eop
%%Page: 49 50
49 49 bop 0 -58 a Fi(Sc)o(heduler)1716 b(49)0 183 y Fe(i)216
b Fi(This)18 b(\014eld)g(iden)o(ti\014es)h(the)e(message)g(\014le)h
(corresp)q(onding)g(to)f(this)g(con)o(trol)g(\014le.)27
b(It)17 b(is)h(the)f(name)240 246 y(of)f(the)g(message)g(\014le)i(in)f
(the)g(`)p Fe(QUEUE)p Fi(')d(directory)j(\(`)p Fe(~/queue)p
Fi('\).)k(This)c(is)g(t)o(ypically)h(the)e(same)g(as)240
308 y(the)g(ino)q(de)h(n)o(um)o(b)q(er)f(for)f(that)g(\014le,)i(but)f
(need)g(not)g(b)q(e.)22 b(It)16 b(is)g(used)g(b)o(y)g(T)l(ransp)q(ort)f
(Agen)o(ts)g(when)240 370 y(cop)o(ying)j(the)f(message)f(b)q(o)q(dy)l
(,)i(and)f(b)o(y)g(the)h(Sc)o(heduler)g(when)g(unlinking)h(the)f
(\014le)g(after)e(all)i(the)240 432 y(destination)e(addresses)f(ha)o(v)
o(e)g(b)q(een)i(pro)q(cessed.)j(F)l(or)15 b(example:)360
508 y Fe(i)24 b(21456)0 584 y(o)216 b Fi(Sp)q(eci\014es)14
b(the)e(b)o(yte)g(o\013set)f(of)h(the)g(message)f(b)q(o)q(dy)i(in)g
(the)f(message)g(\014le.)19 b(It)12 b(is)h(used)g(b)o(y)f(T)l(ransp)q
(ort)240 646 y(Agen)o(ts)18 b(in)h(order)f(to)f(cop)o(y)h(the)g
(message)g(b)q(o)q(dy)h(quic)o(kly)l(,)h(without)e(parsing)g(the)h
(message)e(\014le.)240 708 y(F)l(or)e(example:)360 784
y Fe(o)24 b(466)0 860 y(e)216 b Fi(Giv)o(es)20 b(an)g(address)g(to)g
(whic)o(h)h(deliv)o(ery)g(errors)e(should)i(b)q(e)g(sen)o(t.)34
b(The)21 b(address)f(m)o(ust)f(b)q(e)i(an)240 922 y(RF)o(C822)14
b Fb(mailb)q(o)o(x)p Fi(.)21 b(F)l(or)14 b(example:)360
998 y Fe(e)24 b("Operations)e(Directorate")g(<d-ops)p
Fh(@)p Fe(sis.mod.uk>)0 1074 y(l)216 b Fi(The)21 b(\014eld)h(v)m(alue)g
(is)g(an)f(unin)o(terpreted)h(string)f(whic)o(h)g(should)h(pre\014x)g
(all)f(log)g(messages)g(and)240 1136 y(accoun)o(ting)14
b(records)f(asso)q(ciated)h(with)f(this)h(message.)19
b(This)14 b(v)m(alue)h(is)f(t)o(ypically)h(the)e(message)g(id)240
1198 y(string.)20 b(F)l(or)14 b(example:)360 1274 y Fe(l)24
b(<88Jan6.103158gmt.24694)p Fh(@)p Fe(sis)o(.mod.uk>)0
1350 y(s)216 b Fi(This)23 b(\014eld)g(sp)q(eci\014es)g(an)f(originator)
g(\(sender\))g(address)g(triple,)i(in)f(the)f(sequence:)34
b(previous)240 1412 y(c)o(hannel,)15 b(previous)g(host,)f(return)g
(address.)20 b(It)15 b(remains)f(the)h(curren)o(t)f(sender)h(address)f
(un)o(til)i(the)240 1474 y(next)h(instance)h(of)e(this)h(\014eld.)27
b(Since)18 b(there)f(can)g(only)h(b)q(e)f(one)g(sender)h(of)e(a)h
(message,)f(m)o(ultiple)240 1537 y(instances)i(of)f(the)h(\014eld)h
(will)g(corresp)q(ond)f(to)f(di\013eren)o(t)h(return)f(address)h
(formats)e(as)h(pro)q(duced)240 1599 y(b)o(y)e(the)g
Fe(crossbar)f Fi(algorithm)i(in)g(the)f(Router.)20 b(F)l(or)14
b(example:)360 1668 y Fe(s)24 b(smtp)f(sis.mod.uk)g Fh(@)p
Fe(lab.sis.mod.uk:q)p Fh(@)p Fe(deadly-sun.)o(lab.sis.)o(mod.uk)360
1718 y(s)h(uucp)f(sisops)g(lab.sis.mod.uk!deadly-sun.l)o(ab.sis.)o
(mod.uk!)o(q)0 1794 y(r)216 b Fi(This)15 b(\014eld)h(sp)q(eci\014es)h
(a)d(destination)i(\(recipien)o(t\))f(address)g(triple,)h(in)f(the)g
(sequence:)21 b(next)15 b(c)o(han-)240 1856 y(nel,)h(next)f(host,)g
(address)g(for)g(next)g(host.)k(Optional)e(information)e(to)g(b)q(e)h
(passed)f(to)g(the)g(T)l(rans-)240 1918 y(p)q(ort)i(Agen)o(t)g(ma)o(y)f
(b)q(e)i(placed)g(after)e(the)i(mandatory)e(\014elds;)j(this)e(curren)o
(tly)h(refers)f(to)f(the)h(de-)240 1981 y(liv)o(ery)i(privilege)i(of)d
(the)g(destination)h(address.)30 b(Since)20 b(the)e(optional)h(v)m
(alues)h(of)e(this)h(\014eld)g(are)240 2043 y(only)e(in)o(terpreted)g
(b)o(y)g(the)f(T)l(ransp)q(ort)g(Agen)o(t,)g(c)o(hanges)h(in)g(what)f
(the)g(Router)h(writes)f(m)o(ust)g(b)q(e)240 2105 y(co)q(ordinated)f
(with)g(the)g(co)q(de)g(of)f(the)h(T)l(ransp)q(ort)f(Agen)o(ts)g(that)g
(migh)o(t)g(in)o(terpret)h(this)g(\014eld.)21 b(F)l(or)240
2167 y(example:)360 2233 y Fe(r)j(local)f(-)h(bond)f(0)360
2283 y(r)h(uucp)f(uunet)g(sisops!bond)g(-2)0 2359 y(m)216
b Fi(Apart)12 b(from)g(a)g(message)h(b)q(o)q(dy)l(,)g(a)g(T)l(ransp)q
(ort)f(Agen)o(t)g(needs)h(the)g(message)f(headers)h(to)f(construct)240
2421 y(the)19 b(message)f(it)h(deliv)o(ers.)32 b(These)20
b(message)e(headers)h(are)g(stored)f(as)g(the)h(v)m(alue)h(of)f(this)g
(\014eld.)240 2483 y(Since)f(message)f(headers)g(ob)o(viously)g(can)g
(span)g(lines,)i(the)e(syn)o(tax)f(for)g(this)h(\014eld)h(is)g
(somewhat)240 2545 y(di\013eren)o(t)e(than)f(for)g(the)g(others.)21
b(The)15 b(\014eld)i(id)g(is)f(immediately)h(follo)o(w)o(ed)e(b)o(y)h
(a)f(newline,)i(whic)o(h)240 2608 y(is)g(follo)o(w)o(ed)g(b)o(y)g(a)f
(complete)h(set)g(of)f(message)g(headers.)25 b(These)17
b(are)f(terminated)h(\(in)g(the)g(usual)240 2670 y(fashion\))g(b)o(y)f
(an)g(empt)o(y)g(line,)j(whic)o(h)e(also)f(terminates)h(this)g
(\014eld.)25 b(In)17 b(the)f(follo)o(wing)h(example,)p
eop
%%Page: 50 51
50 50 bop 0 -58 a Fi(50)1380 b(ZMailer)16 b(Op)q(erations)g(Guide)240
183 y(the)f(last)g(line)i(of)e(text)g(is)g(follo)o(w)o(ed)h(b)o(y)f(an)
g(empt)o(y)g(line,)i(after)d(whic)o(h)i(another)f(\014eld)h(ma)o(y)f
(start:)360 241 y Fe(m)360 291 y(From:)23 b(M)360 340
y(To:)g(Bond)360 390 y(Subject:)g(do)g(get)h(a)g(receipt,)e(007!)0
518 y(d)216 b Fi(This)19 b(\014eld)h(is)f Fb(not)f Fi(written)h(b)o(y)f
(the)h(Router.)30 b(It)18 b(is)h(written)g(b)o(y)f(the)h(Sc)o(heduler)h
(to)e(remem)o(b)q(er)240 580 y(errors)c(asso)q(ciated)i(with)f(sp)q
(eci\014c)i(addresses.)j(The)c(\014eld)g(v)m(alue)h(has)e(t)o(w)o(o)e
(parts,)i(the)g(\014rst)g(b)q(eing)240 642 y(the)d(b)o(yte)g(o\013set)f
(in)i(the)f(con)o(trol)g(\014le)h(of)e(the)h(destination)h(\(recipien)o
(t\))g(address)f(causing)h(the)f(error,)240 705 y(and)k(the)h(rest)f
(of)f(the)i(line)h(b)q(eing)f(an)f(error)g(message.)22
b(The)17 b(T)l(ransp)q(ort)f(Agen)o(ts)f(disco)o(v)o(er)i(these)240
767 y(errors)f(and)h(rep)q(ort)g(them)g(to)f(the)h(Sc)o(heduler.)27
b(The)18 b(Sc)o(heduler)g(will)h(collect)f(them)f(and)g(rep)q(ort)240
829 y(them)d(to)f(the)h(error)f(return)h(address)g(\(if)g(an)o(y\))f
(after)g(all)i(the)f(destinations)h(ha)o(v)o(e)e(b)q(een)i(pro)q
(cessed)240 891 y([XX:or)f(at)h(other)f(times].)20 b(F)l(or)15
b(example:)360 969 y Fe(d)24 b(878)f(No)h(such)f(local)g(user:)g
('bond'.)62 1109 y Fi(It)c(should)h(b)q(e)g(noted,)g(that)e(in)i
(sender)f(and)g(recipien)o(t)i(\014elds)f(the)f(\014rst)g(t)o(w)o(o)e
(\014eld)k(v)m(alues)f(\(c)o(hannel)g(and)0 1172 y(host\))c(cannot)g
(con)o(tain)h(em)o(b)q(edded)h(spaces,)e(but)h(the)f(third)i(\014eld)f
(v)m(alue)h(\(the)e(address\))h(ma)o(y)l(.)23 b(Therefore,)16
b(in)0 1234 y(the)d(presence)g(of)g(extra)f(\014elds,)i(parsing)f
(within)g(T)l(ransp)q(ort)f(Agen)o(ts)h(m)o(ust)f(b)q(e)h(cautious)g
(and)g(not)f(assume)h(that)0 1296 y(an)i(address)g(do)q(es)h(not)f(con)
o(tain)g(spaces.)62 1436 y(As)e(men)o(tioned,)h(the)f(second)h(b)o(yte)
f(of)g(most)f(\014elds)i(are)f(used)h(for)e(concurrency)i(con)o(trol)f
(and)g(status)f(indica-)0 1498 y(tion.)20 b(This)15 b(tag)e(b)o(yte)h
(can)h(con)o(tain)f(sev)o(eral)h(v)m(alues)g(that)f(indicate)i(curren)o
(t)e(or)g(previous)h(activit)o(y)l(.)20 b(The)15 b(\014elds)0
1561 y(where)h(this)g(is)h(relev)m(an)o(t)f(are)g(the)g(destination)g
(\(recipien)o(t\))h(address)f(and)g(diagnostic)h(\014elds.)23
b(The)16 b(tag)f(v)m(alues)0 1623 y(are)g(de\014ned)h(in)g(the)g(`)p
Fe(mail.h)p Fi(')d(\014le)k(men)o(tioned)f(previously)l(,)g(as)f(follo)
o(ws:)120 1755 y Fe(#define)23 b(_CFTAG_NORMAL)f(')i(')f(/*)h(what)f
(the)h(router)f(sets)g(it)h(to)f(be)h(*/)120 1805 y(#define)f
(_CFTAG_LOCK)70 b('~')23 b(/*)h(that)f(line)h(is)f(being)g(processed,)g
(lock)g(it)h(*/)120 1854 y(#define)f(_CFTAG_OK)118 b('+')23
b(/*)h(positive)f(outcome)g(of)g(processing)g(*/)120
1904 y(#define)g(_CFTAG_NOTOK)46 b('-')23 b(/*)h(something)f(went)g
(wrong)g(*/)120 1954 y(#define)g(_CFTAG_DEFER)46 b(_CFTAG_NORMAL)22
b(/*)i(try)f(again)g(later)g(*/)62 2094 y Fi(The)16 b(extract)e(ab)q(o)
o(v)o(e)h(is)h(self-explanatory)l(.)62 2234 y(A)k(message)e(con)o(trol)
h(\014le)i(will)g(normally)e(con)o(tain)h(a)f(pream)o(ble)h(that)e(sp)q
(eci\014es)j(information)f(ab)q(out)f(the)0 2296 y(asso)q(ciated)13
b(message)f(\014le,)i(the)f(message)g(b)q(o)q(dy)g(o\013set,)f(an)h
(error)f(return)h(address,)g(and)g(a)g(log)g(en)o(try)f(tag.)18
b(After)0 2359 y(this)f(comes)g(a)g(rep)q(eated)g(sequence)i(of:)k
(sender)17 b(address)g(\014eld,)h(recipien)o(t)h(address)e(\014elds,)h
(and)f(the)g(message)0 2421 y(header)k(corresp)q(onding)h(to)e(these)h
(recipien)o(ts.)39 b(After)20 b(as)h(man)o(y)f(of)g(these)h(groups)g
(as)f(are)h(necessary)l(,)h(an)o(y)0 2483 y(diagnostic)14
b(\014elds)h(will)h(b)q(e)e(app)q(ended)i(to)d(the)g(end)i(of)e(the)h
(con)o(trol)f(\014le.)21 b(The)14 b(restrictions)g(on)g(the)f(sequence)
i(of)0 2545 y(addresses)g(and)h(message)e(headers,)h(are)g(that)g(a)f
(sender)i(address)f(\014eld)i(m)o(ust)d(precede)i(an)o(y)f(recipien)o
(t)i(address)0 2608 y(\014eld,)j(and)e(a)f(recipien)o(t)j(address)e
(\014eld)h(m)o(ust)f(\(immediately\))h(precede)g(an)o(y)e(message)h
(header)g(\014eld,)i(and)e(no)0 2670 y(sender)e(or)e(recipien)o(t)j
(addresses)f(ma)o(y)e(follo)o(w)h(the)h(last)f(message)g(header)g
(\014eld.)p eop
%%Page: 51 52
51 51 bop 0 -58 a Fi(Sc)o(heduler)1716 b(51)0 183 y Fd(4.2)35
b(Sc)n(heduler)22 b(Con\014guration)i(File)62 331 y Fi(The)18
b(ma)s(jor)e(action)i(of)f(the)g(Sc)o(heduler)j(is)e(to)f(p)q(erio)q
(dically)j(start)d(up)h(T)l(ransp)q(ort)f(Agen)o(ts)g(and)g(tell)i
(them)0 393 y(what)14 b(to)g(do.)20 b(This)15 b(is)g(con)o(trolled)g(b)
o(y)g(a)f(table)h(in)h(a)e(con\014guration)h(\014le)g(that)f(is)h(read)
g(b)o(y)f(the)h(Sc)o(heduler)h(when)0 456 y(it)f(starts.)k(A)c(t)o
(ypical)h(con\014guration)g(\014le)g(w)o(ould)f(lo)q(ok)h(something)f
(lik)o(e:)120 587 y Fe(#)24 b(pattern)94 b(intvl)71 b(ch/ho/*)23
b(uid)119 b(gid)g(command)120 637 y(local/*)142 b(10s)h(2)24
b(0)f(0)48 b(root)95 b(daemon)47 b(mailbox)23 b(local)120
687 y(smtp/*)166 b(1m)143 b(10)24 b(2)f(0)48 b(root)95
b(daemon)47 b(smtp)23 b(-l)h(/tmp/smtp.log)e($host)120
737 y(error/*)142 b(5m)h(10)24 b(0)f(0)48 b(root)95 b(daemon)47
b(errormail)120 787 y(uucp/*)166 b(10m)119 b(10)24 b(0)f(0)48
b(root)95 b(daemon)47 b(sm)23 b(-c)h($channel)f(uucp)62
934 y Fi(An)o(y)17 b(line)h(starting)f(with)g(a)f(`)p
Fe(#)p Fi(')g(c)o(haracter)g(is)h(assumed)g(to)f(b)q(e)h(a)g(commen)o
(t)f(line,)i(and)f(is)h(ignored,)f(as)f(are)0 997 y(empt)o(y)j(lines.)
34 b(All)21 b(other)d(lines)j(m)o(ust)e(follo)o(w)h(a)f(rigid)h
(format.)31 b(Eac)o(h)19 b(line)i(consists)f(of)e(eigh)o(t)i
(white-space)0 1059 y(separated)15 b(\014elds.)21 b(The)15
b(\014elds,)h(in)h(sequence,)f(are:)62 1207 y(A)h(pattern,)f(that)g
(selects)i(whic)o(h)f(c)o(hannel/host)h(com)o(binations)f(are)g(relev)m
(an)o(t)g(to)f(the)h(curren)o(t)g(line.)26 b(The)0 1269
y(pattern)17 b(has)g(the)g(form:)22 b Fb(c)o(hannel)p
Fi(/)p Fb(host)p Fi(,)c(with)g(the)f(slash)g(b)q(eing)h(mandatory)l(.)
25 b(The)17 b(subpatterns)g(\(i.e.)26 b(eac)o(h)0 1331
y(side)16 b(of)e(the)i(slash\))f(ma)o(y)f(con)o(tain)h(a)g
Fe(glob)f Fi(\(or)g Fe(sh)p Fi(\))h(st)o(yle)g(pattern.)k(These)c
(patterns)g(are)f(tested)h(in)h(the)f(order)0 1394 y(they)g(app)q(ear,)
h(with)f(the)h(c)o(hannel)g(and)g(host)e(v)m(alues)j(for)e(destination)
h(addresses)f(in)h(a)f(message.)20 b(When)c(b)q(oth)0
1456 y(patterns)k(matc)o(h,)g(the)h(line)h(with)f(the)f(matc)o(hing)g
(pattern)g(describ)q(es)i(the)f(T)l(ransp)q(ort)e(Agen)o(t)h(that)g
(should)0 1518 y(b)q(e)i(used)g(to)f(deliv)o(er)h(the)g(message)f(to)f
(that)h(destination.)39 b(It)22 b(is)g(imp)q(ortan)o(t)e(that)h(the)h
(T)l(ransp)q(ort)e(Agen)o(t)0 1580 y(recognizes)15 b(at)e(least)i(the)f
(set)g(of)f(addresses)i(the)f(in)h(message)f(con)o(trol)f(\014le,)i
(that)f(the)g(Sc)o(heduler)i(con\014guration)0 1643 y(table)f(assumes)f
(it)g(do)q(es.)20 b(Otherwise,)15 b(some)f(addresses)g(ma)o(y)f(nev)o
(er)i(get)f(deliv)o(ered)i(to,)d(and)h(the)h(message)e(will)0
1705 y(sta)o(y)h(in)i(the)g(Sc)o(heduler)g(inde\014nitely)m(.)62
1853 y(An)i(in)o(terv)m(al)g(sp)q(eci\014cation)h(that)d(sa)o(ys)g(ho)o
(w)h(often)g(the)g(Sc)o(heduler)i(should)f(c)o(hec)o(k)f(for)g(w)o(ork)
f(p)q(ending)j(for)0 1915 y(the)14 b(T)l(ransp)q(ort)g(Agen)o(t)g
(describ)q(ed)i(b)o(y)e(that)f(line.)21 b(The)15 b(time)f(sp)q
(eci\014cation)i(m)o(ust)e(use)g(an)g(appropriate)g(su\016x:)0
1977 y(`)p Fe(s)p Fi(')f(for)h(seconds,)h(`)p Fe(m)p
Fi(')e(for)h(min)o(utes,)h(`)p Fe(h)p Fi(')e(for)h(hours,)g(or)g(in)h
(com)o(binations,)f(e.g.)20 b(`)p Fe(1h30m)p Fi('.)e(The)c(minim)o(um)i
(v)m(alue)0 2040 y(sp)q(eci\014ed)h(in)f(the)g(con\014guration)f
(\014le)h(will)h(b)q(e)f(the)f(directory)h(scanning)g(in)o(terv)m(al)g
(used)g(b)o(y)f(the)g(Sc)o(heduler.)62 2187 y(A)f(maxim)o(um)g(n)o(um)o
(b)q(er)g(of)f(T)l(ransp)q(ort)h(Agen)o(ts)f(sim)o(ultaneously)i(activ)
o(e)f(for)f(the)h(c)o(hannel)h(matc)o(hed)f(b)o(y)g(the)0
2250 y(pattern)h(for)f(that)h(en)o(try)l(.)20 b(If)15
b(0,)f(no)i(upp)q(er)g(limit)g(is)g(enforced.)62 2398
y(A)j(maxim)o(um)g(n)o(um)o(b)q(er)g(of)g(T)l(ransp)q(ort)f(Agen)o(ts)h
(sim)o(ultaneously)h(activ)o(e)f(for)g(the)g(host)f(matc)o(hed)h(b)o(y)
g(the)0 2460 y(pattern)c(for)f(that)h(en)o(try)l(.)20
b(If)15 b(0,)f(no)i(upp)q(er)g(limit)g(is)g(enforced.)62
2608 y(A)e(total)f(maxim)o(um)h(n)o(um)o(b)q(er)g(of)f(T)l(ransp)q(ort)
h(Agen)o(ts)f(sim)o(ultaneously)i(activ)o(e)f(due)g(to)f(that)g(en)o
(try)l(.)20 b(If)14 b(0,)f(no)0 2670 y(upp)q(er)j(limit)h(is)e
(enforced.)p eop
%%Page: 52 53
52 52 bop 0 -58 a Fi(52)1380 b(ZMailer)16 b(Op)q(erations)g(Guide)62
183 y(A)g(user)h(id)f(to)g(set)g(as)f(the)i(real)f(and)g(e\013ectiv)o
(e)g(user)h(id)g(when)f(executing)h(the)f(command)g(asso)q(ciated)h
(with)0 246 y(that)d(en)o(try)l(.)20 b(Either)c(a)f(sym)o(b)q(olic)h
(\(login)g(name\))f(or)f(n)o(umeric)j(v)m(alue)f(ma)o(y)e(b)q(e)i(sp)q
(eci\014ed.)62 382 y(A)j(group)f(id)h(to)f(set)h(as)f(the)g(real)h(and)
g(e\013ectiv)o(e)g(group)f(id)h(when)g(executing)h(the)e(command)h
(asso)q(ciated)0 445 y(with)d(that)e(en)o(try)l(.)20
b(Either)15 b(a)g(sym)o(b)q(olic)i(\(login)e(name\))g(or)g(n)o(umeric)h
(v)m(alue)h(ma)o(y)d(b)q(e)i(sp)q(eci\014ed.)62 582 y(Finally)l(,)i
(the)e(T)l(ransp)q(ort)g(Agen)o(t)g(in)o(v)o(o)q(cation)h(command)f
(itself,)h(as)e(it)i(w)o(ould)f(app)q(ear)h(on)f(a)g(normal)g(com-)0
644 y(mand)g(line.)25 b(Note)15 b(ho)o(w)o(ev)o(er)h(that)f(the)h(Sc)o
(heduler)i(executes)f(the)f(command)g(directly)i(without)e(all)h(the)f
(com-)0 706 y(mand)g(line)h(in)o(terpretation)f(a\013orded)f(b)o(y)g(a)
h(shell.)22 b(The)16 b(only)g(sp)q(ecial)i(action)e(is)g(to)f(replace)h
(instances)h(of)e(the)0 769 y(w)o(ord)h(`)p Fe($channel)p
Fi(')g(with)h(the)g(name)g(of)g(the)g(c)o(hannel)i(matc)o(hed)e(b)o(y)g
(the)g(pattern,)g(and)g(instances)h(of)e(`)p Fe($host)p
Fi(')0 831 y(with)g(the)f(name)g(of)g(the)g(host)g(matc)o(hed)g(b)o(y)g
(the)g(pattern.)62 968 y(Note)h(that)g(the)g(command)g(m)o(ust)g(ha)o
(v)o(e)g(enough)h(privileges)h(sp)q(eci\014ed)g(to)e(write)g(in)o(to)h
(the)f(con)o(trol)g(\014le,)h(in)0 1030 y(addition)f(to)f(whatev)o(er)f
(is)i(necessary)g(to)e(p)q(erform)h(its)g(deliv)o(ery)i(duties)f(and)f
(logging.)0 1250 y Fd(4.3)35 b(T)-6 b(ransp)r(ort)25
b(Agen)n(t)e(proto)r(col)62 1387 y Fi(Once)15 b(the)g(Sc)o(heduler)h
(starts)c(up)j(a)f(T)l(ransp)q(ort)f(Agen)o(t)h(b)o(y)g(executing)i
(one)e(of)g(the)g(commands)g(sp)q(eci\014ed)i(in)0 1450
y(the)h(con\014guration)g(\014le,)h(it)f(needs)g(to)f(pass)h
(information)g(to)f(the)h(T)l(ransp)q(ort)f(Agen)o(t)g(ab)q(out)h(whic)
o(h)g(messages)0 1512 y(and)g(addresses)f(it)h(should)g(pro)q(cess.)24
b(The)17 b(T)l(ransp)q(ort)f(Agen)o(t)g(in)h(return)g(needs)g(to)f(rep)
q(ort)g(to)g(the)g(Sc)o(heduler)0 1574 y(ab)q(out)h(the)g(success)h(or)
e(failure)i(of)f(its)g(deliv)o(ery)h(activit)o(y)l(,)g(so)f(that)f
(issues)i(related)f(to)f(\014le)j(managemen)o(t)d(and)0
1636 y(error)e(rep)q(orting)i(can)f(all)h(b)q(e)g(cen)o(tralized)h(in)f
(the)f(Sc)o(heduler)i(pro)q(cess.)62 1773 y(T)l(o)g(accomplish)h(this,)
g(the)f(Sc)o(heduler)i(engages)e(in)h(a)e(simple)j(exc)o(hange)e(with)g
(eac)o(h)h(T)l(ransp)q(ort)e(Agen)o(t)h(it)0 1836 y(has)g(started.)24
b(F)l(or)16 b(this)h(reason,)g(the)g(Sc)o(heduler)h(creates)f(t)o(w)o
(o)f(pip)q(es)i(attac)o(hed)e(to)g(the)h(standard)g(input)h(and)0
1898 y(standard)h(output)f(of)h(the)g(T)l(ransp)q(ort)f(Agen)o(t)h(pro)
q(cesses)g(it)g(executes.)32 b(The)19 b(standard)g(error)f(descriptor)h
(is)0 1960 y(shared)c(with)h(the)f(Sc)o(heduler)i(pro)q(cess,)e(and)h
(usually)g(refers)f(to)g(the)g(Sc)o(heduler)i(log)e(\014le.)62
2097 y(Just)e(b)q(efore)f(the)h(Sc)o(heduler)h(starts)d(up)i(a)f(T)l
(ransp)q(ort)g(Agen)o(t,)g(it)h(scans)f(through)g(its)h(mo)q(del)g(of)f
(the)g(p)q(ending)0 2159 y(message)i(con)o(trol)g(\014les,)h(and)f
(determines)i(whic)o(h)f(are)f(relev)m(an)o(t)h(to)e(the)i(imp)q
(ending)h(in)o(v)o(o)q(cation)f(of)f(the)g(T)l(rans-)0
2222 y(p)q(ort)i(Agen)o(t.)22 b(Once)c(the)e(subpro)q(cess)h(is)g
(running,)g(the)f(Sc)o(heduler)i(will)g(write)e(to)g(the)g(standard)g
(input)h(of)f(its)0 2284 y(c)o(hild,)f(the)e(names)g(of)g(the)g(con)o
(trol)f(\014les)i(it)g(should)g(pro)q(cess,)f(one)g(to)g(eac)o(h)g
(line.)21 b(This)13 b(list)h(is)g(terminated)f(b)o(y)g(an)0
2346 y(empt)o(y)i(line,)h(to)f(indicate)i(to)d(the)h(T)l(ransp)q(ort)g
(Agen)o(t)g(that)f(the)i(Sc)o(heduler)h(\014nished)g(its)e(business)h
(normally)l(.)62 2483 y(In)f(turn,)g(the)f(deliv)o(ery)i(pro)q(cess)f
(will)h(op)q(en)f(eac)o(h)g(named)g(con)o(trol)f(\014le,)h(scan)g(it)f
(for)g(destination)i(addresses)0 2545 y(relev)m(an)o(t)i(to)g(its)g(sp)
q(eci\014c)h(in)o(v)o(o)q(cation,)g(and)f(attempt)e(deliv)o(ery)k(to)d
(those)g(addresses.)28 b(F)l(or)17 b(eac)o(h)h(destination)0
2608 y(address,)e(it)g(will)i(prin)o(t)f(to)e(its)i(standard)e(output)h
(a)g(line)i(that)d(describ)q(es)j(the)e(address,)g(and)h(that)e(con)o
(tains)h(a)0 2670 y(status)e(indication.)22 b(The)16
b(syn)o(tax)e(is:)p eop
%%Page: 53 54
53 53 bop 0 -58 a Fi(Sc)o(heduler)1716 b(53)120 183 y
Fb(id)p Fi(/)p Fb(o\013set)p Fi(/)p Fb(status)14 b(commen)o(t)62
353 y Fi(The)21 b Fb(id)h Fi(is)g(the)f(message)f(\014le)i(id)g(con)o
(tained)f(in)h(the)f(`)p Fe(i)p Fi(')f(\014eld)i(of)f(the)g(con)o(trol)
f(\014le.)38 b(The)22 b Fb(o\013set)d Fi(is)j(the)0 416
y(b)o(yte)16 b(o\013set)f(in)o(to)i(the)f(p)q(ertinen)o(t)h(con)o(trol)
f(\014le)h(of)f(the)g(destination)h(address)g(\014eld.)24
b(The)17 b Fb(status)e Fi(is)i(one)f(of)g(the)0 478 y(follo)o(wing)g
(list)g(of)f(k)o(eyw)o(ords)f(understo)q(o)q(d)i(b)o(y)f(the)g(Sc)o
(heduler:)0 597 y Fe(ok)192 b Fi(Deliv)o(ery)16 b(w)o(as)e(successful.)
0 672 y Fe(error)120 b Fi(Deliv)o(ery)16 b(w)o(as)e(unsuccessful.)0
746 y Fe(deferred)48 b Fi(Deliv)o(ery)16 b(w)o(as)e(attempted,)h(but)g
(is)h(deferred.)62 917 y(The)g(optional)f Fb(commen)o(t)g
Fi(is)h(an)f(arbitrary)g(string)g(that)f(clari\014es)j(the)e
Fb(status)f Fi(co)q(de.)21 b(It)15 b(is)h(separated)f(from)0
979 y(the)g Fb(status)g Fi(co)q(de)g(b)o(y)h(a)e(single)j(space.)j(F)l
(or)15 b(example,)g(the)h(follo)o(wing)g(is)f(a)g(p)q(ossible)i
(sequence)f(of)f(rep)q(orts:)120 1110 y Fe(18453/3527/ok)120
1160 y(18453/3565/deferred)21 b(Unable)i(to)h(contact)f(sis.mod.uk!)120
1210 y(18453/4211/error)f(No)h(such)h(local)f(user:)g('bond'.)62
1380 y Fi(After)f(eac)o(h)g(message)g(\014le)h(has)f(b)q(een)h(pro)q
(cessed,)h(an)e(empt)o(y)g(line)i(is)f(output)f(to)f(indicate)j(this.)
41 b(The)0 1442 y(T)l(ransp)q(ort)15 b(Agen)o(t)g(will)i(con)o(tin)o
(ue)f(to)f(the)g(next)h(message)f(con)o(trol)g(\014le)i(\(if)e(an)o
(y\))g(that)g(has)g(b)q(een)h(written)g(to)f(it)0 1505
y(b)o(y)g(the)g(Sc)o(heduler.)62 1675 y(A)h(complete)f(exc)o(hange)h(b)
q(et)o(w)o(een)f(a)g(Sc)o(heduler)i(and)f(a)e(T)l(ransp)q(ort)h(Agen)o
(t)g(migh)o(t)g(pro)q(ceed)h(as)f(sho)o(wn:)120 1803
y Fe(Scheduler)237 b(Transport)23 b(Agent)120 1852 y
(--------------------------)o(-------)o(--------)o(-------)o(-------)o
(--------)o(------)120 1902 y(smtp/21456)573 1952 y(18453/878/ok)573
2002 y(18453/1013/error)f(Illegal)h(hostname:)g('spectre')573
2052 y(_)120 2101 y(local/21456)573 2151 y(18453/945/deferred)f(Cannot)
h(lock)g(mailbox:)g('bond')573 2201 y(_)120 2251 y(_)62
2421 y Fi(The)15 b(underscores)h(indicate)g(empt)o(y)e(lines)j(emitted)
e(b)o(y)g(either)g(side)h(in)g(the)f(sync)o(hronous)g(proto)q(col.)k
(After)0 2483 y(suc)o(h)g(a)f(con)o(v)o(ersation,)h(the)f(T)l(ransp)q
(ort)g(Agen)o(t)h(pro)q(cess)f(will)j(exit)e(gracefully)l(.)31
b(Whenev)o(er)19 b(the)f(status)g(of)g(a)0 2545 y(destination)g(is)f
(up)q(dated,)h(the)f(Sc)o(heduler)i(will)g(c)o(hec)o(k)e(its)g(in)o
(ternal)h(data)e(on)h(whether)g(or)g(not)f(a)h(link)i(to)d(the)0
2608 y(con)o(trol)f(\014le)h(should)g(b)q(e)g(remo)o(v)o(ed,)f(or)f(if)
i(indeed)h(deliv)o(ery)g(has)e(b)q(een)h(completed)g(and)g(b)q(oth)f
(the)g(message)g(\014le)0 2670 y(and)g(the)h(last)f(links)h(to)f(its)g
(con)o(trol)g(\014le)h(should)h(b)q(e)e(remo)o(v)o(ed.)p
eop
%%Page: 54 55
54 54 bop 0 -58 a Fi(54)1380 b(ZMailer)16 b(Op)q(erations)g(Guide)0
183 y Fd(4.4)35 b(Mail)22 b(Queue)g(prin)n(ting)62 333
y Fi(It)13 b(is)h(p)q(ossible)g(to)e(read)h(through)g(the)g(directory)g
(hierarc)o(h)o(y)g(under)h(the)f(`)p Fe(TRANSPORT)p Fi(')d(directory)k
(to)e(syn)o(the-)0 395 y(size)k(a)e(mo)q(del)i(of)e(whic)o(h)i
(messages)e(are)g(queued)i(to)e(go)h(where.)20 b(Ho)o(w)o(ev)o(er,)13
b(this)i(metho)q(d)g(do)q(es)g(not)g(guaran)o(tee)0 457
y(an)k(accurate)g(image)h(of)f(the)g(mo)q(del)h(within)h(the)e(Sc)o
(heduler)i(pro)q(cess,)g(nor)e(can)g(it)h(pro)o(vide)g(an)o(y)f(status)
f(in-)0 519 y(formation)d(\(as)g(giv)o(en)h(b)o(y)g(the)f(status)g
(commen)o(tary)g(of)g(T)l(ransp)q(ort)g(Agen)o(ts\))g(other)g(than)h
(success)g(or)f(failure.)0 582 y(The)f(ideal)g(solution)g(w)o(ould)g(b)
q(e)g(a)f(w)o(a)o(y)f(of)h(in)o(terrogating)g(the)g(Sc)o(heduler)i
(itself)g(ab)q(out)e(the)g(curren)o(t)g(state,)g(and)0
644 y(then)j(p)q(erhaps)f(use)h(this)g(as)e(a)h(basis)h(for)e(v)o(erb)q
(ose)i(em)o(b)q(ellishmen)o(ts.)62 793 y(Suc)o(h)e(a)g(facilit)o(y)g
(is)g(incorp)q(orated)g(in)h(the)e(Sc)o(heduler.)22 b(The)13
b(exact)h(in)o(terrogation)f(mec)o(hanism)h(dep)q(ends)h(on)0
856 y(the)e(facilities)i(of)e(the)g(host)f(op)q(erating)h(system:)18
b(a)13 b(system)f(with)i(TCP/IP)e(w)o(ould)i(use)f(a)f(so)q(c)o(k)o(et)
h(rendezv)o(ous,)g(a)0 918 y(system)i(with)g(named)g(pip)q(es)i(w)o
(ould)e(use)h(a)e(prearranged)h(sp)q(ecial)i(\014le)f(and)f(signalling)
i(mec)o(hanism,)f(a)e(system)0 980 y(without)h(either)h(w)o(ould)g
(rely)f(on)h(normal)f(\014les.)62 1129 y(In)23 b(all)g(cases,)g(the)f
(result)g(of)f(the)h(in)o(terrogation)g(is)g(a)g(terse)f(list)i(of)f
(of)f(messages,)i(their)f(destinations)0 1192 y(\(c)o(hannel/host)e
(com)o(bination\),)h(and)f(the)g(o\013sets)f(of)h(the)g(addresses)g
(corresp)q(onding)h(to)e(eac)o(h)h(destination.)0 1254
y(F)l(or)15 b(example,)g(a)g(sample)h(state)e(dump)i(from)e(the)i(Sc)o
(heduler)h(is:)120 1386 y Fe(29198:)47 b(smtp/csri.toronto.edu,)21
b(2)i(addresses)g([196,247])311 1435 y(smtp/ephemeral.ai.toronto)o
(.edu,)e(1)i(address)g([128])62 1585 y Fi(This)15 b(sho)o(ws)f(one)h
(message)f(\(id)h(29198\))e(queued)j(for)e(transmission)h(via)g(SMTP)f
(to)g(t)o(w)o(o)f(di\013eren)o(t)i(destina-)0 1647 y(tion)g(hosts.)k
(One)d(destination)f(has)g(t)o(w)o(o)e(asso)q(ciated)i(addresses,)g
(referred)g(to)f(b)o(y)g(b)o(yte)h(o\013sets)f(\(196)f(and)i(247\))0
1709 y(in)o(to)j(the)f(con)o(trol)g(\014le)i(for)e(the)h(message)f(\(`)
p Fe(~/transport/29198)p Fi(')o(\).)24 b(The)18 b(other)f(destination)h
(has)g(only)g(one)0 1772 y(address)d(asso)q(ciated)h(with)f(it.)62
1921 y(The)i(ab)q(o)o(v)o(e)f(dump)g(corresp)q(onds)h(to)e(the)i(state)
e(just)h(after)f(the)i(Sc)o(heduler)h(has)e(parsed)g(the)g(con)o(trol)g
(\014les.)0 1983 y(After)c(the)g(T)l(ransp)q(ort)f(Agen)o(t)h(corresp)q
(onding)h(to)f(the)g Fe(smtp/ephemeral.ai.toronto.)o(edu)d
Fi(destination)k(has)0 2045 y(exited,)j(the)f(state)f(migh)o(t)h(b)q
(ecome:)120 2177 y Fe(29198:)47 b(smtp/csri.toronto.edu,)21
b(2)i(addresses)g([196,247])311 2227 y(smtp/ephemeral.ai.toronto)o
(.edu,)e(1)i(address)g([128])502 2277 y(connect:)g(Connection)f
(refused)h(\(will)g(retry\))62 2426 y Fi(In)e(this)g(case,)g(the)f
(host)g Fe(ephemeral.ai.toronto.edu)d Fi(is)j(aliv)o(e,)i(but)f(no)f
(SMTP)g(serv)o(er)f(is)i(running.)0 2488 y(After)15 b(the)g(T)l(ransp)q
(ort)g(Agen)o(t)g(for)f(the)h(other)g(destination)h(has)f(exited,)h
(the)f(state)g(migh)o(t)g(b)q(e:)120 2620 y Fe(29198:)47
b(smtp/ephemeral.ai.toronto)o(.edu,)21 b(1)i(address)g([128])502
2670 y(connect:)g(Connection)f(refused)h(\(will)g(retry\))p
eop
%%Page: 55 56
55 55 bop 0 -58 a Fi(Sc)o(heduler)1716 b(55)62 183 y(Finally)l(,)17
b(once)e(this)h(remaining)g(destination)g(is)g(pro)q(cessed)g
(successfully)l(,)h(the)e(Sc)o(heduler)i(rep)q(orts:)120
320 y Fe(Mail)23 b(queue)g(is)h(empty)62 457 y Fi(These)16
b(rep)q(orts)f(from)g(the)g(Sc)o(heduler)i(succinctly)h(express)d(the)h
(state)f(of)g(the)g(queues)h(in)h(a)e(format)f(that)g(is)0
519 y(h)o(uman-readable,)j(and)f(that)g(is)g(also)g(easy)g(to)g(parse)g
(automatically)l(.)23 b(The)16 b(only)h(information)f(not)g(pro)o
(vided)0 582 y(are)h(the)h(actual)g(addresses)f(referred)h(to)f(b)o(y)g
(the)h(state)f(dump.)27 b(The)18 b(program)e(that)h(queries)i(the)e(Sc)
o(heduler)0 644 y(for)f(this)i(information)f(is)g(capable)h(of)e
(\014nding)i(these)f(addresses)g(if)h(it)f(needs)g(to)g(\(assuming)f
(the)h(con)o(trol)g(\014les)0 706 y(are)c(readable\),)h(and)g(presen)o
(ting)h(it)f(in)g(a)f(di\013eren)o(t)h(format.)k(The)c(Sc)o(heduler)i
(do)q(es)e(not)f(remem)o(b)q(er)h(the)g(actual)0 769
y(address)h(information,)g(and)h(so)e(cannot)h(easily)i(include)g(it)f
(in)g(the)f(dump.)20 b(Since)d(the)e(Sc)o(heduler)i(m)o(ust)e(sp)q(end)
0 831 y(a)20 b(minim)o(um)h(of)f(time)g(servicing)i(requests)e(from)g
(T)l(ransp)q(ort)f(Agen)o(ts)h(and)g(mail)h(queue)g(queries,)h(it)f
(lea)o(v)o(es)0 893 y(non)o(trivial)16 b(w)o(ork)e(to)h(the)g(querying)
h(program.)62 1030 y(Some)21 b(adv)m(an)o(tages)e(arise)i(from)e(this)i
(mec)o(hanism:)30 b(in)21 b(en)o(vironmen)o(ts)g(with)f(host-to-host)f
(in)o(terpro)q(cess)0 1092 y(comm)o(unication)13 b(\(e.g.)19
b(TCP/IP\))12 b(it)h(b)q(ecomes)g(p)q(ossible)h(to)f(query)f(Sc)o
(hedulers)j(on)e(remote)f(hosts)g(ab)q(out)g(their)0
1155 y(state,)i(and)h(suc)o(h)g(remote)g(queries)g(can)h(only)f(get)g
(v)o(erb)q(ose)g(information)g(if)g(the)g(querying)h(pro)q(cess)f(has)g
(access)0 1217 y(to)h(the)h(con)o(trol)g(\014les)h(of)e(the)h(remote)f
(ZMailer)i(installation.)26 b(This)17 b(mak)o(es)g(it)g(p)q(ossible)i
(for)d(an)h(en)o(vironmen)o(t)0 1279 y(making)12 b(use)g(of)g
(distributed)h(\014lesystems)g(to)e(ha)o(v)o(e)h(a)f(single)j(ZMailer)e
(installation)h(on)f(a)g(mail)g(serv)o(er)g(host,)g(and)0
1341 y(for)k(all)i(the)f(other)f(lo)q(cal)i(mac)o(hines)f(to)f(access)h
(its)g(services)h(transparen)o(tly)l(.)24 b(A)o(t)16
b(the)h(same)f(time,)i(no)e(priv)m(ate)0 1404 y(information)f(can)h(b)q
(e)g(divulged)h(without)e(direct)h(access)f(to)g(the)g(`)p
Fe(POSTOFFICE)p Fi(')e(directory)l(.)62 1541 y(The)j(ZMailer)f
(distribution)i(con)o(tains)f(a)f(utilit)o(y)h(program)e
Fe(mailq)h Fi(that)f(is)i(used)g(to)f(query)g(Sc)o(hedulers.)22
b(It)0 1603 y(supp)q(orts)15 b(the)g(transparency)g(paradigm)g(in)h(an)
f(NFS)g(en)o(vironmen)o(t,)g(b)o(y)g(arranging)f(to)h(query)g(the)g(Sc)
o(heduler)0 1665 y(running)h(on)f(the)h(NFS)f(serv)o(er)g(host)f(for)h
(the)g(`)p Fe(POSTOFFICE)p Fi(')e(directory)j(visible)h(on)e(the)h(lo)q
(cal)g(host.)0 1889 y Fd(4.5)35 b(Logging)62 2026 y Fi(As)17
b(with)f(the)h(Router,)f(the)h(Sc)o(heduler)h(daemon)f(will)h(attac)o
(h)d(its)i(standard)f(output)g(and)h(standard)f(error)0
2089 y(streams)h(to)f(a)h(log)h(\014le.)28 b(The)17 b(standard)g(error)
g(stream)g(of)g(eac)o(h)g(T)l(ransp)q(ort)g(Agen)o(t)g(in)o(v)o(o)q
(cation)h(is)g(inherited)0 2151 y(from)d(the)g(Sc)o(heduler,)i(and)f
(so)f(is)h(attac)o(hed)f(to)g(the)h(same)f(log)g(\014le.)22
b(The)16 b(Sc)o(heduler)h(do)q(es)f(ha)o(v)o(e)f(an)h(option)g(to)0
2213 y(pro)q(duce)g(a)f(debugging)h(log,)f(but)g(otherwise)h(only)g
(extraordinary)e(o)q(ccurrances)i(are)f(logged)g(\(for)g(example,)g(a)0
2275 y(deliv)o(ery)i(failure,)e(missing)i(T)l(ransp)q(ort)d(Agen)o(ts,)
h(etc.\).)p eop
%%Page: 56 57
56 56 bop 0 -58 a Fi(56)1380 b(ZMailer)16 b(Op)q(erations)g(Guide)0
183 y Fg(5.)41 b(T)-7 b(ransp)r(ort)28 b(Agen)n(ts)62
374 y Fi(A)15 b(T)l(ransp)q(ort)f(Agen)o(t)g(is)i(a)e(program)f(that)h
(deliv)o(ers)i(mail)g(to)e(a)g(particular)i(destination.)k(The)15
b(destination)0 436 y(paradigm)h(in)g(ZMailer)g(in)o(v)o(olv)o(es)g
(the)g(concept)g(of)g(a)f(c)o(hannel,)i(a)e(next-host,)g(and)h(a)g
(next-address.)21 b(The)16 b(\014rst)0 499 y(t)o(w)o(o)f(are)h(used)h
(b)o(y)f(the)g(Sc)o(heduler)i(to)e(select)h(a)f(T)l(ransp)q(ort)g(Agen)
o(t,)g(and)g(b)o(y)g(a)g(T)l(ransp)q(ort)g(Agen)o(t)g(to)g(iden)o(tify)
0 561 y(whic)o(h)k(destinations)f(it)g(should)h(pro)q(cess.)31
b(An)o(y)19 b(necessary)g(information)g(to)f(accomplish)i(this)g
(selection,)g(is)0 623 y(either)e(con)o(tained)h(within)f(the)g(T)l
(ransp)q(ort)f(Agen)o(t,)h(or)f(supplied)j(b)o(y)d(the)h(Sc)o(heduler)h
(on)f(the)g(command)f(line)0 686 y(when)22 b(in)o(v)o(oking)h(a)e(T)l
(ransp)q(ort)h(Agen)o(t.)39 b(The)22 b(message)f(con)o(trol)h(\014les)h
(examined)g(b)o(y)f(a)f(T)l(ransp)q(ort)g(Agen)o(t)0
748 y(instance)g(are)e(passed)h(b)o(y)g(the)g(Sc)o(heduler)i(in)e(a)g
(simple)h(proto)q(col)f(designed)h(for)f(the)f(purp)q(ose,)j(and)e
(status)0 810 y(rep)q(orts)15 b(on)g(the)g(actions)h(of)e(the)i(T)l
(ransp)q(ort)e(Agen)o(t)h(are)g(returned)h(b)o(y)f(the)g(same)g(proto)q
(col.)62 948 y(When)k(a)e(T)l(ransp)q(ort)h(Agen)o(t)f(starts)g(up,)h
(it)h(exp)q(ects)f(to)f(read)h(message)g(con)o(trol)f(\014le)i(path)f
(names)g(on)g(its)0 1010 y(standard)f(input)h(stream,)f(and)h(will)h
(prin)o(t)f(status)e(rep)q(orts)h(on)h(its)f(standard)g(output)h
(stream.)25 b(Unexp)q(ected)0 1072 y(errors)12 b(are)h(sen)o(t)f(to)h
(the)g(standard)f(error)g(stream)g(for)h(logging.)19
b(A)13 b(T)l(ransp)q(ort)f(Agen)o(t)h(can)g(b)q(e)h(in)o(v)o(ok)o(ed)f
(in)o(terac-)0 1135 y(tiv)o(ely)i(for)f(test)g(purp)q(oses,)h(but)f
(usually)i(it)f(is)g(started)e(as)h(a)h(c)o(hild)h(of)e(the)g(Sc)o
(heduler)i(daemon,)f(with)f(its)h(input)0 1197 y(and)i(output)f
(streams)f(attac)o(hed)h(to)f(the)i(Sc)o(heduler)h(using)f(pip)q(es,)h
(and)e(sharing)h(the)f(error)g(stream)f(with)i(the)0
1259 y(Sc)o(heduler)g(itself)f(\(and)f(other)g(concurren)o(t)g(T)l
(ransp)q(ort)g(Agen)o(t)g(pro)q(cesses\).)62 1397 y(The)22
b(follo)o(wing)h(sections)f(describ)q(e)i(the)e(T)l(ransp)q(ort)f(Agen)
o(t)h(programs)e(that)i(come)f(with)i(the)f(ZMailer)0
1459 y(distribution.)0 1691 y Fd(5.1)35 b(Lo)r(cal)23
b(deliv)n(ery)e(\(mailb)r(o)n(x\))62 1829 y Fi(The)15
b(deliv)o(ery)h(of)f(lo)q(cal)h(mail)f(is)g(of)g(paramoun)o(t)f(imp)q
(ortance)h(in)g(a)g(mailer.)20 b(Of)15 b(all)h(the)f(things)g(that)f
(migh)o(t)0 1891 y(go)h(wrong)g(during)i(mail)g(pro)q(cessing,)f(a)f
(mistak)o(e)h(b)o(y)g(the)g(lo)q(cal)g(deliv)o(ery)i(pro)q(cess)e(can)g
(b)q(e)g(the)g(most)f(critical.)0 1953 y(Since)i(it)f(is)g(also)f(a)g
(v)o(ery)g(frequen)o(t)h(op)q(eration,)f(this)h(T)l(ransp)q(ort)f(Agen)
o(t)g(m)o(ust)g(b)q(e)h(b)q(oth)g(robust)f(and)h(e\016cien)o(t.)0
2016 y(P)o(erfection)f(is)h(elusiv)o(e,)g(but)f(the)g(lo)q(cal)h(deliv)
o(ery)h(program)c(included)18 b(with)d(ZMailer)h(has)f(pro)o(v)o(en)f
(itself)i(in)g(the)0 2078 y(original)g(v)o(ersion)g(used)f(with)h
(Sendmail.)62 2216 y(This)f(program)f(will)i(lo)q(ok)f(for)e
(destinations)j(with)e(a)h(c)o(hannel)g(of)f(`)p Fe(local)p
Fi(',)f(and)i(will)h(ignore)f(the)f(next-host)0 2278
y(sp)q(eci\014cation.)25 b(The)17 b(next-address)f(sp)q(eci\014cation)i
(is)f(either)g(a)f(lo)q(cal)i(accoun)o(t)e(id,)h(a)f(full)h(path)g(to)e
(a)h(\014le,)h(or)f(a)0 2340 y(pip)q(e)h(\(`)p Fe(|)p
Fi('\))c(follo)o(w)o(ed)j(b)o(y)f(a)g(v)m(alid)i(argumen)o(t)d(to)h
Fe(sh)23 b(-c)p Fi(.)d(The)15 b(follo)o(wing)h(are)f(examples)h(of)f
Fb(legal)h Fi(v)m(alues:)120 2471 y Fe(bond)120 2521
y(/usr/arch/lists/info-widge)o(t)120 2570 y(/etc/passwd)120
2620 y(|sed)23 b(-e)h('1,/^$/d')f(>>)g(/etc/passwd)120
2670 y(|/bin/mail)f(badhost!badguy)g(</etc/passwd)p eop
%%Page: 57 58
57 57 bop 0 -58 a Fi(T)l(ransp)q(ort)15 b(Agen)o(ts)1555
b(57)0 183 y(Here)15 b(are)g(some)g Fb(illegal)j Fi(v)m(ariations:)120
317 y Fe(<bond>)667 b Fi(\(angle)16 b(brac)o(k)o(ets)e(in)o(v)m(alid)k
(in)e(lo)q(cal-part\))120 367 y Fe("bond")667 b Fi(\(double)16
b(quotes)f(unlik)o(ely)j(in)e(login)g(id\))120 417 y
Fe(bond)p Fh(@)p Fe(sis.mod.uk)452 b Fi(\(lo)q(cal-parts)15
b(do)g(not)g(con)o(tain)h(`)p Fh(@)p Fi('\))120 467 y
Fe(james)23 b(bond)572 b Fi(\(whitespace)16 b(unlik)o(ely)i(in)e(login)
g(id\))120 517 y Fe(lists/info-widget)403 b Fi(\(not)15
b(an)g(absolute)h(pathname\))120 567 y Fe(sed)23 b(-e)h('1,/^$/d')f(>>)
g(/etc/passwd)70 b Fi(\(do)q(es)16 b(not)e(start)g(with)i(a)f(`)p
Fe(|)p Fi('\))62 738 y(Note)g(that)g(the)h(e\013ect)f(of)g(these)g
(addresses)h(dep)q(ends)h(on)e(whether)h(the)f(lo)q(cal)i(deliv)o(ery)g
(program)d(actually)0 800 y(honours)h(the)g(request,)g(and)h(if)f(it)h
(do)q(es)f(whic)o(h)h(privileges)h(are)e(used)h(while)h(executing)f
(the)f(indicated)i(action.)62 972 y(Sp)q(eci\014cally)m(,)i(if)e(the)g
(next-address)g(do)q(es)g(not)f(start)f(with)i(either)g(`)p
Fe(|)p Fi(')f(or)g(`)p Fe(/)p Fi(',)g(it)h(is)g(assumed)f(to)g(b)q(e)i
(a)e(user)0 1034 y(name.)28 b(This)18 b(is)g(c)o(hec)o(k)o(ed)h(b)o(y)e
(lo)q(okup)i(in)g(the)e(system)h(accoun)o(t)f(database)h(\(`)p
Fe(/etc/passwd)p Fi('\),)d(to)i(determine)0 1097 y(whic)o(h)k(user)f
(id)g(should)h(o)o(wn)e(the)h(mailb)q(o)o(x)h(\014le.)34
b(If)20 b(the)g(indicated)i(accoun)o(t)d(exists,)i(mail)g(is)f(deliv)o
(ered)i(to)0 1159 y(its)e(corresp)q(onding)g(mail)g(sp)q(o)q(ol)h
(\014le,)g(in)f(the)g(standard)f(format)f(\(return)h(address)g(and)h
(deliv)o(ery)h(date)e(in)h(a)0 1221 y(`)p Fe(From)j Fi(')d(line)h
(preceding)h(the)e(actual)g(message,)h(etc.\).)34 b(Note)19
b(that)h(ev)o(en)g(though)g(accoun)o(t)g(names)g(should)0
1283 y(ideally)h(b)q(e)f(case-indep)q(endent)h(there)f(is)g(no)f(p)q
(ortable)h(w)o(a)o(y)e(of)h(doing)h(a)f(case-indep)q(endent)i(lo)q
(okup)g(in)f(the)0 1346 y(accoun)o(t)13 b(database.)19
b(The)13 b(Router)h(deals)f(with)h(this)g(b)o(y)f(\014rst)g(trying)g
(the)h(name)f(lo)q(okup)h(without)f(doing)h(a)f(case)0
1408 y(translation,)g(and)h(if)f(that)g(fails)h(the)f(upp)q(ercase)h
(letters)f(in)h(the)g Fb(lo)q(cal-part)g Fi(will)h(b)q(e)e(mapp)q(ed)h
(to)f(lo)o(w)o(ercase)g(and)0 1470 y(the)i(lo)q(okup)h(retried.)21
b(The)15 b(lo)q(cal)h(deliv)o(ery)h(program)d(do)q(es)i
Fb(no)f Fi(aliasing)h(on)f(its)h(o)o(wn.)62 1642 y(If)f(deliv)o(ery)i
(to)d(a)h(\014le)g(or)g(command)g(is)g(indicated,)h(the)f(actual)g
(deliv)o(ery)i(is)e(done)g(using)h(the)f(user)g(id)h(listed)0
1704 y(as)g(the)h(destination)g(address)g(privilege)h(in)g(the)e(con)o
(trol)h(\014le.)25 b(What)16 b(this)h(actual)f(privilege)j(allo)o(ws,)e
(is)g(up)g(to)0 1766 y(the)e(securit)o(y)g(mec)o(hanism)g(in)g(the)g
(Router.)20 b(Since)c(addresses)e(sp)q(eci\014ed)j(from)d(a)g(remote)g
(host)g(start)f(out)i(with)0 1829 y(minimal)i(privileges,)g(they)e
(will)i(usually)f(not)f(cause)g(an)o(y)g(harm)g(on)g(the)h(lo)q(cal)g
(system.)62 2000 y(Programs)c(executed)i(b)o(y)f(this)h(T)l(ransp)q
(ort)e(Agen)o(t)h(will)i(b)q(e)f(giv)o(en)f(an)g(en)o(vironmen)o(t)h
(con)o(taining)g(the)f Fe($PATH)p Fi(,)0 2063 y Fe($SHELL)p
Fi(,)i Fe($HOME)p Fi(,)g Fe($USER)p Fi(,)h Fe($UID)p
Fi(,)f(and)h Fe($SENDER)g Fi(en)o(vironmen)o(t)g(v)m(ariables.)24
b(The)16 b(\014rst)g(t)o(w)o(o)f(are)h(constan)o(t,)f(the)0
2125 y(next)i(three)g(dep)q(end)h(on)f(the)g(deliv)o(ery)h(privilege)h
(of)e(the)g(address,)f(and)i(the)e(v)m(alue)j(of)d(the)h(last)g(en)o
(vironmen)o(t)0 2187 y(v)m(ariable)e(is)g(set)f(to)f(b)q(e)i(the)f
(return)g(address)h(of)e(the)h(message)g(b)q(eing)i(deliv)o(ered.)21
b(The)14 b(curren)o(t)g(directory)h(is)f(set)0 2249 y(to)h(b)q(e)g
Fe($HOME)g Fi(when)h(p)q(ossible.)62 2421 y(The)i(lo)q(cal)g(deliv)o
(ery)g(program)e(con)o(tains)h(co)q(de)h(that)e(ma)o(y)g(b)q(e)i
(enabled)g(at)f(compile)h(time)g(to)e(honour)h(the)0
2483 y Fe(comsat)e Fi(proto)q(col.)23 b(There)17 b(are)f(separate)g
(sym)o(b)q(ols)g(to)g(enable)h(this)g(for)f(lo)q(cal)h(users)f(\()p
Fe(BIFF)p Fi(\))f(and)i(for)f(remote)0 2545 y(users)d(\()p
Fe(RBIFF)p Fi(\).)k(In)d(the)f(former)e(case,)i(users)g(w)o(ould)g
(enable)h(the)f(feature)f(individual)q(ly)k(b)o(y)c(executing)i
Fe(biff)24 b(y)p Fi(,)0 2608 y(while)16 b(in)g(the)f(latter)f(case)h(a)
f(`)p Fe(.rbiff)p Fi(')g(\014le)h(in)h(the)f(user's)f(home)h(directory)
g(triggers)f(the)h(remote)f(noti\014cation)0 2670 y(of)h(new)g(mail.)p
eop
%%Page: 58 59
58 58 bop 0 -58 a Fi(58)1380 b(ZMailer)16 b(Op)q(erations)g(Guide)0
183 y Fd(5.2)35 b(Error)25 b(mail)20 b(deliv)n(ery)i(\(errormail\))62
328 y Fi(The)c(error)e(messages)h(of)g(ZMailer)g(are)g(stored)g(as)g
(message)f(\014le)j(forms)d(in)i(a)f(sp)q(eci\014c)i(`)p
Fe(FORMS)p Fi(')d(directory)l(.)0 390 y(The)e(v)m(arious)g(ZMailer)g
(programs)e(will)j(access)f(the)f(appropriate)h(forms)e(directly)l(,)j
(but)f(errors)e(detected)j(in)f(the)0 453 y(Router)g(con\014guration)f
(\014le)i(m)o(ust)e(b)q(e)h(handled)h(in)g(a)e(di\013eren)o(t)h(w)o(a)o
(y)l(.)k(By)c(con)o(v)o(en)o(tion,)g(an)o(y)f(problem)h(found)g(b)o(y)0
515 y(con\014guration)h(\014le)i(co)q(de)e(is)h(handled)h(b)o(y)e(c)o
(hanging)h(the)f(message)g(destination)h(to)e(b)q(e)i(a)f(triple)h(of)f
(the)g(form:)120 660 y Fe(\(error,)23 b Fb(form)p Fe(,)g
Fb(address)p Fe(\))62 805 y Fi(The)18 b(`)p Fe(error)p
Fi(')e(c)o(hannel)j(is)f(serviced)h(b)o(y)f(this)g(T)l(ransp)q(ort)f
(Agen)o(t,)h(whic)o(h)g(exp)q(ects)h(the)e Fb(form)g
Fi(listed)i(to)e(b)q(e)0 867 y(the)i(name)g(of)f(a)h(\014le)h(in)f(the)
g(`)p Fe(FORMS)p Fi(')f(directory)l(.)31 b(This)19 b(should)h(b)q(e)g
(a)e(protot)o(yp)q(e)g(message)h(\014le,)h(con)o(taining)0
929 y(all)c(generic)g(information)f(asso)q(ciated)g(with)g(the)g(error)
f(\(i.e.)20 b(the)15 b(message)f(header)i(lines)g(and)f(an)g
(appropriate)0 992 y(explanation)20 b(to)e(the)h(user\).)31
b(The)19 b Fb(address)g Fi(is)g(the)g(address)g(rejected)h(b)o(y)f(the)
g(con\014guration)g(\014le)h(co)q(de,)g(for)0 1054 y(whatev)o(er)15
b(reason)f(is)i(giv)o(en)g(in)g(the)f Fb(form)g Fi(\014le.)62
1199 y(By)d(con)o(v)o(en)o(tion,)f(the)g(names)g(of)g(the)g
Fb(form)g Fi(\014les)h(indicate)g(the)g(class)f(of)g(error)f(that)h(o)q
(ccurred.)19 b(The)11 b(follo)o(wing)0 1261 y(describ)q(es)17
b(the)e(standard)g(forms)f(that)h(come)g(with)g(ZMailer:)0
1406 y(`)p Fe(err.badheader)p Fi(')240 1468 y(Syn)o(tax)g(error)f(in)i
(the)g(message)e(header.)0 1551 y(`)p Fe(err.delivery)p
Fi(')240 1613 y(Deliv)o(ery)i(problem,)g(used)f(b)o(y)g(the)h(Sc)o
(heduler)h(on)e(b)q(ehalf)h(of)f(T)l(ransp)q(ort)g(Agen)o(ts.)0
1696 y(`)p Fe(err.nonewsgroup)p Fi(')240 1758 y(A)g(non-existen)o(t)h
(USENET)f(Newsgroup)g(w)o(as)g(addressed.)0 1841 y(`)p
Fe(err.norecipients)p Fi(')240 1903 y(The)g(message)g(has)g(no)g
(recipien)o(ts)i(listed.)0 1986 y(`)p Fe(err.unresolvable)p
Fi(')240 2048 y(The)h(routing)g(co)q(de)g(in)h(the)f(Router)g
(con\014guration)g(\014le)h(cannot)e(determine)i(a)f(destination)h(for)
240 2111 y(the)c(message.)0 2193 y(`)p Fe(warn.badheader)p
Fi(')240 2256 y(Used)h(to)e(c)o(hastise)i(a)e(user)i(who)f(sends)h
(improp)q(erly)g(formatted)e(mail.)62 2401 y(Of)i(these,)g(only)h(`)p
Fe(err.nonewsgroup)p Fi(')c(and)j(`)p Fe(err.unresolvable)p
Fi(')d(are)j(referred)g(to)f(b)o(y)h(the)g(Router)g(con-)0
2463 y(\014guration)e(\014le,)h(the)g(rest)f(are)g(used)h(in)o
(ternally)g(b)o(y)g(the)f(Router)g(or)g(Sc)o(heduler.)21
b(Therefore)15 b(these)f(forms)g Fb(m)o(ust)0 2525 y
Fi(b)q(e)i(a)o(v)m(ailable)h(for)d(prop)q(er)i(op)q(eration)f(of)g
(ZMailer.)62 2670 y(T)l(o)g(illustrate,)h(here)g(is)f(the)h(default)f
(`)p Fe(err.badheader)p Fi(')e(form:)p eop
%%Page: 59 60
59 59 bop 0 -58 a Fi(T)l(ransp)q(ort)15 b(Agen)o(ts)1555
b(59)120 111 y Fe(--------------------)120 161 y(From:)71
b(The)23 b(Post)h(Office)f(<postmaster>)120 211 y(Subject:)g(Invalid)g
(message)g(header)120 261 y(Cc:)119 b(The)23 b(Postmaster)g
(<postmaster>)120 360 y(The)g(following)g(message)g(arrived)g(with)g
(an)h(illegal)f(header)g(according)f(to)i(the)120 410
y(RFC822/976)e(protocol)h(specification.)f(If)i(you)f(do)h(not)f
(recognize)g(the)g(source)120 460 y(of)h(the)f(bad)g(header,)g(perhaps)
g(you)h(should)f(ask)g(a)h(postmaster)e(at)i(your)f(site.)120
560 y(The)g(following)g(annotated)g(headers)g(illustrate)f(where)h(the)
h(error\(s\))f(occurred:)120 659 y(--------------------)0
910 y Fd(5.3)35 b(SMTP)23 b(clien)n(t)e(\(sm)n(tp\))62
1050 y Fi(The)c(SMTP)f(T)l(ransp)q(ort)g(Agen)o(t)g(implemen)o(ts)i
(this)f(message)f(transfer)g(proto)q(col)h(according)g(to)e(RF)o(C821.)
0 1112 y(It)23 b(scans)f(message)g(con)o(trol)h(\014les)g(for)f(a)g(c)o
(hannel)i(called)g(`)p Fe(smtp)p Fi(',)f(and)g(a)f(next-host)g(as)h(sp)
q(eci\014ed)h(on)f(the)0 1174 y(command)17 b(line.)26
b(Only)19 b(a)d(single)i(virtual)g(circuit)g(\(V)o(C\))e(is)h
(established)i(to)d(the)h(remote)g(SMTP)f(serv)o(er,)h(and)0
1237 y(all)e(transactions)f(are)g(carried)g(out)g(in)h(sequence)g
(across)f(this)g(V)o(C.)g(By)g(con)o(trast,)f(Sendmail)i(op)q(ens)g(a)f
(new)g(V)o(C)0 1299 y(for)h(ev)o(ery)g(mail)h(message.)62
1439 y(This)c(program)e(do)q(es)i(not)e(enforce)i(the)f(line)i(length)f
(limits)g(of)f(the)g(SMTP)g(proto)q(col,)g(nor)g(do)q(es)h(it)f(c)o
(hec)o(k)h(that)0 1501 y(the)h(message)g(\014le)g(data)g(is)g(7)g(bit)g
(ASCI)q(I.)h(Ho)o(w)o(ev)o(er,)e(the)h(CRLF)g(line)i(termination)e
(rule)h(is)g(follo)o(w)o(ed,)f(as)f(are)h(all)0 1564
y(other)f(asp)q(ects)g(of)g(the)g(SMTP)g(proto)q(col.)19
b(When)12 b(connected)h(to)f(a)g(ZMailer)g(SMTP)g(serv)o(er)g(program,)
f(message)0 1626 y(b)q(o)q(dies)20 b(con)o(taining)f(arbitrary)e
(binary)i(data)f(ma)o(y)f(b)q(e)i(transferred)f(\(since)h(the)f(SMTP)g
(D)o(A)l(T)l(A)g(enco)q(ding)h(is)0 1688 y(rev)o(ersible,)d(and)g
(there)f(are)g(no)g(line)i(length)f(limits)g(on)f(either)h(end\).)62
1828 y(A)g(log)f(\014le)h(ma)o(y)e(b)q(e)i(sp)q(eci\014ed)i(for)c
(recording)i(the)f(SMTP)g(transaction.)0 2079 y Fd(5.4)35
b(Sendmail)21 b(compatible)f(deliv)n(ery)i(programs)i(\(sm\))62
2219 y Fi(Because)19 b(Sendmail)h(already)f(has)f(man)o(y)g(\\mailer"s)
g(written)h(for)e(it,)i(and)g(to)e(ease)i(the)f(transition)h(from)0
2281 y(Sendmail)f(to)e(ZMailer,)g(this)h(T)l(ransp)q(ort)f(Agen)o(t)g
(w)o(as)f(written)i(to)e(in)o(terface)i(with)g(suc)o(h)f(programs)f
(from)h(the)0 2343 y(ZMailer)j(en)o(vironmen)o(t.)32
b(The)19 b(basic)h(c)o(haracteristic)f(of)g(a)f(Sendmail)j(\\mailer")e
(is)h(that)e(its)h(command)g(line)0 2406 y(sp)q(eci\014es)e(what)e(m)o
(ust)f(b)q(e)i(done)g(with)f(the)h(message)e(a)o(v)m(ailable)j(on)e
(its)h(standard)e(input)j(stream.)62 2545 y(Because)g(of)e(the)h
(generic)g(in)o(terface,)g(this)g(T)l(ransp)q(ort)f(Agen)o(t)g
(requires)i(a)e(small)i(con\014guration)e(\014le)i(whic)o(h)0
2608 y(it)i(reads)f(on)g(startup.)28 b(The)19 b(con\014guration)f
(\014le)i(declares)f(whic)o(h)g(programs)e(are)h(a)o(v)m(ailable,)j(ho)
o(w)c(to)h(in)o(v)o(ok)o(e)0 2670 y(them,)d(and)g(what)g(c)o(hannel)h
(eac)o(h)f(program)g(corresp)q(onds)g(to.)k(Here)d(is)f(a)g(sample)h
(con\014guration)f(\014le:)p eop
%%Page: 60 61
60 60 bop 0 -58 a Fi(60)1380 b(ZMailer)16 b(Op)q(erations)g(Guide)120
115 y Fe(#)24 b(M)119 b(F)24 b(=)95 b(P)24 b(=)477 b(A)24
b(=)120 165 y(local)71 b(mS)119 b(/usr/lib/mail/localm)69
b(localm)23 b(-r)g($g)h($u)120 215 y(prog)95 b(-)143
b(/bin/sh)381 b(sh)23 b(-c)h($u)120 264 y(tty)119 b(rs)g(/usr/local/to)
237 b(to)23 b($u)120 314 y(uucp)95 b(U)143 b(/usr/bin/uux)261
b(uux)23 b(-)h(-r)g(-a$g)f(-gC)g($h!rmail)g(\($u\))120
364 y(news)95 b(m)143 b(/usr/lib/mail/pnews)93 b(post.news)22
b($h)i($u)62 503 y Fi(The)15 b(con\014guration)f(\014le)i(is)f(a)f
(table)g(with)h(eac)o(h)g(line)h(con)o(taining)f(four)f(\014elds:)20
b(a)14 b(c)o(hannel)i(name,)e(Sendmail)0 566 y(\\mailer")h(\015ags,)f
(the)h(full)i(path)d(name)h(of)g(the)g(program)f(to)g(execute,)h(and)g
(the)g(command)g(line)i(that)d(program)0 628 y(should)i(see.)62
767 y(The)g(\015ags)f(\014eld)h(con)o(tains)g(the)f(\015ags)g(that)f
(are)h(appropriate)h(to)e(the)i(ZMailer)f(en)o(vironmen)o(t,)g(for)g
(example)0 829 y(the)g(presen)o(tly)h(recognized)g(\015ags)f(are:)0
969 y(`)p Fe(f)p Fi(')190 b(Include)17 b(a)e(`)p Fe(-f)23
b Fb(sender)p Fi(')16 b(in)g(the)f(command)g(line.)0
1046 y(`)p Fe(r)p Fi(')190 b(Include)17 b(a)e(`)p Fe(-r)23
b Fb(sender)p Fi(')16 b(in)g(the)f(command)g(line.)0
1123 y(`)p Fe(S)p Fi(')190 b(Do)15 b(not)f(reset)h(the)h(uid)g(to)e
(the)i(real)f(uid)i(of)d(the)i(T)l(ransp)q(ort)e(Agen)o(t)h(pro)q
(cess.)0 1200 y(`)p Fe(n)p Fi(')190 b(Do)15 b Fb(not)f
Fi(prep)q(end)j(a)e(`)p Fe(From)23 b Fi(')15 b(line)h(to)f(the)g
(message.)0 1277 y(`)p Fe(s)p Fi(')190 b(Strip)16 b(quotes)f(on)g
(addresses)g([XX:to)q(do].)0 1354 y(`)p Fe(m)p Fi(')190
b(Man)o(y)15 b(recipien)o(ts)h(ma)o(y)f(b)q(e)h(handled)g(b)o(y)f(a)g
(single)i(instance)f(of)f(the)g(command.)0 1431 y(`)p
Fe(P)p Fi(')190 b(Add)16 b(a)f(\\Return-P)o(ath")f(message)h(header.)0
1508 y(`)p Fe(U)p Fi(')190 b(Prep)q(end)16 b(a)f(`)p
Fe(From)23 b(...)47 b(remote)23 b(from)h(...)p Fi(')14
b(line)j(to)e(the)g(message.)0 1585 y(`)p Fe(X)p Fi(')190
b(Use)15 b(the)h(SMTP)e(hidden)j(dot)e(algorithm)g(\(i.e.)20
b(escap)q(e)c(p)q(erio)q(ds)h(on)e(a)g(line)i(b)o(y)e(themselv)o(es\).)
0 1662 y(`)p Fe(E)p Fi(')190 b(Replace)17 b(o)q(ccurrences)g(of)f(`)p
Fe(From)23 b Fi(')15 b(at)g(the)h(start)f(of)g(a)h(line)h(in)g(the)f
(message)f(b)q(o)q(dy)i(with)f(`)p Fe(>From)240 1724
y Fi('.)0 1801 y(`)p Fe(7)p Fi(')190 b(P)o(ass)14 b(7-bit)i(ASCI)q(I)g
(b)o(y)g(stripping)g(8th)f(bit)g(of)g(b)o(ytes)g(in)h(the)f(message)g
([XX:to)q(do].)0 1878 y(`)p Fe(-)p Fi(')190 b(No-op)15
b(\015ag.)62 2018 y(Mailer)20 b(\015ags)f(that)f(are)h(not)g(men)o
(tioned)g(in)h(the)g(ab)q(o)o(v)o(e)e(table)i(ha)o(v)o(e)f(b)q(een)h
(excluded)h(due)f(to)e(their)i(lac)o(k)0 2080 y(of)c(seman)o(tics)g(in)
h(this)g(situation.)23 b(T)o(ypically)18 b(their)e(functionalit)o(y)i
(should)f(b)q(e)g(accomplished)h(in)f(the)f(Router)0
2142 y(instead)g([XX:)e(if)i(it)g(isn't,)e(and)i(it)f(is)h(needed,)g
(please)g(let)g(me)f(kno)o(w].)62 2282 y(The)21 b(command)e(line)j(sp)q
(eci\014cation)g(ma)o(y)d(con)o(tain)i(an)o(ything)f(v)m(alid)i(in)e
(the)h(same)e(\014eld)j(in)e(a)g(Sendmail)0 2344 y(\\mailer")h
(de\014nition.)37 b(In)20 b(particular,)i(an)o(y)e(argumen)o(t)g(con)o
(taining)h(`)p Fe($u)p Fi(')e(is)i(expanded)g(as)f(man)o(y)g(times)g
(as)0 2406 y(there)c(are)g(recipien)o(ts)h(that)e(can)h(b)q(e)h(dealt)f
(with)g(at)g(once)g(b)o(y)g(that)f(command.)22 b(The)16
b(`)p Fe($g)p Fi(')f(macro)g(expands)i(to)0 2468 y(the)e(return)g
(address)h(of)e(the)i(message,)e(and)h(`)p Fe($h)p Fi(')g(to)f(the)h
(next-host)g(in)h(the)g(destination.)62 2608 y(A)o(t)i(presen)o(t,)h
(no)f(sp)q(ecial)i(en)o(vironmen)o(t)e(is)h(set)f(up)h(for)e(programs)g
(executed)i(b)o(y)f(this)h(T)l(ransp)q(ort)f(Agen)o(t.)0
2670 y(The)i(standard)g(output)g(and)g(standard)g(error)f(of)h(suc)o(h)
g(pro)q(cesses)h(are)e(caugh)o(t)h(b)o(y)g(the)g(T)l(ransp)q(ort)g
(Agen)o(t,)p eop
%%Page: 61 62
61 61 bop 0 -58 a Fi(T)l(ransp)q(ort)15 b(Agen)o(ts)1555
b(61)0 183 y(and)20 b(the)g(\014rst)f(line)j(read)d(\(if)h(an)o(y\))f
(is)i(passed)f(on)f(to)g(the)h(Sc)o(heduler)i(using)e(the)g(normal)g
(status)f(rep)q(orting)0 246 y(mec)o(hanism.)p eop
%%Page: 62 63
62 62 bop 0 -58 a Fi(62)1380 b(ZMailer)16 b(Op)q(erations)g(Guide)0
183 y Fg(6.)41 b(Miscellaneous)0 457 y Fd(6.1)35 b(Sendmail)21
b(compatibili)o(t)n(y)62 594 y Fi(After)e(installing)i(the)e(Sendmail)i
(compatible)f(ZMailer)f(in)o(terface)g(programs,)f(the)h(presen)o(t)g
(user-visible)0 656 y(incompatibilitie)q(s)f(with)d(Sendmail)i(prop)q
(er)f(are:)39 793 y Ff(\017)30 b Fi(V)l(erb)q(ose)16
b(mo)q(de)f(\(`)p Fe(-v)p Fi(')f(\015ag)h(to)g(Sendmail\))h(is)g(not)f
(implemen)o(ted.)39 868 y Ff(\017)30 b Fi(Occurrences)17
b(of)d(`)p Fe(:include:)p Fi(')f(sp)q(eci\014cations)18
b(in)e(the)f(aliases)h(database)e(m)o(ust)h(b)q(e)h(quoted.)39
943 y Ff(\017)30 b Fi(The)15 b(\\Return-Receipt-T)l(o")i(message)e
(header)h(is)f(not)g(y)o(et)g(honoured.)39 1018 y Ff(\017)30
b Fi(The)13 b(mailing-list)j(managemen)o(t)c(features)g(of)h(Sendmail)h
(are)f(not)g(implemen)o(ted,)h(a)o(v)m(aiting)g(consultation.)0
1242 y Fd(6.2)35 b(SMTP)23 b(serv)n(er)62 1379 y Fi(The)14
b(ZMailer)f(distribution)i(con)o(tains)e(an)g(SMTP)f(serv)o(er)h
(program)f(for)g(the)h(BSD)g(so)q(c)o(k)o(et)g(implemen)o(tation)0
1441 y(of)f(TCP/IP)l(.)g(It)h(is)g(an)g(async)o(hronous)f(implemen)o
(tation,)i(in)f(that)f(address)h(seman)o(tics)g(are)f(not)g(c)o(hec)o
(k)o(ed)h(in)h(real)0 1503 y(time,)j(nor)f(are)h(other)f(\(optional)h
(in)g(the)g(SMTP)f(standard\))g(functions)i(that)e(require)h(Router)g
(functionalit)o(y)l(.)0 1566 y(The)h(serv)o(er)f(simply)h(sa)o(ys)f
(\\Y)l(es)g(y)o(es,)h(sure!")26 b(to)17 b(ev)o(erything,)h(and)f
(passes)h(the)f(information)h(to)e(the)i(Router)0 1628
y(for)f(v)o(eri\014cation.)28 b(The)18 b(program)f(ma)o(y)g(also)h(b)q
(e)g(used)h(in)f(non-daemon)g(mo)q(de)g(to)g(unpac)o(k)g(BSMTP)f
(format)0 1690 y(messages)j(on)h(the)g(standard)f(input)i(stream.)35
b(F)l(or)20 b(compatibilit)o(y)j(with)e(the)f(Sendmail)j(v)m(ariation)e
(on)g(the)0 1752 y(SMTP)16 b(proto)q(col,)g(it)h(accepts)f(the)h
Fe(VERB)e Fi(and)i Fe(ONEX)f Fi(commands)g(as)g(No-Ops.)23
b(The)17 b Fe(VRFY)p Fi(,)e Fe(EXPN)p Fi(,)h Fe(HELP)p
Fi(,)g(and)0 1815 y Fe(TURN)i Fi(commands)g(are)g(presen)o(tly)g
(unimplemen)o(ted,)j(as)d(is)h(the)f(case)g(for)g(the)g(in)o(teractiv)o
(e)h Fe(SEND)p Fi(,)f Fe(SAML)p Fi(,)g(and)0 1877 y Fe(SOML)d
Fi(commands.)p eop
%%Page: 63 64
63 63 bop 0 -58 a Fi(Ho)o(w-T)l(o)14 b(Guide)1617 b(63)0
183 y Fg(7.)41 b(Ho)n(w-T)-7 b(o)28 b(Guide)62 372 y
Fi(This)20 b(c)o(hapter)e(is)i(in)o(tended)g(to)e(giv)o(e)h(practical)h
(tips)f(on)g(topics)g(related)g(to)f(the)h(main)o(tenance)g(and)g(cus-)
0 434 y(tomization)c(of)g(ZMailer.)20 b(If)c(y)o(ou)f(w)o(an)o(t)f(to)g
(see)i(something)f(co)o(v)o(ered)g(here,)g(let)h(me)f(kno)o(w.)0
662 y Fd(7.1)35 b(Ho)n(w)23 b(to)g(install)e(ZMailer)62
800 y Fi(Thie)d(`)p Fe(README)p Fi(')e(\014le)i(in)g(the)f
(distribution)i(con)o(tains)f(sp)q(eci\014c)h(instructions)f(for)e
(installing)j(ZMailer.)27 b(The)0 862 y(follo)o(wing)16
b(go)q(es)f(in)o(to)g(sligh)o(tly)h(more)f(depth)h(than)f(the)g(`)p
Fe(README)p Fi(')f(\014le)i(do)q(es:)62 1000 y(The)21
b(do)q(cumen)o(tation)h(for)e(ZMailer)h(\(part)f(of)h(whic)o(h)h(y)o
(ou)e(are)h(reading)g(righ)o(t)g(no)o(w\))f(is)h(main)o(tained)h(in)0
1062 y Fb(texinfo)14 b Fi(format.)k(T)l(o)13 b(format)f(this)i(for)f(a)
h(high-qualit)o(y)h(output)e(device)i(requires)f(that)f(y)o(ou)g
(already)h(ha)o(v)o(e)f(T)1890 1072 y(E)1916 1062 y(X)0
1124 y(running,)k(and)e(that)g(y)o(ou)h(ha)o(v)o(e)f(the)h(T)l(exinfo)g
(macro)f(pac)o(k)m(age)h(installed)h(in)g(the)e(T)1450
1134 y(E)1476 1124 y(X)h(macro)f(library)l(.)22 b(If)16
b(not,)0 1186 y(these)i(macros)f(are)h(part)f(of)h(ev)o(ery)f(GNU)h
(Emacs)g(distribution)h(\(and)f(included)j(with)d(the)g(curren)o(t)g
(ZMailer)0 1249 y(distribution\).)33 b(Generating)19
b(a)g(line)i(prin)o(ter)f(or)e(screen)i(v)o(ersion)g(of)e(the)i(do)q
(cumen)o(tation)f(requires)h(the)f(aid)0 1311 y(of)h(GNU)f(Emacs)h
(\(see)g(`)p Fe(doc/Makefile)p Fi('\).)32 b(If)20 b(y)o(ou)g(ha)o(v)o
(e)f(neither)i(T)1237 1321 y(E)1263 1311 y(X)f(nor)g(GNU)g(Emacs,)g
(ask)g(me)g(for)f(a)0 1373 y(preformatted)14 b(v)o(ersion)i(of)e(the)i
(do)q(cumen)o(tation.)62 1511 y(There)e(is)g(v)o(ery)e(little)j(hardco)
q(ded)f(con\014guration)g(information)f(in)h(the)f(ZMailer)h(programs.)
k(The)c(`)p Fe(conf.c)p Fi(')0 1573 y(\014les)h(in)f(the)g(`)p
Fe(router)p Fi(')e(and)h(`)p Fe(scheduler)p Fi(')f(sub)q(directories)j
(of)f(the)f(distribution)i(are)f(the)f(primary)h(lo)q(cations)g(of)0
1635 y(static)g(con\014guration)g(information.)20 b(Y)l(ou)14
b(should)h(c)o(hec)o(k)g(these)f(\014les,)h(but)f(there)h(is)f(no)g
(need)h(to)f(c)o(hange)g(them)0 1697 y(unless)i(y)o(ou)f(kno)o(w)g
(what)g(y)o(ou)f(are)h(doing,)h(and)f(insist.)62 1835
y(The)20 b(only)g(other)g(static)f(global)h(information)g(is)g(k)o(ept)
g(in)g(the)g(`)p Fe(mail.h)p Fi(')e(header)i(\014le)h(in)f(the)g(`)p
Fe(include)p Fi(')0 1897 y(sub)q(directory)l(.)k(In)16
b(an)g(op)q(erating)h(system)e(en)o(vironmen)o(t)i(that)e(in)o
(tegrates)h(ZMailer,)g(this)g(\014le)i(is)e(in)o(tended)i(to)0
1959 y(go)d(in)h(`)p Fe(/usr/include)p Fi('.)62 2097
y(There)d(is)f(some)g(dynamic)i(global)e(information,)h(and)f(other)g
(compile)i(time)f(information,)f(that)g(needs)h(to)e(b)q(e)0
2159 y(sp)q(eci\014ed)k(somewhere.)k(The)13 b(w)o(a)o(y)f(it)i(is)f
(done)h(with)f(ZMailer,)g(is)h(that)e(y)o(ou)h(\(the)g(installer\))h
(edits)f(a)g(global)h(con-)0 2221 y(\014guration)f(\014le)g(\(`)p
Fe(Config)p Fi('\),)e(whic)o(h)i(con)o(tains)g(v)m(ariable)h
(de\014nitions)g(that)e(will)i(propagate)d(to)h(all)i(the)e(mak)o
(e\014les)0 2284 y(in)17 b(the)f(distribution.)23 b(These)16
b(de\014nitions)i(will)g(also)d(app)q(ear)h(in)h(a)f(\014le)h(`)p
Fe(/etc/zmailer.conf)p Fi(')12 b(that)k(ZMailer)0 2346
y(programs)h(refer)h(to)f(for)h(global)h(information.)28
b(This)19 b(information)f(includes)j(for)c(example)i(the)g(lo)q
(cations)f(of)0 2408 y(the)e(`)p Fe(POSTOFFICE)p Fi(')f(directory)h
(hierarc)o(h)o(y)l(,)h(so)f(this)h(facilit)o(y)h(allo)o(ws)e(easy)g
(dynamic)i(recon\014guration)e(of)g(some)0 2470 y(installation)g
(parameters.)j(The)d(\014le)g(is)f(in)h(`)p Fe(/etc)p
Fi(')d(to)i(increase)h(recon\014guration)f(\015exibilit)o(y)i(for)e
(diskless)h(mail)0 2533 y(clien)o(ts.)62 2670 y(Canned)e(error)f(and)g
(w)o(arning)g(messages)g(are)g(k)o(ept)g(in)h(the)g(`)p
Fe(proto/forms)p Fi(')d(directory)i(of)g(the)h(distribution.)p
eop
%%Page: 64 65
64 64 bop 0 -58 a Fi(64)1380 b(ZMailer)16 b(Op)q(erations)g(Guide)0
183 y(They)h(should)h(b)q(e)f(mo)q(di\014ed)i(to)d(suit)h(lo)q(cal)h
(preferences.)26 b(By)17 b(default,)g(all)h(errors)e(will)j(b)q(e)e
(carb)q(on-copied)i(to)0 246 y(the)h(p)q(ostmaster,)f(a)g(lo)q(cal)i
(address)e(that)g(is)h(hop)q(efully)i(de\014ned)f(in)f(the)g(aliases)g
(database.)33 b(Un)o(til)20 b(y)o(ou)f(are)0 308 y(comfortable)c(with)g
(the)h(ZMailer)f(system,)g(y)o(ou)g(should)h(probably)f(use)h(the)f
(default)h(forms.)62 445 y(Once)h(the)e(ab)q(o)o(v)o(e)g(preliminaries)
j(ha)o(v)o(e)d(b)q(een)h(tak)o(en)f(care)g(of,)g(the)g(time)h(has)f
(come)h(for)e(y)o(our)h(computer)h(to)0 508 y(earn)f(its)h(k)o(eep.)k
(If)15 b(y)o(ou)g(run)h(the)f(command:)120 645 y Fe(make)23
b(it)h(so)0 783 y Fi(the)15 b(follo)o(wing)h(will)h(happ)q(en:)39
920 y Ff(\017)30 b Fi(A)15 b(recursiv)o(e)h Fe(make)23
b(clean)15 b Fi(is)h(run)f(to)g(scrub)g(the)h(distribution)g(hierarc)o
(h)o(y)l(.)39 996 y Ff(\017)30 b Fi(The)18 b(global)g
Fe(make)e Fi(\014le)j(\(`)p Fe(Makefile)p Fi('\))14 b(is)k(edited)h(to)
e(up)q(date)g(it)h(with)g(rules)g(for)f(up)q(dating)h(all)g(the)g
Fe(make)90 1058 y Fi(\014les)e(in)g(the)f(distribution)i(when)f(the)f
(`)p Fe(Config)p Fi(')f(is)i(mo)q(di\014ed.)39 1133 y
Ff(\017)30 b Fi(The)17 b(`)p Fe(Config)p Fi(')e(\014le)j(is)f(pro)q
(cessed)h(in)o(to)f(a)f Fe(sed)g Fi(script,)i(whic)o(h)f(is)h(then)f
(applied)h(to)f(all)g(the)g Fe(make)f Fi(\014les)i(in)90
1196 y(the)d(directory)h(tree.)39 1271 y Ff(\017)30 b
Fi(All)16 b(programs)e(are)h(compiled.)39 1346 y Ff(\017)30
b Fi(Another)12 b Fe(sed)f Fi(script)h(constructed)g(from)f(the)g(`)p
Fe(Config)p Fi(')f(\014le)j(is)f(applied)i(to)d(up)q(date)h(the)g(`)p
Fe(proto/zmailer)p Fi(')90 1409 y(shell)17 b(script.)39
1484 y Ff(\017)30 b Fi(The)22 b(`)p Fe(POSTOFFICE)p Fi(')e(directory)i
(hierarc)o(h)o(y)g(is)h(created,)g(and)f(the)g(canned)h(error)e
(messages)h(from)f(the)90 1546 y(`)p Fe(proto/forms)p
Fi(')13 b(directory)i(are)g(copied)i(to)d(`)p Fe(~/forms)p
Fi('.)39 1621 y Ff(\017)30 b Fi(The)16 b(ZMailer)h(directory)f(hierarc)
o(h)o(y)g(under)h(`)p Fe(/usr/lib)p Fi(')d(is)j(created,)f(and)g(the)g
(standard)g(con\014guration)90 1684 y(and)11 b(con)o(trol)g(\014les)h
(and)f(shell)i(scripts)e(from)f(the)h(`)p Fe(proto)p
Fi(')f(directory)h(are)g(copied)h(to)e(that)g(lo)q(cation)i(\(referred)
90 1746 y(to)j(as)f(`)p Fe(MAILBIN)p Fi(')g(in)i(the)f(`)p
Fe(Config)p Fi(')f(\014le\).)39 1821 y Ff(\017)30 b Fi(All)16
b(the)g(program)e(binaries)i(are)f(installed)i(under)f(the)g(`)p
Fe($MAILBIN)p Fi(')d(directory)l(.)39 1897 y Ff(\017)30
b Fi(Finally)l(,)17 b(another)d Fe(sed)h Fi(script)h(is)f(applied)i(to)
e(the)g(`)p Fe(Config)p Fi(')f(\014le,)i(to)e(pro)q(duce)i(`)p
Fe(/etc/zmailer.conf)p Fi('.)62 2034 y(Then)23 b(it)g(is)g(time)g(to)e
(get)h(y)o(our)g(aliases)h(database)f(w)o(orking.)41
b(If)23 b(y)o(ou)f(don't)g(already)h(ha)o(v)o(e)f(a)g(cen)o(tral)0
2097 y(aliases)13 b(database,)f(y)o(ou)h(should)g(create)g(one.)19
b(The)12 b(minim)o(um)i(requiremen)o(t)f(is)g(that)f(the)h
Fe(postmaster)e Fi(address)0 2159 y(expands)i(to)e(a)h(real)h(accoun)o
(t)f(id.)19 b(If)13 b(y)o(ou)f(already)g(ha)o(v)o(e)g(a)g(cen)o(tral)g
(aliases)h(database,)f(this)h(is)f(t)o(ypically)i(b)q(ecause)0
2221 y(y)o(ou)19 b(are)h(curren)o(tly)g(running)g(Sendmail.)35
b(In)20 b(that)f(case,)i(start)d(b)o(y)i(cop)o(ying)g(the)f(Sendmail)j
(aliases)e(\014le)h(to)0 2283 y(`)p Fe($MAILBIN/db/aliases)p
Fi('.)16 b(The)e(ZMailer)f(Router)h(is)g(used)g(to)f(build)i(the)f
(aliases)g(database)f(from)g(the)g(aliases)0 2346 y(\014le.)29
b(T)l(o)18 b(do)g(this)g(correctly)l(,)h(the)f(Router)g(m)o(ust)f(kno)o
(w)g(what)h(kind)h(of)e(aliases)i(database)e(to)h(access)g(and,)g(in)0
2408 y(this)j(situation,)h(create.)35 b(The)20 b(distribution)i(Router)
f(con\014guration)f(\014le)i(will)g(c)o(hec)o(k)f(for)e(the)i
(existence)g(of)0 2470 y(a)d(`)p Fe($MAILBIN/db/aliases.dir)p
Fi(')d(\014le)20 b(to)e(indicate)i(that)e(NDBM)g(or)g(DBM)h(is)g(b)q
(eing)h(used.)31 b(If)19 b(this)g(\014le)g(is)0 2532
y(absen)o(t,)c(the)g(Router)g(will)i(access)e(the)h(database)e(using)i
(a)f(binary)h(searc)o(h)f(algorithm)g(on)g(an)g(index)i(\014le.)62
2670 y(If)h(y)o(ou)e(are)h(using)h(NDBM,)e(prepare)i(the)f(w)o(a)o(y)f
(for)g(the)h(Router)h(b)o(y)f(creating)g(a)g(n)o(ull)h(`)p
Fe(aliases.dir)p Fi(')d(\014le)p eop
%%Page: 65 66
65 65 bop 0 -58 a Fi(Ho)o(w-T)l(o)14 b(Guide)1617 b(65)0
183 y(in)19 b(the)g(`)p Fe(db)p Fi(')e(sub)q(directory)l(.)31
b(Then)19 b(run)f(the)h(Router)f(to)g(initialize)k(the)c(aliases)h
(database)f(\()p Fe(router)23 b(-i)p Fi(\).)29 b(If)0
246 y(y)o(ou)16 b(get)g(syn)o(tax)g(errors,)g(correct)g(them)g(in)h
(the)g(`)p Fe(aliases)p Fi(')e(\014le.)25 b(Ev)o(en)o(tually)17
b(the)f(Router)h(will)h(rep)q(ort)e(some)0 308 y(simple)d(coun)o(ts)e
(\(a)h(la)f(Sendmail\))j(of)d(de\014ned)i(aliases,)f(indicating)i(it)e
(w)o(as)f(successful)i(in)f(initializi)q(ng)i(the)e(aliases)0
370 y(database.)62 519 y(Y)l(ou)17 b(should)g(no)o(w)e(arrange)h(for)f
(host-sp)q(eci\014c)j(information)e(to)g(b)q(e)g(made)g(a)o(v)m
(ailable)i(to)e(ZMailer.)23 b(This)16 b(is)0 581 y(ob)o(viously)i(a)f
(v)o(ery)g(site-sp)q(eci\014c)i(customization.)27 b(Although)18
b(the)f(metho)q(d)g(of)g(access)g(and)h(lo)q(cation)g(of)f(suc)o(h)0
643 y(information)10 b(is)h(de\014ned)h(in)f(the)f(Router)h
(con\014guration)f(\014le)h(\(whic)o(h)g(inciden)o(tally)i(is)e(`)p
Fe($MAILBIN/router.cf)p Fi('\))o(,)0 706 y(certain)23
b(T)l(ransp)q(ort)f(Agen)o(ts)h(need)g(to)g(kno)o(w)f(the)h(hosts')f
(UUCP)g(no)q(de)i(name.)42 b(This)24 b(is)f(read)g(from)f(the)0
768 y(\014le)d(`)p Fe(/etc/uucpname)p Fi(')d(if)j(it)g(exists,)g(and)f
(secondarily)i(obtained)f(from)f(the)g Fe(uname)g Fi(system)g(call)h
(in)h(certain)0 830 y(en)o(vironmen)o(ts.)f(The)14 b(con)o(v)o(en)o
(tion)f(of)f(using)i(`)p Fe(/etc/uucpname)p Fi(')c(is)k(due)f(to)g
(4.3BSD)f(UUCP)h(whic)o(h)g(allo)o(ws)h(this)0 892 y(as)j(a)h
(con\014guration)g(option.)27 b(I)18 b(recommend)g(this)g(metho)q(d,)g
(since)h(it)f(greatly)g(increases)g(p)q(ortabilit)o(y)h(of)e(the)0
955 y(UUCP)e(binaries)i(b)q(et)o(w)o(een)e(y)o(our)g(mac)o(hines.)62
1103 y(The)g(sample)f(Router)h(con\014guration)f(\014le)h(in)g(the)f
(distribution,)i(assumes)e(that)f(the)i(host)e(names)h(is)h(should)0
1165 y(deliv)o(er)20 b(mail)f(lo)q(cally)h(for,)d(are)h(listed)i(in)f
(the)f(\014le)h(`)p Fe($MAILBIN/db/localdelivery)p Fi(')o(.)26
b(F)l(or)18 b(example,)h(in)g(an)0 1228 y(en)o(vironmen)o(t)i(with)f(a)
g(mail)h(serv)o(er)f(and)h(clien)o(ts,)h(all)f(hostnames)f(should)h(b)q
(e)g(listed)h(in)f(this)f(\014le.)37 b(This)20 b(is)0
1290 y(suggested)11 b(as)f(a)g(con)o(v)o(en)o(tion)h(for)f(ho)o(w)g(to)
g(disco)o(v)o(er)h(this)g(information,)g(and)g(where.)19
b(The)11 b(sample)g(con\014guration)0 1352 y(\014le)16
b(should)g(b)q(e)g(studied)h(for)d(other)h(guidance)h(of)f(this)h
(sort.)62 1501 y(Y)l(ou)i(can)f(\014nally)h(try)f(running)h(the)f
(Router)g(in)h(in)o(teractiv)o(e)f(mo)q(de,)h(as)e(illustrated)j(in)f
(the)f(`)p Fe(README)p Fi(')e(\014le.)0 1563 y(This)g(is)f(the)g(stage)
g(at)f(whic)o(h)i(y)o(ou)f(should)h(start)e(pla)o(ying)i(with)f(the)g
(con\014guration)h(\014le)g(and)f(with)g(the)g(v)m(arious)0
1625 y(ZMailer)20 b(programs.)30 b(This)20 b(is)g(also)f(an)g(opp)q
(ortune)g(momen)o(t)g(\(or)f(da)o(y\))h(for)f(y)o(ou)h(to)g(customize)g
(or)g(write)g(a)0 1688 y(Router)c(con\014guration)h(\014le)g(for)e(y)o
(our)h(host/site.)62 1836 y(If)k(y)o(ou)f(ha)o(v)o(e)g(an)g(`)p
Fe(/etc/services)p Fi(')e(\014le,)k(it)f(should)g(b)q(e)g(up)q(dated)h
(with)e(the)h(de\014nition)h(of)e(a)g(TCP)g(p)q(ort)0
1899 y(used)d(for)f(mail)i(queue)f(querying.)20 b(The)15
b(Sc)o(heduler)i(acts)d(as)g(a)g(serv)o(er)g(listening)j(on)d(this)h(p)
q(ort,)f(and)h(the)g Fe(mailq)0 1961 y Fi(program)f(included)19
b(with)c(the)h(distribution)h(will)g(connect)f(with)g(the)g(Sc)o
(heduler)h(and)f(obtain)f(a)h(dump)g(of)f(the)0 2023
y(mail)h(queue)g(b)o(y)f(this)h(mec)o(hanism.)k(If)15
b(y)o(our)g(system)g(do)q(es)g(not)g(ha)o(v)o(e)g(TCP)l(,)f(a)h
(rendezv)o(ous)g(mec)o(hanism)h(using)0 2085 y(named)g(pip)q(es)h(will)
g(b)q(e)f(used)g(instead.)21 b(F)l(or)15 b(systems)f(without)i(either)g
(of)f(these)h(facilities,)h(a)e(prearranged)g(\014le)0
2148 y(is)h(used)f(along)h(with)f(a)g(release)h(proto)q(col)f(when)h
(the)f(mail)h(queue)g(dump)g(is)g(completed.)62 2296
y(When)21 b(y)o(ou)f(are)g(comfortable)f(with)i(the)f(new)h(en)o
(vironmen)o(t)f(and)g(w)o(an)o(t)f(to)h(start)f(ZMailer,)i(there)g(is)f
(a)0 2359 y(shell)e(script)f(pro)o(vided)h(\(`)p Fe($MAILBIN/zmailer)p
Fi(')o(\))c(to)i(carry)g(out)g(the)h(normal)f(startup)g(functions.)25
b(If)17 b(in)o(v)o(ok)o(ed)0 2421 y(without)c(argumen)o(ts,)g(it)g
(will)i(start)d(the)i(Router)f(and)h(Sc)o(heduler)h(daemon)e(pro)q
(cesses,)h(and)f(the)g(SMTP)g(serv)o(er)0 2483 y(pro)q(cess.)22
b(The)16 b(latter)f(ma)o(y)g(clash)h(with)g(an)o(y)g(running)g
(Sendmail)i(daemon)e(if)g(it)g(is)g(also)g(acting)f(as)h(an)f(SMTP)0
2545 y(serv)o(er.)28 b(This)19 b(script)g(ma)o(y)e(also)h(b)q(e)h(in)o
(v)o(ok)o(ed)f(with)h(individual)i(argumen)o(ts)d(lik)o(e)h
Fe(router)e Fi(or)h Fe(scheduler)f Fi(to)0 2608 y(start)11
b(up)h(just)g(the)g(sp)q(eci\014ed)i(pro)q(cess\(es\).)19
b(It)12 b(ma)o(y)f(b)q(e)i(run)f(from)g(the)g(`)p Fe(/etc/rc.local)p
Fi(')d(\014le)k(to)f(start)f(ZMailer)0 2670 y(on)k(reb)q(o)q(ot.)p
eop
%%Page: 66 67
66 66 bop 0 -58 a Fi(66)1380 b(ZMailer)16 b(Op)q(erations)g(Guide)0
183 y Fd(7.2)35 b(Ho)n(w)23 b(to)g(write)e(a)j(Router)e
(con\014guration)i(\014le)62 320 y Fi(Sorry)l(,)16 b(I)g(don't)f(kno)o
(w)g(what)g(the)h(problem)g(areas)g(will)h(b)q(e)f(at)f(this)i(p)q(oin)
o(t,)f(so)f(this)h(section)g(is)h(incomplete.)0 382 y(The)e(follo)o
(wing)h(is)g(a)f(quic)o(k)h(summary:)62 519 y(The)c(con\014guration)g
(\014le)g(is)g(read)g(and)g(all)g(statemen)o(ts)e(executed)j(sequen)o
(tially)l(.)21 b(Lik)o(e)12 b(an)o(y)f(other)g(statemen)o(t,)0
582 y(a)i(function)i(de\014nition)g(is)f(also)g(executed,)h(with)f(the)
f(side)i(e\013ect)e(of)g(de\014ning)j(a)d(function.)20
b(All)15 b(functions)g(m)o(ust)0 644 y(b)q(e)i(de\014ned)h(b)q(efore)f
(use.)24 b(Normal)16 b(statemen)o(ts)g(app)q(earing)h(at)f(the)g(top)g
(lev)o(el)i(in)f(the)g(con\014guration)g(\014le)g(\(i.e.)0
706 y(not)h(within)h(a)f(function)h(de\014nition\),)h(usually)g(ha)o(v)
o(e)e(the)g(purp)q(ose)h(of)f(setting)g(up)h(an)f(en)o(vironmen)o(t)g
(for)g(the)0 769 y(rest)g(of)f(the)h(con\014guration)h(\014le.)29
b(An)19 b(\\en)o(vironmen)o(t")e(encompasses)i(global)f(v)m(ariables)i
(\(e.g.)28 b(\\what)17 b(is)h(m)o(y)0 831 y(name"\))c(initialized)k(in)
e(assignmen)o(t)f(statemen)o(ts,)e(and)i(database)f(de\014nitions)j(b)o
(y)e(the)g Fe(relation)e Fi(statemen)o(t.)62 968 y(There)j(are)f(four)f
(instances)i(of)f(magic)g(seman)o(tics)h(assumed)f(b)o(y)g(the)g
(Router:)39 1105 y Ff(\017)30 b Fi(Setting)14 b(the)f(hostname)f(b)o(y)
i(calling)g(the)g Fe(hostname)e Fi(function,)i(will)h(enable)f
(generation)f(of)g(trace)g(headers)90 1167 y(\(i.e.)20
b(`)p Fe(Received)p Fi(')13 b(and)j(`)p Fe(Message-Id)p
Fi('\).)39 1242 y Ff(\017)30 b Fi(The)15 b(aliases)g(database)e(is)i
(de\014ned)h(b)o(y)e(the)h Fe(aliases)e Fi(relation.)20
b(The)15 b(v)m(alue)h(of)e(a)g(database)f(lo)q(okup)j(m)o(ust)90
1304 y(b)q(e)g(a)f(b)o(yte)g(o\013set)f(in)o(to)h(another)g(\014le)h
(that)f(con)o(tains)g(the)g(actual)h(alias)f(de\014nitions.)39
1379 y Ff(\017)30 b Fi(A)20 b Fe(router)f Fi(function)i(m)o(ust)e
(exist.)34 b(It)20 b(tak)o(es)f(an)h(address)g(as)f(its)h(one)g
(argumen)o(t,)g(and)g(returns)g(three)90 1441 y(v)m(alues)c(represen)o
(ting)g(the)f(c)o(hannel,)h(next-host,)f(and)h(next-address.)39
1516 y Ff(\017)30 b Fi(A)14 b Fe(crossbar)f Fi(function)i(m)o(ust)e
(exist.)20 b(It)14 b(tak)o(es)f(t)o(w)o(o)f(triples)j(\(six)g(argumen)o
(ts\))d(and)i(returns)g(those)g(triples)90 1578 y(and)h(the)h(name)f
(of)g(a)f(rewriting)i(function)g(to)f(b)q(e)g(applied)j(to)c(all)i(the)
f(header)h(addresses)f(\(sev)o(en)g(v)m(alues\).)90 1640
y(The)h(argumen)o(t)f(triples)i(represen)o(t)f(the)g(origin)h(and)f
(recipien)o(t)i(en)o(v)o(elop)q(e)f(addresses,)f(and)g(this)g(function)
90 1703 y(is)g(in)g(c)o(harge)f(of)f(rewriting)i(them)f(as)g
(appropriate.)62 1840 y(Naturally)l(,)h(all)h(function)f(names)g
(returned)g(b)o(y)f(the)h Fe(crossbar)e Fi(function)j(m)o(ust)e
(corresp)q(ond)g(to)g(a)h(de\014ned)0 1902 y(function.)62
2039 y(T)l(ell)f(me)e(what)g(is)g(missing)h(from)f(this)h(description.)
20 b(W)l(ould)14 b(a)f(pla)o(y-b)o(y-pla)o(y)h(of)f(the)g(sample)h
(con\014guration)0 2101 y(\014le)i(b)q(e)g(v)o(ery)f(useful?)p
eop
%%Page: 67 68
67 67 bop 0 -58 a Fi(User)15 b(Agen)o(t)g(supp)q(ort)1513
b(67)0 183 y Fg(App)r(endix)27 b(A.)41 b(User)28 b(Agen)n(t)f(supp)r
(ort)0 440 y Fd(A.1)35 b(Submission)22 b(In)n(terface)62
577 y Fi(Three)d(C)f(library)g(routines)h(are)f(pro)o(vided)h(to)e(op)q
(en)i(\(create\),)f(ab)q(ort)f(\(remo)o(v)o(e\),)g(and)h(close)h
(\(submit\))f(a)0 639 y(message)f(\014le.)26 b(In)o(ternally)l(,)18
b(they)g(mak)o(e)e(use)h(of)g(the)g(stdio)g(pac)o(k)m(age,)g(and)g
(their)h(in)o(terface)f(is)h(mo)q(delled)h(after)0 702
y(it.)h(The)c(in)o(terface)f(de\014nition)i(is:)120 821
y Fe(#include)23 b(<mail.h>)120 920 y(FILE)g(*mail_open\(\))120
1020 y(int)g(mail_abort\(mfp\))120 1070 y(FILE)g(*mfp;)120
1169 y(int)g(mail_close\(mfp\))120 1219 y(FILE)g(*mfp;)62
1356 y Fi(The)16 b(parameter)f(passed)g(in)i(a)e Fe(mail_abort\(\))f
Fi(or)h Fe(mail_close\(\))e Fi(call)k(is)f(the)g(v)m(alue)g(returned)g
(b)o(y)g(a)f(call)0 1418 y(to)g(the)h Fe(mail_open\(\))f
Fi(function.)23 b(The)16 b(routines)h(tak)o(e)e(care)h(of)f(all)i(the)f
(necessary)g(housek)o(eeping.)24 b(They)16 b(are)0 1481
y(prop)q(erly)g(used)g(as)f(follo)o(ws:)120 1587 y Fe(...)120
1636 y(FILE)23 b(*mfp;)120 1686 y(on)h(exit)f(or)g(interrupt,)g
(arrange)g(to)g(call)h(mail_abort\(mfp\);)120 1736 y(if)g(\(\(mfp)f(=)g
(mail_open\(\)\))g(==)g(NULL\))215 1786 y(...)h(error)f(handling)g
(when)g(message)g(submission)g(is)g(not)h(possible)e(...)144
1836 y(else)215 1885 y(...)i(output)f(the)g(mail)h(message)f(to)g(mfp)h
(...)215 1935 y(if)g(\(oops)f(&&)h(\(mail_abort\(mfp\))d(==)j(EOF\)\))
311 1985 y(...)f(print)h(a)f(message)g(that)g(the)h(abort)f(failed)g
(...)215 2035 y(else)h(if)f(\(mail_close\(mfp\))f(==)i(EOF\))311
2085 y(...)f(error)h(handling)e(when)i(message)f(submission)f(fails)h
(...)120 2184 y(reset)g(behaviour)g(on)g(exit)h(or)f(interrupt)120
2234 y(...)120 2284 y(char)g(*tmalloc\(n\))g(unsigned)f(int)i(n;)47
b(return)23 b(n)h(bytes)f(of)h(memory)62 2421 y Fi(Notice)12
b(the)g(de\014nition)i(of)d Fe(tmalloc\(\))p Fi(.)18
b(This)12 b(routine)g(should)h(allo)q(cate)f(memory)f(that)g(will)j
(remain)e(usable)0 2483 y(within)19 b(the)e(lifetime)i(of)e(the)h
(message)f(submission)i(\(i.e.)26 b(un)o(til)19 b(a)e
Fe(mail_abort\(\))f Fi(or)h Fe(mail_close\(\))f Fi(call\).)0
2545 y(This)j(allo)o(ws)g(a)f(User)h(Agen)o(t)f(or)g(other)g
(application)j(program)c(that)h(mak)o(es)g(man)o(y)g(calls)i(to)e
(these)h(routines)0 2608 y(during)g(its)f(lifetime,)i(to)d(pro)o(vide)h
(an)g(alternate)g(b)o(yte)f(allo)q(cator)h(that)g(will)h(not)f(cause)g
(them)g(to)f(run)h(out)f(of)0 2670 y(data)e(space.)p
eop
%%Page: 68 69
68 68 bop 0 -58 a Fi(68)1380 b(ZMailer)16 b(Op)q(erations)g(Guide)62
183 y(Another)f(p)q(oin)o(t)f(to)g(b)q(e)h(made)g(is)f(that)g(these)h
(routines)f(and)h(all)g(other)f(co)q(de)h(in)g(ZMailer)g(that)f
(relinks)h(\014les,)0 246 y(uses)k Fe(link\(\))p Fi(/)p
Fe(unlink\(\))d Fi(com)o(binations)j(and)g(nev)o(er)f(the)h
Fe(rename\(\))e Fi(system)h(call,)i(ev)o(en)f(if)g(it)g(is)g(a)o(v)m
(ailable.)0 308 y(Unfortunately)l(,)c Fe(rename\(\))f
Fi(do)q(es)i(not)f(retain)g(the)g(ino)q(de)i(n)o(um)o(b)q(er)e(of)g
(the)g(\014le)i(b)q(eing)f(renamed.)62 450 y(Finally)l(,)f(although)d
(this)h(in)o(terface)g(will)h(honour)f(the)f Fa(FULLNAME)h
Fi(and)g Fa(PRETTYLOGIN)e Fi(en)o(vironmen)o(t)0 512
y(v)m(ariables)17 b(men)o(tioned)f(earlier,)g(a)f(User)g(Agen)o(t)g
(can)g(o)o(v)o(erride)h(this)g(mec)o(hanism)g(b)o(y)f(seeking)h(to)f(b)
o(yte)g(0)g(of)g(the)0 574 y(message)g(\014le)h(and)f(writing)h(its)f
(message)g(data)g(from)f(there.)62 717 y(The)21 b(system)e(standard)h
(header)h(\014le)g(`)p Fe(mail.h)p Fi(',)f(declares)h(these)f(routines)
h(appropriately)l(.)36 b(It)20 b(con)o(tains)0 779 y(all)d(the)f
(common)g(de\014nitions)h(used)g(in)g(passing)f(information)g(b)q(et)o
(w)o(een)g(the)g(comp)q(onen)o(ts)g(of)g(ZMailer.)22
b(This)0 841 y(includes)15 b(the)d(names)h(of)f(v)m(arious)h
(directories,)g(the)g(p)q(ostmaster,)f(and)g(sym)o(b)q(olic)i(names)e
(for)g(v)m(arious)h(k)o(eys)f(used)0 903 y(in)k(the)f(con)o(trol)g
(\014le)h(proto)q(col.)0 1174 y Fd(A.2)35 b(F)-6 b(ullname)21
b(quoting)62 1317 y Fi(The)13 b(library)h(routine)f(that)f(constructs)g
(a)g(full)i(user)f(name,)g(do)q(es)g(so)f(purely)h(based)g(on)g
(information)g(passed)0 1379 y(to)j(it.)26 b(This)18
b(means)f(it)g(can)g(b)q(e)h(used)f(with)h(the)f(con)o(ten)o(ts)f(of)h
(a)f(GECOS)h(\014eld)i(\(ev)o(erything)e(after)f(a)h(`)p
Fe(,)p Fi(')f(or)g(a)0 1441 y(`)p Fe(;)p Fi(')f(is)i(ignored\),)f(or)g
(some)f(other)h(arbitrary)f(string,)h(without)g(incurring)i(an)o(y)e
(unnecessary)h(cost)e(in)o(v)o(olv)o(ed)i(in)0 1503 y(a)e(passw)o(ord)f
(database)h(lo)q(okup.)21 b(The)15 b(in)o(terface)g(sp)q(eci\014cation)
j(is)d(as)g(follo)o(ws:)120 1631 y Fe(char)23 b(*)120
1681 y(fullname\(gecos,)f(buf,)h(buflen,)g(login\))311
1731 y(char)g(*gecos;)286 b(/*)23 b(the)h(name)f(we)h(wish)f(to)g
(quotify)g(*/)311 1781 y(char)g(buf[];)310 b(/*)23 b(place)g(to)h(put)f
(the)h(result)f(*/)311 1831 y(int)g(buflen;)310 b(/*)23
b(how)h(much)f(space)g(we)h(have)f(*/)311 1880 y(char)g(*login;)286
b(/*)23 b(what)h(to)f(use)h(for)f(a)h(login)f(name)g(*/)62
2023 y Fi(The)13 b(return)g(v)m(alue)i(from)d Fe(fullname\(\))f
Fi(is)j(alw)o(a)o(ys)e(the)h(v)m(alue)h(of)f(the)g(second)g(parameter.)
19 b(A)13 b(sample)g(usage)0 2085 y(w)o(ould)j(b)q(e:)120
2204 y Fe(struct)23 b(passwd)g(*pw;)120 2254 y(char)g(buffer[BUFSIZ],)f
(*name;)120 2304 y(extern)h(char)g(*fullname\(\);)120
2403 y(name)g(=)h(fullname\(pw->pw_gecos,)d(buffer,)i(sizeof)g(buffer,)
g(pw->pw_name\);)62 2545 y Fi(If)17 b(the)f(fourth)g(parameter)f(is)i
Fe(\(char)23 b(*\)NULL)p Fi(,)16 b(the)g Fe(fullname\(\))f
Fi(routine)i(will)g(lo)q(ok)g(for)f(the)g Fa(USER)g Fi(and)0
2608 y Fa(LOGNAME)f Fi(en)o(vironmen)o(t)h(v)m(ariables,)g(in)g(that)e
(order,)h(if)h(it)f(needs)h(a)f(login)h(name)f(due)h(to)f(the)g
(expansion)h(of)0 2670 y(a)f(`)p Fe(&)p Fi(')f(in)i(the)f(GECOS)h
(\014eld.)21 b(F)l(or)14 b(example:)p eop
%%Page: 69 70
69 69 bop 0 -58 a Fi(User)15 b(Agen)o(t)g(supp)q(ort)1513
b(69)120 133 y Fe(fullname\("&)22 b(Kirk",)h(...,)h("jim"\))f(returns)g
("Jim)g(Kirk".)120 183 y(fullname\("James)f(T.)h(&",)h(...,)f("kirk"\))
g(returns)g("\\"James)g(T.)g(Kirk\\"".)62 320 y Fi(The)16
b(routine)h(will)g(truncate)f(the)g(text)f(of)h(its)g(return)g(v)m
(alue)h(to)e(\014t)h(in)h(the)f(space)g(a)o(v)m(ailable)i(in)e(the)g
(bu\013er.)0 382 y(If)f(there)g(is)g(a)f(leading)i(double-quote,)g
(there)f(will)h(also)f(b)q(e)g(a)f(trailing)i(double-quote.)21
b(The)15 b(decision)h(to)e(quote)0 445 y(is)20 b(made)f(according)h(to)
f(the)h(sp)q(eci\014cations)h(in)f(RF)o(C822)e(for)h(a)g
Fb(phrase)p Fi(.)33 b(In)20 b(other)f(w)o(ords,)g(when)h(scanned)0
507 y(according)15 b(to)f(the)h(lexical)i(rules)e(of)g(RF)o(C822,)e
(the)i(return)f(v)m(alue)i(from)e Fe(fullname\(\))g Fi(will)i
(constitute)f(a)f(v)m(alid)0 569 y(RF)o(C822)g Fb(phrase)p
Fi(.)p eop
%%Page: -1 71
-1 70 bop 0 -58 a Fi(T)l(able)16 b(of)f(Con)o(ten)o(ts)1582
b(i)0 183 y Fg(T)-7 b(able)28 b(of)g(Con)n(ten)n(ts)0
324 y Fi(Distribution)48 b(.)33 b(.)f(.)h(.)f(.)g(.)h(.)f(.)h(.)f(.)h
(.)f(.)h(.)f(.)h(.)f(.)g(.)h(.)f(.)h(.)f(.)h(.)f(.)h(.)f(.)h(.)f(.)g(.)
h(.)f(.)h(.)f(.)h(.)f(.)h(.)f(.)i(1)0 412 y(1.)20 b(In)o(tro)q(duction)
31 b(.)h(.)h(.)f(.)g(.)h(.)f(.)h(.)f(.)h(.)f(.)h(.)f(.)h(.)f(.)g(.)h(.)
f(.)h(.)f(.)h(.)f(.)h(.)f(.)h(.)f(.)g(.)h(.)f(.)h(.)f(.)h(.)f(.)h(.)f
(.)i(2)45 475 y(1.1)15 b(Motiv)m(ation)g(and)g(Heritage)46
b(.)32 b(.)h(.)f(.)h(.)f(.)h(.)f(.)g(.)h(.)f(.)h(.)f(.)h(.)f(.)h(.)f(.)
h(.)f(.)g(.)h(.)f(.)h(.)f(.)h(.)f(.)h(.)f(.)i(2)91 537
y(1.1.1)13 b(Heritage:)20 b(sendmail)34 b(.)f(.)f(.)h(.)f(.)h(.)f(.)h
(.)f(.)g(.)h(.)f(.)h(.)f(.)h(.)f(.)h(.)f(.)h(.)f(.)g(.)h(.)f(.)h(.)f(.)
h(.)f(.)h(.)f(.)i(3)91 599 y(1.1.2)13 b(Heritage:)20
b(MMDF,)14 b(PMDF)30 b(.)i(.)h(.)f(.)h(.)f(.)g(.)h(.)f(.)h(.)f(.)h(.)f
(.)h(.)f(.)h(.)f(.)g(.)h(.)f(.)h(.)f(.)h(.)f(.)h(.)f(.)i(4)91
661 y(1.1.3)13 b(Heritage:)20 b(Upas)62 b(.)32 b(.)h(.)f(.)h(.)f(.)h(.)
f(.)h(.)f(.)g(.)h(.)f(.)h(.)f(.)h(.)f(.)h(.)f(.)h(.)f(.)g(.)h(.)f(.)h
(.)f(.)h(.)f(.)h(.)f(.)i(5)91 724 y(1.1.4)13 b(Heritage:)20
b(Smail)d(3.0)k(.)33 b(.)f(.)h(.)f(.)h(.)f(.)h(.)f(.)g(.)h(.)f(.)h(.)f
(.)h(.)f(.)h(.)f(.)h(.)f(.)g(.)h(.)f(.)h(.)f(.)h(.)f(.)h(.)f(.)i(5)91
786 y(1.1.5)13 b(Result:)21 b(ZMailer)48 b(.)32 b(.)h(.)f(.)h(.)f(.)h
(.)f(.)h(.)f(.)g(.)h(.)f(.)h(.)f(.)h(.)f(.)h(.)f(.)h(.)f(.)g(.)h(.)f(.)
h(.)f(.)h(.)f(.)h(.)f(.)i(6)45 848 y(1.2)15 b(Goals)58
b(.)33 b(.)f(.)h(.)f(.)g(.)h(.)f(.)h(.)f(.)h(.)f(.)h(.)f(.)h(.)f(.)g(.)
h(.)f(.)h(.)f(.)h(.)f(.)h(.)f(.)h(.)f(.)g(.)h(.)f(.)h(.)f(.)h(.)f(.)h
(.)f(.)i(6)45 910 y(1.3)15 b(Design)g(Summary)58 b(.)33
b(.)f(.)h(.)f(.)h(.)f(.)h(.)f(.)h(.)f(.)g(.)h(.)f(.)h(.)f(.)h(.)f(.)h
(.)f(.)h(.)f(.)g(.)h(.)f(.)h(.)f(.)h(.)f(.)h(.)f(.)i(7)0
999 y(2.)20 b(Ov)o(erview)48 b(.)33 b(.)f(.)h(.)f(.)g(.)h(.)f(.)h(.)f
(.)h(.)f(.)h(.)f(.)h(.)f(.)g(.)h(.)f(.)h(.)f(.)h(.)f(.)h(.)f(.)h(.)f(.)
g(.)h(.)f(.)h(.)f(.)h(.)f(.)h(.)f(.)i(9)45 1061 y(2.1)15
b(Message)f(Submission)44 b(.)32 b(.)h(.)f(.)h(.)f(.)h(.)f(.)h(.)f(.)g
(.)h(.)f(.)h(.)f(.)h(.)f(.)h(.)f(.)h(.)f(.)g(.)h(.)f(.)h(.)f(.)h(.)f(.)
h(.)f(.)i(9)45 1123 y(2.2)15 b(Router)33 b(.)g(.)f(.)h(.)f(.)g(.)h(.)f
(.)h(.)f(.)h(.)f(.)h(.)f(.)h(.)f(.)g(.)h(.)f(.)h(.)f(.)h(.)f(.)h(.)f(.)
h(.)f(.)g(.)h(.)f(.)h(.)f(.)h(.)f(.)h(.)57 b(10)45 1186
y(2.3)15 b(Queue)h(Manager)e(and)i(Sc)o(heduler)63 b(.)33
b(.)f(.)h(.)f(.)g(.)h(.)f(.)h(.)f(.)h(.)f(.)h(.)f(.)h(.)f(.)g(.)h(.)f
(.)h(.)f(.)h(.)f(.)h(.)57 b(12)45 1248 y(2.4)15 b(T)l(ransp)q(ort)f
(Agen)o(ts)48 b(.)33 b(.)f(.)h(.)f(.)h(.)f(.)h(.)f(.)h(.)f(.)g(.)h(.)f
(.)h(.)f(.)h(.)f(.)h(.)f(.)h(.)f(.)g(.)h(.)f(.)h(.)f(.)h(.)f(.)h(.)57
b(13)45 1310 y(2.5)15 b(The)g(System)g(En)o(vironmen)o(t)26
b(.)32 b(.)h(.)f(.)h(.)f(.)h(.)f(.)g(.)h(.)f(.)h(.)f(.)h(.)f(.)h(.)f(.)
h(.)f(.)g(.)h(.)f(.)h(.)f(.)h(.)f(.)h(.)57 b(13)45 1372
y(2.6)15 b(User)g(Agen)o(t)g(supp)q(ort)51 b(.)32 b(.)h(.)f(.)h(.)f(.)h
(.)f(.)h(.)f(.)g(.)h(.)f(.)h(.)f(.)h(.)f(.)h(.)f(.)h(.)f(.)g(.)h(.)f(.)
h(.)f(.)h(.)f(.)h(.)57 b(14)45 1435 y(2.7)15 b(Compatibilit)o(y)33
b(.)f(.)g(.)h(.)f(.)h(.)f(.)h(.)f(.)h(.)f(.)h(.)f(.)g(.)h(.)f(.)h(.)f
(.)h(.)f(.)h(.)f(.)h(.)f(.)g(.)h(.)f(.)h(.)f(.)h(.)f(.)h(.)57
b(15)45 1497 y(2.8)15 b(The)g(P)o(osto\016ce)24 b(.)32
b(.)g(.)h(.)f(.)h(.)f(.)h(.)f(.)h(.)f(.)h(.)f(.)g(.)h(.)f(.)h(.)f(.)h
(.)f(.)h(.)f(.)h(.)f(.)g(.)h(.)f(.)h(.)f(.)h(.)f(.)h(.)57
b(15)0 1585 y(3.)20 b(Router)51 b(.)32 b(.)h(.)f(.)h(.)f(.)g(.)h(.)f(.)
h(.)f(.)h(.)f(.)h(.)f(.)h(.)f(.)g(.)h(.)f(.)h(.)f(.)h(.)f(.)h(.)f(.)h
(.)f(.)g(.)h(.)f(.)h(.)f(.)h(.)f(.)h(.)57 b(17)45 1648
y(3.1)15 b(Message)f(Submission)44 b(.)32 b(.)h(.)f(.)h(.)f(.)h(.)f(.)h
(.)f(.)g(.)h(.)f(.)h(.)f(.)h(.)f(.)h(.)f(.)h(.)f(.)g(.)h(.)f(.)h(.)f(.)
h(.)f(.)h(.)57 b(17)45 1710 y(3.2)15 b(Message)f(File)j(F)l(ormat)28
b(.)k(.)h(.)f(.)h(.)f(.)h(.)f(.)h(.)f(.)g(.)h(.)f(.)h(.)f(.)h(.)f(.)h
(.)f(.)h(.)f(.)g(.)h(.)f(.)h(.)f(.)h(.)f(.)h(.)57 b(20)45
1772 y(3.3)15 b(Header)g(Scanning)i(and)e(P)o(arsing)38
b(.)32 b(.)h(.)f(.)h(.)f(.)g(.)h(.)f(.)h(.)f(.)h(.)f(.)h(.)f(.)h(.)f(.)
g(.)h(.)f(.)h(.)f(.)h(.)f(.)h(.)57 b(22)45 1834 y(3.4)15
b(Router)g(Activities)57 b(.)33 b(.)f(.)h(.)f(.)h(.)f(.)h(.)f(.)h(.)f
(.)g(.)h(.)f(.)h(.)f(.)h(.)f(.)h(.)f(.)h(.)f(.)g(.)h(.)f(.)h(.)f(.)h(.)
f(.)h(.)57 b(24)45 1897 y(3.5)15 b(Routing)h(Mo)q(del)54
b(.)32 b(.)h(.)f(.)h(.)f(.)h(.)f(.)h(.)f(.)h(.)f(.)g(.)h(.)f(.)h(.)f(.)
h(.)f(.)h(.)f(.)h(.)f(.)g(.)h(.)f(.)h(.)f(.)h(.)f(.)h(.)57
b(25)45 1959 y(3.6)15 b(Con\014guration)g(File)h(Programming)e
(Language)43 b(.)33 b(.)f(.)h(.)f(.)h(.)f(.)h(.)f(.)h(.)f(.)g(.)h(.)f
(.)h(.)f(.)h(.)f(.)h(.)57 b(26)45 2021 y(3.7)15 b(Address)g
(Manipulation)50 b(.)33 b(.)f(.)h(.)f(.)h(.)f(.)h(.)f(.)g(.)h(.)f(.)h
(.)f(.)h(.)f(.)h(.)f(.)h(.)f(.)g(.)h(.)f(.)h(.)f(.)h(.)f(.)h(.)57
b(29)45 2083 y(3.8)15 b(Database)f(In)o(terface)25 b(.)33
b(.)f(.)h(.)f(.)h(.)f(.)h(.)f(.)h(.)f(.)g(.)h(.)f(.)h(.)f(.)h(.)f(.)h
(.)f(.)h(.)f(.)g(.)h(.)f(.)h(.)f(.)h(.)f(.)h(.)57 b(31)91
2146 y(3.8.1)13 b(Using)j(a)f(P)o(athalias)g(Database)40
b(.)33 b(.)f(.)h(.)f(.)g(.)h(.)f(.)h(.)f(.)h(.)f(.)h(.)f(.)h(.)f(.)g(.)
h(.)f(.)h(.)f(.)h(.)f(.)h(.)57 b(35)45 2208 y(3.9)15
b(Mail)g(F)l(orw)o(arding)23 b(.)32 b(.)h(.)f(.)h(.)f(.)h(.)f(.)h(.)f
(.)h(.)f(.)g(.)h(.)f(.)h(.)f(.)h(.)f(.)h(.)f(.)h(.)f(.)g(.)h(.)f(.)h(.)
f(.)h(.)f(.)h(.)57 b(36)45 2270 y(3.10)14 b(Securit)o(y)33
b(.)f(.)h(.)f(.)g(.)h(.)f(.)h(.)f(.)h(.)f(.)h(.)f(.)h(.)f(.)g(.)h(.)f
(.)h(.)f(.)h(.)f(.)h(.)f(.)h(.)f(.)g(.)h(.)f(.)h(.)f(.)h(.)f(.)h(.)57
b(38)45 2333 y(3.11)14 b(Router)i(Con)o(trol)e(Flo)o(w)51
b(.)33 b(.)f(.)h(.)f(.)h(.)f(.)h(.)f(.)g(.)h(.)f(.)h(.)f(.)h(.)f(.)h(.)
f(.)h(.)f(.)g(.)h(.)f(.)h(.)f(.)h(.)f(.)h(.)57 b(39)45
2395 y(3.12)14 b(Logging)37 b(.)32 b(.)h(.)f(.)g(.)h(.)f(.)h(.)f(.)h(.)
f(.)h(.)f(.)h(.)f(.)g(.)h(.)f(.)h(.)f(.)h(.)f(.)h(.)f(.)h(.)f(.)g(.)h
(.)f(.)h(.)f(.)h(.)f(.)h(.)57 b(43)91 2457 y(3.12.1)13
b(Address)j(T)l(esting)21 b(.)32 b(.)h(.)f(.)h(.)f(.)h(.)f(.)h(.)f(.)g
(.)h(.)f(.)h(.)f(.)h(.)f(.)h(.)f(.)h(.)f(.)g(.)h(.)f(.)h(.)f(.)h(.)f(.)
h(.)57 b(44)0 2545 y(4.)20 b(Sc)o(heduler)44 b(.)33 b(.)f(.)h(.)f(.)g
(.)h(.)f(.)h(.)f(.)h(.)f(.)h(.)f(.)h(.)f(.)g(.)h(.)f(.)h(.)f(.)h(.)f(.)
h(.)f(.)h(.)f(.)g(.)h(.)f(.)h(.)f(.)h(.)f(.)h(.)57 b(46)45
2608 y(4.1)15 b(Message)f(Con)o(trol)h(File)25 b(.)32
b(.)h(.)f(.)h(.)f(.)h(.)f(.)h(.)f(.)g(.)h(.)f(.)h(.)f(.)h(.)f(.)h(.)f
(.)h(.)f(.)g(.)h(.)f(.)h(.)f(.)h(.)f(.)h(.)57 b(46)91
2670 y(4.1.1)13 b(F)l(ormat)35 b(.)e(.)f(.)g(.)h(.)f(.)h(.)f(.)h(.)f(.)
h(.)f(.)h(.)f(.)g(.)h(.)f(.)h(.)f(.)h(.)f(.)h(.)f(.)h(.)f(.)g(.)h(.)f
(.)h(.)f(.)h(.)f(.)h(.)57 b(47)p eop
%%Page: -2 72
-2 71 bop 0 -58 a Fi(ii)1402 b(ZMailer)16 b(Op)q(erations)g(Guide)45
183 y(4.2)f(Sc)o(heduler)i(Con\014guration)e(File)57
b(.)32 b(.)h(.)f(.)h(.)f(.)g(.)h(.)f(.)h(.)f(.)h(.)f(.)h(.)f(.)h(.)f(.)
g(.)h(.)f(.)h(.)f(.)h(.)f(.)h(.)57 b(51)45 246 y(4.3)15
b(T)l(ransp)q(ort)f(Agen)o(t)h(proto)q(col)25 b(.)32
b(.)h(.)f(.)h(.)f(.)h(.)f(.)g(.)h(.)f(.)h(.)f(.)h(.)f(.)h(.)f(.)h(.)f
(.)g(.)h(.)f(.)h(.)f(.)h(.)f(.)h(.)57 b(52)45 308 y(4.4)15
b(Mail)g(Queue)i(prin)o(ting)40 b(.)32 b(.)h(.)f(.)h(.)f(.)h(.)f(.)h(.)
f(.)g(.)h(.)f(.)h(.)f(.)h(.)f(.)h(.)f(.)h(.)f(.)g(.)h(.)f(.)h(.)f(.)h
(.)f(.)h(.)57 b(54)45 370 y(4.5)15 b(Logging)59 b(.)32
b(.)h(.)f(.)g(.)h(.)f(.)h(.)f(.)h(.)f(.)h(.)f(.)h(.)f(.)g(.)h(.)f(.)h
(.)f(.)h(.)f(.)h(.)f(.)h(.)f(.)g(.)h(.)f(.)h(.)f(.)h(.)f(.)h(.)57
b(55)0 457 y(5.)20 b(T)l(ransp)q(ort)14 b(Agen)o(ts)21
b(.)32 b(.)g(.)h(.)f(.)h(.)f(.)h(.)f(.)h(.)f(.)h(.)f(.)g(.)h(.)f(.)h(.)
f(.)h(.)f(.)h(.)f(.)h(.)f(.)g(.)h(.)f(.)h(.)f(.)h(.)f(.)h(.)57
b(56)45 519 y(5.1)15 b(Lo)q(cal)h(deliv)o(ery)g(\(mailb)q(o)o(x\))48
b(.)32 b(.)h(.)f(.)h(.)f(.)h(.)f(.)g(.)h(.)f(.)h(.)f(.)h(.)f(.)h(.)f(.)
h(.)f(.)g(.)h(.)f(.)h(.)f(.)h(.)f(.)h(.)57 b(56)45 582
y(5.2)15 b(Error)f(mail)i(deliv)o(ery)h(\(errormail\))58
b(.)33 b(.)f(.)h(.)f(.)g(.)h(.)f(.)h(.)f(.)h(.)f(.)h(.)f(.)h(.)f(.)g(.)
h(.)f(.)h(.)f(.)h(.)f(.)h(.)57 b(58)45 644 y(5.3)15 b(SMTP)g(clien)o(t)
h(\(sm)o(tp\))41 b(.)32 b(.)h(.)f(.)h(.)f(.)h(.)f(.)h(.)f(.)g(.)h(.)f
(.)h(.)f(.)h(.)f(.)h(.)f(.)h(.)f(.)g(.)h(.)f(.)h(.)f(.)h(.)f(.)h(.)57
b(59)45 706 y(5.4)15 b(Sendmail)i(compatible)f(deliv)o(ery)h(programs)d
(\(sm\))51 b(.)32 b(.)h(.)f(.)h(.)f(.)h(.)f(.)h(.)f(.)g(.)h(.)f(.)h(.)f
(.)h(.)f(.)h(.)57 b(59)0 793 y(6.)20 b(Miscellaneous)54
b(.)33 b(.)f(.)g(.)h(.)f(.)h(.)f(.)h(.)f(.)h(.)f(.)h(.)f(.)g(.)h(.)f(.)
h(.)f(.)h(.)f(.)h(.)f(.)h(.)f(.)g(.)h(.)f(.)h(.)f(.)h(.)f(.)h(.)57
b(62)45 856 y(6.1)15 b(Sendmail)i(compatibilit)o(y)30
b(.)j(.)f(.)h(.)f(.)h(.)f(.)h(.)f(.)g(.)h(.)f(.)h(.)f(.)h(.)f(.)h(.)f
(.)h(.)f(.)g(.)h(.)f(.)h(.)f(.)h(.)f(.)h(.)57 b(62)45
918 y(6.2)15 b(SMTP)g(serv)o(er)44 b(.)32 b(.)g(.)h(.)f(.)h(.)f(.)h(.)f
(.)h(.)f(.)h(.)f(.)g(.)h(.)f(.)h(.)f(.)h(.)f(.)h(.)f(.)h(.)f(.)g(.)h(.)
f(.)h(.)f(.)h(.)f(.)h(.)57 b(62)0 1005 y(7.)20 b(Ho)o(w-T)l(o)14
b(Guide)36 b(.)d(.)f(.)g(.)h(.)f(.)h(.)f(.)h(.)f(.)h(.)f(.)h(.)f(.)g(.)
h(.)f(.)h(.)f(.)h(.)f(.)h(.)f(.)h(.)f(.)g(.)h(.)f(.)h(.)f(.)h(.)f(.)h
(.)57 b(63)45 1067 y(7.1)15 b(Ho)o(w)f(to)h(install)h(ZMailer)38
b(.)33 b(.)f(.)h(.)f(.)h(.)f(.)h(.)f(.)g(.)h(.)f(.)h(.)f(.)h(.)f(.)h(.)
f(.)h(.)f(.)g(.)h(.)f(.)h(.)f(.)h(.)f(.)h(.)57 b(63)45
1130 y(7.2)15 b(Ho)o(w)f(to)h(write)g(a)g(Router)g(con\014guration)h
(\014le)54 b(.)32 b(.)h(.)f(.)h(.)f(.)h(.)f(.)h(.)f(.)h(.)f(.)g(.)h(.)f
(.)h(.)f(.)h(.)f(.)h(.)57 b(66)0 1217 y(App)q(endix)17
b(A.)e(User)g(Agen)o(t)g(supp)q(ort)36 b(.)d(.)f(.)h(.)f(.)h(.)f(.)g(.)
h(.)f(.)h(.)f(.)h(.)f(.)h(.)f(.)h(.)f(.)g(.)h(.)f(.)h(.)f(.)h(.)f(.)h
(.)57 b(67)45 1279 y(A.1)15 b(Submission)i(In)o(terface)k(.)32
b(.)h(.)f(.)h(.)f(.)h(.)f(.)h(.)f(.)g(.)h(.)f(.)h(.)f(.)h(.)f(.)h(.)f
(.)h(.)f(.)g(.)h(.)f(.)h(.)f(.)h(.)f(.)h(.)57 b(67)45
1341 y(A.2)15 b(F)l(ullname)i(quoting)38 b(.)33 b(.)f(.)h(.)f(.)h(.)f
(.)h(.)f(.)h(.)f(.)g(.)h(.)f(.)h(.)f(.)h(.)f(.)h(.)f(.)h(.)f(.)g(.)h(.)
f(.)h(.)f(.)h(.)f(.)h(.)57 b(68)p eop
%%Trailer
end
userdict /end-hook known{end-hook}if
%%EOF
